Starting Klippy...
Args: ['/home/klipper/klipper/klippy/klippy.py', '/home/klipper/printer_data/config/printer.cfg', '-I', '/home/klipper/printer_data/comms/klippy.serial', '-l', '/home/klipper/printer_data/logs/klippy.log', '-a', '/home/klipper/printer_data/comms/klippy.sock']
Git version: 'v0.12.0-404-g80d185c94'
Branch: master
Remote: origin
Tracked URL: https://github.com/Klipper3d/klipper
CPU: 4 core ?
Python: '3.10.12 (main, Nov  6 2024, 20:22:13) [GCC 11.4.0]'
Building C code module c_helper.so
Start printer at Wed Dec 25 18:54:59 2024 (1735142099.5 12310.5)
===== Config file =====
[mcu]
serial = /dev/serial/by-id/<your-mcu-id>

[virtual_sdcard]
path = /home/klipper/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[printer]
kinematics = none
max_velocity = 1000
max_accel = 1000
=======================
mcu 'mcu': Starting serial connect
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/<your-mcu-id>: [Errno 2] No such file or directory: '/dev/serial/by-id/<your-mcu-id>'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/<your-mcu-id>: [Errno 2] No such file or directory: '/dev/serial/by-id/<your-mcu-id>'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/<your-mcu-id>: [Errno 2] No such file or directory: '/dev/serial/by-id/<your-mcu-id>'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/<your-mcu-id>: [Errno 2] No such file or directory: '/dev/serial/by-id/<your-mcu-id>'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/<your-mcu-id>: [Errno 2] No such file or directory: '/dev/serial/by-id/<your-mcu-id>'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/<your-mcu-id>: [Errno 2] No such file or directory: '/dev/serial/by-id/<your-mcu-id>'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/<your-mcu-id>: [Errno 2] No such file or directory: '/dev/serial/by-id/<your-mcu-id>'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/<your-mcu-id>: [Errno 2] No such file or directory: '/dev/serial/by-id/<your-mcu-id>'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/<your-mcu-id>: [Errno 2] No such file or directory: '/dev/serial/by-id/<your-mcu-id>'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/<your-mcu-id>: [Errno 2] No such file or directory: '/dev/serial/by-id/<your-mcu-id>'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/<your-mcu-id>: [Errno 2] No such file or directory: '/dev/serial/by-id/<your-mcu-id>'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/<your-mcu-id>: [Errno 2] No such file or directory: '/dev/serial/by-id/<your-mcu-id>'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/<your-mcu-id>: [Errno 2] No such file or directory: '/dev/serial/by-id/<your-mcu-id>'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/<your-mcu-id>: [Errno 2] No such file or directory: '/dev/serial/by-id/<your-mcu-id>'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/<your-mcu-id>: [Errno 2] No such file or directory: '/dev/serial/by-id/<your-mcu-id>'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/<your-mcu-id>: [Errno 2] No such file or directory: '/dev/serial/by-id/<your-mcu-id>'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/<your-mcu-id>: [Errno 2] No such file or directory: '/dev/serial/by-id/<your-mcu-id>'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/<your-mcu-id>: [Errno 2] No such file or directory: '/dev/serial/by-id/<your-mcu-id>'
MCU error during connect
Traceback (most recent call last):
  File "/home/klipper/klipper/klippy/mcu.py", line 793, in _mcu_identify
    self._serial.connect_uart(self._serialport, self._baud, rts)
  File "/home/klipper/klipper/klippy/serialhdl.py", line 183, in connect_uart
    self._error("Unable to connect")
  File "/home/klipper/klipper/klippy/serialhdl.py", line 61, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'mcu': Unable to connect

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/klipper/klipper/klippy/klippy.py", line 131, in _connect
    self.send_event("klippy:mcu_identify")
  File "/home/klipper/klipper/klippy/klippy.py", line 223, in send_event
    return [cb(*params) for cb in self.event_handlers.get(event, [])]
  File "/home/klipper/klipper/klippy/klippy.py", line 223, in <listcomp>
    return [cb(*params) for cb in self.event_handlers.get(event, [])]
  File "/home/klipper/klipper/klippy/mcu.py", line 798, in _mcu_identify
    raise error(str(e))
mcu.error: mcu 'mcu': Unable to connect
mcu 'mcu': Unable to connect
Once the underlying issue is corrected, use the
"FIRMWARE_RESTART" command to reset the firmware, reload the
config, and restart the host software.
Error configuring printer

No build file /home/klipper/klipper/klippy/../.config
No build file /home/klipper/klipper/klippy/../out/klipper.dict
No build file /home/klipper/klipper/klippy/../out/klipper.elf
webhooks client 281473396322368: New connection
webhooks client 281473396322368: Client info {'program': 'Moonraker', 'version': 'v0.9.3-4-ga4604e3'}
webhooks client 281473396322368: Disconnected
Starting Klippy...
Args: ['/home/klipper/klipper/klippy/klippy.py', '/home/klipper/printer_data/config/printer.cfg', '-I', '/home/klipper/printer_data/comms/klippy.serial', '-l', '/home/klipper/printer_data/logs/klippy.log', '-a', '/home/klipper/printer_data/comms/klippy.sock']
Git version: 'v0.12.0-404-g80d185c94'
Branch: master
Remote: origin
Tracked URL: https://github.com/Klipper3d/klipper
CPU: 4 core ?
Python: '3.10.12 (main, Nov  6 2024, 20:22:13) [GCC 11.4.0]'
Start printer at Wed Dec 25 18:58:23 2024 (1735142303.9 12514.9)
===== Config file =====
[virtual_sdcard]
path = /home/klipper/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[pause_resume]

[display_status]

[respond]

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = CANCEL_PRINT_BASE
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set allow_park = client.park_at_cancel|default(false)|lower == 'true' %}
	{% set retract = client.cancel_retract|default(5.0)|abs %}
	
	{% set park_x = "" if (client.park_at_cancel_x|default(none) is none)
	else "X=" ~ client.park_at_cancel_x %}
	{% set park_y = "" if (client.park_at_cancel_y|default(none) is none)
	else "Y=" ~ client.park_at_cancel_y %}
	{% set custom_park = park_x|length > 0 or park_y|length > 0 %}
	
	
	{% if printer['gcode_macro RESUME'].restore_idle_timeout > 0 %}
	SET_IDLE_TIMEOUT TIMEOUT={printer['gcode_macro RESUME'].restore_idle_timeout}
	{% endif %}
	{% if (custom_park or not printer.pause_resume.is_paused) and allow_park %} _TOOLHEAD_PARK_PAUSE_CANCEL {park_x} {park_y} {% endif %}
	_CLIENT_RETRACT LENGTH={retract}
	TURN_OFF_HEATERS
	M106 S0
	{client.user_cancel_macro|default("")}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=idle_state VALUE=False
	
	SET_PAUSE_NEXT_LAYER ENABLE=0
	SET_PAUSE_AT_LAYER ENABLE=0 LAYER=0
	CANCEL_PRINT_BASE

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = PAUSE_BASE
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set idle_timeout = client.idle_timeout|default(0) %}
	{% set temp = printer[printer.toolhead.extruder].target if printer.toolhead.extruder != '' else 0 %}
	{% set restore = False if printer.toolhead.extruder == ''
	else True  if params.RESTORE|default(1)|int == 1 else False %}
	
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=last_extruder_temp VALUE="{{'restore': restore, 'temp': temp}}"
	
	{% if idle_timeout > 0 %}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=restore_idle_timeout VALUE={printer.configfile.settings.idle_timeout.timeout}
	SET_IDLE_TIMEOUT TIMEOUT={idle_timeout}
	{% endif %}
	PAUSE_BASE
	{client.user_pause_macro|default("")}
	_TOOLHEAD_PARK_PAUSE_CANCEL {rawparams}

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set sp_move = client.speed_move|default(velocity) %}
	{% set runout_resume = True if client.runout_sensor|default("") == ""
	else True if not printer[client.runout_sensor].enabled
	else printer[client.runout_sensor].filament_detected %}
	{% set can_extrude = True if printer.toolhead.extruder == ''
	else printer[printer.toolhead.extruder].can_extrude %}
	{% set do_resume = False %}
	{% set prompt_txt = [] %}
	
	
	{% if printer.idle_timeout.state|upper == "IDLE" or idle_state %}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=idle_state VALUE=False
	{% if last_extruder_temp.restore %}
	
	RESPOND TYPE=echo MSG='{"Restoring \"%s\" temperature to %3.1f\u00B0C, this may take some time" % (printer.toolhead.extruder, last_extruder_temp.temp) }'
	M109 S{last_extruder_temp.temp}
	{% set do_resume = True %}
	{% elif can_extrude %}
	{% set do_resume = True %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder}'
	{% set _d = prompt_txt.append("\"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder) %}
	{% endif %}
	
	{% elif can_extrude %}
	{% set do_resume = True %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder}'
	{% set _d = prompt_txt.append("\"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder) %}
	{% endif %}
	{% if runout_resume %}
	{% if do_resume %}
	{% if restore_idle_timeout > 0 %} SET_IDLE_TIMEOUT TIMEOUT={restore_idle_timeout} {% endif %}
	{client.user_resume_macro|default("")}
	_CLIENT_EXTRUDE
	RESUME_BASE VELOCITY={params.VELOCITY|default(sp_move)}
	{% endif %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" detects no filament, please load filament and press RESUME" % (client.runout_sensor.split(" "))[1]}'
	{% set _d = prompt_txt.append("\"%s\" detects no filament, please load filament and press RESUME" % (client.runout_sensor.split(" "))[1]) %}
	{% endif %}
	
	{% if not (runout_resume and do_resume) %}
	RESPOND TYPE=command MSG="action:prompt_begin RESUME aborted !!!"
	{% for element in prompt_txt %}
	RESPOND TYPE=command MSG='{"action:prompt_text %s" % element}'
	{% endfor %}
	RESPOND TYPE=command MSG="action:prompt_footer_button Ok|RESPOND TYPE=command MSG=action:prompt_end|info"
	RESPOND TYPE=command MSG="action:prompt_show"
	{% endif %}

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[gcode_macro _CLIENT_LINEAR_MOVE]
description = Linear move with save and restore of the gcode state
gcode = 
	{% set x_move = "X" ~ params.X if params.X is defined else "" %}
	{% set y_move = "Y" ~ params.Y if params.Y is defined else "" %}
	{% set z_move = "Z" ~ params.Z if params.Z is defined else "" %}
	{% set e_move = "E" ~ params.E if params.E is defined else "" %}
	{% set rate = "F" ~ params.F if params.F is defined else "" %}
	{% set ABSOLUTE = params.ABSOLUTE | default(0) | int != 0 %}
	{% set ABSOLUTE_E = params.ABSOLUTE_E | default(0) | int != 0 %}
	SAVE_GCODE_STATE NAME=_client_movement
	{% if x_move or y_move or z_move %}
	G9{ 0 if ABSOLUTE else 1 }
	{% endif %}
	{% if e_move %}
	M8{ 2 if ABSOLUTE_E else 3 }
	{% endif %}
	G1 { x_move } { y_move } { z_move } { e_move } { rate }
	RESTORE_GCODE_STATE NAME=_client_movement

[mcu]
serial = /dev/serial/by-id/<your-mcu-id>

[printer]
kinematics = none
max_velocity = 1000
max_accel = 1000
=======================
mcu 'mcu': Starting serial connect
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/<your-mcu-id>: [Errno 2] No such file or directory: '/dev/serial/by-id/<your-mcu-id>'
webhooks client 281473211330288: New connection
webhooks client 281473211330288: Client info {'program': 'Moonraker', 'version': 'v0.9.3-4-ga4604e3'}
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/<your-mcu-id>: [Errno 2] No such file or directory: '/dev/serial/by-id/<your-mcu-id>'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/<your-mcu-id>: [Errno 2] No such file or directory: '/dev/serial/by-id/<your-mcu-id>'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/<your-mcu-id>: [Errno 2] No such file or directory: '/dev/serial/by-id/<your-mcu-id>'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/<your-mcu-id>: [Errno 2] No such file or directory: '/dev/serial/by-id/<your-mcu-id>'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/<your-mcu-id>: [Errno 2] No such file or directory: '/dev/serial/by-id/<your-mcu-id>'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/<your-mcu-id>: [Errno 2] No such file or directory: '/dev/serial/by-id/<your-mcu-id>'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/<your-mcu-id>: [Errno 2] No such file or directory: '/dev/serial/by-id/<your-mcu-id>'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/<your-mcu-id>: [Errno 2] No such file or directory: '/dev/serial/by-id/<your-mcu-id>'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/<your-mcu-id>: [Errno 2] No such file or directory: '/dev/serial/by-id/<your-mcu-id>'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/<your-mcu-id>: [Errno 2] No such file or directory: '/dev/serial/by-id/<your-mcu-id>'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/<your-mcu-id>: [Errno 2] No such file or directory: '/dev/serial/by-id/<your-mcu-id>'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/<your-mcu-id>: [Errno 2] No such file or directory: '/dev/serial/by-id/<your-mcu-id>'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/<your-mcu-id>: [Errno 2] No such file or directory: '/dev/serial/by-id/<your-mcu-id>'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/<your-mcu-id>: [Errno 2] No such file or directory: '/dev/serial/by-id/<your-mcu-id>'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/<your-mcu-id>: [Errno 2] No such file or directory: '/dev/serial/by-id/<your-mcu-id>'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/<your-mcu-id>: [Errno 2] No such file or directory: '/dev/serial/by-id/<your-mcu-id>'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/<your-mcu-id>: [Errno 2] No such file or directory: '/dev/serial/by-id/<your-mcu-id>'
MCU error during connect
Traceback (most recent call last):
  File "/home/klipper/klipper/klippy/mcu.py", line 793, in _mcu_identify
    self._serial.connect_uart(self._serialport, self._baud, rts)
  File "/home/klipper/klipper/klippy/serialhdl.py", line 183, in connect_uart
    self._error("Unable to connect")
  File "/home/klipper/klipper/klippy/serialhdl.py", line 61, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'mcu': Unable to connect

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/klipper/klipper/klippy/klippy.py", line 131, in _connect
    self.send_event("klippy:mcu_identify")
  File "/home/klipper/klipper/klippy/klippy.py", line 223, in send_event
    return [cb(*params) for cb in self.event_handlers.get(event, [])]
  File "/home/klipper/klipper/klippy/klippy.py", line 223, in <listcomp>
    return [cb(*params) for cb in self.event_handlers.get(event, [])]
  File "/home/klipper/klipper/klippy/mcu.py", line 798, in _mcu_identify
    raise error(str(e))
mcu.error: mcu 'mcu': Unable to connect
mcu 'mcu': Unable to connect
Once the underlying issue is corrected, use the
"FIRMWARE_RESTART" command to reset the firmware, reload the
config, and restart the host software.
Error configuring printer

No build file /home/klipper/klipper/klippy/../.config
No build file /home/klipper/klipper/klippy/../out/klipper.dict
No build file /home/klipper/klipper/klippy/../out/klipper.elf
Starting Klippy...
Args: ['/home/klipper/klipper/klippy/klippy.py', '/home/klipper/printer_data/config/printer.cfg', '-I', '/home/klipper/printer_data/comms/klippy.serial', '-l', '/home/klipper/printer_data/logs/klippy.log', '-a', '/home/klipper/printer_data/comms/klippy.sock']
Git version: 'v0.12.0-404-g80d185c94-dirty'
Untracked files: klippy/extras/gcode_shell_command.py
Branch: master
Remote: origin
Tracked URL: https://github.com/Klipper3d/klipper
CPU: 4 core ?
Python: '3.10.12 (main, Nov  6 2024, 20:22:13) [GCC 11.4.0]'
Start printer at Wed Dec 25 19:07:37 2024 (1735142857.1 13068.1)
===== Config file =====
[virtual_sdcard]
path = /home/klipper/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[pause_resume]

[display_status]

[respond]

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = CANCEL_PRINT_BASE
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set allow_park = client.park_at_cancel|default(false)|lower == 'true' %}
	{% set retract = client.cancel_retract|default(5.0)|abs %}
	
	{% set park_x = "" if (client.park_at_cancel_x|default(none) is none)
	else "X=" ~ client.park_at_cancel_x %}
	{% set park_y = "" if (client.park_at_cancel_y|default(none) is none)
	else "Y=" ~ client.park_at_cancel_y %}
	{% set custom_park = park_x|length > 0 or park_y|length > 0 %}
	
	
	{% if printer['gcode_macro RESUME'].restore_idle_timeout > 0 %}
	SET_IDLE_TIMEOUT TIMEOUT={printer['gcode_macro RESUME'].restore_idle_timeout}
	{% endif %}
	{% if (custom_park or not printer.pause_resume.is_paused) and allow_park %} _TOOLHEAD_PARK_PAUSE_CANCEL {park_x} {park_y} {% endif %}
	_CLIENT_RETRACT LENGTH={retract}
	TURN_OFF_HEATERS
	M106 S0
	{client.user_cancel_macro|default("")}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=idle_state VALUE=False
	
	SET_PAUSE_NEXT_LAYER ENABLE=0
	SET_PAUSE_AT_LAYER ENABLE=0 LAYER=0
	CANCEL_PRINT_BASE

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = PAUSE_BASE
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set idle_timeout = client.idle_timeout|default(0) %}
	{% set temp = printer[printer.toolhead.extruder].target if printer.toolhead.extruder != '' else 0 %}
	{% set restore = False if printer.toolhead.extruder == ''
	else True  if params.RESTORE|default(1)|int == 1 else False %}
	
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=last_extruder_temp VALUE="{{'restore': restore, 'temp': temp}}"
	
	{% if idle_timeout > 0 %}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=restore_idle_timeout VALUE={printer.configfile.settings.idle_timeout.timeout}
	SET_IDLE_TIMEOUT TIMEOUT={idle_timeout}
	{% endif %}
	PAUSE_BASE
	{client.user_pause_macro|default("")}
	_TOOLHEAD_PARK_PAUSE_CANCEL {rawparams}

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set sp_move = client.speed_move|default(velocity) %}
	{% set runout_resume = True if client.runout_sensor|default("") == ""
	else True if not printer[client.runout_sensor].enabled
	else printer[client.runout_sensor].filament_detected %}
	{% set can_extrude = True if printer.toolhead.extruder == ''
	else printer[printer.toolhead.extruder].can_extrude %}
	{% set do_resume = False %}
	{% set prompt_txt = [] %}
	
	
	{% if printer.idle_timeout.state|upper == "IDLE" or idle_state %}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=idle_state VALUE=False
	{% if last_extruder_temp.restore %}
	
	RESPOND TYPE=echo MSG='{"Restoring \"%s\" temperature to %3.1f\u00B0C, this may take some time" % (printer.toolhead.extruder, last_extruder_temp.temp) }'
	M109 S{last_extruder_temp.temp}
	{% set do_resume = True %}
	{% elif can_extrude %}
	{% set do_resume = True %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder}'
	{% set _d = prompt_txt.append("\"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder) %}
	{% endif %}
	
	{% elif can_extrude %}
	{% set do_resume = True %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder}'
	{% set _d = prompt_txt.append("\"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder) %}
	{% endif %}
	{% if runout_resume %}
	{% if do_resume %}
	{% if restore_idle_timeout > 0 %} SET_IDLE_TIMEOUT TIMEOUT={restore_idle_timeout} {% endif %}
	{client.user_resume_macro|default("")}
	_CLIENT_EXTRUDE
	RESUME_BASE VELOCITY={params.VELOCITY|default(sp_move)}
	{% endif %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" detects no filament, please load filament and press RESUME" % (client.runout_sensor.split(" "))[1]}'
	{% set _d = prompt_txt.append("\"%s\" detects no filament, please load filament and press RESUME" % (client.runout_sensor.split(" "))[1]) %}
	{% endif %}
	
	{% if not (runout_resume and do_resume) %}
	RESPOND TYPE=command MSG="action:prompt_begin RESUME aborted !!!"
	{% for element in prompt_txt %}
	RESPOND TYPE=command MSG='{"action:prompt_text %s" % element}'
	{% endfor %}
	RESPOND TYPE=command MSG="action:prompt_footer_button Ok|RESPOND TYPE=command MSG=action:prompt_end|info"
	RESPOND TYPE=command MSG="action:prompt_show"
	{% endif %}

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[gcode_macro _CLIENT_LINEAR_MOVE]
description = Linear move with save and restore of the gcode state
gcode = 
	{% set x_move = "X" ~ params.X if params.X is defined else "" %}
	{% set y_move = "Y" ~ params.Y if params.Y is defined else "" %}
	{% set z_move = "Z" ~ params.Z if params.Z is defined else "" %}
	{% set e_move = "E" ~ params.E if params.E is defined else "" %}
	{% set rate = "F" ~ params.F if params.F is defined else "" %}
	{% set ABSOLUTE = params.ABSOLUTE | default(0) | int != 0 %}
	{% set ABSOLUTE_E = params.ABSOLUTE_E | default(0) | int != 0 %}
	SAVE_GCODE_STATE NAME=_client_movement
	{% if x_move or y_move or z_move %}
	G9{ 0 if ABSOLUTE else 1 }
	{% endif %}
	{% if e_move %}
	M8{ 2 if ABSOLUTE_E else 3 }
	{% endif %}
	G1 { x_move } { y_move } { z_move } { e_move } { rate }
	RESTORE_GCODE_STATE NAME=_client_movement

[mcu]
serial = /dev/serial/by-id/<your-mcu-id>

[printer]
kinematics = none
max_velocity = 1000
max_accel = 1000

[gcode_shell_command hello_world]
command = echo hello world
timeout = 2.
verbose = True

[gcode_macro HELLO_WORLD]
gcode = 
	RUN_SHELL_COMMAND CMD=hello_world
=======================
mcu 'mcu': Starting serial connect
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/<your-mcu-id>: [Errno 2] No such file or directory: '/dev/serial/by-id/<your-mcu-id>'
webhooks client 281473411037744: New connection
webhooks client 281473411037744: Client info {'program': 'Moonraker', 'version': 'v0.9.3-4-ga4604e3'}
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/<your-mcu-id>: [Errno 2] No such file or directory: '/dev/serial/by-id/<your-mcu-id>'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/<your-mcu-id>: [Errno 2] No such file or directory: '/dev/serial/by-id/<your-mcu-id>'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/<your-mcu-id>: [Errno 2] No such file or directory: '/dev/serial/by-id/<your-mcu-id>'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/<your-mcu-id>: [Errno 2] No such file or directory: '/dev/serial/by-id/<your-mcu-id>'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/<your-mcu-id>: [Errno 2] No such file or directory: '/dev/serial/by-id/<your-mcu-id>'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/<your-mcu-id>: [Errno 2] No such file or directory: '/dev/serial/by-id/<your-mcu-id>'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/<your-mcu-id>: [Errno 2] No such file or directory: '/dev/serial/by-id/<your-mcu-id>'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/<your-mcu-id>: [Errno 2] No such file or directory: '/dev/serial/by-id/<your-mcu-id>'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/<your-mcu-id>: [Errno 2] No such file or directory: '/dev/serial/by-id/<your-mcu-id>'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/<your-mcu-id>: [Errno 2] No such file or directory: '/dev/serial/by-id/<your-mcu-id>'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/<your-mcu-id>: [Errno 2] No such file or directory: '/dev/serial/by-id/<your-mcu-id>'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/<your-mcu-id>: [Errno 2] No such file or directory: '/dev/serial/by-id/<your-mcu-id>'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/<your-mcu-id>: [Errno 2] No such file or directory: '/dev/serial/by-id/<your-mcu-id>'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/<your-mcu-id>: [Errno 2] No such file or directory: '/dev/serial/by-id/<your-mcu-id>'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/<your-mcu-id>: [Errno 2] No such file or directory: '/dev/serial/by-id/<your-mcu-id>'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/<your-mcu-id>: [Errno 2] No such file or directory: '/dev/serial/by-id/<your-mcu-id>'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/<your-mcu-id>: [Errno 2] No such file or directory: '/dev/serial/by-id/<your-mcu-id>'
MCU error during connect
Traceback (most recent call last):
  File "/home/klipper/klipper/klippy/mcu.py", line 793, in _mcu_identify
    self._serial.connect_uart(self._serialport, self._baud, rts)
  File "/home/klipper/klipper/klippy/serialhdl.py", line 183, in connect_uart
    self._error("Unable to connect")
  File "/home/klipper/klipper/klippy/serialhdl.py", line 61, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'mcu': Unable to connect

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/klipper/klipper/klippy/klippy.py", line 131, in _connect
    self.send_event("klippy:mcu_identify")
  File "/home/klipper/klipper/klippy/klippy.py", line 223, in send_event
    return [cb(*params) for cb in self.event_handlers.get(event, [])]
  File "/home/klipper/klipper/klippy/klippy.py", line 223, in <listcomp>
    return [cb(*params) for cb in self.event_handlers.get(event, [])]
  File "/home/klipper/klipper/klippy/mcu.py", line 798, in _mcu_identify
    raise error(str(e))
mcu.error: mcu 'mcu': Unable to connect
mcu 'mcu': Unable to connect
Once the underlying issue is corrected, use the
"FIRMWARE_RESTART" command to reset the firmware, reload the
config, and restart the host software.
Error configuring printer

No build file /home/klipper/klipper/klippy/../.config
No build file /home/klipper/klipper/klippy/../out/klipper.dict
No build file /home/klipper/klipper/klippy/../out/klipper.elf
Attempting MCU 'mcu' reset
Unhandled exception during post run
Traceback (most recent call last):
  File "/home/klipper/klippy-env/lib/python3.10/site-packages/serial/serialposix.py", line 265, in open
    self.fd = os.open(self.portstr, os.O_RDWR | os.O_NOCTTY | os.O_NONBLOCK)
FileNotFoundError: [Errno 2] No such file or directory: '/dev/serial/by-id/<your-mcu-id>'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/klipper/klipper/klippy/klippy.py", line 193, in run
    self.send_event("klippy:firmware_restart")
  File "/home/klipper/klipper/klippy/klippy.py", line 223, in send_event
    return [cb(*params) for cb in self.event_handlers.get(event, [])]
  File "/home/klipper/klipper/klippy/klippy.py", line 223, in <listcomp>
    return [cb(*params) for cb in self.event_handlers.get(event, [])]
  File "/home/klipper/klipper/klippy/mcu.py", line 956, in _firmware_restart
    self._restart_arduino()
  File "/home/klipper/klipper/klippy/mcu.py", line 916, in _restart_arduino
    serialhdl.arduino_reset(self._serialport, self._reactor)
  File "/home/klipper/klipper/klippy/serialhdl.py", line 380, in arduino_reset
    ser = serial.Serial(serialport, 2400, timeout=0, exclusive=True)
  File "/home/klipper/klippy-env/lib/python3.10/site-packages/serial/serialutil.py", line 240, in __init__
    self.open()
  File "/home/klipper/klippy-env/lib/python3.10/site-packages/serial/serialposix.py", line 268, in open
    raise SerialException(msg.errno, "could not open port {}: {}".format(self._port, msg))
serial.serialutil.SerialException: [Errno 2] could not open port /dev/serial/by-id/<your-mcu-id>: [Errno 2] No such file or directory: '/dev/serial/by-id/<your-mcu-id>'
Restarting printer
Start printer at Wed Dec 25 19:45:35 2024 (1735145135.2 15346.2)
===== Config file =====
[virtual_sdcard]
path = /home/klipper/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[pause_resume]

[display_status]

[respond]

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = BASE_CANCEL_PRINT
gcode = 
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	TURN_OFF_HEATERS
	M107
	G91
	G1 E-{E} F1500
	G90
	CLEAR_PAUSE
	SDCARD_RESET_FILE
	BASE_CANCEL_PRINT
	PARK

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = BASE_PAUSE
gcode = 
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	SAVE_GCODE_STATE NAME=PAUSE_STATE
	BASE_PAUSE
	G91
	G1 E-{E} F1500
	G90
	PARK

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = BASE_RESUME
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	G91
	G1 E{E} F1500
	G90
	RESTORE_GCODE_STATE NAME=PAUSE_STATE MOVE=1
	BASE_RESUME

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[gcode_macro _CLIENT_LINEAR_MOVE]
description = Linear move with save and restore of the gcode state
gcode = 
	{% set x_move = "X" ~ params.X if params.X is defined else "" %}
	{% set y_move = "Y" ~ params.Y if params.Y is defined else "" %}
	{% set z_move = "Z" ~ params.Z if params.Z is defined else "" %}
	{% set e_move = "E" ~ params.E if params.E is defined else "" %}
	{% set rate = "F" ~ params.F if params.F is defined else "" %}
	{% set ABSOLUTE = params.ABSOLUTE | default(0) | int != 0 %}
	{% set ABSOLUTE_E = params.ABSOLUTE_E | default(0) | int != 0 %}
	SAVE_GCODE_STATE NAME=_client_movement
	{% if x_move or y_move or z_move %}
	G9{ 0 if ABSOLUTE else 1 }
	{% endif %}
	{% if e_move %}
	M8{ 2 if ABSOLUTE_E else 3 }
	{% endif %}
	G1 { x_move } { y_move } { z_move } { e_move } { rate }
	RESTORE_GCODE_STATE NAME=_client_movement

[gcode_macro list_sensors]
gcode = 
	{ action_respond_info(printer.heaters.available_heaters | join(', ')) }
	{ action_respond_info(printer.heaters.available_sensors | join(', ')) }

[gcode_macro Power_OFF]
gcode = SET_PIN PIN=Power VALUE=0

[gcode_macro _POWER_OFF_PRINTER]
gcode = SET_PIN PIN=Power VALUE=0

[gcode_macro ACTIVATE_POWER_OFF]
gcode = 
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK_ACT DURATION=60

[gcode_macro DEACTIVATE_POWER_OFF]
gcode = 
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK_ACT DURATION=0

[delayed_gcode POWER_OFF_PRINTER_CHECK_ACT]
gcode = 
	{% if printer.idle_timeout.state == "Idle" or printer.idle_timeout.state == "Ready" %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=30
	{% else %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK_ACT DURATION=60
	{% endif %}

[delayed_gcode POWER_OFF_PRINTER_CHECK]
gcode = 
	{% if printer.idle_timeout.state == "Idle" or printer.idle_timeout.state == "Ready" %}
	{% if printer.extruder.temperature < 50.0 and printer.heater_bed.temperature < 50.0 %}
	{% if printer.extruder.target == 0.0 and printer.heater_bed.target == 0.0 %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=0
	_POWER_OFF_PRINTER
	{% else %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=2
	{% endif %}
	{% else %}
	{% if printer.idle_timeout.state == "Printing" %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=0
	{% else %}
	{% if printer.extruder.target == 0.0 and printer.heater_bed.target == 0.0 %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=2
	{% else %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=0
	{% endif %}
	{% endif %}
	{% endif %}
	{% endif %}

[gcode_macro M141]
gcode = SET_HEATER_TEMPERATURE HEATER=chamber_heater TARGET={params.S|default(0)}

[gcode_macro M80]
gcode = SET_PIN PIN=Power  VALUE=1

[gcode_macro M81]
gcode = 
	
	SET_PIN PIN=Power VALUE=0

[gcode_macro M486]
gcode = 
	
	
	
	
	
	
	
	
	
	
	
	{% if 'exclude_object' not in printer %}
	{action_raise_error("[exclude_object] is not enabled")}
	{% endif %}
	
	{% if 'T' in params %}
	EXCLUDE_OBJECT RESET=1
	
	{% for i in range(params.T | int) %}
	EXCLUDE_OBJECT_DEFINE NAME={i}
	{% endfor %}
	{% endif %}
	
	{% if 'C' in params %}
	EXCLUDE_OBJECT CURRENT=1
	{% endif %}
	
	{% if 'P' in params %}
	EXCLUDE_OBJECT NAME={params.P}
	{% endif %}
	
	{% if 'S' in params %}
	{% if params.S == '-1' %}
	{% if printer.exclude_object.current_object %}
	EXCLUDE_OBJECT_END NAME={printer.exclude_object.current_object}
	{% endif %}
	{% else %}
	EXCLUDE_OBJECT_START NAME={params.S}
	{% endif %}
	{% endif %}
	
	{% if 'U' in params %}
	EXCLUDE_OBJECT RESET=1 NAME={params.U}
	{% endif %}

[gcode_macro M190]
rename_existing = M190.1
gcode = 
	{% if printer["gcode_macro status_heating"] != null %}
	status_heating
	{% endif %}
	M190.1 { rawparams }
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro _CHOME]
gcode = 
	{% if printer["gcode_macro status_homing"] != null %}
	status_homing
	{% endif %}
	{% if printer.toolhead.homed_axes != "xyz" %}
	G28
	{% endif %}
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro M109]
rename_existing = M109.1
gcode = 
	{% if printer["gcode_macro status_heating"] != null %}
	status_heating
	{% endif %}
	M109.1 { rawparams }
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro _MOVE_AWAY]
gcode = 
	{% set th = printer.toolhead %}
	{% set x_safe = th.position.x + 20 * (1 if th.axis_maximum.x - th.position.x > 20 else -1) %}
	{% set y_safe = th.position.y + 20 * (1 if th.axis_maximum.y - th.position.y > 20 else -1) %}
	{% set z_safe = [th.position.z + 2, th.axis_maximum.z]|min %}
	
	G90
	G0 X{x_safe} Y{y_safe} Z{z_safe} F20000

[gcode_macro PARK_CENTER_REAR]
gcode = 
	{% if printer["gcode_macro status_busy"] != null %}
	status_busy
	{% endif %}
	{% set th = printer.toolhead %}
	{% set x_safe = th.position.x + 20 * (1 if th.axis_maximum.x - th.position.x > 20 else -1) %}
	{% set y_safe = th.position.y + 20 * (1 if th.axis_maximum.y - th.position.y > 20 else -1) %}
	
	G0 X{th.axis_maximum.x//2} Y{th.axis_maximum.y - 2} F3600
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro START_PRINT]
variable_retract = 15
gcode = 
	{% set chamber_temp = params.CHAMBER_TEMP|default(0)|float %}
	{% set extruder_temp = params.EXTRUDER_TEMP|default(210)|float %}
	{% set bed_temp = params.BED_TEMP|default(60)|float %}
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	CLEAR_PAUSE
	G28
	Smart_Park
	M220 S100
	M221 S100
	SET_HEATER_TEMPERATURE HEATER=chamber_heater TARGET={chamber_temp}
	SET_HEATER_TEMPERATURE HEATER=heater_bed TARGET={bed_temp}
	TEMPERATURE_WAIT SENSOR=heater_bed MINIMUM={bed_temp * 0.75}
	SET_HEATER_TEMPERATURE HEATER=extruder TARGET={extruder_temp}
	G90
	M82
	TEMPERATURE_WAIT SENSOR=heater_bed MINIMUM={bed_temp}
	TEMPERATURE_WAIT SENSOR=extruder MINIMUM={extruder_temp}
	
	G1 E-15 F3600
	
	G28
	BED_MESH_CALIBRATE
	PRIME_LINE

[gcode_macro pid_soplo]
gcode = 
	PID_CALIBRATE HEATER=extruder TARGET=250

[gcode_macro pid_bed]
gcode = 
	PID_CALIBRATE HEATER=heater_bed TARGET=105

[gcode_macro BED]
gcode = 
	PROBE_CALIBRATE

[gcode_macro END_PRINT]
gcode = 
	
	{% set max_x = printer.configfile.config["stepper_x"]["position_max"]|float %}
	{% set max_y = printer.configfile.config["stepper_y"]["position_max"]|float %}
	{% set max_z = printer.configfile.config["stepper_z"]["position_max"]|float %}
	
	
	{% if printer.toolhead.position.x < (max_x - 20) %}
	{% set x_safe = 20.0 %}
	{% else %}
	{% set x_safe = -20.0 %}
	{% endif %}
	
	{% if printer.toolhead.position.y < (max_y - 20) %}
	{% set y_safe = 20.0 %}
	{% else %}
	{% set y_safe = -20.0 %}
	{% endif %}
	
	{% if printer.toolhead.position.z < (max_z - 2) %}
	{% set z_safe = 2.0 %}
	{% else %}
	{% set z_safe = max_z - printer.toolhead.position.z %}
	{% endif %}
	
	
	M400
	G92 E0
	G1 E-15 F3600
	G91
	G0 Z{z_safe} F3600
	G0 X{x_safe} Y{y_safe} F20000
	
	
	M104 S0
	M104 S0
	M140 S0
	M106 S0
	G90
	G0 X{max_x / 2} Y{max_y} F3600
	
	SONG_CRAB_RAVE
	
	
	
	M117 Finished!
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=30

[gcode_macro M300]
gcode = 
	
	{% set S = params.S|default(1000)|int %}
	
	{% set P = params.P|default(100)|int %}
	
	
	{% set V = params.V|default(99)|int %}
	SET_PIN PIN=beeper VALUE={0.1 * (V / 100) if S > 0 else 1} CYCLE_TIME={ 1.0 / S if S > 0 else 1 }
	G4 P{P}
	SET_PIN PIN=beeper VALUE=0 CYCLE_TIME={ 0.001 }
description = 
	"Plays a beep sound.
	@param {int} [S=1000] - Frequency in Hz
	@param {int} [P=100] - Duration in ms
	@param {int} [V=99] - Volume in percent"

[gcode_macro PRIME_LINE]
gcode = 
	{% set feedrate = params.F|default(10)|float * 60 %}
	{% set length = 100.0 %}
	{% set width = printer.configfile.settings.extruder.nozzle_diameter|float %}
	{% set height = ( (width / 0.04)|int - (width / 0.04 / 4)|int )|float * 0.04 %}
	
	{% set extrude = length * width * height * 1.5 %}
	SAVE_GCODE_STATE NAME=PRIME_LINE_STATE
	SET_IDLE_TIMEOUT TIMEOUT=7200
	{% if 'Y' in params %}
	{% set x_start = 1.0 %}
	{% set y_start = (printer.toolhead.axis_maximum.y|float - 100) / 2 %}
	G0 X{x_start} Y{y_start} F5000
	G0 Z{height} F1500
	G91
	
	G1 E8 F300
	
	
	G1 Y100 E{extrude} F{feedrate}
	G0 X{width} F5000
	G1 Y-100 E{extrude} F{feedrate}
	{% else %}
	{% set x_start = (printer.toolhead.axis_maximum.x|float - 100) / 2 %}
	{% set y_start = 1.0 %}
	G0 X{x_start} Y{y_start} F5000
	G0 Z{height} F1500
	G91
	
	G1 E8 F300
	
	
	G1 X100 E{extrude} F{feedrate}
	G0 Y{width} F5000
	G1 X-100 E{extrude} F{feedrate}
	{% endif %}
	RESTORE_GCODE_STATE NAME=PRIME_LINE_STATE

[gcode_macro VINT]
gcode = 
	SCREWS_TILT_CALCULATE

[gcode_macro LOW_TEMP_CHECK]
gcode = 
	{% set extruder_temp = params.T|default(240)|float %}
	{% if printer.extruder.target > extruder_temp %}
	{% set extruder_temp = printer.extruder.target %}
	{% endif %}
	{% if printer.extruder.temperature < extruder_temp %}
	M118 Heating to {extruder_temp}
	SET_HEATER_TEMPERATURE HEATER=extruder TARGET={extruder_temp}
	TEMPERATURE_WAIT SENSOR=extruder MINIMUM={extruder_temp}
	{% endif %}

[gcode_macro M76]
gcode = 
	PAUSE

[gcode_macro M601]
gcode = 
	PAUSE

[gcode_macro G27]
gcode = 
	PARK

[gcode_macro M125]
gcode = 
	PARK

[gcode_macro M600]
gcode = 
	PAUSE

[gcode_macro M701]
gcode = 
	FILAMENT_LOAD

[gcode_macro M702]
gcode = 
	FILAMENT_UNLOAD

[gcode_macro M500]
gcode = 
	SAVE_CONFIG

[gcode_macro PARK]
gcode = 
	{% set x_park = params.X|default(0)|float %}
	{% set y_park = params.Y|default(0)|float %}
	{% set z_park = params.Z|default(10)|float + printer.toolhead.position.z|float %}
	{% set x_max = printer.toolhead.axis_maximum.x|float %}
	{% set y_max = printer.toolhead.axis_maximum.y|float %}
	{% set z_max = printer.toolhead.axis_maximum.z|float %}
	{% if x_park > x_max %}
	{% set x_park = x_max %}
	{% endif %}
	{% if y_park > y_max %}
	{% set y_park = y_max %}
	{% endif %}
	{% if z_park > z_max %}
	{% set z_park = z_max %}
	{% endif %}
	SAVE_GCODE_STATE NAME=PARK_STATE
	G90
	G1 Z{z_park} F1500
	G1 X{x_park} Y{y_park} F5000
	RESTORE_GCODE_STATE name=PARK_STATE

[gcode_macro START_DRYER]
description = Start the heated bed filament dryer.
gcode = 
	{% set ChamberTemperature = params.CHAMBER | default(65.0) | float %}
	{% set BedTemperature = params.TEMPERATURE | default(0.0) | float %}
	{% set DryTime = params.TIME | default(14400) | int %}
	M140 S{BedTemperature}
	M141 S{ChamberTemperature}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=time_remaining VALUE={DryTime}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=bed_temperature VALUE={BedTemperature}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=chamber_temperature VALUE={ChamberTemperature}
	UPDATE_DELAYED_GCODE ID=DRYER_TIMER DURATION=1

[gcode_macro STOP_DRYER]
gcode = 
	M140 S0
	M141 S0
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=time_remaining VALUE=0
	UPDATE_DELAYED_GCODE ID=DRYER_TIMER DURATION=0
	M117 Drying Stopped

[gcode_macro DRYER_STATUS]
variable_time_remaining = 0
variable_bed_temperature = 0
variable_chamber_temperature = 0
gcode = 
	{% if time_remaining > 0 %}
	M140 S{bed_temperature}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=time_remaining VALUE={time_remaining - 1}
	M117 Drying {time_remaining}
	{% else %}
	STOP_DRYER
	{% endif %}

[delayed_gcode DRYER_TIMER]
gcode = 
	UPDATE_DELAYED_GCODE ID=DRYER_TIMER DURATION=1
	DRYER_STATUS

[gcode_macro DRY_tpu]
gcode = 
	START_DRYER TEMPERATURE=0 CHAMBER=50 TIME=18000

[gcode_macro DRY_PETG]
gcode = 
	START_DRYER TEMPERATURE=0  CHAMBER=65 TIME=18000

[gcode_macro DRY_ABS]
gcode = 
	{% set S = params.S|default(0.0)|float %}
	SET_PIN PIN=Laser VALUE={S / 255.0}

[gcode_macro M4]
gcode = 
	{% set S = params.S|default(0.0)|float %}
	SET_PIN PIN=Laser VALUE={S / 255.0}

[gcode_macro M5]
gcode = 
	SET_PIN PIN=Laser VALUE=0

[menu __main __control __toolonoff]
type = input
enable = {'pwm_tool Laser' in printer}
name = Fan: {'ON ' if menu.input else 'OFF'}
input = {printer['pwm_tool Laser'].value}
input_min = 0
input_max = 1
input_step = 1
gcode = 
	M3 S{255 if menu.input else 0}

[menu __main __control __toolspeed]
type = input
enable = {'pwm_tool Laser' in printer}
name = Laser speed: {'%3d' % (menu.input*100)}%
input = {printer['pwm_tool Laser'].value}
input_min = 0
input_max = 1
input_step = 0.01
gcode = 
	M3 S{'%d' % (menu.input*255)}

[gcode_macro NOTE]
description = 
	"Plays a specified note for a specified duration
	@param {string} [N=C5] - Note to play
	@param {int} [D=500] - Duration of note. There are currently some Klipper limitations to how short a note can be.
	@param {int} [V=99] - Volume in percent
	@param {bool} [S=true] - Whether or not to stop the note after duration"
gcode = 
	{% set notes = {
	'C0': 16.35,   'CS0': 17.32,   'D0': 18.35,   'DS0': 19.45,   'E0': 20.60,   'F0': 21.83,   'FS0': 23.12,   'G0': 24.50,   'GS0': 25.96,   'A0': 27.50,   'AS0': 29.14,   'B0': 30.87,
	'C1': 32.70,   'CS1': 34.65,   'D1': 36.71,   'DS1': 38.89,   'E1': 41.20,   'F1': 43.65,   'FS1': 46.25,   'G1': 49.00,   'GS1': 51.91,   'A1': 55.00,   'AS1': 58.27,   'B1': 61.74,
	'C2': 65.41,   'CS2': 69.30,   'D2': 73.42,   'DS2': 77.78,   'E2': 82.41,   'F2': 87.31,   'FS2': 92.50,   'G2': 98.00,   'GS2': 103.83,  'A2': 110.00,  'AS2': 116.54,  'B2': 123.47,
	'C3': 130.81,  'CS3': 138.59,  'D3': 146.83,  'DS3': 155.56,  'E3': 164.81,  'F3': 174.61,  'FS3': 185.00,  'G3': 196.00,  'GS3': 207.65,  'A3': 220.00,  'AS3': 233.08,  'B3': 246.94,
	'C4': 261.63,  'CS4': 277.18,  'D4': 293.66,  'DS4': 311.13,  'E4': 329.63,  'F4': 349.23,  'FS4': 369.99,  'G4': 392.00,  'GS4': 415.30,  'A4': 440.00,  'AS4': 466.16,  'B4': 493.88,
	'C5': 523.25,  'CS5': 554.37,  'D5': 587.33,  'DS5': 622.25,  'E5': 659.26,  'F5': 698.46,  'FS5': 739.99,  'G5': 783.99,  'GS5': 830.61,  'A5': 880.00,  'AS5': 932.33,  'B5': 987.77,
	'C6': 1046.50, 'CS6': 1108.73, 'D6': 1174.66, 'DS6': 1244.51, 'E6': 1318.51, 'F6': 1396.91, 'FS6': 1479.98, 'G6': 1567.98, 'GS6': 1661.22, 'A6': 1760.00, 'AS6': 1864.66, 'B6': 1975.53,
	'C7': 2093.00, 'CS7': 2217.46, 'D7': 2349.32, 'DS7': 2489.02, 'E7': 2637.02, 'F7': 2793.83, 'FS7': 2959.96, 'G7': 3135.96, 'GS7': 3322.44, 'A7': 3520.00, 'AS7': 3729.31, 'B7': 3951.07,
	'C8': 4186.01, 'CS8': 4434.92, 'D8': 4698.64, 'DS8': 4978.03, 'E8': 5274.04, 'F8': 5587.65, 'FS8': 5919.91, 'G8': 6271.93, 'GS8': 6644.88, 'A8': 7040.00, 'AS8': 7458.62, 'B8': 7902.13,
	} %}
	
	{% set note = params.N|default('C5')|string %}
	
	{% set dur = params.D|default(500)|int %}
	
	
	{% set volume = params.V|default(99)|int %}
	
	{% set stop = params.S|default('true')|string %}
	
	{% set freq = notes[note] %}
	
	SET_PIN PIN=beeper VALUE={0.1 * (volume / 100) if volume > 0 else 1} CYCLE_TIME={ 1.0 / freq }
	G4 P{dur}
	{% if stop|lower == 'true' %}
	SET_PIN PIN=beeper VALUE=0 CYCLE_TIME={ 0.001 }
	{% endif %}

[gcode_macro TONE_GEN]
description = "Used for the tone generator menu"
variable_tone_freq = 0.001093
gcode = 
	M117 {printer["gcode_macro TONE_GEN"].tone_freq}nothz

[gcode_macro SONG_STAR_WARS_MAIN_THEME]
description = "Plays the Star Wars main theme"
gcode = 
	NOTE N=D4 D=133
	NOTE N=D4 D=133
	NOTE N=D4 D=133
	NOTE N=G4 D=1000
	NOTE N=D5 D=1000
	
	NOTE N=C5 D=133
	NOTE N=B4 D=133
	NOTE N=A4 D=133
	NOTE N=G5 D=1000
	NOTE N=D5 D=500
	
	NOTE N=C5 D=133
	NOTE N=B4 D=133
	NOTE N=A4 D=133
	NOTE N=G5 D=1000
	NOTE N=D5 D=500
	
	NOTE N=C5 D=133
	NOTE N=B4 D=133
	NOTE N=C5 D=133
	NOTE N=A4 D=1000

[gcode_macro SONG_CRAB_RAVE]
description = "Plays Crab Rave"
gcode = 
	NOTE N=D6 D=150 V=30 S=1
	NOTE N=AS6 D=150 V=30 S=1
	NOTE N=G6 D=150 V=30 S=1
	NOTE N=G6 D=150 V=30 S=0
	NOTE N=D6 D=150 V=30 S=1
	NOTE N=D6 D=150 V=30 S=0
	NOTE N=A6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=0
	NOTE N=D6 D=150 V=30 S=1
	NOTE N=D6 D=150 V=30 S=0
	NOTE N=A6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=0
	NOTE N=C6 D=150 V=30 S=1
	NOTE N=C6 D=150 V=30 S=1
	NOTE N=E6 D=150 V=30 S=1
	NOTE N=E6 D=150 V=30 S=0
	NOTE N=F6 D=150 V=30 S=1
	SET_PIN PIN=beeper VALUE=0

[gcode_macro one]
description = "one"
gcode = 
	NOTE N=C6 D=600 V=30 S=1
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=G5 D=400 V=30 S=1
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=E6 D=400 V=30 S=1
	G4 P150
	NOTE N=G6 D=180 V=30 S=0
	NOTE N=F6 D=180 V=30 S=0
	NOTE N=E6 D=180 V=30 S=0
	NOTE N=D6 D=180 V=30 S=1
	NOTE N=C6 D=600 V=30 S=1
	
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=G5 D=400 V=30 S=1
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=C6 D=600 V=30 S=1
	SET_PIN PIN=beeper VALUE=0

[gcode_macro SONG_BOOMER]
description = "BOOMER"
gcode = 
	M300 P207 S659
	M300 P207 S784
	M300 P207 S494
	M300 P207 S494
	M300 P207 S392
	M300 P207 S494
	M300 P207 S494
	M300 P207 S330
	M300 P207 S784
	M300 P207 S659
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S988
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S659
	M300 P207 S784
	M300 P207 S494
	M300 P207 S494
	M300 P207 S392
	M300 P207 S494
	M300 P207 S494
	M300 P207 S330
	M300 P207 S784
	M300 P207 S659
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S988
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S659
	M300 P207 S784
	M300 P207 S494
	M300 P207 S494
	M300 P207 S392
	M300 P207 S494
	M300 P207 S494
	M300 P207 S330
	M300 P207 S784
	M300 P207 S659
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S988
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330

[gcode_macro GET_TIMELAPSE_SETUP]
description = Print the Timelapse setup
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% set output_txt = ["Timelapse Setup:"] %}
	{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}
	{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}
	{% if tl.park.enable %}
	{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}
	{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}
	{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}
	{% endif %}
	{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}
	{% if not tl.extruder.fw_retract %}
	{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}
	{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}
	{% endif %}
	{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}
	{action_respond_info(output_txt|join("\n"))}

[gcode_macro _SET_TIMELAPSE_SETUP]
description = Set user parameters for timelapse
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	
	{% set min = printer.toolhead.axis_minimum %}
	{% set max = printer.toolhead.axis_maximum %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	{% set park = {'min'   : {'x': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),
	'y': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},
	'max'   : {'x': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),
	'y': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},
	'center': {'x': (max.x-(max.x-min.x)/2)|round(3),
	'y': (max.y-(max.y-min.y)/2)|round(3)}} %}
	
	{% if params.ENABLE %}
	{% if params.ENABLE|lower is in ['true', 'false'] %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == 'true' else False}
	{% else %}
	{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.VERBOSE %}
	{% if params.VERBOSE|lower is in ['true', 'false'] %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == 'true' else False}
	{% else %}
	{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_X %}
	{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}
	{% set _dummy = tl.park.custom.update({'x':params.CUSTOM_POS_X|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_Y %}
	{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}
	{% set _dummy = tl.park.custom.update({'y':params.CUSTOM_POS_Y|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_DZ %}
	{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}
	{% set _dummy = tl.park.custom.update({'dz':params.CUSTOM_POS_DZ|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}
	{% endif %}
	{% endif %}
	{% if params.PARK_ENABLE %}
	{% if params.PARK_ENABLE|lower is in ['true', 'false'] %}
	{% set _dummy = tl.park.update({'enable':True if params.PARK_ENABLE|lower == 'true' else False}) %}
	{% else %}
	{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.PARK_POS %}
	{% if params.PARK_POS|lower is in ['center','front_left','front_right','back_left','back_right','custom','x_only','y_only'] %}
	{% set dic = {'center'      : {'x': park.center.x   , 'y': park.center.y   , 'dz': 1                },
	'front_left'  : {'x': park.min.x      , 'y': park.min.y      , 'dz': 0                },
	'front_right' : {'x': park.max.x      , 'y': park.min.y      , 'dz': 0                },
	'back_left'   : {'x': park.min.x      , 'y': park.max.y      , 'dz': 0                },
	'back_right'  : {'x': park.max.x      , 'y': park.max.y      , 'dz': 0                },
	'custom'      : {'x': tl.park.custom.x, 'y': tl.park.custom.y, 'dz': tl.park.custom.dz},
	'x_only'      : {'x': tl.park.custom.x, 'y': 'none'          , 'dz': tl.park.custom.dz},
	'y_only'      : {'x': 'none'          , 'y': tl.park.custom.y, 'dz': tl.park.custom.dz}} %}
	{% set _dummy = tl.park.update({'pos':params.PARK_POS|lower}) %}
	{% set _dummy = tl.park.update({'coord':dic[tl.park.pos]}) %}
	{% else %}
	{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"
	% params.PARK_POS|upper)}
	{% endif %}
	{% endif %}
	{% if params.PARK_TIME %}
	{% if params.PARK_TIME|float >= 0.0 %}
	{% set _dummy = tl.park.update({'time':params.PARK_TIME|float|round(3)}) %}
	{% else %}
	{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"
	{% if params.TRAVEL_SPEED %}
	{% if params.TRAVEL_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'travel':params.TRAVEL_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}
	{% endif %}
	{% endif %}
	{% if params.RETRACT_SPEED %}
	{% if params.RETRACT_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'retract':params.RETRACT_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}
	{% endif %}
	{% endif %}
	{% if params.EXTRUDE_SPEED %}
	{% if params.EXTRUDE_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'extrude':params.EXTRUDE_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"
	{% if params.EXTRUDE_DISTANCE %}
	{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}
	{% set _dummy = tl.extruder.update({'extrude':params.EXTRUDE_DISTANCE|float|round(3)}) %}
	{% else %}
	{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}
	{% endif %}
	{% endif %}
	{% if params.RETRACT_DISTANCE %}
	{% if params.RETRACT_DISTANCE|float >= 0.0 %}
	{% set _dummy = tl.extruder.update({'retract':params.RETRACT_DISTANCE|float|round(3)}) %}
	{% else %}
	{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}
	{% endif %}
	{% endif %}
	{% if params.FW_RETRACT %}
	{% if params.FW_RETRACT|lower is in ['true', 'false'] %}
	{% if 'firmware_retraction' in printer.configfile.settings %}
	{% set _dummy = tl.extruder.update({'fw_retract': True if params.FW_RETRACT|lower == 'true' else False}) %}
	{% else %}
	{% set _dummy = tl.extruder.update({'fw_retract':False}) %}
	{% if params.FW_RETRACT|capitalize == 'True' %}
	{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}
	{% endif %}
	{% endif %}
	{% else %}
	{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"
	{% if printer.configfile.settings['gcode_macro pause'] is defined %}
	{% set _dummy = tl.macro.update({'pause': printer.configfile.settings['gcode_macro pause'].rename_existing}) %}
	{% endif %}
	{% if printer.configfile.settings['gcode_macro resume'] is defined %}
	{% set _dummy = tl.macro.update({'resume': printer.configfile.settings['gcode_macro resume'].rename_existing}) %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"

[gcode_macro TIMELAPSE_TAKE_FRAME]
description = Take Timelapse shoot
variable_enable = False
variable_takingframe = False
variable_park = {'enable': False,
	'pos'   : 'center',
	'time'  : 0.1,
	'custom': {'x': 0, 'y': 0, 'dz': 0},
	'coord' : {'x': 0, 'y': 0, 'dz': 0}}
variable_extruder = {'fw_retract': False,
	'retract': 1.0,
	'extrude': 1.0}
variable_speed = {'travel': 100,
	'retract': 15,
	'extrude': 15}
variable_verbose = True
variable_restore = {'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}
variable_macro = {'pause': 'PAUSE', 'resume': 'RESUME'}
variable_is_paused = False
gcode = 
	{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower =='true' else False %}
	{% if enable %}
	{% if (hyperlapse and printer['gcode_macro HYPERLAPSE'].run) or
	(not hyperlapse and not printer['gcode_macro HYPERLAPSE'].run) %}
	{% if park.enable %}
	{% set pos = {'x': 'X' + park.coord.x|string if park.pos != 'y_only' else '',
	'y': 'Y' + park.coord.y|string if park.pos != 'x_only' else '',
	'z': 'Z'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}
	{% set restore = {'absolute': {'coordinates': printer.gcode_move.absolute_coordinates,
	'extrude'    : printer.gcode_move.absolute_extrude},
	'speed'   : printer.gcode_move.speed,
	'e'       : printer.gcode_move.gcode_position.e,
	'factor'  : {'speed'  : printer.gcode_move.speed_factor,
	'extrude': printer.gcode_move.extrude_factor}} %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"
	{% if not printer[printer.toolhead.extruder].can_extrude %}
	{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}
	{% else %}
	{% if extruder.fw_retract %}
	G10
	{% else %}
	M83
	G0 E-{extruder.retract} F{speed.retract * 60}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True
	{macro.pause}
	SET_GCODE_OFFSET X=0 Y=0
	G90
	{% if "xyz" not in printer.toolhead.homed_axes %}
	{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}
	{% else %}
	G0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5
	M400
	{% endif %}
	_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}
	{% endif %}
	{% else %}
	{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}
	{% endif %}

[gcode_macro _TIMELAPSE_NEW_FRAME]
description = action call for timelapse shoot. must be a seperate macro
gcode = 
	{action_call_remote_method("timelapse_newframe",
	macropark=printer['gcode_macro TIMELAPSE_TAKE_FRAME'].park,
	hyperlapse=params.HYPERLAPSE)}

[delayed_gcode _WAIT_TIMELAPSE_TAKE_FRAME]
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% set factor = {'speed': printer.gcode_move.speed_factor, 'extrude': printer.gcode_move.extrude_factor} %}
	{% if tl.takingframe %}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5
	{% else %}
	{tl.macro.resume} VELOCITY={tl.speed.travel}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False
	{% if not printer[printer.toolhead.extruder].can_extrude %}
	{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}
	{% else %}
	{% if tl.extruder.fw_retract %}
	G11
	{% else %}
	G0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}
	G0 F{tl.restore.speed}
	{% if tl.restore.absolute.extrude %}
	M82
	G92 E{tl.restore.e}
	{% endif %}
	{% endif %}
	{% endif %}
	{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}
	{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}
	{% if not tl.restore.absolute.coordinates %} G91 {% endif %}
	{% endif %}

[gcode_macro HYPERLAPSE]
description = Start/Stop a hyperlapse recording
variable_cycle = 0
variable_run = False
gcode = 
	{% set cycle = params.CYCLE|default(30)|int %}
	{% if params.ACTION and params.ACTION|lower == 'start' %}
	{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}
	TIMELAPSE_TAKE_FRAME HYPERLAPSE=True
	{% elif params.ACTION and params.ACTION|lower == 'stop' %}
	{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0
	{% else %}
	{action_raise_error("Hyperlapse: No valid input parameter
	Use:
	- HYPERLAPSE ACTION=START [CYCLE=time]
	- HYPERLAPSE ACTION=STOP")}
	{% endif %}

[delayed_gcode _HYPERLAPSE_LOOP]
gcode = 
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}
	TIMELAPSE_TAKE_FRAME HYPERLAPSE=True

[gcode_macro TIMELAPSE_RENDER]
description = Render Timelapse video and wait for the result
variable_render = False
variable_run_identifier = 0
gcode = 
	{action_respond_info("Timelapse: Rendering started")}
	{action_call_remote_method("timelapse_render", byrendermacro="True")}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True
	{printer.configfile.settings['gcode_macro pause'].rename_existing}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5

[delayed_gcode _WAIT_TIMELAPSE_RENDER]
gcode = 
	{% set ri = printer['gcode_macro TIMELAPSE_RENDER'].run_identifier % 4 %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}
	{% if printer['gcode_macro TIMELAPSE_RENDER'].render %}
	M117 Rendering {['-','\\','|','/'][ri]}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5
	{% else %}
	{action_respond_info("Timelapse: Rendering finished")}
	M117
	{printer.configfile.settings['gcode_macro resume'].rename_existing}
	{% endif %}

[gcode_macro TEST_STREAM_DELAY]
description = Helper macro to find stream and park delay
gcode = 
	{% set min = printer.toolhead.axis_minimum %}
	{% set max = printer.toolhead.axis_maximum %}
	{% set act = printer.toolhead.position %}
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% if act.z > 5.0 %}
	G0 X{min.x + 5.0} F{tl.speed.travel|int * 60}
	G0 X{(max.x-min.x)/2}
	G4 P{tl.park.time|float * 1000}
	_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE
	G0 X{max.x - 5.0}
	{% else %}
	{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}
	{% endif %}

[exclude_object]

[gcode_macro update_git]
gcode = 
	{% set message = params.MESSAGE|default() %}
	{% if message %}
	RUN_SHELL_COMMAND CMD=update_git_script_message PARAMS="'{params.MESSAGE}'"
	{% else %}
	RUN_SHELL_COMMAND CMD=update_git_script
	{% endif %}

[gcode_shell_command update_git_script]
command = bash -c "bash $HOME/klipper-backup/script.sh"
timeout = 90.0
verbose = True

[gcode_shell_command update_git_script_message]
command = bash -c "bash $HOME/klipper-backup/script.sh -c \"$0\""
timeout = 90.0
verbose = True

[mcu]
serial = /dev/ttyS3
restart_method = command

[output_pin Power]
pin = PC12
value = 1
shutdown_value = 1

[temperature_sensor orange_pi]
sensor_type = temperature_host
min_temp = 0
max_temp = 100

[heater_generic chamber_heater]
heater_pin = !PA7
sensor_type = ATC Semitec 104GT-2
sensor_pin = PA5
control = watermark
max_power = 1
min_temp = 15
max_temp = 85

[verify_heater chamber_heater]
max_error = 9999
check_gain_time = 9999
hysteresis = 5
heating_gain = 2

[filament_motion_sensor motion_sensor]
detection_length = 50
extruder = extruder
switch_pin = !PC15
pause_on_runout = True
runout_gcode = 
	SONG_CRAB_RAVE

[bltouch]
sensor_pin = ^PC14
control_pin = PA1
x_offset = -40
y_offset = 0.000
z_offset = 1.70
pin_up_reports_not_triggered = False
probe_with_touch_mode = True

[heater_bed]
heater_pin = PC9
sensor_type = ATC Semitec 104GT-2
sensor_pin = PC3
control = pid
pid_kp = 72.553
pid_ki = 1.154
pid_kd = 1139.994
min_temp = 5
max_temp = 125

[heater_fan radiator]
pin = PC7
max_power = 1.0
kick_start_time = 0.600
heater = extruder
heater_temp = 50.0
shutdown_speed = 1

[fan]
pin = PC6

[input_shaper]
shaper_type_x = 2hump_ei
shaper_freq_x = 43.0
shaper_type_y = mzv
shaper_freq_y = 32.6

[printer]
kinematics = cartesian
max_velocity = 300
max_accel = 1900
max_z_velocity = 30
max_z_accel = 100
square_corner_velocity = 4

[bed_mesh]
speed = 150
horizontal_move_z = 9
mesh_min = 10, 20
mesh_max = 195, 210
probe_count = 5
mesh_pps = 2, 3
algorithm = bicubic
bicubic_tension = 0.2
move_check_distance = 9
split_delta_z = .025
fade_start = 1
fade_end = 10
fade_target = 0

[screws_tilt_adjust]
screw1 = 79, 27
screw1_name = Peredniy Leviy
screw2 = 235, 27
screw2_name = Peredniy Praviy
screw3 = 235,197
screw3_name = Zadniy Praviy
screw4 = 79,197
screw4_name = Zadniy Leviy
speed = 120
horizontal_move_z = 9

[safe_z_home]
home_xy_position = 157,115
speed = 50
z_hop = 9.0
z_hop_speed = 20.0

[stepper_x]
step_pin = PB13
dir_pin = !PB12
enable_pin = !PB14
microsteps = 16
rotation_distance = 40
endstop_pin = ^PC0
position_endstop = 0
position_max = 240
position_min = -2
homing_retract_dist = 5
homing_speed = 50
second_homing_speed = 10

[tmc2209 stepper_x]
uart_pin = PC11
tx_pin = PC10
uart_address = 0
run_current = 0.580
stealthchop_threshold = 999999

[stepper_y]
step_pin = PB10
dir_pin = !PB2
enable_pin = !PB11
microsteps = 16
rotation_distance = 40
endstop_pin = ^PC1
position_endstop = 0
homing_retract_dist = 5
homing_speed = 50
second_homing_speed = 10
position_max = 231
position_min = 0

[tmc2209 stepper_y]
uart_pin = PC11
tx_pin = PC10
uart_address = 2
run_current = 0.6
stealthchop_threshold = 999999

[stepper_z]
step_pin = PB0
dir_pin = PC5
enable_pin = !PB1
microsteps = 16
rotation_distance = 40
gear_ratio = 80:16
full_steps_per_rotation = 200
endstop_pin = probe:z_virtual_endstop
homing_retract_dist = 9
second_homing_speed = 10
position_min = -5
position_max = 245
homing_speed = 50

[tmc2209 stepper_z]
uart_pin = PC11
tx_pin = PC10
uart_address = 1
run_current = 0.580
stealthchop_threshold = 999999
interpolate = false

[extruder]
step_pin = PB3
dir_pin = PB4
enable_pin = !PD2
microsteps = 16
rotation_distance = 4.637
nozzle_diameter = 0.400
filament_diameter = 1.750
heater_pin = PC8
sensor_type = ATC Semitec 104GT-2
sensor_pin = PA0
min_temp = 5
max_temp = 270
max_extrude_only_velocity = 120
max_extrude_only_accel = 3000
pressure_advance = 0.031
full_steps_per_rotation = 200
control = pid
pid_kp = 29.662
pid_ki = 2.382
pid_kd = 92.322

[tmc2209 extruder]
uart_pin = PC11
tx_pin = PC10
uart_address = 3
run_current = 0.7
stealthchop_threshold = 999999

[static_digital_output usb_pullup_enable]
pins = !PA14

[board_pins]
aliases = 
	
	EXP1_1=PB5,  EXP1_3=PA9,   EXP1_5=PA10, EXP1_7=PB8,  EXP1_9=<GND>,
	EXP1_2=PA15, EXP1_4=<RST>, EXP1_6=PB9,  EXP1_8=PB15, EXP1_10=<5V>

[display]
lcd_type = st7920
cs_pin = EXP1_7
sclk_pin = EXP1_6
sid_pin = EXP1_8
encoder_pins = ^EXP1_5, ^EXP1_3
click_pin = ^!EXP1_2

[pwm_cycle_time beeper]
pin = EXP1_1
shutdown_value = 0
cycle_time = 0.001

[firmware_retraction]
retract_length = 1.0
retract_speed = 80
unretract_extra_length = 0
unretract_speed = 80

[pwm_tool Laser]
pin = PA6
cycle_time = 0.0001
shutdown_value = 0
maximum_mcu_duration = 5

[bed_mesh 70]
version = 1
points = 
	-0.045000, 0.027500, 0.015000
	-0.055000, -0.005000, -0.035000
	-0.007500, 0.040000, -0.002500
x_count = 3
y_count = 3
mesh_x_pps = 2
mesh_y_pps = 3
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 195.0
min_y = 20.0
max_y = 210.0

[bed_mesh default]
version = 1
points = 
	0.020000, 0.025000, 0.030000, -0.007500, -0.052500
	0.015000, 0.017500, 0.022500, -0.007500, -0.057500
	0.030000, 0.030000, 0.037500, 0.002500, -0.035000
	0.012500, 0.030000, 0.050000, 0.035000, -0.010000
	0.080000, 0.087500, 0.115000, 0.097500, 0.067500
x_count = 5
y_count = 5
mesh_x_pps = 2
mesh_y_pps = 3
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 195.0
min_y = 20.0
max_y = 210.0
=======================
Extruder max_extrude_ratio=0.266081
mcu 'mcu': Starting serial connect
webhooks client 281473402268800: New connection
webhooks client 281473402268800: Client info {'program': 'Moonraker', 'version': 'v0.9.3-4-ga4604e3'}
Loaded MCU 'mcu' 118 commands (v0.12.0-404-g80d185c94 / gcc: (15:12.2.rel1-1) 12.2.1 20221205 binutils: (2.40-2+18+b1) 2.40)
MCU 'mcu' config: ADC_MAX=4095 BUS_PINS_i2c1=PB6,PB7 BUS_PINS_i2c1a=PB8,PB9 BUS_PINS_i2c2=PB10,PB11 BUS_PINS_spi1=PA6,PA7,PA5 BUS_PINS_spi1a=PB4,PB5,PB3 BUS_PINS_spi2=PB14,PB15,PB13 BUS_PINS_spi3=PB4,PB5,PB3 CLOCK_FREQ=72000000 INITIAL_PINS=!PA14 MCU=stm32f103xe PWM_MAX=255 RECEIVE_WINDOW=192 RESERVE_PINS_serial=PA3,PA2 SERIAL_BAUD=250000 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
Sending MCU 'mcu' printer configuration...
Configured MCU 'mcu' (1024 moves)
Starting heater checks for chamber_heater
Starting heater checks for heater_bed
bed_mesh: generated points
Index |  Tool Adjusted  |   Probe
  0   | (50.0, 20.0)    | (10.0, 20.0)
  1   | (96.2, 20.0)    | (56.2, 20.0)
  2   | (142.5, 20.0)   | (102.5, 20.0)
  3   | (188.8, 20.0)   | (148.8, 20.0)
  4   | (235.0, 20.0)   | (195.0, 20.0)
  5   | (235.0, 67.5)   | (195.0, 67.5)
  6   | (188.8, 67.5)   | (148.8, 67.5)
  7   | (142.5, 67.5)   | (102.5, 67.5)
  8   | (96.2, 67.5)    | (56.2, 67.5)
  9   | (50.0, 67.5)    | (10.0, 67.5)
  10  | (50.0, 115.0)   | (10.0, 115.0)
  11  | (96.2, 115.0)   | (56.2, 115.0)
  12  | (142.5, 115.0)  | (102.5, 115.0)
  13  | (188.8, 115.0)  | (148.8, 115.0)
  14  | (235.0, 115.0)  | (195.0, 115.0)
  15  | (235.0, 162.5)  | (195.0, 162.5)
  16  | (188.8, 162.5)  | (148.8, 162.5)
  17  | (142.5, 162.5)  | (102.5, 162.5)
  18  | (96.2, 162.5)   | (56.2, 162.5)
  19  | (50.0, 162.5)   | (10.0, 162.5)
  20  | (50.0, 210.0)   | (10.0, 210.0)
  21  | (96.2, 210.0)   | (56.2, 210.0)
  22  | (142.5, 210.0)  | (102.5, 210.0)
  23  | (188.8, 210.0)  | (148.8, 210.0)
  24  | (235.0, 210.0)  | (195.0, 210.0)
Starting heater checks for extruder
Stats 15350.7: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=3239 bytes_read=6164 bytes_retransmit=0 bytes_invalid=0 send_seq=229 receive_seq=226 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=2125 upcoming_bytes=8 freq=71998068  orange_pi: temp=46.8 chamber_heater: target=0 temp=0.0 pwm=0.000 heater_bed: target=0 temp=0.0 pwm=0.000 sysload=1.16 cputime=6.650 memavail=1690720 print_time=21890.127 buffer_time=0.241 print_stall=0 extruder: target=0 temp=0.0 pwm=0.000
webhooks: registering remote method 'shutdown_machine' for connection id: 281473402268800
webhooks: registering remote method 'reboot_machine' for connection id: 281473402268800
webhooks: registering remote method 'pause_job_queue' for connection id: 281473402268800
webhooks: registering remote method 'start_job_queue' for connection id: 281473402268800
Stats 15351.7: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000123 mcu_task_stddev=0.000276 bytes_write=5634 bytes_read=6587 bytes_retransmit=0 bytes_invalid=0 send_seq=276 receive_seq=276 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998245  orange_pi: temp=46.8 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.16 cputime=6.699 memavail=1690012 print_time=21890.127 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15352.7: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000123 mcu_task_stddev=0.000276 bytes_write=5640 bytes_read=6732 bytes_retransmit=0 bytes_invalid=0 send_seq=277 receive_seq=277 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998832  orange_pi: temp=46.8 chamber_heater: target=0 temp=27.0 pwm=0.000 heater_bed: target=0 temp=24.3 pwm=0.000 sysload=1.15 cputime=6.738 memavail=1689560 print_time=21890.127 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 15353.7: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000123 mcu_task_stddev=0.000276 bytes_write=5646 bytes_read=6887 bytes_retransmit=0 bytes_invalid=0 send_seq=278 receive_seq=278 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998389  orange_pi: temp=45.7 chamber_heater: target=0 temp=27.0 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.15 cputime=6.760 memavail=1690400 print_time=21890.127 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15354.7: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000123 mcu_task_stddev=0.000276 bytes_write=5666 bytes_read=7061 bytes_retransmit=0 bytes_invalid=0 send_seq=280 receive_seq=280 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998302  orange_pi: temp=45.8 chamber_heater: target=0 temp=27.0 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.15 cputime=6.781 memavail=1689896 print_time=21890.127 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15355.7: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000123 mcu_task_stddev=0.000276 bytes_write=5672 bytes_read=7202 bytes_retransmit=0 bytes_invalid=0 send_seq=281 receive_seq=281 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998311  orange_pi: temp=45.6 chamber_heater: target=0 temp=26.9 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.15 cputime=6.802 memavail=1689540 print_time=21890.127 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 15356.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000029 bytes_write=5678 bytes_read=7398 bytes_retransmit=0 bytes_invalid=0 send_seq=282 receive_seq=282 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998284  orange_pi: temp=45.7 chamber_heater: target=0 temp=26.9 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.15 cputime=6.824 memavail=1689160 print_time=21890.127 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15357.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000029 bytes_write=5684 bytes_read=7564 bytes_retransmit=0 bytes_invalid=0 send_seq=283 receive_seq=283 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998309  orange_pi: temp=45.2 chamber_heater: target=0 temp=26.8 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.14 cputime=6.846 memavail=1688904 print_time=21890.127 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15358.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000029 bytes_write=5709 bytes_read=7725 bytes_retransmit=0 bytes_invalid=0 send_seq=286 receive_seq=286 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998292  orange_pi: temp=45.2 chamber_heater: target=0 temp=26.9 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.14 cputime=6.867 memavail=1689556 print_time=21890.127 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15359.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000029 bytes_write=5715 bytes_read=7906 bytes_retransmit=0 bytes_invalid=0 send_seq=287 receive_seq=287 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998274  orange_pi: temp=45.2 chamber_heater: target=0 temp=26.7 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.14 cputime=6.889 memavail=1689160 print_time=21890.127 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15360.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000029 bytes_write=5735 bytes_read=8077 bytes_retransmit=0 bytes_invalid=0 send_seq=289 receive_seq=289 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998265  orange_pi: temp=45.6 chamber_heater: target=0 temp=26.9 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.14 cputime=6.910 memavail=1689188 print_time=21890.127 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15361.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000017 bytes_write=5741 bytes_read=8242 bytes_retransmit=0 bytes_invalid=0 send_seq=290 receive_seq=290 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998268  orange_pi: temp=45.2 chamber_heater: target=0 temp=26.7 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.14 cputime=6.931 memavail=1690216 print_time=21890.127 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15362.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000017 bytes_write=5747 bytes_read=8423 bytes_retransmit=0 bytes_invalid=0 send_seq=291 receive_seq=291 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998277  orange_pi: temp=45.6 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.12 cputime=6.953 memavail=1690232 print_time=21890.127 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15363.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000017 bytes_write=5753 bytes_read=8589 bytes_retransmit=0 bytes_invalid=0 send_seq=292 receive_seq=292 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998273  orange_pi: temp=45.5 chamber_heater: target=0 temp=26.8 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.12 cputime=6.975 memavail=1691304 print_time=21890.127 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 15364.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000017 bytes_write=5778 bytes_read=8750 bytes_retransmit=0 bytes_invalid=0 send_seq=295 receive_seq=295 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998270  orange_pi: temp=46.2 chamber_heater: target=0 temp=26.7 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.12 cputime=6.998 memavail=1691584 print_time=21890.127 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 15365.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000017 bytes_write=5803 bytes_read=8941 bytes_retransmit=0 bytes_invalid=0 send_seq=298 receive_seq=298 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998278  orange_pi: temp=45.7 chamber_heater: target=0 temp=26.9 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.12 cputime=7.020 memavail=1691348 print_time=21890.127 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15366.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000015 bytes_write=5809 bytes_read=9121 bytes_retransmit=0 bytes_invalid=0 send_seq=299 receive_seq=299 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998287  orange_pi: temp=45.7 chamber_heater: target=0 temp=26.8 pwm=0.000 heater_bed: target=0 temp=24.7 pwm=0.000 sysload=1.12 cputime=7.042 memavail=1691404 print_time=21890.127 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15367.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000015 bytes_write=5815 bytes_read=9272 bytes_retransmit=0 bytes_invalid=0 send_seq=300 receive_seq=300 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998289  orange_pi: temp=45.8 chamber_heater: target=0 temp=26.2 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.11 cputime=7.061 memavail=1690916 print_time=21890.127 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15368.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000015 bytes_write=5835 bytes_read=9458 bytes_retransmit=0 bytes_invalid=0 send_seq=302 receive_seq=302 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998284  orange_pi: temp=45.8 chamber_heater: target=0 temp=26.7 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.11 cputime=7.083 memavail=1691188 print_time=21890.127 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 15369.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000015 bytes_write=5874 bytes_read=9639 bytes_retransmit=0 bytes_invalid=0 send_seq=306 receive_seq=306 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998280  orange_pi: temp=45.7 chamber_heater: target=0 temp=26.8 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.11 cputime=7.105 memavail=1691704 print_time=21890.127 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15370.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000015 bytes_write=5894 bytes_read=9795 bytes_retransmit=0 bytes_invalid=0 send_seq=308 receive_seq=308 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998295  orange_pi: temp=45.7 chamber_heater: target=0 temp=26.9 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.11 cputime=7.126 memavail=1691208 print_time=21890.127 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15371.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000021 bytes_write=5900 bytes_read=9991 bytes_retransmit=0 bytes_invalid=0 send_seq=309 receive_seq=309 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998294  orange_pi: temp=45.3 chamber_heater: target=0 temp=26.8 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.11 cputime=7.147 memavail=1691228 print_time=21890.127 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 15372.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000021 bytes_write=5906 bytes_read=10157 bytes_retransmit=0 bytes_invalid=0 send_seq=310 receive_seq=310 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998296  orange_pi: temp=45.3 chamber_heater: target=0 temp=26.8 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.10 cputime=7.169 memavail=1691272 print_time=21890.127 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15373.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000021 bytes_write=5912 bytes_read=10308 bytes_retransmit=0 bytes_invalid=0 send_seq=311 receive_seq=311 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998301  orange_pi: temp=45.8 chamber_heater: target=0 temp=26.8 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.10 cputime=7.191 memavail=1691852 print_time=21890.127 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 15374.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000021 bytes_write=5918 bytes_read=10489 bytes_retransmit=0 bytes_invalid=0 send_seq=312 receive_seq=312 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998300  orange_pi: temp=45.9 chamber_heater: target=0 temp=26.7 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.10 cputime=7.213 memavail=1691368 print_time=21890.127 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15375.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000021 bytes_write=5924 bytes_read=10655 bytes_retransmit=0 bytes_invalid=0 send_seq=313 receive_seq=313 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998299  orange_pi: temp=45.1 chamber_heater: target=0 temp=26.8 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.10 cputime=7.235 memavail=1691392 print_time=21890.127 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15376.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5930 bytes_read=10820 bytes_retransmit=0 bytes_invalid=0 send_seq=314 receive_seq=314 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998303  orange_pi: temp=45.7 chamber_heater: target=0 temp=26.9 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.10 cputime=7.256 memavail=1691648 print_time=21890.127 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15377.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5936 bytes_read=11001 bytes_retransmit=0 bytes_invalid=0 send_seq=315 receive_seq=315 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998302  orange_pi: temp=46.0 chamber_heater: target=0 temp=26.7 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.10 cputime=7.278 memavail=1691684 print_time=21890.127 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15378.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5942 bytes_read=11167 bytes_retransmit=0 bytes_invalid=0 send_seq=316 receive_seq=316 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998306  orange_pi: temp=45.4 chamber_heater: target=0 temp=26.7 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.10 cputime=7.300 memavail=1691468 print_time=21890.127 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15379.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5948 bytes_read=11318 bytes_retransmit=0 bytes_invalid=0 send_seq=317 receive_seq=317 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998310  orange_pi: temp=45.8 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.10 cputime=7.322 memavail=1691232 print_time=21890.127 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15380.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5954 bytes_read=11499 bytes_retransmit=0 bytes_invalid=0 send_seq=318 receive_seq=318 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998311  orange_pi: temp=45.9 chamber_heater: target=0 temp=26.7 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.10 cputime=7.344 memavail=1691492 print_time=21890.127 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15381.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5966 bytes_read=11695 bytes_retransmit=0 bytes_invalid=0 send_seq=320 receive_seq=320 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998311  orange_pi: temp=45.8 chamber_heater: target=0 temp=26.7 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.10 cputime=7.366 memavail=1691756 print_time=21890.127 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15382.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5986 bytes_read=11851 bytes_retransmit=0 bytes_invalid=0 send_seq=322 receive_seq=322 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998312  orange_pi: temp=45.6 chamber_heater: target=0 temp=26.7 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.09 cputime=7.387 memavail=1692500 print_time=21890.127 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15383.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=6006 bytes_read=12037 bytes_retransmit=0 bytes_invalid=0 send_seq=324 receive_seq=324 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998312  orange_pi: temp=45.1 chamber_heater: target=0 temp=26.8 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.09 cputime=7.409 memavail=1693080 print_time=21890.127 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15384.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=6012 bytes_read=12203 bytes_retransmit=0 bytes_invalid=0 send_seq=325 receive_seq=325 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998314  orange_pi: temp=45.6 chamber_heater: target=0 temp=26.7 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.09 cputime=7.431 memavail=1693368 print_time=21890.127 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15385.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=6018 bytes_read=12354 bytes_retransmit=0 bytes_invalid=0 send_seq=326 receive_seq=326 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998315  orange_pi: temp=45.8 chamber_heater: target=0 temp=26.7 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.09 cputime=7.452 memavail=1694156 print_time=21890.127 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 15386.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000018 bytes_write=6024 bytes_read=12550 bytes_retransmit=0 bytes_invalid=0 send_seq=327 receive_seq=327 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998316  orange_pi: temp=45.5 chamber_heater: target=0 temp=26.9 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.09 cputime=7.473 memavail=1693904 print_time=21890.127 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15387.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000018 bytes_write=6030 bytes_read=12716 bytes_retransmit=0 bytes_invalid=0 send_seq=328 receive_seq=328 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998313  orange_pi: temp=45.5 chamber_heater: target=0 temp=27.0 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.08 cputime=7.495 memavail=1693652 print_time=21890.127 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15388.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000018 bytes_write=6050 bytes_read=12872 bytes_retransmit=0 bytes_invalid=0 send_seq=330 receive_seq=330 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998311  orange_pi: temp=45.4 chamber_heater: target=0 temp=27.0 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.08 cputime=7.516 memavail=1693152 print_time=21890.127 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 15389.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000018 bytes_write=6070 bytes_read=13058 bytes_retransmit=0 bytes_invalid=0 send_seq=332 receive_seq=332 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998312  orange_pi: temp=45.3 chamber_heater: target=0 temp=26.9 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.08 cputime=7.539 memavail=1693152 print_time=21890.127 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15390.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000018 bytes_write=6076 bytes_read=13224 bytes_retransmit=0 bytes_invalid=0 send_seq=333 receive_seq=333 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998312  orange_pi: temp=45.6 chamber_heater: target=0 temp=27.0 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.08 cputime=7.560 memavail=1692900 print_time=21890.127 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15391.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000018 bytes_write=6082 bytes_read=13390 bytes_retransmit=0 bytes_invalid=0 send_seq=334 receive_seq=334 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998312  orange_pi: temp=45.5 chamber_heater: target=0 temp=26.9 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.08 cputime=7.582 memavail=1692396 print_time=21890.127 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15392.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000018 bytes_write=6088 bytes_read=13571 bytes_retransmit=0 bytes_invalid=0 send_seq=335 receive_seq=335 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998313  orange_pi: temp=45.8 chamber_heater: target=0 temp=26.9 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.07 cputime=7.603 memavail=1692396 print_time=21890.127 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15393.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000018 bytes_write=6094 bytes_read=13737 bytes_retransmit=0 bytes_invalid=0 send_seq=336 receive_seq=336 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998312  orange_pi: temp=45.8 chamber_heater: target=0 temp=27.0 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.07 cputime=7.625 memavail=1691892 print_time=21890.127 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15394.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000018 bytes_write=6128 bytes_read=13898 bytes_retransmit=0 bytes_invalid=0 send_seq=339 receive_seq=339 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998310  orange_pi: temp=45.7 chamber_heater: target=0 temp=26.9 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.07 cputime=7.647 memavail=1691640 print_time=21890.127 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15395.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000018 bytes_write=6134 bytes_read=14079 bytes_retransmit=0 bytes_invalid=0 send_seq=340 receive_seq=340 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998310  orange_pi: temp=45.2 chamber_heater: target=0 temp=27.1 pwm=0.000 heater_bed: target=0 temp=24.7 pwm=0.000 sysload=1.07 cputime=7.669 memavail=1691392 print_time=21890.127 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15396.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000018 bytes_write=6140 bytes_read=14260 bytes_retransmit=0 bytes_invalid=0 send_seq=341 receive_seq=341 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998310  orange_pi: temp=45.3 chamber_heater: target=0 temp=27.0 pwm=0.000 heater_bed: target=0 temp=24.7 pwm=0.000 sysload=1.07 cputime=7.694 memavail=1691140 print_time=21890.127 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15397.8: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000018 bytes_write=6146 bytes_read=14411 bytes_retransmit=0 bytes_invalid=0 send_seq=342 receive_seq=342 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998311  orange_pi: temp=45.8 chamber_heater: target=0 temp=26.9 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.07 cputime=7.715 memavail=1690636 print_time=21890.127 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 15398.8: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000018 bytes_write=6152 bytes_read=14592 bytes_retransmit=0 bytes_invalid=0 send_seq=343 receive_seq=343 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998310  orange_pi: temp=45.2 chamber_heater: target=0 temp=27.0 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.07 cputime=7.737 memavail=1690896 print_time=21890.127 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15399.8: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000018 bytes_write=6177 bytes_read=14768 bytes_retransmit=0 bytes_invalid=0 send_seq=346 receive_seq=346 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998308  orange_pi: temp=45.5 chamber_heater: target=0 temp=27.1 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.07 cputime=7.759 memavail=1691400 print_time=21890.127 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15400.8: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000018 bytes_write=6211 bytes_read=14929 bytes_retransmit=0 bytes_invalid=0 send_seq=349 receive_seq=349 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998305  orange_pi: temp=45.3 chamber_heater: target=0 temp=27.0 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.07 cputime=7.781 memavail=1691416 print_time=21890.127 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15401.8: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000019 bytes_write=6217 bytes_read=15125 bytes_retransmit=0 bytes_invalid=0 send_seq=350 receive_seq=350 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998306  orange_pi: temp=46.0 chamber_heater: target=0 temp=27.0 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.07 cputime=7.803 memavail=1691164 print_time=21890.127 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15402.8: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000019 bytes_write=6237 bytes_read=15296 bytes_retransmit=0 bytes_invalid=0 send_seq=352 receive_seq=352 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998308  orange_pi: temp=45.6 chamber_heater: target=0 temp=26.7 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.06 cputime=7.826 memavail=1690916 print_time=21890.127 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 15403.8: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000019 bytes_write=6257 bytes_read=15452 bytes_retransmit=0 bytes_invalid=0 send_seq=354 receive_seq=354 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998309  orange_pi: temp=45.3 chamber_heater: target=0 temp=26.9 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.06 cputime=7.846 memavail=1691740 print_time=21890.127 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15404.8: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000019 bytes_write=6263 bytes_read=15633 bytes_retransmit=0 bytes_invalid=0 send_seq=355 receive_seq=355 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998311  orange_pi: temp=45.4 chamber_heater: target=0 temp=26.9 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.06 cputime=7.867 memavail=1692004 print_time=21890.127 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15405.8: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000019 bytes_write=6288 bytes_read=15809 bytes_retransmit=0 bytes_invalid=0 send_seq=358 receive_seq=358 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998308  orange_pi: temp=45.6 chamber_heater: target=0 temp=27.0 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.06 cputime=7.888 memavail=1692788 print_time=21890.127 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 15406.8: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000019 bytes_write=6294 bytes_read=15975 bytes_retransmit=0 bytes_invalid=0 send_seq=359 receive_seq=359 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998309  orange_pi: temp=46.4 chamber_heater: target=0 temp=26.9 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.06 cputime=7.908 memavail=1692548 print_time=21890.127 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15407.8: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000019 bytes_write=6300 bytes_read=16156 bytes_retransmit=0 bytes_invalid=0 send_seq=360 receive_seq=360 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998309  orange_pi: temp=44.8 chamber_heater: target=0 temp=27.6 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.06 cputime=7.929 memavail=1691800 print_time=21890.127 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15408.8: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000019 bytes_write=6306 bytes_read=16322 bytes_retransmit=0 bytes_invalid=0 send_seq=361 receive_seq=361 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998308  orange_pi: temp=45.4 chamber_heater: target=0 temp=26.8 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.06 cputime=7.950 memavail=1691796 print_time=21890.127 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15409.8: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000019 bytes_write=6326 bytes_read=16478 bytes_retransmit=0 bytes_invalid=0 send_seq=363 receive_seq=363 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998308  orange_pi: temp=45.6 chamber_heater: target=0 temp=26.9 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.06 cputime=7.971 memavail=1692576 print_time=21890.127 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15410.8: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000019 bytes_write=6332 bytes_read=16659 bytes_retransmit=0 bytes_invalid=0 send_seq=364 receive_seq=364 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998308  orange_pi: temp=45.4 chamber_heater: target=0 temp=26.9 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.06 cputime=7.992 memavail=1692576 print_time=21890.127 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15484.8: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000017 bytes_write=7266 bytes_read=29289 bytes_retransmit=0 bytes_invalid=0 send_seq=479 receive_seq=479 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998323  orange_pi: temp=45.8 chamber_heater: target=0 temp=25.7 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.15 cputime=9.509 memavail=1683316 print_time=22024.209 buffer_time=0.245 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Attempting MCU 'mcu' reset command
webhooks client 281473402268800: Disconnected
Restarting printer
Start printer at Wed Dec 25 19:47:55 2024 (1735145275.2 15486.2)
===== Config file =====
[virtual_sdcard]
path = /home/klipper/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[pause_resume]

[display_status]

[respond]

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = BASE_CANCEL_PRINT
gcode = 
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	TURN_OFF_HEATERS
	M107
	G91
	G1 E-{E} F1500
	G90
	CLEAR_PAUSE
	SDCARD_RESET_FILE
	BASE_CANCEL_PRINT
	PARK

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = BASE_PAUSE
gcode = 
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	SAVE_GCODE_STATE NAME=PAUSE_STATE
	BASE_PAUSE
	G91
	G1 E-{E} F1500
	G90
	PARK

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = BASE_RESUME
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	G91
	G1 E{E} F1500
	G90
	RESTORE_GCODE_STATE NAME=PAUSE_STATE MOVE=1
	BASE_RESUME

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[gcode_macro _CLIENT_LINEAR_MOVE]
description = Linear move with save and restore of the gcode state
gcode = 
	{% set x_move = "X" ~ params.X if params.X is defined else "" %}
	{% set y_move = "Y" ~ params.Y if params.Y is defined else "" %}
	{% set z_move = "Z" ~ params.Z if params.Z is defined else "" %}
	{% set e_move = "E" ~ params.E if params.E is defined else "" %}
	{% set rate = "F" ~ params.F if params.F is defined else "" %}
	{% set ABSOLUTE = params.ABSOLUTE | default(0) | int != 0 %}
	{% set ABSOLUTE_E = params.ABSOLUTE_E | default(0) | int != 0 %}
	SAVE_GCODE_STATE NAME=_client_movement
	{% if x_move or y_move or z_move %}
	G9{ 0 if ABSOLUTE else 1 }
	{% endif %}
	{% if e_move %}
	M8{ 2 if ABSOLUTE_E else 3 }
	{% endif %}
	G1 { x_move } { y_move } { z_move } { e_move } { rate }
	RESTORE_GCODE_STATE NAME=_client_movement

[gcode_macro list_sensors]
gcode = 
	{ action_respond_info(printer.heaters.available_heaters | join(', ')) }
	{ action_respond_info(printer.heaters.available_sensors | join(', ')) }

[gcode_macro Power_OFF]
gcode = SET_PIN PIN=Power VALUE=0

[gcode_macro _POWER_OFF_PRINTER]
gcode = SET_PIN PIN=Power VALUE=0

[gcode_macro ACTIVATE_POWER_OFF]
gcode = 
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK_ACT DURATION=60

[gcode_macro DEACTIVATE_POWER_OFF]
gcode = 
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK_ACT DURATION=0

[delayed_gcode POWER_OFF_PRINTER_CHECK_ACT]
gcode = 
	{% if printer.idle_timeout.state == "Idle" or printer.idle_timeout.state == "Ready" %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=30
	{% else %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK_ACT DURATION=60
	{% endif %}

[delayed_gcode POWER_OFF_PRINTER_CHECK]
gcode = 
	{% if printer.idle_timeout.state == "Idle" or printer.idle_timeout.state == "Ready" %}
	{% if printer.extruder.temperature < 50.0 and printer.heater_bed.temperature < 50.0 %}
	{% if printer.extruder.target == 0.0 and printer.heater_bed.target == 0.0 %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=0
	_POWER_OFF_PRINTER
	{% else %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=2
	{% endif %}
	{% else %}
	{% if printer.idle_timeout.state == "Printing" %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=0
	{% else %}
	{% if printer.extruder.target == 0.0 and printer.heater_bed.target == 0.0 %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=2
	{% else %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=0
	{% endif %}
	{% endif %}
	{% endif %}
	{% endif %}

[gcode_macro M141]
gcode = SET_HEATER_TEMPERATURE HEATER=chamber_heater TARGET={params.S|default(0)}

[gcode_macro M80]
gcode = SET_PIN PIN=Power  VALUE=1

[gcode_macro M81]
gcode = 
	
	SET_PIN PIN=Power VALUE=0

[gcode_macro M486]
gcode = 
	
	
	
	
	
	
	
	
	
	
	
	{% if 'exclude_object' not in printer %}
	{action_raise_error("[exclude_object] is not enabled")}
	{% endif %}
	
	{% if 'T' in params %}
	EXCLUDE_OBJECT RESET=1
	
	{% for i in range(params.T | int) %}
	EXCLUDE_OBJECT_DEFINE NAME={i}
	{% endfor %}
	{% endif %}
	
	{% if 'C' in params %}
	EXCLUDE_OBJECT CURRENT=1
	{% endif %}
	
	{% if 'P' in params %}
	EXCLUDE_OBJECT NAME={params.P}
	{% endif %}
	
	{% if 'S' in params %}
	{% if params.S == '-1' %}
	{% if printer.exclude_object.current_object %}
	EXCLUDE_OBJECT_END NAME={printer.exclude_object.current_object}
	{% endif %}
	{% else %}
	EXCLUDE_OBJECT_START NAME={params.S}
	{% endif %}
	{% endif %}
	
	{% if 'U' in params %}
	EXCLUDE_OBJECT RESET=1 NAME={params.U}
	{% endif %}

[gcode_macro M190]
rename_existing = M190.1
gcode = 
	{% if printer["gcode_macro status_heating"] != null %}
	status_heating
	{% endif %}
	M190.1 { rawparams }
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro _CHOME]
gcode = 
	{% if printer["gcode_macro status_homing"] != null %}
	status_homing
	{% endif %}
	{% if printer.toolhead.homed_axes != "xyz" %}
	G28
	{% endif %}
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro M109]
rename_existing = M109.1
gcode = 
	{% if printer["gcode_macro status_heating"] != null %}
	status_heating
	{% endif %}
	M109.1 { rawparams }
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro _MOVE_AWAY]
gcode = 
	{% set th = printer.toolhead %}
	{% set x_safe = th.position.x + 20 * (1 if th.axis_maximum.x - th.position.x > 20 else -1) %}
	{% set y_safe = th.position.y + 20 * (1 if th.axis_maximum.y - th.position.y > 20 else -1) %}
	{% set z_safe = [th.position.z + 2, th.axis_maximum.z]|min %}
	
	G90
	G0 X{x_safe} Y{y_safe} Z{z_safe} F20000

[gcode_macro PARK_CENTER_REAR]
gcode = 
	{% if printer["gcode_macro status_busy"] != null %}
	status_busy
	{% endif %}
	{% set th = printer.toolhead %}
	{% set x_safe = th.position.x + 20 * (1 if th.axis_maximum.x - th.position.x > 20 else -1) %}
	{% set y_safe = th.position.y + 20 * (1 if th.axis_maximum.y - th.position.y > 20 else -1) %}
	
	G0 X{th.axis_maximum.x//2} Y{th.axis_maximum.y - 2} F3600
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro START_PRINT]
variable_retract = 15
gcode = 
	{% set chamber_temp = params.CHAMBER_TEMP|default(0)|float %}
	{% set extruder_temp = params.EXTRUDER_TEMP|default(210)|float %}
	{% set bed_temp = params.BED_TEMP|default(60)|float %}
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	CLEAR_PAUSE
	G28
	Smart_Park
	M220 S100
	M221 S100
	SET_HEATER_TEMPERATURE HEATER=chamber_heater TARGET={chamber_temp}
	SET_HEATER_TEMPERATURE HEATER=heater_bed TARGET={bed_temp}
	TEMPERATURE_WAIT SENSOR=heater_bed MINIMUM={bed_temp * 0.75}
	SET_HEATER_TEMPERATURE HEATER=extruder TARGET={extruder_temp}
	G90
	M82
	TEMPERATURE_WAIT SENSOR=heater_bed MINIMUM={bed_temp}
	TEMPERATURE_WAIT SENSOR=extruder MINIMUM={extruder_temp}
	
	G1 E-15 F3600
	
	G28
	BED_MESH_CALIBRATE
	PRIME_LINE

[gcode_macro pid_soplo]
gcode = 
	PID_CALIBRATE HEATER=extruder TARGET=250

[gcode_macro pid_bed]
gcode = 
	PID_CALIBRATE HEATER=heater_bed TARGET=105

[gcode_macro BED]
gcode = 
	PROBE_CALIBRATE

[gcode_macro END_PRINT]
gcode = 
	
	{% set max_x = printer.configfile.config["stepper_x"]["position_max"]|float %}
	{% set max_y = printer.configfile.config["stepper_y"]["position_max"]|float %}
	{% set max_z = printer.configfile.config["stepper_z"]["position_max"]|float %}
	
	
	{% if printer.toolhead.position.x < (max_x - 20) %}
	{% set x_safe = 20.0 %}
	{% else %}
	{% set x_safe = -20.0 %}
	{% endif %}
	
	{% if printer.toolhead.position.y < (max_y - 20) %}
	{% set y_safe = 20.0 %}
	{% else %}
	{% set y_safe = -20.0 %}
	{% endif %}
	
	{% if printer.toolhead.position.z < (max_z - 2) %}
	{% set z_safe = 2.0 %}
	{% else %}
	{% set z_safe = max_z - printer.toolhead.position.z %}
	{% endif %}
	
	
	M400
	G92 E0
	G1 E-15 F3600
	G91
	G0 Z{z_safe} F3600
	G0 X{x_safe} Y{y_safe} F20000
	
	
	M104 S0
	M104 S0
	M140 S0
	M106 S0
	G90
	G0 X{max_x / 2} Y{max_y} F3600
	
	SONG_CRAB_RAVE
	
	
	
	M117 Finished!
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=30

[gcode_macro M300]
gcode = 
	
	{% set S = params.S|default(1000)|int %}
	
	{% set P = params.P|default(100)|int %}
	
	
	{% set V = params.V|default(99)|int %}
	SET_PIN PIN=beeper VALUE={0.1 * (V / 100) if S > 0 else 1} CYCLE_TIME={ 1.0 / S if S > 0 else 1 }
	G4 P{P}
	SET_PIN PIN=beeper VALUE=0 CYCLE_TIME={ 0.001 }
description = 
	"Plays a beep sound.
	@param {int} [S=1000] - Frequency in Hz
	@param {int} [P=100] - Duration in ms
	@param {int} [V=99] - Volume in percent"

[gcode_macro PRIME_LINE]
gcode = 
	{% set feedrate = params.F|default(10)|float * 60 %}
	{% set length = 100.0 %}
	{% set width = printer.configfile.settings.extruder.nozzle_diameter|float %}
	{% set height = ( (width / 0.04)|int - (width / 0.04 / 4)|int )|float * 0.04 %}
	
	{% set extrude = length * width * height * 1.5 %}
	SAVE_GCODE_STATE NAME=PRIME_LINE_STATE
	SET_IDLE_TIMEOUT TIMEOUT=7200
	{% if 'Y' in params %}
	{% set x_start = 1.0 %}
	{% set y_start = (printer.toolhead.axis_maximum.y|float - 100) / 2 %}
	G0 X{x_start} Y{y_start} F5000
	G0 Z{height} F1500
	G91
	
	G1 E8 F300
	
	
	G1 Y100 E{extrude} F{feedrate}
	G0 X{width} F5000
	G1 Y-100 E{extrude} F{feedrate}
	{% else %}
	{% set x_start = (printer.toolhead.axis_maximum.x|float - 100) / 2 %}
	{% set y_start = 1.0 %}
	G0 X{x_start} Y{y_start} F5000
	G0 Z{height} F1500
	G91
	
	G1 E8 F300
	
	
	G1 X100 E{extrude} F{feedrate}
	G0 Y{width} F5000
	G1 X-100 E{extrude} F{feedrate}
	{% endif %}
	RESTORE_GCODE_STATE NAME=PRIME_LINE_STATE

[gcode_macro VINT]
gcode = 
	SCREWS_TILT_CALCULATE

[gcode_macro LOW_TEMP_CHECK]
gcode = 
	{% set extruder_temp = params.T|default(240)|float %}
	{% if printer.extruder.target > extruder_temp %}
	{% set extruder_temp = printer.extruder.target %}
	{% endif %}
	{% if printer.extruder.temperature < extruder_temp %}
	M118 Heating to {extruder_temp}
	SET_HEATER_TEMPERATURE HEATER=extruder TARGET={extruder_temp}
	TEMPERATURE_WAIT SENSOR=extruder MINIMUM={extruder_temp}
	{% endif %}

[gcode_macro M76]
gcode = 
	PAUSE

[gcode_macro M601]
gcode = 
	PAUSE

[gcode_macro G27]
gcode = 
	PARK

[gcode_macro M125]
gcode = 
	PARK

[gcode_macro M600]
gcode = 
	PAUSE

[gcode_macro M701]
gcode = 
	FILAMENT_LOAD

[gcode_macro M702]
gcode = 
	FILAMENT_UNLOAD

[gcode_macro M500]
gcode = 
	SAVE_CONFIG

[gcode_macro PARK]
gcode = 
	{% set x_park = params.X|default(0)|float %}
	{% set y_park = params.Y|default(0)|float %}
	{% set z_park = params.Z|default(10)|float + printer.toolhead.position.z|float %}
	{% set x_max = printer.toolhead.axis_maximum.x|float %}
	{% set y_max = printer.toolhead.axis_maximum.y|float %}
	{% set z_max = printer.toolhead.axis_maximum.z|float %}
	{% if x_park > x_max %}
	{% set x_park = x_max %}
	{% endif %}
	{% if y_park > y_max %}
	{% set y_park = y_max %}
	{% endif %}
	{% if z_park > z_max %}
	{% set z_park = z_max %}
	{% endif %}
	SAVE_GCODE_STATE NAME=PARK_STATE
	G90
	G1 Z{z_park} F1500
	G1 X{x_park} Y{y_park} F5000
	RESTORE_GCODE_STATE name=PARK_STATE

[gcode_macro START_DRYER]
description = Start the heated bed filament dryer.
gcode = 
	{% set ChamberTemperature = params.CHAMBER | default(65.0) | float %}
	{% set BedTemperature = params.TEMPERATURE | default(0.0) | float %}
	{% set DryTime = params.TIME | default(14400) | int %}
	M140 S{BedTemperature}
	M141 S{ChamberTemperature}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=time_remaining VALUE={DryTime}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=bed_temperature VALUE={BedTemperature}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=chamber_temperature VALUE={ChamberTemperature}
	UPDATE_DELAYED_GCODE ID=DRYER_TIMER DURATION=1

[gcode_macro STOP_DRYER]
gcode = 
	M140 S0
	M141 S0
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=time_remaining VALUE=0
	UPDATE_DELAYED_GCODE ID=DRYER_TIMER DURATION=0
	M117 Drying Stopped

[gcode_macro DRYER_STATUS]
variable_time_remaining = 0
variable_bed_temperature = 0
variable_chamber_temperature = 0
gcode = 
	{% if time_remaining > 0 %}
	M140 S{bed_temperature}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=time_remaining VALUE={time_remaining - 1}
	M117 Drying {time_remaining}
	{% else %}
	STOP_DRYER
	{% endif %}

[delayed_gcode DRYER_TIMER]
gcode = 
	UPDATE_DELAYED_GCODE ID=DRYER_TIMER DURATION=1
	DRYER_STATUS

[gcode_macro DRY_tpu]
gcode = 
	START_DRYER TEMPERATURE=0 CHAMBER=50 TIME=18000

[gcode_macro DRY_PETG]
gcode = 
	START_DRYER TEMPERATURE=0  CHAMBER=65 TIME=18000

[gcode_macro DRY_ABS]
gcode = 
	{% set S = params.S|default(0.0)|float %}
	SET_PIN PIN=Laser VALUE={S / 255.0}

[gcode_macro M4]
gcode = 
	{% set S = params.S|default(0.0)|float %}
	SET_PIN PIN=Laser VALUE={S / 255.0}

[gcode_macro M5]
gcode = 
	SET_PIN PIN=Laser VALUE=0

[menu __main __control __toolonoff]
type = input
enable = {'pwm_tool Laser' in printer}
name = Fan: {'ON ' if menu.input else 'OFF'}
input = {printer['pwm_tool Laser'].value}
input_min = 0
input_max = 1
input_step = 1
gcode = 
	M3 S{255 if menu.input else 0}

[menu __main __control __toolspeed]
type = input
enable = {'pwm_tool Laser' in printer}
name = Laser speed: {'%3d' % (menu.input*100)}%
input = {printer['pwm_tool Laser'].value}
input_min = 0
input_max = 1
input_step = 0.01
gcode = 
	M3 S{'%d' % (menu.input*255)}

[gcode_macro NOTE]
description = 
	"Plays a specified note for a specified duration
	@param {string} [N=C5] - Note to play
	@param {int} [D=500] - Duration of note. There are currently some Klipper limitations to how short a note can be.
	@param {int} [V=99] - Volume in percent
	@param {bool} [S=true] - Whether or not to stop the note after duration"
gcode = 
	{% set notes = {
	'C0': 16.35,   'CS0': 17.32,   'D0': 18.35,   'DS0': 19.45,   'E0': 20.60,   'F0': 21.83,   'FS0': 23.12,   'G0': 24.50,   'GS0': 25.96,   'A0': 27.50,   'AS0': 29.14,   'B0': 30.87,
	'C1': 32.70,   'CS1': 34.65,   'D1': 36.71,   'DS1': 38.89,   'E1': 41.20,   'F1': 43.65,   'FS1': 46.25,   'G1': 49.00,   'GS1': 51.91,   'A1': 55.00,   'AS1': 58.27,   'B1': 61.74,
	'C2': 65.41,   'CS2': 69.30,   'D2': 73.42,   'DS2': 77.78,   'E2': 82.41,   'F2': 87.31,   'FS2': 92.50,   'G2': 98.00,   'GS2': 103.83,  'A2': 110.00,  'AS2': 116.54,  'B2': 123.47,
	'C3': 130.81,  'CS3': 138.59,  'D3': 146.83,  'DS3': 155.56,  'E3': 164.81,  'F3': 174.61,  'FS3': 185.00,  'G3': 196.00,  'GS3': 207.65,  'A3': 220.00,  'AS3': 233.08,  'B3': 246.94,
	'C4': 261.63,  'CS4': 277.18,  'D4': 293.66,  'DS4': 311.13,  'E4': 329.63,  'F4': 349.23,  'FS4': 369.99,  'G4': 392.00,  'GS4': 415.30,  'A4': 440.00,  'AS4': 466.16,  'B4': 493.88,
	'C5': 523.25,  'CS5': 554.37,  'D5': 587.33,  'DS5': 622.25,  'E5': 659.26,  'F5': 698.46,  'FS5': 739.99,  'G5': 783.99,  'GS5': 830.61,  'A5': 880.00,  'AS5': 932.33,  'B5': 987.77,
	'C6': 1046.50, 'CS6': 1108.73, 'D6': 1174.66, 'DS6': 1244.51, 'E6': 1318.51, 'F6': 1396.91, 'FS6': 1479.98, 'G6': 1567.98, 'GS6': 1661.22, 'A6': 1760.00, 'AS6': 1864.66, 'B6': 1975.53,
	'C7': 2093.00, 'CS7': 2217.46, 'D7': 2349.32, 'DS7': 2489.02, 'E7': 2637.02, 'F7': 2793.83, 'FS7': 2959.96, 'G7': 3135.96, 'GS7': 3322.44, 'A7': 3520.00, 'AS7': 3729.31, 'B7': 3951.07,
	'C8': 4186.01, 'CS8': 4434.92, 'D8': 4698.64, 'DS8': 4978.03, 'E8': 5274.04, 'F8': 5587.65, 'FS8': 5919.91, 'G8': 6271.93, 'GS8': 6644.88, 'A8': 7040.00, 'AS8': 7458.62, 'B8': 7902.13,
	} %}
	
	{% set note = params.N|default('C5')|string %}
	
	{% set dur = params.D|default(500)|int %}
	
	
	{% set volume = params.V|default(99)|int %}
	
	{% set stop = params.S|default('true')|string %}
	
	{% set freq = notes[note] %}
	
	SET_PIN PIN=beeper VALUE={0.1 * (volume / 100) if volume > 0 else 1} CYCLE_TIME={ 1.0 / freq }
	G4 P{dur}
	{% if stop|lower == 'true' %}
	SET_PIN PIN=beeper VALUE=0 CYCLE_TIME={ 0.001 }
	{% endif %}

[gcode_macro TONE_GEN]
description = "Used for the tone generator menu"
variable_tone_freq = 0.001093
gcode = 
	M117 {printer["gcode_macro TONE_GEN"].tone_freq}nothz

[gcode_macro SONG_STAR_WARS_MAIN_THEME]
description = "Plays the Star Wars main theme"
gcode = 
	NOTE N=D4 D=133
	NOTE N=D4 D=133
	NOTE N=D4 D=133
	NOTE N=G4 D=1000
	NOTE N=D5 D=1000
	
	NOTE N=C5 D=133
	NOTE N=B4 D=133
	NOTE N=A4 D=133
	NOTE N=G5 D=1000
	NOTE N=D5 D=500
	
	NOTE N=C5 D=133
	NOTE N=B4 D=133
	NOTE N=A4 D=133
	NOTE N=G5 D=1000
	NOTE N=D5 D=500
	
	NOTE N=C5 D=133
	NOTE N=B4 D=133
	NOTE N=C5 D=133
	NOTE N=A4 D=1000

[gcode_macro SONG_CRAB_RAVE]
description = "Plays Crab Rave"
gcode = 
	NOTE N=D6 D=150 V=30 S=1
	NOTE N=AS6 D=150 V=30 S=1
	NOTE N=G6 D=150 V=30 S=1
	NOTE N=G6 D=150 V=30 S=0
	NOTE N=D6 D=150 V=30 S=1
	NOTE N=D6 D=150 V=30 S=0
	NOTE N=A6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=0
	NOTE N=D6 D=150 V=30 S=1
	NOTE N=D6 D=150 V=30 S=0
	NOTE N=A6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=0
	NOTE N=C6 D=150 V=30 S=1
	NOTE N=C6 D=150 V=30 S=1
	NOTE N=E6 D=150 V=30 S=1
	NOTE N=E6 D=150 V=30 S=0
	NOTE N=F6 D=150 V=30 S=1
	SET_PIN PIN=beeper VALUE=0

[gcode_macro one]
description = "one"
gcode = 
	NOTE N=C6 D=600 V=30 S=1
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=G5 D=400 V=30 S=1
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=E6 D=400 V=30 S=1
	G4 P150
	NOTE N=G6 D=180 V=30 S=0
	NOTE N=F6 D=180 V=30 S=0
	NOTE N=E6 D=180 V=30 S=0
	NOTE N=D6 D=180 V=30 S=1
	NOTE N=C6 D=600 V=30 S=1
	
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=G5 D=400 V=30 S=1
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=C6 D=600 V=30 S=1
	SET_PIN PIN=beeper VALUE=0

[gcode_macro SONG_BOOMER]
description = "BOOMER"
gcode = 
	M300 P207 S659
	M300 P207 S784
	M300 P207 S494
	M300 P207 S494
	M300 P207 S392
	M300 P207 S494
	M300 P207 S494
	M300 P207 S330
	M300 P207 S784
	M300 P207 S659
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S988
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S659
	M300 P207 S784
	M300 P207 S494
	M300 P207 S494
	M300 P207 S392
	M300 P207 S494
	M300 P207 S494
	M300 P207 S330
	M300 P207 S784
	M300 P207 S659
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S988
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S659
	M300 P207 S784
	M300 P207 S494
	M300 P207 S494
	M300 P207 S392
	M300 P207 S494
	M300 P207 S494
	M300 P207 S330
	M300 P207 S784
	M300 P207 S659
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S988
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330

[gcode_macro GET_TIMELAPSE_SETUP]
description = Print the Timelapse setup
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% set output_txt = ["Timelapse Setup:"] %}
	{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}
	{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}
	{% if tl.park.enable %}
	{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}
	{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}
	{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}
	{% endif %}
	{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}
	{% if not tl.extruder.fw_retract %}
	{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}
	{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}
	{% endif %}
	{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}
	{action_respond_info(output_txt|join("\n"))}

[gcode_macro _SET_TIMELAPSE_SETUP]
description = Set user parameters for timelapse
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	
	{% set min = printer.toolhead.axis_minimum %}
	{% set max = printer.toolhead.axis_maximum %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	{% set park = {'min'   : {'x': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),
	'y': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},
	'max'   : {'x': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),
	'y': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},
	'center': {'x': (max.x-(max.x-min.x)/2)|round(3),
	'y': (max.y-(max.y-min.y)/2)|round(3)}} %}
	
	{% if params.ENABLE %}
	{% if params.ENABLE|lower is in ['true', 'false'] %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == 'true' else False}
	{% else %}
	{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.VERBOSE %}
	{% if params.VERBOSE|lower is in ['true', 'false'] %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == 'true' else False}
	{% else %}
	{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_X %}
	{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}
	{% set _dummy = tl.park.custom.update({'x':params.CUSTOM_POS_X|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_Y %}
	{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}
	{% set _dummy = tl.park.custom.update({'y':params.CUSTOM_POS_Y|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_DZ %}
	{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}
	{% set _dummy = tl.park.custom.update({'dz':params.CUSTOM_POS_DZ|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}
	{% endif %}
	{% endif %}
	{% if params.PARK_ENABLE %}
	{% if params.PARK_ENABLE|lower is in ['true', 'false'] %}
	{% set _dummy = tl.park.update({'enable':True if params.PARK_ENABLE|lower == 'true' else False}) %}
	{% else %}
	{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.PARK_POS %}
	{% if params.PARK_POS|lower is in ['center','front_left','front_right','back_left','back_right','custom','x_only','y_only'] %}
	{% set dic = {'center'      : {'x': park.center.x   , 'y': park.center.y   , 'dz': 1                },
	'front_left'  : {'x': park.min.x      , 'y': park.min.y      , 'dz': 0                },
	'front_right' : {'x': park.max.x      , 'y': park.min.y      , 'dz': 0                },
	'back_left'   : {'x': park.min.x      , 'y': park.max.y      , 'dz': 0                },
	'back_right'  : {'x': park.max.x      , 'y': park.max.y      , 'dz': 0                },
	'custom'      : {'x': tl.park.custom.x, 'y': tl.park.custom.y, 'dz': tl.park.custom.dz},
	'x_only'      : {'x': tl.park.custom.x, 'y': 'none'          , 'dz': tl.park.custom.dz},
	'y_only'      : {'x': 'none'          , 'y': tl.park.custom.y, 'dz': tl.park.custom.dz}} %}
	{% set _dummy = tl.park.update({'pos':params.PARK_POS|lower}) %}
	{% set _dummy = tl.park.update({'coord':dic[tl.park.pos]}) %}
	{% else %}
	{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"
	% params.PARK_POS|upper)}
	{% endif %}
	{% endif %}
	{% if params.PARK_TIME %}
	{% if params.PARK_TIME|float >= 0.0 %}
	{% set _dummy = tl.park.update({'time':params.PARK_TIME|float|round(3)}) %}
	{% else %}
	{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"
	{% if params.TRAVEL_SPEED %}
	{% if params.TRAVEL_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'travel':params.TRAVEL_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}
	{% endif %}
	{% endif %}
	{% if params.RETRACT_SPEED %}
	{% if params.RETRACT_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'retract':params.RETRACT_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}
	{% endif %}
	{% endif %}
	{% if params.EXTRUDE_SPEED %}
	{% if params.EXTRUDE_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'extrude':params.EXTRUDE_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"
	{% if params.EXTRUDE_DISTANCE %}
	{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}
	{% set _dummy = tl.extruder.update({'extrude':params.EXTRUDE_DISTANCE|float|round(3)}) %}
	{% else %}
	{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}
	{% endif %}
	{% endif %}
	{% if params.RETRACT_DISTANCE %}
	{% if params.RETRACT_DISTANCE|float >= 0.0 %}
	{% set _dummy = tl.extruder.update({'retract':params.RETRACT_DISTANCE|float|round(3)}) %}
	{% else %}
	{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}
	{% endif %}
	{% endif %}
	{% if params.FW_RETRACT %}
	{% if params.FW_RETRACT|lower is in ['true', 'false'] %}
	{% if 'firmware_retraction' in printer.configfile.settings %}
	{% set _dummy = tl.extruder.update({'fw_retract': True if params.FW_RETRACT|lower == 'true' else False}) %}
	{% else %}
	{% set _dummy = tl.extruder.update({'fw_retract':False}) %}
	{% if params.FW_RETRACT|capitalize == 'True' %}
	{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}
	{% endif %}
	{% endif %}
	{% else %}
	{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"
	{% if printer.configfile.settings['gcode_macro pause'] is defined %}
	{% set _dummy = tl.macro.update({'pause': printer.configfile.settings['gcode_macro pause'].rename_existing}) %}
	{% endif %}
	{% if printer.configfile.settings['gcode_macro resume'] is defined %}
	{% set _dummy = tl.macro.update({'resume': printer.configfile.settings['gcode_macro resume'].rename_existing}) %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"

[gcode_macro TIMELAPSE_TAKE_FRAME]
description = Take Timelapse shoot
variable_enable = False
variable_takingframe = False
variable_park = {'enable': False,
	'pos'   : 'center',
	'time'  : 0.1,
	'custom': {'x': 0, 'y': 0, 'dz': 0},
	'coord' : {'x': 0, 'y': 0, 'dz': 0}}
variable_extruder = {'fw_retract': False,
	'retract': 1.0,
	'extrude': 1.0}
variable_speed = {'travel': 100,
	'retract': 15,
	'extrude': 15}
variable_verbose = True
variable_restore = {'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}
variable_macro = {'pause': 'PAUSE', 'resume': 'RESUME'}
variable_is_paused = False
gcode = 
	{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower =='true' else False %}
	{% if enable %}
	{% if (hyperlapse and printer['gcode_macro HYPERLAPSE'].run) or
	(not hyperlapse and not printer['gcode_macro HYPERLAPSE'].run) %}
	{% if park.enable %}
	{% set pos = {'x': 'X' + park.coord.x|string if park.pos != 'y_only' else '',
	'y': 'Y' + park.coord.y|string if park.pos != 'x_only' else '',
	'z': 'Z'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}
	{% set restore = {'absolute': {'coordinates': printer.gcode_move.absolute_coordinates,
	'extrude'    : printer.gcode_move.absolute_extrude},
	'speed'   : printer.gcode_move.speed,
	'e'       : printer.gcode_move.gcode_position.e,
	'factor'  : {'speed'  : printer.gcode_move.speed_factor,
	'extrude': printer.gcode_move.extrude_factor}} %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"
	{% if not printer[printer.toolhead.extruder].can_extrude %}
	{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}
	{% else %}
	{% if extruder.fw_retract %}
	G10
	{% else %}
	M83
	G0 E-{extruder.retract} F{speed.retract * 60}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True
	{macro.pause}
	SET_GCODE_OFFSET X=0 Y=0
	G90
	{% if "xyz" not in printer.toolhead.homed_axes %}
	{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}
	{% else %}
	G0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5
	M400
	{% endif %}
	_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}
	{% endif %}
	{% else %}
	{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}
	{% endif %}

[gcode_macro _TIMELAPSE_NEW_FRAME]
description = action call for timelapse shoot. must be a seperate macro
gcode = 
	{action_call_remote_method("timelapse_newframe",
	macropark=printer['gcode_macro TIMELAPSE_TAKE_FRAME'].park,
	hyperlapse=params.HYPERLAPSE)}

[delayed_gcode _WAIT_TIMELAPSE_TAKE_FRAME]
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% set factor = {'speed': printer.gcode_move.speed_factor, 'extrude': printer.gcode_move.extrude_factor} %}
	{% if tl.takingframe %}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5
	{% else %}
	{tl.macro.resume} VELOCITY={tl.speed.travel}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False
	{% if not printer[printer.toolhead.extruder].can_extrude %}
	{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}
	{% else %}
	{% if tl.extruder.fw_retract %}
	G11
	{% else %}
	G0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}
	G0 F{tl.restore.speed}
	{% if tl.restore.absolute.extrude %}
	M82
	G92 E{tl.restore.e}
	{% endif %}
	{% endif %}
	{% endif %}
	{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}
	{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}
	{% if not tl.restore.absolute.coordinates %} G91 {% endif %}
	{% endif %}

[gcode_macro HYPERLAPSE]
description = Start/Stop a hyperlapse recording
variable_cycle = 0
variable_run = False
gcode = 
	{% set cycle = params.CYCLE|default(30)|int %}
	{% if params.ACTION and params.ACTION|lower == 'start' %}
	{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}
	TIMELAPSE_TAKE_FRAME HYPERLAPSE=True
	{% elif params.ACTION and params.ACTION|lower == 'stop' %}
	{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0
	{% else %}
	{action_raise_error("Hyperlapse: No valid input parameter
	Use:
	- HYPERLAPSE ACTION=START [CYCLE=time]
	- HYPERLAPSE ACTION=STOP")}
	{% endif %}

[delayed_gcode _HYPERLAPSE_LOOP]
gcode = 
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}
	TIMELAPSE_TAKE_FRAME HYPERLAPSE=True

[gcode_macro TIMELAPSE_RENDER]
description = Render Timelapse video and wait for the result
variable_render = False
variable_run_identifier = 0
gcode = 
	{action_respond_info("Timelapse: Rendering started")}
	{action_call_remote_method("timelapse_render", byrendermacro="True")}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True
	{printer.configfile.settings['gcode_macro pause'].rename_existing}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5

[delayed_gcode _WAIT_TIMELAPSE_RENDER]
gcode = 
	{% set ri = printer['gcode_macro TIMELAPSE_RENDER'].run_identifier % 4 %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}
	{% if printer['gcode_macro TIMELAPSE_RENDER'].render %}
	M117 Rendering {['-','\\','|','/'][ri]}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5
	{% else %}
	{action_respond_info("Timelapse: Rendering finished")}
	M117
	{printer.configfile.settings['gcode_macro resume'].rename_existing}
	{% endif %}

[gcode_macro TEST_STREAM_DELAY]
description = Helper macro to find stream and park delay
gcode = 
	{% set min = printer.toolhead.axis_minimum %}
	{% set max = printer.toolhead.axis_maximum %}
	{% set act = printer.toolhead.position %}
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% if act.z > 5.0 %}
	G0 X{min.x + 5.0} F{tl.speed.travel|int * 60}
	G0 X{(max.x-min.x)/2}
	G4 P{tl.park.time|float * 1000}
	_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE
	G0 X{max.x - 5.0}
	{% else %}
	{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}
	{% endif %}

[exclude_object]

[gcode_macro update_git]
gcode = 
	{% set message = params.MESSAGE|default() %}
	{% if message %}
	RUN_SHELL_COMMAND CMD=update_git_script_message PARAMS="'{params.MESSAGE}'"
	{% else %}
	RUN_SHELL_COMMAND CMD=update_git_script
	{% endif %}

[gcode_shell_command update_git_script]
command = bash -c "bash $HOME/klipper-backup/script.sh"
timeout = 90.0
verbose = True

[gcode_shell_command update_git_script_message]
command = bash -c "bash $HOME/klipper-backup/script.sh -c \"$0\""
timeout = 90.0
verbose = True

[mcu]
serial = /dev/ttyS3
restart_method = command

[output_pin Power]
pin = PC12
value = 1
shutdown_value = 1

[temperature_sensor orange_pi]
sensor_type = temperature_host
min_temp = 0
max_temp = 100

[heater_generic chamber_heater]
heater_pin = !PA7
sensor_type = ATC Semitec 104GT-2
sensor_pin = PA5
control = watermark
max_power = 1
min_temp = 15
max_temp = 85

[verify_heater chamber_heater]
max_error = 9999
check_gain_time = 9999
hysteresis = 5
heating_gain = 2

[filament_motion_sensor motion_sensor]
detection_length = 50
extruder = extruder
switch_pin = !PC15
pause_on_runout = True
runout_gcode = 
	SONG_CRAB_RAVE

[bltouch]
sensor_pin = ^PC14
control_pin = PA1
x_offset = -40
y_offset = 0.000
z_offset = 1.70
pin_up_reports_not_triggered = False
probe_with_touch_mode = True

[heater_bed]
heater_pin = PC9
sensor_type = ATC Semitec 104GT-2
sensor_pin = PC3
control = pid
pid_kp = 72.553
pid_ki = 1.154
pid_kd = 1139.994
min_temp = 5
max_temp = 125

[heater_fan radiator]
pin = PC7
max_power = 1.0
kick_start_time = 0.600
heater = extruder
heater_temp = 50.0
shutdown_speed = 1

[fan]
pin = PC6

[input_shaper]
shaper_type_x = 2hump_ei
shaper_freq_x = 43.0
shaper_type_y = mzv
shaper_freq_y = 32.6

[printer]
kinematics = cartesian
max_velocity = 300
max_accel = 1900
max_z_velocity = 30
max_z_accel = 100
square_corner_velocity = 4

[bed_mesh]
speed = 150
horizontal_move_z = 9
mesh_min = 10, 20
mesh_max = 195, 210
probe_count = 5
mesh_pps = 2, 3
algorithm = bicubic
bicubic_tension = 0.2
move_check_distance = 9
split_delta_z = .025
fade_start = 1
fade_end = 10
fade_target = 0

[screws_tilt_adjust]
screw1 = 79, 27
screw1_name = Peredniy Leviy
screw2 = 235, 27
screw2_name = Peredniy Praviy
screw3 = 235,197
screw3_name = Zadniy Praviy
screw4 = 79,197
screw4_name = Zadniy Leviy
speed = 120
horizontal_move_z = 9

[safe_z_home]
home_xy_position = 157,115
speed = 50
z_hop = 9.0
z_hop_speed = 20.0

[stepper_x]
step_pin = PB13
dir_pin = !PB12
enable_pin = !PB14
microsteps = 16
rotation_distance = 40
endstop_pin = ^PC0
position_endstop = 0
position_max = 240
position_min = -2
homing_retract_dist = 5
homing_speed = 50
second_homing_speed = 10

[tmc2209 stepper_x]
uart_pin = PC11
tx_pin = PC10
uart_address = 0
run_current = 0.580
stealthchop_threshold = 999999

[stepper_y]
step_pin = PB10
dir_pin = !PB2
enable_pin = !PB11
microsteps = 16
rotation_distance = 40
endstop_pin = ^PC1
position_endstop = 0
homing_retract_dist = 5
homing_speed = 50
second_homing_speed = 10
position_max = 231
position_min = 0

[tmc2209 stepper_y]
uart_pin = PC11
tx_pin = PC10
uart_address = 2
run_current = 0.6
stealthchop_threshold = 999999

[stepper_z]
step_pin = PB0
dir_pin = PC5
enable_pin = !PB1
microsteps = 16
rotation_distance = 40
gear_ratio = 80:16
full_steps_per_rotation = 200
endstop_pin = probe:z_virtual_endstop
homing_retract_dist = 9
second_homing_speed = 10
position_min = -5
position_max = 245
homing_speed = 50

[tmc2209 stepper_z]
uart_pin = PC11
tx_pin = PC10
uart_address = 1
run_current = 0.580
stealthchop_threshold = 999999
interpolate = false

[extruder]
step_pin = PB3
dir_pin = PB4
enable_pin = !PD2
microsteps = 16
rotation_distance = 4.637
nozzle_diameter = 0.400
filament_diameter = 1.750
heater_pin = PC8
sensor_type = ATC Semitec 104GT-2
sensor_pin = PA0
min_temp = 5
max_temp = 270
max_extrude_only_velocity = 120
max_extrude_only_accel = 3000
pressure_advance = 0.031
full_steps_per_rotation = 200
control = pid
pid_kp = 29.662
pid_ki = 2.382
pid_kd = 92.322

[tmc2209 extruder]
uart_pin = PC11
tx_pin = PC10
uart_address = 3
run_current = 0.7
stealthchop_threshold = 999999

[static_digital_output usb_pullup_enable]
pins = !PA14

[board_pins]
aliases = 
	
	EXP1_1=PB5,  EXP1_3=PA9,   EXP1_5=PA10, EXP1_7=PB8,  EXP1_9=<GND>,
	EXP1_2=PA15, EXP1_4=<RST>, EXP1_6=PB9,  EXP1_8=PB15, EXP1_10=<5V>

[display]
lcd_type = st7920
cs_pin = EXP1_7
sclk_pin = EXP1_6
sid_pin = EXP1_8
encoder_pins = ^EXP1_5, ^EXP1_3
click_pin = ^!EXP1_2

[pwm_cycle_time beeper]
pin = EXP1_1
shutdown_value = 0
cycle_time = 0.001

[firmware_retraction]
retract_length = 1.0
retract_speed = 80
unretract_extra_length = 0
unretract_speed = 80

[pwm_tool Laser]
pin = PA6
cycle_time = 0.0001
shutdown_value = 0
maximum_mcu_duration = 5

[bed_mesh 70]
version = 1
points = 
	-0.045000, 0.027500, 0.015000
	-0.055000, -0.005000, -0.035000
	-0.007500, 0.040000, -0.002500
x_count = 3
y_count = 3
mesh_x_pps = 2
mesh_y_pps = 3
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 195.0
min_y = 20.0
max_y = 210.0

[bed_mesh default]
version = 1
points = 
	0.020000, 0.025000, 0.030000, -0.007500, -0.052500
	0.015000, 0.017500, 0.022500, -0.007500, -0.057500
	0.030000, 0.030000, 0.037500, 0.002500, -0.035000
	0.012500, 0.030000, 0.050000, 0.035000, -0.010000
	0.080000, 0.087500, 0.115000, 0.097500, 0.067500
x_count = 5
y_count = 5
mesh_x_pps = 2
mesh_y_pps = 3
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 195.0
min_y = 20.0
max_y = 210.0
=======================
Extruder max_extrude_ratio=0.266081
mcu 'mcu': Starting serial connect
webhooks client 281473401868912: New connection
webhooks client 281473401868912: Client info {'program': 'Moonraker', 'version': 'v0.9.3-4-ga4604e3'}
Loaded MCU 'mcu' 118 commands (v0.12.0-404-g80d185c94 / gcc: (15:12.2.rel1-1) 12.2.1 20221205 binutils: (2.40-2+18+b1) 2.40)
MCU 'mcu' config: ADC_MAX=4095 BUS_PINS_i2c1=PB6,PB7 BUS_PINS_i2c1a=PB8,PB9 BUS_PINS_i2c2=PB10,PB11 BUS_PINS_spi1=PA6,PA7,PA5 BUS_PINS_spi1a=PB4,PB5,PB3 BUS_PINS_spi2=PB14,PB15,PB13 BUS_PINS_spi3=PB4,PB5,PB3 CLOCK_FREQ=72000000 INITIAL_PINS=!PA14 MCU=stm32f103xe PWM_MAX=255 RECEIVE_WINDOW=192 RESERVE_PINS_serial=PA3,PA2 SERIAL_BAUD=250000 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
Sending MCU 'mcu' printer configuration...
Configured MCU 'mcu' (1024 moves)
Starting heater checks for chamber_heater
Starting heater checks for heater_bed
bed_mesh: generated points
Index |  Tool Adjusted  |   Probe
  0   | (50.0, 20.0)    | (10.0, 20.0)
  1   | (96.2, 20.0)    | (56.2, 20.0)
  2   | (142.5, 20.0)   | (102.5, 20.0)
  3   | (188.8, 20.0)   | (148.8, 20.0)
  4   | (235.0, 20.0)   | (195.0, 20.0)
  5   | (235.0, 67.5)   | (195.0, 67.5)
  6   | (188.8, 67.5)   | (148.8, 67.5)
  7   | (142.5, 67.5)   | (102.5, 67.5)
  8   | (96.2, 67.5)    | (56.2, 67.5)
  9   | (50.0, 67.5)    | (10.0, 67.5)
  10  | (50.0, 115.0)   | (10.0, 115.0)
  11  | (96.2, 115.0)   | (56.2, 115.0)
  12  | (142.5, 115.0)  | (102.5, 115.0)
  13  | (188.8, 115.0)  | (148.8, 115.0)
  14  | (235.0, 115.0)  | (195.0, 115.0)
  15  | (235.0, 162.5)  | (195.0, 162.5)
  16  | (188.8, 162.5)  | (148.8, 162.5)
  17  | (142.5, 162.5)  | (102.5, 162.5)
  18  | (96.2, 162.5)   | (56.2, 162.5)
  19  | (50.0, 162.5)   | (10.0, 162.5)
  20  | (50.0, 210.0)   | (10.0, 210.0)
  21  | (96.2, 210.0)   | (56.2, 210.0)
  22  | (142.5, 210.0)  | (102.5, 210.0)
  23  | (188.8, 210.0)  | (148.8, 210.0)
  24  | (235.0, 210.0)  | (195.0, 210.0)
Starting heater checks for extruder
Stats 15490.1: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=3191 bytes_read=6163 bytes_retransmit=9 bytes_invalid=0 send_seq=229 receive_seq=226 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=1857 upcoming_bytes=324 freq=71993466  orange_pi: temp=46.8 chamber_heater: target=0 temp=0.0 pwm=0.000 heater_bed: target=0 temp=0.0 pwm=0.000 sysload=1.22 cputime=12.339 memavail=1683268 print_time=5.195 buffer_time=0.242 print_stall=0 extruder: target=0 temp=0.0 pwm=0.000
webhooks: registering remote method 'shutdown_machine' for connection id: 281473401868912
webhooks: registering remote method 'reboot_machine' for connection id: 281473401868912
webhooks: registering remote method 'pause_job_queue' for connection id: 281473401868912
webhooks: registering remote method 'start_job_queue' for connection id: 281473401868912
Stats 15491.1: gcodein=0  mcu: mcu_awake=0.032 mcu_task_avg=0.000079 mcu_task_stddev=0.000210 bytes_write=5639 bytes_read=6591 bytes_retransmit=9 bytes_invalid=0 send_seq=277 receive_seq=277 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71997139  orange_pi: temp=46.3 chamber_heater: target=0 temp=25.8 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.22 cputime=12.384 memavail=1683072 print_time=5.195 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 15492.1: gcodein=0  mcu: mcu_awake=0.032 mcu_task_avg=0.000079 mcu_task_stddev=0.000210 bytes_write=5645 bytes_read=6757 bytes_retransmit=9 bytes_invalid=0 send_seq=278 receive_seq=278 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71997924  orange_pi: temp=46.3 chamber_heater: target=0 temp=25.9 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.22 cputime=12.425 memavail=1682832 print_time=5.195 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15493.1: gcodein=0  mcu: mcu_awake=0.032 mcu_task_avg=0.000079 mcu_task_stddev=0.000210 bytes_write=5665 bytes_read=6928 bytes_retransmit=9 bytes_invalid=0 send_seq=280 receive_seq=280 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998101  orange_pi: temp=45.8 chamber_heater: target=0 temp=25.9 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.20 cputime=12.446 memavail=1682580 print_time=5.195 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15494.1: gcodein=0  mcu: mcu_awake=0.032 mcu_task_avg=0.000079 mcu_task_stddev=0.000210 bytes_write=5671 bytes_read=7094 bytes_retransmit=9 bytes_invalid=0 send_seq=281 receive_seq=281 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998117  orange_pi: temp=45.6 chamber_heater: target=0 temp=25.8 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.20 cputime=12.468 memavail=1682580 print_time=5.195 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 15495.1: gcodein=0  mcu: mcu_awake=0.032 mcu_task_avg=0.000079 mcu_task_stddev=0.000210 bytes_write=5691 bytes_read=7265 bytes_retransmit=9 bytes_invalid=0 send_seq=283 receive_seq=283 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998153  orange_pi: temp=45.5 chamber_heater: target=0 temp=25.9 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.20 cputime=12.490 memavail=1682580 print_time=5.195 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 15496.1: gcodein=0  mcu: mcu_awake=0.026 mcu_task_avg=0.000156 mcu_task_stddev=0.000319 bytes_write=5711 bytes_read=7453 bytes_retransmit=9 bytes_invalid=0 send_seq=285 receive_seq=285 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998152  orange_pi: temp=45.7 chamber_heater: target=0 temp=26.0 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.20 cputime=12.512 memavail=1682832 print_time=5.195 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15497.1: gcodein=0  mcu: mcu_awake=0.026 mcu_task_avg=0.000156 mcu_task_stddev=0.000319 bytes_write=5731 bytes_read=7624 bytes_retransmit=9 bytes_invalid=0 send_seq=287 receive_seq=287 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998165  orange_pi: temp=45.4 chamber_heater: target=0 temp=25.9 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.20 cputime=12.533 memavail=1683864 print_time=5.195 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
webhooks client 281473401868912: Disconnected
Stats 15498.1: gcodein=0  mcu: mcu_awake=0.026 mcu_task_avg=0.000156 mcu_task_stddev=0.000319 bytes_write=5751 bytes_read=7795 bytes_retransmit=9 bytes_invalid=0 send_seq=289 receive_seq=289 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998201  orange_pi: temp=45.4 chamber_heater: target=0 temp=26.0 pwm=0.000 heater_bed: target=0 temp=24.7 pwm=0.000 sysload=1.18 cputime=12.554 memavail=1683884 print_time=5.195 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 15499.1: gcodein=0  mcu: mcu_awake=0.026 mcu_task_avg=0.000156 mcu_task_stddev=0.000319 bytes_write=5757 bytes_read=7961 bytes_retransmit=9 bytes_invalid=0 send_seq=290 receive_seq=290 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998258  orange_pi: temp=47.8 chamber_heater: target=0 temp=26.2 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.18 cputime=12.570 memavail=1712084 print_time=5.195 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15500.1: gcodein=0  mcu: mcu_awake=0.026 mcu_task_avg=0.000156 mcu_task_stddev=0.000319 bytes_write=5796 bytes_read=8142 bytes_retransmit=9 bytes_invalid=0 send_seq=294 receive_seq=294 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998273  orange_pi: temp=50.8 chamber_heater: target=0 temp=26.0 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.18 cputime=12.586 memavail=1699024 print_time=5.195 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15501.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000022 bytes_write=5802 bytes_read=8323 bytes_retransmit=9 bytes_invalid=0 send_seq=295 receive_seq=295 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998298  orange_pi: temp=50.1 chamber_heater: target=0 temp=25.9 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.18 cputime=12.601 memavail=1684740 print_time=5.195 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
webhooks client 281473401874528: New connection
webhooks client 281473401874528: Client info {'program': 'Moonraker', 'version': 'v0.9.3-4-ga4604e3'}
Stats 15502.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000022 bytes_write=5808 bytes_read=8489 bytes_retransmit=9 bytes_invalid=0 send_seq=296 receive_seq=296 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998350  orange_pi: temp=55.2 chamber_heater: target=0 temp=25.9 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.18 cputime=12.625 memavail=1685468 print_time=5.195 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
webhooks: registering remote method 'shutdown_machine' for connection id: 281473401874528
webhooks: registering remote method 'reboot_machine' for connection id: 281473401874528
webhooks: registering remote method 'pause_job_queue' for connection id: 281473401874528
webhooks: registering remote method 'start_job_queue' for connection id: 281473401874528
Stats 15503.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000022 bytes_write=5814 bytes_read=8655 bytes_retransmit=9 bytes_invalid=0 send_seq=297 receive_seq=297 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998348  orange_pi: temp=48.7 chamber_heater: target=0 temp=26.1 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.33 cputime=12.695 memavail=1686968 print_time=5.195 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15504.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000022 bytes_write=5820 bytes_read=8821 bytes_retransmit=9 bytes_invalid=0 send_seq=298 receive_seq=298 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998335  orange_pi: temp=46.6 chamber_heater: target=0 temp=26.0 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.33 cputime=12.723 memavail=1687548 print_time=5.195 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 15505.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000022 bytes_write=5826 bytes_read=8987 bytes_retransmit=9 bytes_invalid=0 send_seq=299 receive_seq=299 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998338  orange_pi: temp=46.4 chamber_heater: target=0 temp=26.2 pwm=0.000 heater_bed: target=0 temp=24.3 pwm=0.000 sysload=1.33 cputime=12.744 memavail=1687548 print_time=5.195 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15506.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000016 bytes_write=5846 bytes_read=9172 bytes_retransmit=9 bytes_invalid=0 send_seq=301 receive_seq=301 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998325  orange_pi: temp=45.9 chamber_heater: target=0 temp=25.9 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.33 cputime=12.766 memavail=1687048 print_time=5.195 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15507.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000016 bytes_write=5885 bytes_read=9353 bytes_retransmit=9 bytes_invalid=0 send_seq=305 receive_seq=305 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998316  orange_pi: temp=45.8 chamber_heater: target=0 temp=26.1 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.33 cputime=12.788 memavail=1686796 print_time=5.195 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15508.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000016 bytes_write=5905 bytes_read=9524 bytes_retransmit=9 bytes_invalid=0 send_seq=307 receive_seq=307 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998317  orange_pi: temp=45.6 chamber_heater: target=0 temp=26.1 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.30 cputime=12.809 memavail=1686796 print_time=5.195 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15509.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000016 bytes_write=5911 bytes_read=9690 bytes_retransmit=9 bytes_invalid=0 send_seq=308 receive_seq=308 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998316  orange_pi: temp=45.9 chamber_heater: target=0 temp=26.1 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.30 cputime=12.830 memavail=1686796 print_time=5.195 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 15510.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000016 bytes_write=5917 bytes_read=9856 bytes_retransmit=9 bytes_invalid=0 send_seq=309 receive_seq=309 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998316  orange_pi: temp=45.7 chamber_heater: target=0 temp=26.1 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.30 cputime=12.851 memavail=1687068 print_time=5.195 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15511.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000019 bytes_write=5923 bytes_read=10037 bytes_retransmit=9 bytes_invalid=0 send_seq=310 receive_seq=310 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998317  orange_pi: temp=45.7 chamber_heater: target=0 temp=25.9 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.30 cputime=12.872 memavail=1686832 print_time=5.195 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15512.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000019 bytes_write=5929 bytes_read=10203 bytes_retransmit=9 bytes_invalid=0 send_seq=311 receive_seq=311 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998327  orange_pi: temp=45.7 chamber_heater: target=0 temp=26.1 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.30 cputime=12.894 memavail=1686864 print_time=5.195 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15513.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000019 bytes_write=5935 bytes_read=10369 bytes_retransmit=9 bytes_invalid=0 send_seq=312 receive_seq=312 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998327  orange_pi: temp=45.7 chamber_heater: target=0 temp=26.1 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.28 cputime=12.915 memavail=1687444 print_time=5.195 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15514.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000019 bytes_write=5941 bytes_read=10535 bytes_retransmit=9 bytes_invalid=0 send_seq=313 receive_seq=313 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998319  orange_pi: temp=45.8 chamber_heater: target=0 temp=26.0 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.28 cputime=12.936 memavail=1687444 print_time=5.195 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15515.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000019 bytes_write=5947 bytes_read=10701 bytes_retransmit=9 bytes_invalid=0 send_seq=314 receive_seq=314 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998318  orange_pi: temp=45.7 chamber_heater: target=0 temp=25.9 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.28 cputime=12.957 memavail=1687720 print_time=5.195 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15516.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5953 bytes_read=10881 bytes_retransmit=9 bytes_invalid=0 send_seq=315 receive_seq=315 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998314  orange_pi: temp=46.5 chamber_heater: target=0 temp=25.8 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.28 cputime=12.978 memavail=1687756 print_time=5.195 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15517.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5959 bytes_read=11062 bytes_retransmit=9 bytes_invalid=0 send_seq=316 receive_seq=316 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998310  orange_pi: temp=45.8 chamber_heater: target=0 temp=25.8 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.28 cputime=12.998 memavail=1687764 print_time=5.195 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 15518.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5965 bytes_read=11213 bytes_retransmit=9 bytes_invalid=0 send_seq=317 receive_seq=317 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998312  orange_pi: temp=45.6 chamber_heater: target=0 temp=25.8 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.26 cputime=13.019 memavail=1687544 print_time=5.195 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15519.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5971 bytes_read=11379 bytes_retransmit=9 bytes_invalid=0 send_seq=318 receive_seq=318 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998314  orange_pi: temp=45.5 chamber_heater: target=0 temp=25.7 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.26 cputime=13.040 memavail=1687800 print_time=5.195 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15520.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5977 bytes_read=11560 bytes_retransmit=9 bytes_invalid=0 send_seq=319 receive_seq=319 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998311  orange_pi: temp=45.8 chamber_heater: target=0 temp=25.7 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.26 cputime=13.061 memavail=1688072 print_time=5.195 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15521.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5989 bytes_read=11741 bytes_retransmit=9 bytes_invalid=0 send_seq=321 receive_seq=321 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998313  orange_pi: temp=45.8 chamber_heater: target=0 temp=25.6 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.26 cputime=13.083 memavail=1688096 print_time=5.195 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 15522.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=6009 bytes_read=11912 bytes_retransmit=9 bytes_invalid=0 send_seq=323 receive_seq=323 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998314  orange_pi: temp=46.0 chamber_heater: target=0 temp=25.8 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.26 cputime=13.105 memavail=1687660 print_time=5.195 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 15523.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=6048 bytes_read=12108 bytes_retransmit=9 bytes_invalid=0 send_seq=327 receive_seq=327 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998313  orange_pi: temp=46.6 chamber_heater: target=0 temp=25.7 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.24 cputime=13.127 memavail=1688432 print_time=5.195 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15524.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=6068 bytes_read=12264 bytes_retransmit=9 bytes_invalid=0 send_seq=329 receive_seq=329 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998313  orange_pi: temp=45.9 chamber_heater: target=0 temp=25.5 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.24 cputime=13.150 memavail=1688432 print_time=5.195 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 15525.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=6074 bytes_read=12430 bytes_retransmit=9 bytes_invalid=0 send_seq=330 receive_seq=330 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998311  orange_pi: temp=46.1 chamber_heater: target=0 temp=25.5 pwm=0.000 heater_bed: target=0 temp=24.7 pwm=0.000 sysload=1.24 cputime=13.170 memavail=1688180 print_time=5.195 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.2 pwm=0.000
Stats 15526.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000021 bytes_write=6080 bytes_read=12626 bytes_retransmit=9 bytes_invalid=0 send_seq=331 receive_seq=331 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998309  orange_pi: temp=45.9 chamber_heater: target=0 temp=25.6 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.24 cputime=13.191 memavail=1687952 print_time=5.195 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15527.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000021 bytes_write=6086 bytes_read=12777 bytes_retransmit=9 bytes_invalid=0 send_seq=332 receive_seq=332 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998308  orange_pi: temp=46.1 chamber_heater: target=0 temp=25.6 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.24 cputime=13.212 memavail=1687952 print_time=5.195 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15528.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000021 bytes_write=6092 bytes_read=12943 bytes_retransmit=9 bytes_invalid=0 send_seq=333 receive_seq=333 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998308  orange_pi: temp=45.7 chamber_heater: target=0 temp=25.6 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.22 cputime=13.233 memavail=1687700 print_time=5.195 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.2 pwm=0.000
Stats 15529.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000021 bytes_write=6098 bytes_read=13124 bytes_retransmit=9 bytes_invalid=0 send_seq=334 receive_seq=334 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998310  orange_pi: temp=45.4 chamber_heater: target=0 temp=25.7 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.22 cputime=13.255 memavail=1687448 print_time=5.195 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15530.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000021 bytes_write=6104 bytes_read=13275 bytes_retransmit=9 bytes_invalid=0 send_seq=335 receive_seq=335 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998310  orange_pi: temp=46.0 chamber_heater: target=0 temp=25.5 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.22 cputime=13.275 memavail=1687724 print_time=5.195 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 15531.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=6110 bytes_read=13455 bytes_retransmit=9 bytes_invalid=0 send_seq=336 receive_seq=336 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998310  orange_pi: temp=45.6 chamber_heater: target=0 temp=25.5 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.22 cputime=13.296 memavail=1687996 print_time=5.195 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 15532.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=6116 bytes_read=13636 bytes_retransmit=9 bytes_invalid=0 send_seq=337 receive_seq=337 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998311  orange_pi: temp=45.8 chamber_heater: target=0 temp=25.4 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.22 cputime=13.317 memavail=1687296 print_time=5.195 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 15533.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=6122 bytes_read=13787 bytes_retransmit=9 bytes_invalid=0 send_seq=338 receive_seq=338 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998312  orange_pi: temp=45.4 chamber_heater: target=0 temp=25.7 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.20 cputime=13.336 memavail=1687296 print_time=5.195 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15534.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=6128 bytes_read=13953 bytes_retransmit=9 bytes_invalid=0 send_seq=339 receive_seq=339 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998313  orange_pi: temp=45.9 chamber_heater: target=0 temp=25.6 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.20 cputime=13.358 memavail=1686792 print_time=5.195 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15535.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=6134 bytes_read=14134 bytes_retransmit=9 bytes_invalid=0 send_seq=340 receive_seq=340 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998315  orange_pi: temp=45.9 chamber_heater: target=0 temp=25.4 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.20 cputime=13.378 memavail=1686540 print_time=5.195 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15536.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=6140 bytes_read=14299 bytes_retransmit=9 bytes_invalid=0 send_seq=341 receive_seq=341 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998317  orange_pi: temp=45.3 chamber_heater: target=0 temp=25.4 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.20 cputime=13.399 memavail=1686552 print_time=5.195 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15537.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=6146 bytes_read=14465 bytes_retransmit=9 bytes_invalid=0 send_seq=342 receive_seq=342 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998316  orange_pi: temp=45.6 chamber_heater: target=0 temp=25.4 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.20 cputime=13.420 memavail=1686556 print_time=5.195 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15538.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=6152 bytes_read=14646 bytes_retransmit=9 bytes_invalid=0 send_seq=343 receive_seq=343 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998315  orange_pi: temp=45.7 chamber_heater: target=0 temp=25.4 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.18 cputime=13.442 memavail=1687572 print_time=5.195 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 15539.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=6158 bytes_read=14797 bytes_retransmit=9 bytes_invalid=0 send_seq=344 receive_seq=344 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998314  orange_pi: temp=45.6 chamber_heater: target=0 temp=25.4 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.18 cputime=13.463 memavail=1688096 print_time=5.195 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15540.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=6164 bytes_read=14963 bytes_retransmit=9 bytes_invalid=0 send_seq=345 receive_seq=345 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998314  orange_pi: temp=45.8 chamber_heater: target=0 temp=25.5 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.18 cputime=13.483 memavail=1688872 print_time=5.195 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15541.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=6170 bytes_read=15158 bytes_retransmit=9 bytes_invalid=0 send_seq=346 receive_seq=346 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998313  orange_pi: temp=45.4 chamber_heater: target=0 temp=25.5 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.18 cputime=13.505 memavail=1689144 print_time=5.195 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15542.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=6176 bytes_read=15309 bytes_retransmit=9 bytes_invalid=0 send_seq=347 receive_seq=347 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998313  orange_pi: temp=45.3 chamber_heater: target=0 temp=25.4 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.18 cputime=13.526 memavail=1689668 print_time=5.195 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15543.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=6182 bytes_read=15475 bytes_retransmit=9 bytes_invalid=0 send_seq=348 receive_seq=348 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998314  orange_pi: temp=45.5 chamber_heater: target=0 temp=25.5 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.25 cputime=13.546 memavail=1689940 print_time=5.195 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 15544.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=6216 bytes_read=15660 bytes_retransmit=9 bytes_invalid=0 send_seq=351 receive_seq=351 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998313  orange_pi: temp=45.4 chamber_heater: target=0 temp=25.3 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.25 cputime=13.568 memavail=1689688 print_time=5.195 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15545.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=6236 bytes_read=15806 bytes_retransmit=9 bytes_invalid=0 send_seq=353 receive_seq=353 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998313  orange_pi: temp=45.1 chamber_heater: target=0 temp=25.5 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.25 cputime=13.589 memavail=1689688 print_time=5.195 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15546.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000023 bytes_write=6256 bytes_read=15981 bytes_retransmit=9 bytes_invalid=0 send_seq=355 receive_seq=355 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998314  orange_pi: temp=45.4 chamber_heater: target=0 temp=25.4 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.25 cputime=13.612 memavail=1689440 print_time=5.195 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15547.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000023 bytes_write=6262 bytes_read=16150 bytes_retransmit=9 bytes_invalid=0 send_seq=356 receive_seq=356 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998314  orange_pi: temp=45.5 chamber_heater: target=0 temp=25.3 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.25 cputime=13.633 memavail=1689188 print_time=5.195 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15548.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000023 bytes_write=6282 bytes_read=16305 bytes_retransmit=9 bytes_invalid=0 send_seq=358 receive_seq=358 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998312  orange_pi: temp=45.6 chamber_heater: target=0 temp=25.2 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.23 cputime=13.655 memavail=1689208 print_time=5.195 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 15549.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000023 bytes_write=6288 bytes_read=16471 bytes_retransmit=9 bytes_invalid=0 send_seq=359 receive_seq=359 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998314  orange_pi: temp=45.6 chamber_heater: target=0 temp=25.3 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.23 cputime=13.677 memavail=1689460 print_time=5.195 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 15550.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000023 bytes_write=6308 bytes_read=16657 bytes_retransmit=9 bytes_invalid=0 send_seq=361 receive_seq=361 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998316  orange_pi: temp=45.0 chamber_heater: target=0 temp=25.3 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.23 cputime=13.699 memavail=1689732 print_time=5.195 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Starting Klippy...
Args: ['/home/klipper/klipper/klippy/klippy.py', '/home/klipper/printer_data/config/printer.cfg', '-I', '/home/klipper/printer_data/comms/klippy.serial', '-l', '/home/klipper/printer_data/logs/klippy.log', '-a', '/home/klipper/printer_data/comms/klippy.sock']
Git version: 'v0.12.0-404-g80d185c94-dirty'
Untracked files: klippy/extras/gcode_shell_command.py
Branch: master
Remote: origin
Tracked URL: https://github.com/Klipper3d/klipper
CPU: 4 core ?
Python: '3.10.12 (main, Nov  6 2024, 20:22:13) [GCC 11.4.0]'
Start printer at Wed Dec 25 19:54:05 2024 (1735145645.1 15856.1)
===== Config file =====
[virtual_sdcard]
path = /home/klipper/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[pause_resume]

[display_status]

[respond]

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = BASE_CANCEL_PRINT
gcode = 
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	TURN_OFF_HEATERS
	M107
	G91
	G1 E-{E} F1500
	G90
	CLEAR_PAUSE
	SDCARD_RESET_FILE
	BASE_CANCEL_PRINT
	PARK

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = BASE_PAUSE
gcode = 
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	SAVE_GCODE_STATE NAME=PAUSE_STATE
	BASE_PAUSE
	G91
	G1 E-{E} F1500
	G90
	PARK

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = BASE_RESUME
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	G91
	G1 E{E} F1500
	G90
	RESTORE_GCODE_STATE NAME=PAUSE_STATE MOVE=1
	BASE_RESUME

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[gcode_macro _CLIENT_LINEAR_MOVE]
description = Linear move with save and restore of the gcode state
gcode = 
	{% set x_move = "X" ~ params.X if params.X is defined else "" %}
	{% set y_move = "Y" ~ params.Y if params.Y is defined else "" %}
	{% set z_move = "Z" ~ params.Z if params.Z is defined else "" %}
	{% set e_move = "E" ~ params.E if params.E is defined else "" %}
	{% set rate = "F" ~ params.F if params.F is defined else "" %}
	{% set ABSOLUTE = params.ABSOLUTE | default(0) | int != 0 %}
	{% set ABSOLUTE_E = params.ABSOLUTE_E | default(0) | int != 0 %}
	SAVE_GCODE_STATE NAME=_client_movement
	{% if x_move or y_move or z_move %}
	G9{ 0 if ABSOLUTE else 1 }
	{% endif %}
	{% if e_move %}
	M8{ 2 if ABSOLUTE_E else 3 }
	{% endif %}
	G1 { x_move } { y_move } { z_move } { e_move } { rate }
	RESTORE_GCODE_STATE NAME=_client_movement

[gcode_macro list_sensors]
gcode = 
	{ action_respond_info(printer.heaters.available_heaters | join(', ')) }
	{ action_respond_info(printer.heaters.available_sensors | join(', ')) }

[gcode_macro Power_OFF]
gcode = SET_PIN PIN=Power VALUE=0

[gcode_macro _POWER_OFF_PRINTER]
gcode = SET_PIN PIN=Power VALUE=0

[gcode_macro ACTIVATE_POWER_OFF]
gcode = 
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK_ACT DURATION=60

[gcode_macro DEACTIVATE_POWER_OFF]
gcode = 
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK_ACT DURATION=0

[delayed_gcode POWER_OFF_PRINTER_CHECK_ACT]
gcode = 
	{% if printer.idle_timeout.state == "Idle" or printer.idle_timeout.state == "Ready" %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=30
	{% else %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK_ACT DURATION=60
	{% endif %}

[delayed_gcode POWER_OFF_PRINTER_CHECK]
gcode = 
	{% if printer.idle_timeout.state == "Idle" or printer.idle_timeout.state == "Ready" %}
	{% if printer.extruder.temperature < 50.0 and printer.heater_bed.temperature < 50.0 %}
	{% if printer.extruder.target == 0.0 and printer.heater_bed.target == 0.0 %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=0
	_POWER_OFF_PRINTER
	{% else %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=2
	{% endif %}
	{% else %}
	{% if printer.idle_timeout.state == "Printing" %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=0
	{% else %}
	{% if printer.extruder.target == 0.0 and printer.heater_bed.target == 0.0 %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=2
	{% else %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=0
	{% endif %}
	{% endif %}
	{% endif %}
	{% endif %}

[gcode_macro M141]
gcode = SET_HEATER_TEMPERATURE HEATER=chamber_heater TARGET={params.S|default(0)}

[gcode_macro M80]
gcode = SET_PIN PIN=Power  VALUE=1

[gcode_macro M81]
gcode = 
	
	SET_PIN PIN=Power VALUE=0

[gcode_macro M486]
gcode = 
	
	
	
	
	
	
	
	
	
	
	
	{% if 'exclude_object' not in printer %}
	{action_raise_error("[exclude_object] is not enabled")}
	{% endif %}
	
	{% if 'T' in params %}
	EXCLUDE_OBJECT RESET=1
	
	{% for i in range(params.T | int) %}
	EXCLUDE_OBJECT_DEFINE NAME={i}
	{% endfor %}
	{% endif %}
	
	{% if 'C' in params %}
	EXCLUDE_OBJECT CURRENT=1
	{% endif %}
	
	{% if 'P' in params %}
	EXCLUDE_OBJECT NAME={params.P}
	{% endif %}
	
	{% if 'S' in params %}
	{% if params.S == '-1' %}
	{% if printer.exclude_object.current_object %}
	EXCLUDE_OBJECT_END NAME={printer.exclude_object.current_object}
	{% endif %}
	{% else %}
	EXCLUDE_OBJECT_START NAME={params.S}
	{% endif %}
	{% endif %}
	
	{% if 'U' in params %}
	EXCLUDE_OBJECT RESET=1 NAME={params.U}
	{% endif %}

[gcode_macro M190]
rename_existing = M190.1
gcode = 
	{% if printer["gcode_macro status_heating"] != null %}
	status_heating
	{% endif %}
	M190.1 { rawparams }
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro _CHOME]
gcode = 
	{% if printer["gcode_macro status_homing"] != null %}
	status_homing
	{% endif %}
	{% if printer.toolhead.homed_axes != "xyz" %}
	G28
	{% endif %}
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro M109]
rename_existing = M109.1
gcode = 
	{% if printer["gcode_macro status_heating"] != null %}
	status_heating
	{% endif %}
	M109.1 { rawparams }
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro _MOVE_AWAY]
gcode = 
	{% set th = printer.toolhead %}
	{% set x_safe = th.position.x + 20 * (1 if th.axis_maximum.x - th.position.x > 20 else -1) %}
	{% set y_safe = th.position.y + 20 * (1 if th.axis_maximum.y - th.position.y > 20 else -1) %}
	{% set z_safe = [th.position.z + 2, th.axis_maximum.z]|min %}
	
	G90
	G0 X{x_safe} Y{y_safe} Z{z_safe} F20000

[gcode_macro PARK_CENTER_REAR]
gcode = 
	{% if printer["gcode_macro status_busy"] != null %}
	status_busy
	{% endif %}
	{% set th = printer.toolhead %}
	{% set x_safe = th.position.x + 20 * (1 if th.axis_maximum.x - th.position.x > 20 else -1) %}
	{% set y_safe = th.position.y + 20 * (1 if th.axis_maximum.y - th.position.y > 20 else -1) %}
	
	G0 X{th.axis_maximum.x//2} Y{th.axis_maximum.y - 2} F3600
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro START_PRINT]
variable_retract = 15
gcode = 
	{% set chamber_temp = params.CHAMBER_TEMP|default(0)|float %}
	{% set extruder_temp = params.EXTRUDER_TEMP|default(210)|float %}
	{% set bed_temp = params.BED_TEMP|default(60)|float %}
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	CLEAR_PAUSE
	G28
	Smart_Park
	M220 S100
	M221 S100
	SET_HEATER_TEMPERATURE HEATER=chamber_heater TARGET={chamber_temp}
	SET_HEATER_TEMPERATURE HEATER=heater_bed TARGET={bed_temp}
	TEMPERATURE_WAIT SENSOR=heater_bed MINIMUM={bed_temp * 0.75}
	SET_HEATER_TEMPERATURE HEATER=extruder TARGET={extruder_temp}
	G90
	M82
	TEMPERATURE_WAIT SENSOR=heater_bed MINIMUM={bed_temp}
	TEMPERATURE_WAIT SENSOR=extruder MINIMUM={extruder_temp}
	
	G1 E-15 F3600
	
	G28
	BED_MESH_CALIBRATE
	PRIME_LINE

[gcode_macro pid_soplo]
gcode = 
	PID_CALIBRATE HEATER=extruder TARGET=250

[gcode_macro pid_bed]
gcode = 
	PID_CALIBRATE HEATER=heater_bed TARGET=105

[gcode_macro BED]
gcode = 
	PROBE_CALIBRATE

[gcode_macro END_PRINT]
gcode = 
	
	{% set max_x = printer.configfile.config["stepper_x"]["position_max"]|float %}
	{% set max_y = printer.configfile.config["stepper_y"]["position_max"]|float %}
	{% set max_z = printer.configfile.config["stepper_z"]["position_max"]|float %}
	
	
	{% if printer.toolhead.position.x < (max_x - 20) %}
	{% set x_safe = 20.0 %}
	{% else %}
	{% set x_safe = -20.0 %}
	{% endif %}
	
	{% if printer.toolhead.position.y < (max_y - 20) %}
	{% set y_safe = 20.0 %}
	{% else %}
	{% set y_safe = -20.0 %}
	{% endif %}
	
	{% if printer.toolhead.position.z < (max_z - 2) %}
	{% set z_safe = 2.0 %}
	{% else %}
	{% set z_safe = max_z - printer.toolhead.position.z %}
	{% endif %}
	
	
	M400
	G92 E0
	G1 E-15 F3600
	G91
	G0 Z{z_safe} F3600
	G0 X{x_safe} Y{y_safe} F20000
	
	
	M104 S0
	M104 S0
	M140 S0
	M106 S0
	G90
	G0 X{max_x / 2} Y{max_y} F3600
	
	SONG_CRAB_RAVE
	
	
	
	M117 Finished!
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=30

[gcode_macro M300]
gcode = 
	
	{% set S = params.S|default(1000)|int %}
	
	{% set P = params.P|default(100)|int %}
	
	
	{% set V = params.V|default(99)|int %}
	SET_PIN PIN=beeper VALUE={0.1 * (V / 100) if S > 0 else 1} CYCLE_TIME={ 1.0 / S if S > 0 else 1 }
	G4 P{P}
	SET_PIN PIN=beeper VALUE=0 CYCLE_TIME={ 0.001 }
description = 
	"Plays a beep sound.
	@param {int} [S=1000] - Frequency in Hz
	@param {int} [P=100] - Duration in ms
	@param {int} [V=99] - Volume in percent"

[gcode_macro PRIME_LINE]
gcode = 
	{% set feedrate = params.F|default(10)|float * 60 %}
	{% set length = 100.0 %}
	{% set width = printer.configfile.settings.extruder.nozzle_diameter|float %}
	{% set height = ( (width / 0.04)|int - (width / 0.04 / 4)|int )|float * 0.04 %}
	
	{% set extrude = length * width * height * 1.5 %}
	SAVE_GCODE_STATE NAME=PRIME_LINE_STATE
	SET_IDLE_TIMEOUT TIMEOUT=7200
	{% if 'Y' in params %}
	{% set x_start = 1.0 %}
	{% set y_start = (printer.toolhead.axis_maximum.y|float - 100) / 2 %}
	G0 X{x_start} Y{y_start} F5000
	G0 Z{height} F1500
	G91
	
	G1 E8 F300
	
	
	G1 Y100 E{extrude} F{feedrate}
	G0 X{width} F5000
	G1 Y-100 E{extrude} F{feedrate}
	{% else %}
	{% set x_start = (printer.toolhead.axis_maximum.x|float - 100) / 2 %}
	{% set y_start = 1.0 %}
	G0 X{x_start} Y{y_start} F5000
	G0 Z{height} F1500
	G91
	
	G1 E8 F300
	
	
	G1 X100 E{extrude} F{feedrate}
	G0 Y{width} F5000
	G1 X-100 E{extrude} F{feedrate}
	{% endif %}
	RESTORE_GCODE_STATE NAME=PRIME_LINE_STATE

[gcode_macro VINT]
gcode = 
	SCREWS_TILT_CALCULATE

[gcode_macro LOW_TEMP_CHECK]
gcode = 
	{% set extruder_temp = params.T|default(240)|float %}
	{% if printer.extruder.target > extruder_temp %}
	{% set extruder_temp = printer.extruder.target %}
	{% endif %}
	{% if printer.extruder.temperature < extruder_temp %}
	M118 Heating to {extruder_temp}
	SET_HEATER_TEMPERATURE HEATER=extruder TARGET={extruder_temp}
	TEMPERATURE_WAIT SENSOR=extruder MINIMUM={extruder_temp}
	{% endif %}

[gcode_macro M76]
gcode = 
	PAUSE

[gcode_macro M601]
gcode = 
	PAUSE

[gcode_macro G27]
gcode = 
	PARK

[gcode_macro M125]
gcode = 
	PARK

[gcode_macro M600]
gcode = 
	PAUSE

[gcode_macro M701]
gcode = 
	FILAMENT_LOAD

[gcode_macro M702]
gcode = 
	FILAMENT_UNLOAD

[gcode_macro M500]
gcode = 
	SAVE_CONFIG

[gcode_macro PARK]
gcode = 
	{% set x_park = params.X|default(0)|float %}
	{% set y_park = params.Y|default(0)|float %}
	{% set z_park = params.Z|default(10)|float + printer.toolhead.position.z|float %}
	{% set x_max = printer.toolhead.axis_maximum.x|float %}
	{% set y_max = printer.toolhead.axis_maximum.y|float %}
	{% set z_max = printer.toolhead.axis_maximum.z|float %}
	{% if x_park > x_max %}
	{% set x_park = x_max %}
	{% endif %}
	{% if y_park > y_max %}
	{% set y_park = y_max %}
	{% endif %}
	{% if z_park > z_max %}
	{% set z_park = z_max %}
	{% endif %}
	SAVE_GCODE_STATE NAME=PARK_STATE
	G90
	G1 Z{z_park} F1500
	G1 X{x_park} Y{y_park} F5000
	RESTORE_GCODE_STATE name=PARK_STATE

[gcode_macro START_DRYER]
description = Start the heated bed filament dryer.
gcode = 
	{% set ChamberTemperature = params.CHAMBER | default(65.0) | float %}
	{% set BedTemperature = params.TEMPERATURE | default(0.0) | float %}
	{% set DryTime = params.TIME | default(14400) | int %}
	M140 S{BedTemperature}
	M141 S{ChamberTemperature}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=time_remaining VALUE={DryTime}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=bed_temperature VALUE={BedTemperature}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=chamber_temperature VALUE={ChamberTemperature}
	UPDATE_DELAYED_GCODE ID=DRYER_TIMER DURATION=1

[gcode_macro STOP_DRYER]
gcode = 
	M140 S0
	M141 S0
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=time_remaining VALUE=0
	UPDATE_DELAYED_GCODE ID=DRYER_TIMER DURATION=0
	M117 Drying Stopped

[gcode_macro DRYER_STATUS]
variable_time_remaining = 0
variable_bed_temperature = 0
variable_chamber_temperature = 0
gcode = 
	{% if time_remaining > 0 %}
	M140 S{bed_temperature}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=time_remaining VALUE={time_remaining - 1}
	M117 Drying {time_remaining}
	{% else %}
	STOP_DRYER
	{% endif %}

[delayed_gcode DRYER_TIMER]
gcode = 
	UPDATE_DELAYED_GCODE ID=DRYER_TIMER DURATION=1
	DRYER_STATUS

[gcode_macro DRY_tpu]
gcode = 
	START_DRYER TEMPERATURE=0 CHAMBER=50 TIME=18000

[gcode_macro DRY_PETG]
gcode = 
	START_DRYER TEMPERATURE=0  CHAMBER=65 TIME=18000

[gcode_macro DRY_ABS]
gcode = 
	{% set S = params.S|default(0.0)|float %}
	SET_PIN PIN=Laser VALUE={S / 255.0}

[gcode_macro M4]
gcode = 
	{% set S = params.S|default(0.0)|float %}
	SET_PIN PIN=Laser VALUE={S / 255.0}

[gcode_macro M5]
gcode = 
	SET_PIN PIN=Laser VALUE=0

[menu __main __control __toolonoff]
type = input
enable = {'pwm_tool Laser' in printer}
name = Fan: {'ON ' if menu.input else 'OFF'}
input = {printer['pwm_tool Laser'].value}
input_min = 0
input_max = 1
input_step = 1
gcode = 
	M3 S{255 if menu.input else 0}

[menu __main __control __toolspeed]
type = input
enable = {'pwm_tool Laser' in printer}
name = Laser speed: {'%3d' % (menu.input*100)}%
input = {printer['pwm_tool Laser'].value}
input_min = 0
input_max = 1
input_step = 0.01
gcode = 
	M3 S{'%d' % (menu.input*255)}

[gcode_macro NOTE]
description = 
	"Plays a specified note for a specified duration
	@param {string} [N=C5] - Note to play
	@param {int} [D=500] - Duration of note. There are currently some Klipper limitations to how short a note can be.
	@param {int} [V=99] - Volume in percent
	@param {bool} [S=true] - Whether or not to stop the note after duration"
gcode = 
	{% set notes = {
	'C0': 16.35,   'CS0': 17.32,   'D0': 18.35,   'DS0': 19.45,   'E0': 20.60,   'F0': 21.83,   'FS0': 23.12,   'G0': 24.50,   'GS0': 25.96,   'A0': 27.50,   'AS0': 29.14,   'B0': 30.87,
	'C1': 32.70,   'CS1': 34.65,   'D1': 36.71,   'DS1': 38.89,   'E1': 41.20,   'F1': 43.65,   'FS1': 46.25,   'G1': 49.00,   'GS1': 51.91,   'A1': 55.00,   'AS1': 58.27,   'B1': 61.74,
	'C2': 65.41,   'CS2': 69.30,   'D2': 73.42,   'DS2': 77.78,   'E2': 82.41,   'F2': 87.31,   'FS2': 92.50,   'G2': 98.00,   'GS2': 103.83,  'A2': 110.00,  'AS2': 116.54,  'B2': 123.47,
	'C3': 130.81,  'CS3': 138.59,  'D3': 146.83,  'DS3': 155.56,  'E3': 164.81,  'F3': 174.61,  'FS3': 185.00,  'G3': 196.00,  'GS3': 207.65,  'A3': 220.00,  'AS3': 233.08,  'B3': 246.94,
	'C4': 261.63,  'CS4': 277.18,  'D4': 293.66,  'DS4': 311.13,  'E4': 329.63,  'F4': 349.23,  'FS4': 369.99,  'G4': 392.00,  'GS4': 415.30,  'A4': 440.00,  'AS4': 466.16,  'B4': 493.88,
	'C5': 523.25,  'CS5': 554.37,  'D5': 587.33,  'DS5': 622.25,  'E5': 659.26,  'F5': 698.46,  'FS5': 739.99,  'G5': 783.99,  'GS5': 830.61,  'A5': 880.00,  'AS5': 932.33,  'B5': 987.77,
	'C6': 1046.50, 'CS6': 1108.73, 'D6': 1174.66, 'DS6': 1244.51, 'E6': 1318.51, 'F6': 1396.91, 'FS6': 1479.98, 'G6': 1567.98, 'GS6': 1661.22, 'A6': 1760.00, 'AS6': 1864.66, 'B6': 1975.53,
	'C7': 2093.00, 'CS7': 2217.46, 'D7': 2349.32, 'DS7': 2489.02, 'E7': 2637.02, 'F7': 2793.83, 'FS7': 2959.96, 'G7': 3135.96, 'GS7': 3322.44, 'A7': 3520.00, 'AS7': 3729.31, 'B7': 3951.07,
	'C8': 4186.01, 'CS8': 4434.92, 'D8': 4698.64, 'DS8': 4978.03, 'E8': 5274.04, 'F8': 5587.65, 'FS8': 5919.91, 'G8': 6271.93, 'GS8': 6644.88, 'A8': 7040.00, 'AS8': 7458.62, 'B8': 7902.13,
	} %}
	
	{% set note = params.N|default('C5')|string %}
	
	{% set dur = params.D|default(500)|int %}
	
	
	{% set volume = params.V|default(99)|int %}
	
	{% set stop = params.S|default('true')|string %}
	
	{% set freq = notes[note] %}
	
	SET_PIN PIN=beeper VALUE={0.1 * (volume / 100) if volume > 0 else 1} CYCLE_TIME={ 1.0 / freq }
	G4 P{dur}
	{% if stop|lower == 'true' %}
	SET_PIN PIN=beeper VALUE=0 CYCLE_TIME={ 0.001 }
	{% endif %}

[gcode_macro TONE_GEN]
description = "Used for the tone generator menu"
variable_tone_freq = 0.001093
gcode = 
	M117 {printer["gcode_macro TONE_GEN"].tone_freq}nothz

[gcode_macro SONG_STAR_WARS_MAIN_THEME]
description = "Plays the Star Wars main theme"
gcode = 
	NOTE N=D4 D=133
	NOTE N=D4 D=133
	NOTE N=D4 D=133
	NOTE N=G4 D=1000
	NOTE N=D5 D=1000
	
	NOTE N=C5 D=133
	NOTE N=B4 D=133
	NOTE N=A4 D=133
	NOTE N=G5 D=1000
	NOTE N=D5 D=500
	
	NOTE N=C5 D=133
	NOTE N=B4 D=133
	NOTE N=A4 D=133
	NOTE N=G5 D=1000
	NOTE N=D5 D=500
	
	NOTE N=C5 D=133
	NOTE N=B4 D=133
	NOTE N=C5 D=133
	NOTE N=A4 D=1000

[gcode_macro SONG_CRAB_RAVE]
description = "Plays Crab Rave"
gcode = 
	NOTE N=D6 D=150 V=30 S=1
	NOTE N=AS6 D=150 V=30 S=1
	NOTE N=G6 D=150 V=30 S=1
	NOTE N=G6 D=150 V=30 S=0
	NOTE N=D6 D=150 V=30 S=1
	NOTE N=D6 D=150 V=30 S=0
	NOTE N=A6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=0
	NOTE N=D6 D=150 V=30 S=1
	NOTE N=D6 D=150 V=30 S=0
	NOTE N=A6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=0
	NOTE N=C6 D=150 V=30 S=1
	NOTE N=C6 D=150 V=30 S=1
	NOTE N=E6 D=150 V=30 S=1
	NOTE N=E6 D=150 V=30 S=0
	NOTE N=F6 D=150 V=30 S=1
	SET_PIN PIN=beeper VALUE=0

[gcode_macro one]
description = "one"
gcode = 
	NOTE N=C6 D=600 V=30 S=1
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=G5 D=400 V=30 S=1
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=E6 D=400 V=30 S=1
	G4 P150
	NOTE N=G6 D=180 V=30 S=0
	NOTE N=F6 D=180 V=30 S=0
	NOTE N=E6 D=180 V=30 S=0
	NOTE N=D6 D=180 V=30 S=1
	NOTE N=C6 D=600 V=30 S=1
	
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=G5 D=400 V=30 S=1
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=C6 D=600 V=30 S=1
	SET_PIN PIN=beeper VALUE=0

[gcode_macro SONG_BOOMER]
description = "BOOMER"
gcode = 
	M300 P207 S659
	M300 P207 S784
	M300 P207 S494
	M300 P207 S494
	M300 P207 S392
	M300 P207 S494
	M300 P207 S494
	M300 P207 S330
	M300 P207 S784
	M300 P207 S659
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S988
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S659
	M300 P207 S784
	M300 P207 S494
	M300 P207 S494
	M300 P207 S392
	M300 P207 S494
	M300 P207 S494
	M300 P207 S330
	M300 P207 S784
	M300 P207 S659
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S988
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S659
	M300 P207 S784
	M300 P207 S494
	M300 P207 S494
	M300 P207 S392
	M300 P207 S494
	M300 P207 S494
	M300 P207 S330
	M300 P207 S784
	M300 P207 S659
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S988
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330

[gcode_macro GET_TIMELAPSE_SETUP]
description = Print the Timelapse setup
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% set output_txt = ["Timelapse Setup:"] %}
	{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}
	{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}
	{% if tl.park.enable %}
	{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}
	{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}
	{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}
	{% endif %}
	{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}
	{% if not tl.extruder.fw_retract %}
	{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}
	{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}
	{% endif %}
	{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}
	{action_respond_info(output_txt|join("\n"))}

[gcode_macro _SET_TIMELAPSE_SETUP]
description = Set user parameters for timelapse
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	
	{% set min = printer.toolhead.axis_minimum %}
	{% set max = printer.toolhead.axis_maximum %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	{% set park = {'min'   : {'x': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),
	'y': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},
	'max'   : {'x': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),
	'y': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},
	'center': {'x': (max.x-(max.x-min.x)/2)|round(3),
	'y': (max.y-(max.y-min.y)/2)|round(3)}} %}
	
	{% if params.ENABLE %}
	{% if params.ENABLE|lower is in ['true', 'false'] %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == 'true' else False}
	{% else %}
	{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.VERBOSE %}
	{% if params.VERBOSE|lower is in ['true', 'false'] %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == 'true' else False}
	{% else %}
	{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_X %}
	{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}
	{% set _dummy = tl.park.custom.update({'x':params.CUSTOM_POS_X|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_Y %}
	{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}
	{% set _dummy = tl.park.custom.update({'y':params.CUSTOM_POS_Y|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_DZ %}
	{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}
	{% set _dummy = tl.park.custom.update({'dz':params.CUSTOM_POS_DZ|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}
	{% endif %}
	{% endif %}
	{% if params.PARK_ENABLE %}
	{% if params.PARK_ENABLE|lower is in ['true', 'false'] %}
	{% set _dummy = tl.park.update({'enable':True if params.PARK_ENABLE|lower == 'true' else False}) %}
	{% else %}
	{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.PARK_POS %}
	{% if params.PARK_POS|lower is in ['center','front_left','front_right','back_left','back_right','custom','x_only','y_only'] %}
	{% set dic = {'center'      : {'x': park.center.x   , 'y': park.center.y   , 'dz': 1                },
	'front_left'  : {'x': park.min.x      , 'y': park.min.y      , 'dz': 0                },
	'front_right' : {'x': park.max.x      , 'y': park.min.y      , 'dz': 0                },
	'back_left'   : {'x': park.min.x      , 'y': park.max.y      , 'dz': 0                },
	'back_right'  : {'x': park.max.x      , 'y': park.max.y      , 'dz': 0                },
	'custom'      : {'x': tl.park.custom.x, 'y': tl.park.custom.y, 'dz': tl.park.custom.dz},
	'x_only'      : {'x': tl.park.custom.x, 'y': 'none'          , 'dz': tl.park.custom.dz},
	'y_only'      : {'x': 'none'          , 'y': tl.park.custom.y, 'dz': tl.park.custom.dz}} %}
	{% set _dummy = tl.park.update({'pos':params.PARK_POS|lower}) %}
	{% set _dummy = tl.park.update({'coord':dic[tl.park.pos]}) %}
	{% else %}
	{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"
	% params.PARK_POS|upper)}
	{% endif %}
	{% endif %}
	{% if params.PARK_TIME %}
	{% if params.PARK_TIME|float >= 0.0 %}
	{% set _dummy = tl.park.update({'time':params.PARK_TIME|float|round(3)}) %}
	{% else %}
	{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"
	{% if params.TRAVEL_SPEED %}
	{% if params.TRAVEL_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'travel':params.TRAVEL_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}
	{% endif %}
	{% endif %}
	{% if params.RETRACT_SPEED %}
	{% if params.RETRACT_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'retract':params.RETRACT_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}
	{% endif %}
	{% endif %}
	{% if params.EXTRUDE_SPEED %}
	{% if params.EXTRUDE_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'extrude':params.EXTRUDE_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"
	{% if params.EXTRUDE_DISTANCE %}
	{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}
	{% set _dummy = tl.extruder.update({'extrude':params.EXTRUDE_DISTANCE|float|round(3)}) %}
	{% else %}
	{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}
	{% endif %}
	{% endif %}
	{% if params.RETRACT_DISTANCE %}
	{% if params.RETRACT_DISTANCE|float >= 0.0 %}
	{% set _dummy = tl.extruder.update({'retract':params.RETRACT_DISTANCE|float|round(3)}) %}
	{% else %}
	{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}
	{% endif %}
	{% endif %}
	{% if params.FW_RETRACT %}
	{% if params.FW_RETRACT|lower is in ['true', 'false'] %}
	{% if 'firmware_retraction' in printer.configfile.settings %}
	{% set _dummy = tl.extruder.update({'fw_retract': True if params.FW_RETRACT|lower == 'true' else False}) %}
	{% else %}
	{% set _dummy = tl.extruder.update({'fw_retract':False}) %}
	{% if params.FW_RETRACT|capitalize == 'True' %}
	{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}
	{% endif %}
	{% endif %}
	{% else %}
	{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"
	{% if printer.configfile.settings['gcode_macro pause'] is defined %}
	{% set _dummy = tl.macro.update({'pause': printer.configfile.settings['gcode_macro pause'].rename_existing}) %}
	{% endif %}
	{% if printer.configfile.settings['gcode_macro resume'] is defined %}
	{% set _dummy = tl.macro.update({'resume': printer.configfile.settings['gcode_macro resume'].rename_existing}) %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"

[gcode_macro TIMELAPSE_TAKE_FRAME]
description = Take Timelapse shoot
variable_enable = False
variable_takingframe = False
variable_park = {'enable': False,
	'pos'   : 'center',
	'time'  : 0.1,
	'custom': {'x': 0, 'y': 0, 'dz': 0},
	'coord' : {'x': 0, 'y': 0, 'dz': 0}}
variable_extruder = {'fw_retract': False,
	'retract': 1.0,
	'extrude': 1.0}
variable_speed = {'travel': 100,
	'retract': 15,
	'extrude': 15}
variable_verbose = True
variable_restore = {'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}
variable_macro = {'pause': 'PAUSE', 'resume': 'RESUME'}
variable_is_paused = False
gcode = 
	{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower =='true' else False %}
	{% if enable %}
	{% if (hyperlapse and printer['gcode_macro HYPERLAPSE'].run) or
	(not hyperlapse and not printer['gcode_macro HYPERLAPSE'].run) %}
	{% if park.enable %}
	{% set pos = {'x': 'X' + park.coord.x|string if park.pos != 'y_only' else '',
	'y': 'Y' + park.coord.y|string if park.pos != 'x_only' else '',
	'z': 'Z'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}
	{% set restore = {'absolute': {'coordinates': printer.gcode_move.absolute_coordinates,
	'extrude'    : printer.gcode_move.absolute_extrude},
	'speed'   : printer.gcode_move.speed,
	'e'       : printer.gcode_move.gcode_position.e,
	'factor'  : {'speed'  : printer.gcode_move.speed_factor,
	'extrude': printer.gcode_move.extrude_factor}} %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"
	{% if not printer[printer.toolhead.extruder].can_extrude %}
	{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}
	{% else %}
	{% if extruder.fw_retract %}
	G10
	{% else %}
	M83
	G0 E-{extruder.retract} F{speed.retract * 60}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True
	{macro.pause}
	SET_GCODE_OFFSET X=0 Y=0
	G90
	{% if "xyz" not in printer.toolhead.homed_axes %}
	{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}
	{% else %}
	G0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5
	M400
	{% endif %}
	_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}
	{% endif %}
	{% else %}
	{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}
	{% endif %}

[gcode_macro _TIMELAPSE_NEW_FRAME]
description = action call for timelapse shoot. must be a seperate macro
gcode = 
	{action_call_remote_method("timelapse_newframe",
	macropark=printer['gcode_macro TIMELAPSE_TAKE_FRAME'].park,
	hyperlapse=params.HYPERLAPSE)}

[delayed_gcode _WAIT_TIMELAPSE_TAKE_FRAME]
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% set factor = {'speed': printer.gcode_move.speed_factor, 'extrude': printer.gcode_move.extrude_factor} %}
	{% if tl.takingframe %}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5
	{% else %}
	{tl.macro.resume} VELOCITY={tl.speed.travel}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False
	{% if not printer[printer.toolhead.extruder].can_extrude %}
	{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}
	{% else %}
	{% if tl.extruder.fw_retract %}
	G11
	{% else %}
	G0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}
	G0 F{tl.restore.speed}
	{% if tl.restore.absolute.extrude %}
	M82
	G92 E{tl.restore.e}
	{% endif %}
	{% endif %}
	{% endif %}
	{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}
	{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}
	{% if not tl.restore.absolute.coordinates %} G91 {% endif %}
	{% endif %}

[gcode_macro HYPERLAPSE]
description = Start/Stop a hyperlapse recording
variable_cycle = 0
variable_run = False
gcode = 
	{% set cycle = params.CYCLE|default(30)|int %}
	{% if params.ACTION and params.ACTION|lower == 'start' %}
	{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}
	TIMELAPSE_TAKE_FRAME HYPERLAPSE=True
	{% elif params.ACTION and params.ACTION|lower == 'stop' %}
	{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0
	{% else %}
	{action_raise_error("Hyperlapse: No valid input parameter
	Use:
	- HYPERLAPSE ACTION=START [CYCLE=time]
	- HYPERLAPSE ACTION=STOP")}
	{% endif %}

[delayed_gcode _HYPERLAPSE_LOOP]
gcode = 
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}
	TIMELAPSE_TAKE_FRAME HYPERLAPSE=True

[gcode_macro TIMELAPSE_RENDER]
description = Render Timelapse video and wait for the result
variable_render = False
variable_run_identifier = 0
gcode = 
	{action_respond_info("Timelapse: Rendering started")}
	{action_call_remote_method("timelapse_render", byrendermacro="True")}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True
	{printer.configfile.settings['gcode_macro pause'].rename_existing}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5

[delayed_gcode _WAIT_TIMELAPSE_RENDER]
gcode = 
	{% set ri = printer['gcode_macro TIMELAPSE_RENDER'].run_identifier % 4 %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}
	{% if printer['gcode_macro TIMELAPSE_RENDER'].render %}
	M117 Rendering {['-','\\','|','/'][ri]}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5
	{% else %}
	{action_respond_info("Timelapse: Rendering finished")}
	M117
	{printer.configfile.settings['gcode_macro resume'].rename_existing}
	{% endif %}

[gcode_macro TEST_STREAM_DELAY]
description = Helper macro to find stream and park delay
gcode = 
	{% set min = printer.toolhead.axis_minimum %}
	{% set max = printer.toolhead.axis_maximum %}
	{% set act = printer.toolhead.position %}
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% if act.z > 5.0 %}
	G0 X{min.x + 5.0} F{tl.speed.travel|int * 60}
	G0 X{(max.x-min.x)/2}
	G4 P{tl.park.time|float * 1000}
	_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE
	G0 X{max.x - 5.0}
	{% else %}
	{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}
	{% endif %}

[exclude_object]

[gcode_macro update_git]
gcode = 
	{% set message = params.MESSAGE|default() %}
	{% if message %}
	RUN_SHELL_COMMAND CMD=update_git_script_message PARAMS="'{params.MESSAGE}'"
	{% else %}
	RUN_SHELL_COMMAND CMD=update_git_script
	{% endif %}

[gcode_shell_command update_git_script]
command = bash -c "bash $HOME/klipper-backup/script.sh"
timeout = 90.0
verbose = True

[gcode_shell_command update_git_script_message]
command = bash -c "bash $HOME/klipper-backup/script.sh -c \"$0\""
timeout = 90.0
verbose = True

[mcu]
serial = /dev/ttyS3
restart_method = command

[output_pin Power]
pin = PC12
value = 1
shutdown_value = 1

[temperature_sensor orange_pi]
sensor_type = temperature_host
min_temp = 0
max_temp = 100

[heater_generic chamber_heater]
heater_pin = !PA7
sensor_type = ATC Semitec 104GT-2
sensor_pin = PA5
control = watermark
max_power = 1
min_temp = 15
max_temp = 85

[verify_heater chamber_heater]
max_error = 9999
check_gain_time = 9999
hysteresis = 5
heating_gain = 2

[filament_motion_sensor motion_sensor]
detection_length = 50
extruder = extruder
switch_pin = !PC15
pause_on_runout = True
runout_gcode = 
	SONG_CRAB_RAVE

[bltouch]
sensor_pin = ^PC14
control_pin = PA1
x_offset = -40
y_offset = 0.000
z_offset = 1.70
pin_up_reports_not_triggered = False
probe_with_touch_mode = True

[heater_bed]
heater_pin = PC9
sensor_type = ATC Semitec 104GT-2
sensor_pin = PC3
control = pid
pid_kp = 72.553
pid_ki = 1.154
pid_kd = 1139.994
min_temp = 5
max_temp = 125

[heater_fan radiator]
pin = PC7
max_power = 1.0
kick_start_time = 0.600
heater = extruder
heater_temp = 50.0
shutdown_speed = 1

[fan]
pin = PC6

[input_shaper]
shaper_type_x = 2hump_ei
shaper_freq_x = 43.0
shaper_type_y = mzv
shaper_freq_y = 32.6

[printer]
kinematics = cartesian
max_velocity = 300
max_accel = 1900
max_z_velocity = 30
max_z_accel = 100
square_corner_velocity = 4

[bed_mesh]
speed = 150
horizontal_move_z = 9
mesh_min = 10, 20
mesh_max = 195, 210
probe_count = 5
mesh_pps = 2, 3
algorithm = bicubic
bicubic_tension = 0.2
move_check_distance = 9
split_delta_z = .025
fade_start = 1
fade_end = 10
fade_target = 0

[screws_tilt_adjust]
screw1 = 79, 27
screw1_name = Peredniy Leviy
screw2 = 235, 27
screw2_name = Peredniy Praviy
screw3 = 235,197
screw3_name = Zadniy Praviy
screw4 = 79,197
screw4_name = Zadniy Leviy
speed = 120
horizontal_move_z = 9

[safe_z_home]
home_xy_position = 157,115
speed = 50
z_hop = 9.0
z_hop_speed = 20.0

[stepper_x]
step_pin = PB13
dir_pin = !PB12
enable_pin = !PB14
microsteps = 16
rotation_distance = 40
endstop_pin = ^PC0
position_endstop = 0
position_max = 240
position_min = -2
homing_retract_dist = 5
homing_speed = 50
second_homing_speed = 10

[tmc2209 stepper_x]
uart_pin = PC11
tx_pin = PC10
uart_address = 0
run_current = 0.580
stealthchop_threshold = 999999

[stepper_y]
step_pin = PB10
dir_pin = !PB2
enable_pin = !PB11
microsteps = 16
rotation_distance = 40
endstop_pin = ^PC1
position_endstop = 0
homing_retract_dist = 5
homing_speed = 50
second_homing_speed = 10
position_max = 231
position_min = 0

[tmc2209 stepper_y]
uart_pin = PC11
tx_pin = PC10
uart_address = 2
run_current = 0.6
stealthchop_threshold = 999999

[stepper_z]
step_pin = PB0
dir_pin = PC5
enable_pin = !PB1
microsteps = 16
rotation_distance = 40
gear_ratio = 80:16
full_steps_per_rotation = 200
endstop_pin = probe:z_virtual_endstop
homing_retract_dist = 9
second_homing_speed = 10
position_min = -5
position_max = 245
homing_speed = 50

[tmc2209 stepper_z]
uart_pin = PC11
tx_pin = PC10
uart_address = 1
run_current = 0.580
stealthchop_threshold = 999999
interpolate = false

[extruder]
step_pin = PB3
dir_pin = PB4
enable_pin = !PD2
microsteps = 16
rotation_distance = 4.637
nozzle_diameter = 0.400
filament_diameter = 1.750
heater_pin = PC8
sensor_type = ATC Semitec 104GT-2
sensor_pin = PA0
min_temp = 5
max_temp = 270
max_extrude_only_velocity = 120
max_extrude_only_accel = 3000
pressure_advance = 0.031
full_steps_per_rotation = 200
control = pid
pid_kp = 29.662
pid_ki = 2.382
pid_kd = 92.322

[tmc2209 extruder]
uart_pin = PC11
tx_pin = PC10
uart_address = 3
run_current = 0.7
stealthchop_threshold = 999999

[static_digital_output usb_pullup_enable]
pins = !PA14

[board_pins]
aliases = 
	
	EXP1_1=PB5,  EXP1_3=PA9,   EXP1_5=PA10, EXP1_7=PB8,  EXP1_9=<GND>,
	EXP1_2=PA15, EXP1_4=<RST>, EXP1_6=PB9,  EXP1_8=PB15, EXP1_10=<5V>

[display]
lcd_type = st7920
cs_pin = EXP1_7
sclk_pin = EXP1_6
sid_pin = EXP1_8
encoder_pins = ^EXP1_5, ^EXP1_3
click_pin = ^!EXP1_2

[pwm_cycle_time beeper]
pin = EXP1_1
shutdown_value = 0
cycle_time = 0.001

[firmware_retraction]
retract_length = 1.0
retract_speed = 80
unretract_extra_length = 0
unretract_speed = 80

[pwm_tool Laser]
pin = PA6
cycle_time = 0.0001
shutdown_value = 0
maximum_mcu_duration = 5

[bed_mesh 70]
version = 1
points = 
	-0.045000, 0.027500, 0.015000
	-0.055000, -0.005000, -0.035000
	-0.007500, 0.040000, -0.002500
x_count = 3
y_count = 3
mesh_x_pps = 2
mesh_y_pps = 3
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 195.0
min_y = 20.0
max_y = 210.0

[bed_mesh default]
version = 1
points = 
	0.020000, 0.025000, 0.030000, -0.007500, -0.052500
	0.015000, 0.017500, 0.022500, -0.007500, -0.057500
	0.030000, 0.030000, 0.037500, 0.002500, -0.035000
	0.012500, 0.030000, 0.050000, 0.035000, -0.010000
	0.080000, 0.087500, 0.115000, 0.097500, 0.067500
x_count = 5
y_count = 5
mesh_x_pps = 2
mesh_y_pps = 3
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 195.0
min_y = 20.0
max_y = 210.0
=======================
Extruder max_extrude_ratio=0.266081
mcu 'mcu': Starting serial connect
webhooks client 281473083541152: New connection
webhooks client 281473083541152: Client info {'program': 'Moonraker', 'version': 'v0.9.3-4-ga4604e3'}
mcu 'mcu': got {'oid': 14, 'next_clock': 1189876224, 'value': 31188, '#name': 'analog_in_state', '#sent_time': 15859.27288252, '#receive_time': 15859.295390520001}
mcu 'mcu': got {'oid': 18, 'next_clock': 1192756224, 'value': 31334, '#name': 'analog_in_state', '#sent_time': 15859.325152227999, '#receive_time': 15859.335379228001}
mcu 'mcu': got {'oid': 26, 'next_clock': 1198516224, 'value': 31267, '#name': 'analog_in_state', '#sent_time': 15859.377127811, '#receive_time': 15859.41539527}
mcu 'mcu': got {'oid': 14, 'next_clock': 1211476224, 'value': 31198, '#name': 'analog_in_state', '#sent_time': 15859.585448561, '#receive_time': 15859.595383478001}
mcu 'mcu': got {'oid': 18, 'next_clock': 1214356224, 'value': 31322, '#name': 'analog_in_state', '#sent_time': 15859.585448561, '#receive_time': 15859.635460520001}
Loaded MCU 'mcu' 118 commands (v0.12.0-404-g80d185c94 / gcc: (15:12.2.rel1-1) 12.2.1 20221205 binutils: (2.40-2+18+b1) 2.40)
MCU 'mcu' config: ADC_MAX=4095 BUS_PINS_i2c1=PB6,PB7 BUS_PINS_i2c1a=PB8,PB9 BUS_PINS_i2c2=PB10,PB11 BUS_PINS_spi1=PA6,PA7,PA5 BUS_PINS_spi1a=PB4,PB5,PB3 BUS_PINS_spi2=PB14,PB15,PB13 BUS_PINS_spi3=PB4,PB5,PB3 CLOCK_FREQ=72000000 INITIAL_PINS=!PA14 MCU=stm32f103xe PWM_MAX=255 RECEIVE_WINDOW=192 RESERVE_PINS_serial=PA3,PA2 SERIAL_BAUD=250000 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
Configured MCU 'mcu' (1024 moves)
Starting heater checks for chamber_heater
Starting heater checks for heater_bed
bed_mesh: generated points
Index |  Tool Adjusted  |   Probe
  0   | (50.0, 20.0)    | (10.0, 20.0)
  1   | (96.2, 20.0)    | (56.2, 20.0)
  2   | (142.5, 20.0)   | (102.5, 20.0)
  3   | (188.8, 20.0)   | (148.8, 20.0)
  4   | (235.0, 20.0)   | (195.0, 20.0)
  5   | (235.0, 67.5)   | (195.0, 67.5)
  6   | (188.8, 67.5)   | (148.8, 67.5)
  7   | (142.5, 67.5)   | (102.5, 67.5)
  8   | (96.2, 67.5)    | (56.2, 67.5)
  9   | (50.0, 67.5)    | (10.0, 67.5)
  10  | (50.0, 115.0)   | (10.0, 115.0)
  11  | (96.2, 115.0)   | (56.2, 115.0)
  12  | (142.5, 115.0)  | (102.5, 115.0)
  13  | (188.8, 115.0)  | (148.8, 115.0)
  14  | (235.0, 115.0)  | (195.0, 115.0)
  15  | (235.0, 162.5)  | (195.0, 162.5)
  16  | (188.8, 162.5)  | (148.8, 162.5)
  17  | (142.5, 162.5)  | (102.5, 162.5)
  18  | (96.2, 162.5)   | (56.2, 162.5)
  19  | (50.0, 162.5)   | (10.0, 162.5)
  20  | (50.0, 210.0)   | (10.0, 210.0)
  21  | (96.2, 210.0)   | (56.2, 210.0)
  22  | (142.5, 210.0)  | (102.5, 210.0)
  23  | (188.8, 210.0)  | (148.8, 210.0)
  24  | (235.0, 210.0)  | (195.0, 210.0)
Starting heater checks for extruder
Stats 15860.1: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=3128 bytes_read=6263 bytes_retransmit=0 bytes_invalid=0 send_seq=225 receive_seq=222 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=1955 upcoming_bytes=130 freq=71996464  orange_pi: temp=47.2 chamber_heater: target=0 temp=0.0 pwm=0.000 heater_bed: target=0 temp=0.0 pwm=0.000 sysload=1.41 cputime=3.657 memavail=1696288 print_time=375.209 buffer_time=0.241 print_stall=0 extruder: target=0 temp=0.0 pwm=0.000
webhooks: registering remote method 'shutdown_machine' for connection id: 281473083541152
webhooks: registering remote method 'reboot_machine' for connection id: 281473083541152
webhooks: registering remote method 'pause_job_queue' for connection id: 281473083541152
webhooks: registering remote method 'start_job_queue' for connection id: 281473083541152
Stats 15861.1: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=5465 bytes_read=6659 bytes_retransmit=0 bytes_invalid=0 send_seq=270 receive_seq=270 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71996906  orange_pi: temp=46.6 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.41 cputime=3.709 memavail=1696292 print_time=375.209 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 15862.1: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000114 mcu_task_stddev=0.000264 bytes_write=5471 bytes_read=6842 bytes_retransmit=0 bytes_invalid=0 send_seq=271 receive_seq=271 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71997978  orange_pi: temp=45.6 chamber_heater: target=0 temp=26.3 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.41 cputime=3.749 memavail=1694784 print_time=375.209 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 15863.1: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000114 mcu_task_stddev=0.000264 bytes_write=5477 bytes_read=7023 bytes_retransmit=0 bytes_invalid=0 send_seq=272 receive_seq=272 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998144  orange_pi: temp=45.7 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.37 cputime=3.771 memavail=1694784 print_time=375.209 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15864.1: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000114 mcu_task_stddev=0.000264 bytes_write=5502 bytes_read=7184 bytes_retransmit=0 bytes_invalid=0 send_seq=275 receive_seq=275 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998275  orange_pi: temp=45.2 chamber_heater: target=0 temp=26.7 pwm=0.000 heater_bed: target=0 temp=24.3 pwm=0.000 sysload=1.37 cputime=3.793 memavail=1694536 print_time=375.209 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 15865.1: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000114 mcu_task_stddev=0.000264 bytes_write=5527 bytes_read=7360 bytes_retransmit=0 bytes_invalid=0 send_seq=278 receive_seq=278 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998258  orange_pi: temp=45.2 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.7 pwm=0.000 sysload=1.37 cputime=3.814 memavail=1694536 print_time=375.209 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15866.1: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000114 mcu_task_stddev=0.000264 bytes_write=5552 bytes_read=7551 bytes_retransmit=0 bytes_invalid=0 send_seq=281 receive_seq=281 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998275  orange_pi: temp=45.3 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.37 cputime=3.837 memavail=1694284 print_time=375.209 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15867.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000019 bytes_write=5572 bytes_read=7722 bytes_retransmit=0 bytes_invalid=0 send_seq=283 receive_seq=283 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998315  orange_pi: temp=44.8 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.37 cputime=3.858 memavail=1694284 print_time=375.209 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15868.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000019 bytes_write=5592 bytes_read=7893 bytes_retransmit=0 bytes_invalid=0 send_seq=285 receive_seq=285 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998315  orange_pi: temp=45.0 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.34 cputime=3.880 memavail=1694032 print_time=375.209 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15869.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000019 bytes_write=5612 bytes_read=8079 bytes_retransmit=0 bytes_invalid=0 send_seq=287 receive_seq=287 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998324  orange_pi: temp=44.9 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.34 cputime=3.902 memavail=1694036 print_time=375.209 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15870.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000019 bytes_write=5618 bytes_read=8230 bytes_retransmit=0 bytes_invalid=0 send_seq=288 receive_seq=288 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998328  orange_pi: temp=45.4 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.34 cputime=3.923 memavail=1693784 print_time=375.209 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 15871.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000019 bytes_write=5624 bytes_read=8396 bytes_retransmit=0 bytes_invalid=0 send_seq=289 receive_seq=289 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998336  orange_pi: temp=44.8 chamber_heater: target=0 temp=26.9 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.34 cputime=3.945 memavail=1694308 print_time=375.209 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.2 pwm=0.000
Stats 15872.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000021 bytes_write=5644 bytes_read=8597 bytes_retransmit=0 bytes_invalid=0 send_seq=291 receive_seq=291 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998320  orange_pi: temp=44.8 chamber_heater: target=0 temp=27.0 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.34 cputime=3.967 memavail=1694080 print_time=375.209 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15873.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000021 bytes_write=5650 bytes_read=8748 bytes_retransmit=0 bytes_invalid=0 send_seq=292 receive_seq=292 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998325  orange_pi: temp=45.0 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.32 cputime=3.988 memavail=1694080 print_time=375.209 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15874.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000021 bytes_write=5670 bytes_read=8919 bytes_retransmit=0 bytes_invalid=0 send_seq=294 receive_seq=294 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998332  orange_pi: temp=45.3 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.32 cputime=4.009 memavail=1693576 print_time=375.209 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.2 pwm=0.000
Stats 15875.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000021 bytes_write=5676 bytes_read=9100 bytes_retransmit=0 bytes_invalid=0 send_seq=295 receive_seq=295 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998332  orange_pi: temp=45.2 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.32 cputime=4.030 memavail=1693848 print_time=375.209 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 15876.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000021 bytes_write=5682 bytes_read=9251 bytes_retransmit=0 bytes_invalid=0 send_seq=296 receive_seq=296 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998335  orange_pi: temp=45.2 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.32 cputime=4.052 memavail=1693616 print_time=375.209 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15877.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000016 bytes_write=5688 bytes_read=9431 bytes_retransmit=0 bytes_invalid=0 send_seq=297 receive_seq=297 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998327  orange_pi: temp=45.1 chamber_heater: target=0 temp=26.3 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.32 cputime=4.073 memavail=1693640 print_time=375.209 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15878.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000016 bytes_write=5694 bytes_read=9612 bytes_retransmit=0 bytes_invalid=0 send_seq=298 receive_seq=298 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998327  orange_pi: temp=45.2 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.29 cputime=4.095 memavail=1693388 print_time=375.209 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15879.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000016 bytes_write=5700 bytes_read=9763 bytes_retransmit=0 bytes_invalid=0 send_seq=299 receive_seq=299 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998321  orange_pi: temp=45.1 chamber_heater: target=0 temp=26.7 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.29 cputime=4.115 memavail=1693648 print_time=375.209 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15880.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000016 bytes_write=5706 bytes_read=9929 bytes_retransmit=0 bytes_invalid=0 send_seq=300 receive_seq=300 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998317  orange_pi: temp=45.4 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.29 cputime=4.136 memavail=1693416 print_time=375.209 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15881.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000016 bytes_write=5712 bytes_read=10110 bytes_retransmit=0 bytes_invalid=0 send_seq=301 receive_seq=301 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998318  orange_pi: temp=44.6 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.29 cputime=4.157 memavail=1692912 print_time=375.209 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15882.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5718 bytes_read=10275 bytes_retransmit=0 bytes_invalid=0 send_seq=302 receive_seq=302 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998315  orange_pi: temp=45.2 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.29 cputime=4.177 memavail=1692336 print_time=375.209 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15883.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5724 bytes_read=10441 bytes_retransmit=0 bytes_invalid=0 send_seq=303 receive_seq=303 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998315  orange_pi: temp=45.0 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.27 cputime=4.198 memavail=1692476 print_time=375.209 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 15884.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5730 bytes_read=10622 bytes_retransmit=0 bytes_invalid=0 send_seq=304 receive_seq=304 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998316  orange_pi: temp=45.4 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.27 cputime=4.219 memavail=1692224 print_time=375.209 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15885.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5736 bytes_read=10773 bytes_retransmit=0 bytes_invalid=0 send_seq=305 receive_seq=305 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998319  orange_pi: temp=45.0 chamber_heater: target=0 temp=26.7 pwm=0.000 heater_bed: target=0 temp=24.3 pwm=0.000 sysload=1.27 cputime=4.240 memavail=1693000 print_time=375.209 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15886.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5742 bytes_read=10939 bytes_retransmit=0 bytes_invalid=0 send_seq=306 receive_seq=306 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998316  orange_pi: temp=44.9 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.3 pwm=0.000 sysload=1.27 cputime=4.261 memavail=1693000 print_time=375.209 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15887.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5748 bytes_read=11134 bytes_retransmit=0 bytes_invalid=0 send_seq=307 receive_seq=307 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998314  orange_pi: temp=45.2 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.27 cputime=4.282 memavail=1693004 print_time=375.209 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 15888.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5754 bytes_read=11285 bytes_retransmit=0 bytes_invalid=0 send_seq=308 receive_seq=308 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998317  orange_pi: temp=45.1 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.25 cputime=4.303 memavail=1692528 print_time=375.209 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15889.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5774 bytes_read=11456 bytes_retransmit=0 bytes_invalid=0 send_seq=310 receive_seq=310 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998318  orange_pi: temp=45.0 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.25 cputime=4.326 memavail=1692288 print_time=375.209 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15890.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5799 bytes_read=11647 bytes_retransmit=0 bytes_invalid=0 send_seq=313 receive_seq=313 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998310  orange_pi: temp=45.4 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.25 cputime=4.348 memavail=1692048 print_time=375.209 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 15891.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5805 bytes_read=11798 bytes_retransmit=0 bytes_invalid=0 send_seq=314 receive_seq=314 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998312  orange_pi: temp=45.5 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.25 cputime=4.369 memavail=1691796 print_time=375.209 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15892.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000017 bytes_write=5817 bytes_read=12009 bytes_retransmit=0 bytes_invalid=0 send_seq=316 receive_seq=316 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998315  orange_pi: temp=45.2 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.3 pwm=0.000 sysload=1.25 cputime=4.391 memavail=1691544 print_time=375.209 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 15893.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000017 bytes_write=5823 bytes_read=12175 bytes_retransmit=0 bytes_invalid=0 send_seq=317 receive_seq=317 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998317  orange_pi: temp=45.2 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.23 cputime=4.412 memavail=1691544 print_time=375.209 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15894.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000017 bytes_write=5829 bytes_read=12326 bytes_retransmit=0 bytes_invalid=0 send_seq=318 receive_seq=318 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998318  orange_pi: temp=45.2 chamber_heater: target=0 temp=26.0 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.23 cputime=4.433 memavail=1692316 print_time=375.209 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 15895.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000017 bytes_write=5854 bytes_read=12517 bytes_retransmit=0 bytes_invalid=0 send_seq=321 receive_seq=321 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998320  orange_pi: temp=45.4 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.23 cputime=4.454 memavail=1691832 print_time=375.209 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 15896.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000017 bytes_write=5879 bytes_read=12693 bytes_retransmit=0 bytes_invalid=0 send_seq=324 receive_seq=324 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998319  orange_pi: temp=45.3 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.23 cputime=4.475 memavail=1692084 print_time=375.209 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15897.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000017 bytes_write=5923 bytes_read=12879 bytes_retransmit=0 bytes_invalid=0 send_seq=329 receive_seq=329 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998319  orange_pi: temp=44.8 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.23 cputime=4.496 memavail=1692104 print_time=375.209 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 15898.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000017 bytes_write=5929 bytes_read=13060 bytes_retransmit=0 bytes_invalid=0 send_seq=330 receive_seq=330 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998322  orange_pi: temp=45.2 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.29 cputime=4.518 memavail=1692104 print_time=375.209 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15899.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000017 bytes_write=5935 bytes_read=13226 bytes_retransmit=0 bytes_invalid=0 send_seq=331 receive_seq=331 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998323  orange_pi: temp=45.2 chamber_heater: target=0 temp=26.2 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.29 cputime=4.539 memavail=1691852 print_time=375.209 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 15900.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000017 bytes_write=5941 bytes_read=13377 bytes_retransmit=0 bytes_invalid=0 send_seq=332 receive_seq=332 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998325  orange_pi: temp=45.6 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.29 cputime=4.560 memavail=1691876 print_time=375.209 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 15901.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000017 bytes_write=5966 bytes_read=13568 bytes_retransmit=0 bytes_invalid=0 send_seq=335 receive_seq=335 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998324  orange_pi: temp=45.0 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.29 cputime=4.582 memavail=1691624 print_time=375.209 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 15902.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000017 bytes_write=5986 bytes_read=13745 bytes_retransmit=0 bytes_invalid=0 send_seq=337 receive_seq=337 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998326  orange_pi: temp=44.9 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.29 cputime=4.604 memavail=1691948 print_time=375.209 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15903.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000017 bytes_write=5992 bytes_read=13885 bytes_retransmit=0 bytes_invalid=0 send_seq=338 receive_seq=338 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998326  orange_pi: temp=45.4 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.26 cputime=4.624 memavail=1691948 print_time=375.209 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 15904.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000017 bytes_write=6017 bytes_read=14064 bytes_retransmit=0 bytes_invalid=0 send_seq=341 receive_seq=341 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998328  orange_pi: temp=45.4 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.26 cputime=4.646 memavail=1691188 print_time=375.209 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 15905.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000017 bytes_write=6037 bytes_read=14224 bytes_retransmit=0 bytes_invalid=0 send_seq=343 receive_seq=343 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998331  orange_pi: temp=45.3 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.26 cputime=4.668 memavail=1690688 print_time=375.209 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15906.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000017 bytes_write=6043 bytes_read=14375 bytes_retransmit=0 bytes_invalid=0 send_seq=344 receive_seq=344 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998329  orange_pi: temp=45.3 chamber_heater: target=0 temp=26.3 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.26 cputime=4.688 memavail=1690612 print_time=375.209 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 15907.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000020 bytes_write=6082 bytes_read=14586 bytes_retransmit=0 bytes_invalid=0 send_seq=348 receive_seq=348 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998328  orange_pi: temp=45.2 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.26 cputime=4.710 memavail=1690736 print_time=375.209 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 15908.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000020 bytes_write=6088 bytes_read=14752 bytes_retransmit=0 bytes_invalid=0 send_seq=349 receive_seq=349 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998328  orange_pi: temp=45.6 chamber_heater: target=0 temp=26.2 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.24 cputime=4.731 memavail=1690984 print_time=375.209 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 15909.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000020 bytes_write=6094 bytes_read=14903 bytes_retransmit=0 bytes_invalid=0 send_seq=350 receive_seq=350 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998329  orange_pi: temp=45.1 chamber_heater: target=0 temp=26.3 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.24 cputime=4.751 memavail=1691240 print_time=375.209 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15910.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000020 bytes_write=6100 bytes_read=15084 bytes_retransmit=0 bytes_invalid=0 send_seq=351 receive_seq=351 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998327  orange_pi: temp=45.2 chamber_heater: target=0 temp=26.0 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.24 cputime=4.773 memavail=1691496 print_time=375.209 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15911.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000020 bytes_write=6106 bytes_read=15250 bytes_retransmit=0 bytes_invalid=0 send_seq=352 receive_seq=352 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998327  orange_pi: temp=45.1 chamber_heater: target=0 temp=26.2 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.24 cputime=4.794 memavail=1692260 print_time=375.209 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15912.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000014 bytes_write=6131 bytes_read=15425 bytes_retransmit=0 bytes_invalid=0 send_seq=355 receive_seq=355 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998328  orange_pi: temp=45.0 chamber_heater: target=0 temp=26.3 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.24 cputime=4.816 memavail=1692876 print_time=375.209 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15913.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000014 bytes_write=6137 bytes_read=15606 bytes_retransmit=0 bytes_invalid=0 send_seq=356 receive_seq=356 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998327  orange_pi: temp=45.8 chamber_heater: target=0 temp=26.3 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.22 cputime=4.837 memavail=1693144 print_time=375.209 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15914.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000014 bytes_write=6157 bytes_read=15777 bytes_retransmit=0 bytes_invalid=0 send_seq=358 receive_seq=358 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998326  orange_pi: temp=45.7 chamber_heater: target=0 temp=26.2 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.22 cputime=4.858 memavail=1693676 print_time=375.209 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 15915.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000014 bytes_write=6163 bytes_read=15928 bytes_retransmit=0 bytes_invalid=0 send_seq=359 receive_seq=359 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998326  orange_pi: temp=45.2 chamber_heater: target=0 temp=26.3 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.22 cputime=4.878 memavail=1693696 print_time=375.209 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15916.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000014 bytes_write=6169 bytes_read=16109 bytes_retransmit=0 bytes_invalid=0 send_seq=360 receive_seq=360 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998326  orange_pi: temp=45.2 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.22 cputime=4.900 memavail=1693964 print_time=375.209 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15917.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000014 bytes_write=6175 bytes_read=16275 bytes_retransmit=0 bytes_invalid=0 send_seq=361 receive_seq=361 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998325  orange_pi: temp=45.9 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.22 cputime=4.921 memavail=1694240 print_time=375.209 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15918.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000016 bytes_write=6181 bytes_read=16440 bytes_retransmit=0 bytes_invalid=0 send_seq=362 receive_seq=362 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998325  orange_pi: temp=45.0 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.21 cputime=4.943 memavail=1694996 print_time=375.209 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 15919.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000016 bytes_write=6187 bytes_read=16621 bytes_retransmit=0 bytes_invalid=0 send_seq=363 receive_seq=363 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998326  orange_pi: temp=45.3 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.21 cputime=4.965 memavail=1695268 print_time=375.209 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 15920.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000016 bytes_write=6193 bytes_read=16787 bytes_retransmit=0 bytes_invalid=0 send_seq=364 receive_seq=364 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998325  orange_pi: temp=45.3 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.21 cputime=4.986 memavail=1695776 print_time=375.209 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Starting Klippy...
Args: ['/home/klipper/klipper/klippy/klippy.py', '/home/klipper/printer_data/config/printer.cfg', '-I', '/home/klipper/printer_data/comms/klippy.serial', '-l', '/home/klipper/printer_data/logs/klippy.log', '-a', '/home/klipper/printer_data/comms/klippy.sock']
Git version: 'v0.12.0-404-g80d185c94-dirty'
Untracked files: klippy/extras/gcode_shell_command.py
Branch: master
Remote: origin
Tracked URL: https://github.com/Klipper3d/klipper
CPU: 4 core ?
Python: '3.10.12 (main, Nov  6 2024, 20:22:13) [GCC 11.4.0]'
Start printer at Wed Dec 25 20:17:04 2024 (1735147024.6 21.5)
===== Config file =====
[virtual_sdcard]
path = /home/klipper/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[pause_resume]

[display_status]

[respond]

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = BASE_CANCEL_PRINT
gcode = 
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	TURN_OFF_HEATERS
	M107
	G91
	G1 E-{E} F1500
	G90
	CLEAR_PAUSE
	SDCARD_RESET_FILE
	BASE_CANCEL_PRINT
	PARK

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = BASE_PAUSE
gcode = 
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	SAVE_GCODE_STATE NAME=PAUSE_STATE
	BASE_PAUSE
	G91
	G1 E-{E} F1500
	G90
	PARK

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = BASE_RESUME
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	G91
	G1 E{E} F1500
	G90
	RESTORE_GCODE_STATE NAME=PAUSE_STATE MOVE=1
	BASE_RESUME

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[gcode_macro _CLIENT_LINEAR_MOVE]
description = Linear move with save and restore of the gcode state
gcode = 
	{% set x_move = "X" ~ params.X if params.X is defined else "" %}
	{% set y_move = "Y" ~ params.Y if params.Y is defined else "" %}
	{% set z_move = "Z" ~ params.Z if params.Z is defined else "" %}
	{% set e_move = "E" ~ params.E if params.E is defined else "" %}
	{% set rate = "F" ~ params.F if params.F is defined else "" %}
	{% set ABSOLUTE = params.ABSOLUTE | default(0) | int != 0 %}
	{% set ABSOLUTE_E = params.ABSOLUTE_E | default(0) | int != 0 %}
	SAVE_GCODE_STATE NAME=_client_movement
	{% if x_move or y_move or z_move %}
	G9{ 0 if ABSOLUTE else 1 }
	{% endif %}
	{% if e_move %}
	M8{ 2 if ABSOLUTE_E else 3 }
	{% endif %}
	G1 { x_move } { y_move } { z_move } { e_move } { rate }
	RESTORE_GCODE_STATE NAME=_client_movement

[gcode_macro list_sensors]
gcode = 
	{ action_respond_info(printer.heaters.available_heaters | join(', ')) }
	{ action_respond_info(printer.heaters.available_sensors | join(', ')) }

[gcode_macro Power_OFF]
gcode = SET_PIN PIN=Power VALUE=0

[gcode_macro _POWER_OFF_PRINTER]
gcode = SET_PIN PIN=Power VALUE=0

[gcode_macro ACTIVATE_POWER_OFF]
gcode = 
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK_ACT DURATION=60

[gcode_macro DEACTIVATE_POWER_OFF]
gcode = 
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK_ACT DURATION=0

[delayed_gcode POWER_OFF_PRINTER_CHECK_ACT]
gcode = 
	{% if printer.idle_timeout.state == "Idle" or printer.idle_timeout.state == "Ready" %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=30
	{% else %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK_ACT DURATION=60
	{% endif %}

[delayed_gcode POWER_OFF_PRINTER_CHECK]
gcode = 
	{% if printer.idle_timeout.state == "Idle" or printer.idle_timeout.state == "Ready" %}
	{% if printer.extruder.temperature < 50.0 and printer.heater_bed.temperature < 50.0 %}
	{% if printer.extruder.target == 0.0 and printer.heater_bed.target == 0.0 %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=0
	_POWER_OFF_PRINTER
	{% else %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=2
	{% endif %}
	{% else %}
	{% if printer.idle_timeout.state == "Printing" %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=0
	{% else %}
	{% if printer.extruder.target == 0.0 and printer.heater_bed.target == 0.0 %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=2
	{% else %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=0
	{% endif %}
	{% endif %}
	{% endif %}
	{% endif %}

[gcode_macro M141]
gcode = SET_HEATER_TEMPERATURE HEATER=chamber_heater TARGET={params.S|default(0)}

[gcode_macro M80]
gcode = SET_PIN PIN=Power  VALUE=1

[gcode_macro M81]
gcode = 
	
	SET_PIN PIN=Power VALUE=0

[gcode_macro M486]
gcode = 
	
	
	
	
	
	
	
	
	
	
	
	{% if 'exclude_object' not in printer %}
	{action_raise_error("[exclude_object] is not enabled")}
	{% endif %}
	
	{% if 'T' in params %}
	EXCLUDE_OBJECT RESET=1
	
	{% for i in range(params.T | int) %}
	EXCLUDE_OBJECT_DEFINE NAME={i}
	{% endfor %}
	{% endif %}
	
	{% if 'C' in params %}
	EXCLUDE_OBJECT CURRENT=1
	{% endif %}
	
	{% if 'P' in params %}
	EXCLUDE_OBJECT NAME={params.P}
	{% endif %}
	
	{% if 'S' in params %}
	{% if params.S == '-1' %}
	{% if printer.exclude_object.current_object %}
	EXCLUDE_OBJECT_END NAME={printer.exclude_object.current_object}
	{% endif %}
	{% else %}
	EXCLUDE_OBJECT_START NAME={params.S}
	{% endif %}
	{% endif %}
	
	{% if 'U' in params %}
	EXCLUDE_OBJECT RESET=1 NAME={params.U}
	{% endif %}

[gcode_macro M190]
rename_existing = M190.1
gcode = 
	{% if printer["gcode_macro status_heating"] != null %}
	status_heating
	{% endif %}
	M190.1 { rawparams }
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro _CHOME]
gcode = 
	{% if printer["gcode_macro status_homing"] != null %}
	status_homing
	{% endif %}
	{% if printer.toolhead.homed_axes != "xyz" %}
	G28
	{% endif %}
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro M109]
rename_existing = M109.1
gcode = 
	{% if printer["gcode_macro status_heating"] != null %}
	status_heating
	{% endif %}
	M109.1 { rawparams }
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro _MOVE_AWAY]
gcode = 
	{% set th = printer.toolhead %}
	{% set x_safe = th.position.x + 20 * (1 if th.axis_maximum.x - th.position.x > 20 else -1) %}
	{% set y_safe = th.position.y + 20 * (1 if th.axis_maximum.y - th.position.y > 20 else -1) %}
	{% set z_safe = [th.position.z + 2, th.axis_maximum.z]|min %}
	
	G90
	G0 X{x_safe} Y{y_safe} Z{z_safe} F20000

[gcode_macro PARK_CENTER_REAR]
gcode = 
	{% if printer["gcode_macro status_busy"] != null %}
	status_busy
	{% endif %}
	{% set th = printer.toolhead %}
	{% set x_safe = th.position.x + 20 * (1 if th.axis_maximum.x - th.position.x > 20 else -1) %}
	{% set y_safe = th.position.y + 20 * (1 if th.axis_maximum.y - th.position.y > 20 else -1) %}
	
	G0 X{th.axis_maximum.x//2} Y{th.axis_maximum.y - 2} F3600
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro START_PRINT]
variable_retract = 15
gcode = 
	{% set chamber_temp = params.CHAMBER_TEMP|default(0)|float %}
	{% set extruder_temp = params.EXTRUDER_TEMP|default(210)|float %}
	{% set bed_temp = params.BED_TEMP|default(60)|float %}
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	CLEAR_PAUSE
	G28
	Smart_Park
	M220 S100
	M221 S100
	SET_HEATER_TEMPERATURE HEATER=chamber_heater TARGET={chamber_temp}
	SET_HEATER_TEMPERATURE HEATER=heater_bed TARGET={bed_temp}
	TEMPERATURE_WAIT SENSOR=heater_bed MINIMUM={bed_temp * 0.75}
	SET_HEATER_TEMPERATURE HEATER=extruder TARGET={extruder_temp}
	G90
	M82
	TEMPERATURE_WAIT SENSOR=heater_bed MINIMUM={bed_temp}
	TEMPERATURE_WAIT SENSOR=extruder MINIMUM={extruder_temp}
	
	G1 E-15 F3600
	
	G28
	BED_MESH_CALIBRATE
	PRIME_LINE

[gcode_macro pid_soplo]
gcode = 
	PID_CALIBRATE HEATER=extruder TARGET=250

[gcode_macro pid_bed]
gcode = 
	PID_CALIBRATE HEATER=heater_bed TARGET=105

[gcode_macro BED]
gcode = 
	PROBE_CALIBRATE

[gcode_macro END_PRINT]
gcode = 
	
	{% set max_x = printer.configfile.config["stepper_x"]["position_max"]|float %}
	{% set max_y = printer.configfile.config["stepper_y"]["position_max"]|float %}
	{% set max_z = printer.configfile.config["stepper_z"]["position_max"]|float %}
	
	
	{% if printer.toolhead.position.x < (max_x - 20) %}
	{% set x_safe = 20.0 %}
	{% else %}
	{% set x_safe = -20.0 %}
	{% endif %}
	
	{% if printer.toolhead.position.y < (max_y - 20) %}
	{% set y_safe = 20.0 %}
	{% else %}
	{% set y_safe = -20.0 %}
	{% endif %}
	
	{% if printer.toolhead.position.z < (max_z - 2) %}
	{% set z_safe = 2.0 %}
	{% else %}
	{% set z_safe = max_z - printer.toolhead.position.z %}
	{% endif %}
	
	
	M400
	G92 E0
	G1 E-15 F3600
	G91
	G0 Z{z_safe} F3600
	G0 X{x_safe} Y{y_safe} F20000
	
	
	M104 S0
	M104 S0
	M140 S0
	M106 S0
	G90
	G0 X{max_x / 2} Y{max_y} F3600
	
	SONG_CRAB_RAVE
	
	
	
	M117 Finished!
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=30

[gcode_macro M300]
gcode = 
	
	{% set S = params.S|default(1000)|int %}
	
	{% set P = params.P|default(100)|int %}
	
	
	{% set V = params.V|default(99)|int %}
	SET_PIN PIN=beeper VALUE={0.1 * (V / 100) if S > 0 else 1} CYCLE_TIME={ 1.0 / S if S > 0 else 1 }
	G4 P{P}
	SET_PIN PIN=beeper VALUE=0 CYCLE_TIME={ 0.001 }
description = 
	"Plays a beep sound.
	@param {int} [S=1000] - Frequency in Hz
	@param {int} [P=100] - Duration in ms
	@param {int} [V=99] - Volume in percent"

[gcode_macro PRIME_LINE]
gcode = 
	{% set feedrate = params.F|default(10)|float * 60 %}
	{% set length = 100.0 %}
	{% set width = printer.configfile.settings.extruder.nozzle_diameter|float %}
	{% set height = ( (width / 0.04)|int - (width / 0.04 / 4)|int )|float * 0.04 %}
	
	{% set extrude = length * width * height * 1.5 %}
	SAVE_GCODE_STATE NAME=PRIME_LINE_STATE
	SET_IDLE_TIMEOUT TIMEOUT=7200
	{% if 'Y' in params %}
	{% set x_start = 1.0 %}
	{% set y_start = (printer.toolhead.axis_maximum.y|float - 100) / 2 %}
	G0 X{x_start} Y{y_start} F5000
	G0 Z{height} F1500
	G91
	
	G1 E8 F300
	
	
	G1 Y100 E{extrude} F{feedrate}
	G0 X{width} F5000
	G1 Y-100 E{extrude} F{feedrate}
	{% else %}
	{% set x_start = (printer.toolhead.axis_maximum.x|float - 100) / 2 %}
	{% set y_start = 1.0 %}
	G0 X{x_start} Y{y_start} F5000
	G0 Z{height} F1500
	G91
	
	G1 E8 F300
	
	
	G1 X100 E{extrude} F{feedrate}
	G0 Y{width} F5000
	G1 X-100 E{extrude} F{feedrate}
	{% endif %}
	RESTORE_GCODE_STATE NAME=PRIME_LINE_STATE

[gcode_macro VINT]
gcode = 
	SCREWS_TILT_CALCULATE

[gcode_macro LOW_TEMP_CHECK]
gcode = 
	{% set extruder_temp = params.T|default(240)|float %}
	{% if printer.extruder.target > extruder_temp %}
	{% set extruder_temp = printer.extruder.target %}
	{% endif %}
	{% if printer.extruder.temperature < extruder_temp %}
	M118 Heating to {extruder_temp}
	SET_HEATER_TEMPERATURE HEATER=extruder TARGET={extruder_temp}
	TEMPERATURE_WAIT SENSOR=extruder MINIMUM={extruder_temp}
	{% endif %}

[gcode_macro M76]
gcode = 
	PAUSE

[gcode_macro M601]
gcode = 
	PAUSE

[gcode_macro G27]
gcode = 
	PARK

[gcode_macro M125]
gcode = 
	PARK

[gcode_macro M600]
gcode = 
	PAUSE

[gcode_macro M701]
gcode = 
	FILAMENT_LOAD

[gcode_macro M702]
gcode = 
	FILAMENT_UNLOAD

[gcode_macro M500]
gcode = 
	SAVE_CONFIG

[gcode_macro PARK]
gcode = 
	{% set x_park = params.X|default(0)|float %}
	{% set y_park = params.Y|default(0)|float %}
	{% set z_park = params.Z|default(10)|float + printer.toolhead.position.z|float %}
	{% set x_max = printer.toolhead.axis_maximum.x|float %}
	{% set y_max = printer.toolhead.axis_maximum.y|float %}
	{% set z_max = printer.toolhead.axis_maximum.z|float %}
	{% if x_park > x_max %}
	{% set x_park = x_max %}
	{% endif %}
	{% if y_park > y_max %}
	{% set y_park = y_max %}
	{% endif %}
	{% if z_park > z_max %}
	{% set z_park = z_max %}
	{% endif %}
	SAVE_GCODE_STATE NAME=PARK_STATE
	G90
	G1 Z{z_park} F1500
	G1 X{x_park} Y{y_park} F5000
	RESTORE_GCODE_STATE name=PARK_STATE

[gcode_macro START_DRYER]
description = Start the heated bed filament dryer.
gcode = 
	{% set ChamberTemperature = params.CHAMBER | default(65.0) | float %}
	{% set BedTemperature = params.TEMPERATURE | default(0.0) | float %}
	{% set DryTime = params.TIME | default(14400) | int %}
	M140 S{BedTemperature}
	M141 S{ChamberTemperature}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=time_remaining VALUE={DryTime}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=bed_temperature VALUE={BedTemperature}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=chamber_temperature VALUE={ChamberTemperature}
	UPDATE_DELAYED_GCODE ID=DRYER_TIMER DURATION=1

[gcode_macro STOP_DRYER]
gcode = 
	M140 S0
	M141 S0
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=time_remaining VALUE=0
	UPDATE_DELAYED_GCODE ID=DRYER_TIMER DURATION=0
	M117 Drying Stopped

[gcode_macro DRYER_STATUS]
variable_time_remaining = 0
variable_bed_temperature = 0
variable_chamber_temperature = 0
gcode = 
	{% if time_remaining > 0 %}
	M140 S{bed_temperature}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=time_remaining VALUE={time_remaining - 1}
	M117 Drying {time_remaining}
	{% else %}
	STOP_DRYER
	{% endif %}

[delayed_gcode DRYER_TIMER]
gcode = 
	UPDATE_DELAYED_GCODE ID=DRYER_TIMER DURATION=1
	DRYER_STATUS

[gcode_macro DRY_tpu]
gcode = 
	START_DRYER TEMPERATURE=0 CHAMBER=50 TIME=18000

[gcode_macro DRY_PETG]
gcode = 
	START_DRYER TEMPERATURE=0  CHAMBER=65 TIME=18000

[gcode_macro DRY_ABS]
gcode = 
	{% set S = params.S|default(0.0)|float %}
	SET_PIN PIN=Laser VALUE={S / 255.0}

[gcode_macro M4]
gcode = 
	{% set S = params.S|default(0.0)|float %}
	SET_PIN PIN=Laser VALUE={S / 255.0}

[gcode_macro M5]
gcode = 
	SET_PIN PIN=Laser VALUE=0

[menu __main __control __toolonoff]
type = input
enable = {'pwm_tool Laser' in printer}
name = Fan: {'ON ' if menu.input else 'OFF'}
input = {printer['pwm_tool Laser'].value}
input_min = 0
input_max = 1
input_step = 1
gcode = 
	M3 S{255 if menu.input else 0}

[menu __main __control __toolspeed]
type = input
enable = {'pwm_tool Laser' in printer}
name = Laser speed: {'%3d' % (menu.input*100)}%
input = {printer['pwm_tool Laser'].value}
input_min = 0
input_max = 1
input_step = 0.01
gcode = 
	M3 S{'%d' % (menu.input*255)}

[gcode_macro NOTE]
description = 
	"Plays a specified note for a specified duration
	@param {string} [N=C5] - Note to play
	@param {int} [D=500] - Duration of note. There are currently some Klipper limitations to how short a note can be.
	@param {int} [V=99] - Volume in percent
	@param {bool} [S=true] - Whether or not to stop the note after duration"
gcode = 
	{% set notes = {
	'C0': 16.35,   'CS0': 17.32,   'D0': 18.35,   'DS0': 19.45,   'E0': 20.60,   'F0': 21.83,   'FS0': 23.12,   'G0': 24.50,   'GS0': 25.96,   'A0': 27.50,   'AS0': 29.14,   'B0': 30.87,
	'C1': 32.70,   'CS1': 34.65,   'D1': 36.71,   'DS1': 38.89,   'E1': 41.20,   'F1': 43.65,   'FS1': 46.25,   'G1': 49.00,   'GS1': 51.91,   'A1': 55.00,   'AS1': 58.27,   'B1': 61.74,
	'C2': 65.41,   'CS2': 69.30,   'D2': 73.42,   'DS2': 77.78,   'E2': 82.41,   'F2': 87.31,   'FS2': 92.50,   'G2': 98.00,   'GS2': 103.83,  'A2': 110.00,  'AS2': 116.54,  'B2': 123.47,
	'C3': 130.81,  'CS3': 138.59,  'D3': 146.83,  'DS3': 155.56,  'E3': 164.81,  'F3': 174.61,  'FS3': 185.00,  'G3': 196.00,  'GS3': 207.65,  'A3': 220.00,  'AS3': 233.08,  'B3': 246.94,
	'C4': 261.63,  'CS4': 277.18,  'D4': 293.66,  'DS4': 311.13,  'E4': 329.63,  'F4': 349.23,  'FS4': 369.99,  'G4': 392.00,  'GS4': 415.30,  'A4': 440.00,  'AS4': 466.16,  'B4': 493.88,
	'C5': 523.25,  'CS5': 554.37,  'D5': 587.33,  'DS5': 622.25,  'E5': 659.26,  'F5': 698.46,  'FS5': 739.99,  'G5': 783.99,  'GS5': 830.61,  'A5': 880.00,  'AS5': 932.33,  'B5': 987.77,
	'C6': 1046.50, 'CS6': 1108.73, 'D6': 1174.66, 'DS6': 1244.51, 'E6': 1318.51, 'F6': 1396.91, 'FS6': 1479.98, 'G6': 1567.98, 'GS6': 1661.22, 'A6': 1760.00, 'AS6': 1864.66, 'B6': 1975.53,
	'C7': 2093.00, 'CS7': 2217.46, 'D7': 2349.32, 'DS7': 2489.02, 'E7': 2637.02, 'F7': 2793.83, 'FS7': 2959.96, 'G7': 3135.96, 'GS7': 3322.44, 'A7': 3520.00, 'AS7': 3729.31, 'B7': 3951.07,
	'C8': 4186.01, 'CS8': 4434.92, 'D8': 4698.64, 'DS8': 4978.03, 'E8': 5274.04, 'F8': 5587.65, 'FS8': 5919.91, 'G8': 6271.93, 'GS8': 6644.88, 'A8': 7040.00, 'AS8': 7458.62, 'B8': 7902.13,
	} %}
	
	{% set note = params.N|default('C5')|string %}
	
	{% set dur = params.D|default(500)|int %}
	
	
	{% set volume = params.V|default(99)|int %}
	
	{% set stop = params.S|default('true')|string %}
	
	{% set freq = notes[note] %}
	
	SET_PIN PIN=beeper VALUE={0.1 * (volume / 100) if volume > 0 else 1} CYCLE_TIME={ 1.0 / freq }
	G4 P{dur}
	{% if stop|lower == 'true' %}
	SET_PIN PIN=beeper VALUE=0 CYCLE_TIME={ 0.001 }
	{% endif %}

[gcode_macro TONE_GEN]
description = "Used for the tone generator menu"
variable_tone_freq = 0.001093
gcode = 
	M117 {printer["gcode_macro TONE_GEN"].tone_freq}nothz

[gcode_macro SONG_STAR_WARS_MAIN_THEME]
description = "Plays the Star Wars main theme"
gcode = 
	NOTE N=D4 D=133
	NOTE N=D4 D=133
	NOTE N=D4 D=133
	NOTE N=G4 D=1000
	NOTE N=D5 D=1000
	
	NOTE N=C5 D=133
	NOTE N=B4 D=133
	NOTE N=A4 D=133
	NOTE N=G5 D=1000
	NOTE N=D5 D=500
	
	NOTE N=C5 D=133
	NOTE N=B4 D=133
	NOTE N=A4 D=133
	NOTE N=G5 D=1000
	NOTE N=D5 D=500
	
	NOTE N=C5 D=133
	NOTE N=B4 D=133
	NOTE N=C5 D=133
	NOTE N=A4 D=1000

[gcode_macro SONG_CRAB_RAVE]
description = "Plays Crab Rave"
gcode = 
	NOTE N=D6 D=150 V=30 S=1
	NOTE N=AS6 D=150 V=30 S=1
	NOTE N=G6 D=150 V=30 S=1
	NOTE N=G6 D=150 V=30 S=0
	NOTE N=D6 D=150 V=30 S=1
	NOTE N=D6 D=150 V=30 S=0
	NOTE N=A6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=0
	NOTE N=D6 D=150 V=30 S=1
	NOTE N=D6 D=150 V=30 S=0
	NOTE N=A6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=0
	NOTE N=C6 D=150 V=30 S=1
	NOTE N=C6 D=150 V=30 S=1
	NOTE N=E6 D=150 V=30 S=1
	NOTE N=E6 D=150 V=30 S=0
	NOTE N=F6 D=150 V=30 S=1
	SET_PIN PIN=beeper VALUE=0

[gcode_macro one]
description = "one"
gcode = 
	NOTE N=C6 D=600 V=30 S=1
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=G5 D=400 V=30 S=1
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=E6 D=400 V=30 S=1
	G4 P150
	NOTE N=G6 D=180 V=30 S=0
	NOTE N=F6 D=180 V=30 S=0
	NOTE N=E6 D=180 V=30 S=0
	NOTE N=D6 D=180 V=30 S=1
	NOTE N=C6 D=600 V=30 S=1
	
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=G5 D=400 V=30 S=1
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=C6 D=600 V=30 S=1
	SET_PIN PIN=beeper VALUE=0

[gcode_macro SONG_BOOMER]
description = "BOOMER"
gcode = 
	M300 P207 S659
	M300 P207 S784
	M300 P207 S494
	M300 P207 S494
	M300 P207 S392
	M300 P207 S494
	M300 P207 S494
	M300 P207 S330
	M300 P207 S784
	M300 P207 S659
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S988
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S659
	M300 P207 S784
	M300 P207 S494
	M300 P207 S494
	M300 P207 S392
	M300 P207 S494
	M300 P207 S494
	M300 P207 S330
	M300 P207 S784
	M300 P207 S659
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S988
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S659
	M300 P207 S784
	M300 P207 S494
	M300 P207 S494
	M300 P207 S392
	M300 P207 S494
	M300 P207 S494
	M300 P207 S330
	M300 P207 S784
	M300 P207 S659
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S988
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330

[gcode_macro GET_TIMELAPSE_SETUP]
description = Print the Timelapse setup
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% set output_txt = ["Timelapse Setup:"] %}
	{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}
	{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}
	{% if tl.park.enable %}
	{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}
	{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}
	{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}
	{% endif %}
	{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}
	{% if not tl.extruder.fw_retract %}
	{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}
	{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}
	{% endif %}
	{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}
	{action_respond_info(output_txt|join("\n"))}

[gcode_macro _SET_TIMELAPSE_SETUP]
description = Set user parameters for timelapse
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	
	{% set min = printer.toolhead.axis_minimum %}
	{% set max = printer.toolhead.axis_maximum %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	{% set park = {'min'   : {'x': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),
	'y': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},
	'max'   : {'x': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),
	'y': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},
	'center': {'x': (max.x-(max.x-min.x)/2)|round(3),
	'y': (max.y-(max.y-min.y)/2)|round(3)}} %}
	
	{% if params.ENABLE %}
	{% if params.ENABLE|lower is in ['true', 'false'] %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == 'true' else False}
	{% else %}
	{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.VERBOSE %}
	{% if params.VERBOSE|lower is in ['true', 'false'] %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == 'true' else False}
	{% else %}
	{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_X %}
	{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}
	{% set _dummy = tl.park.custom.update({'x':params.CUSTOM_POS_X|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_Y %}
	{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}
	{% set _dummy = tl.park.custom.update({'y':params.CUSTOM_POS_Y|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_DZ %}
	{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}
	{% set _dummy = tl.park.custom.update({'dz':params.CUSTOM_POS_DZ|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}
	{% endif %}
	{% endif %}
	{% if params.PARK_ENABLE %}
	{% if params.PARK_ENABLE|lower is in ['true', 'false'] %}
	{% set _dummy = tl.park.update({'enable':True if params.PARK_ENABLE|lower == 'true' else False}) %}
	{% else %}
	{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.PARK_POS %}
	{% if params.PARK_POS|lower is in ['center','front_left','front_right','back_left','back_right','custom','x_only','y_only'] %}
	{% set dic = {'center'      : {'x': park.center.x   , 'y': park.center.y   , 'dz': 1                },
	'front_left'  : {'x': park.min.x      , 'y': park.min.y      , 'dz': 0                },
	'front_right' : {'x': park.max.x      , 'y': park.min.y      , 'dz': 0                },
	'back_left'   : {'x': park.min.x      , 'y': park.max.y      , 'dz': 0                },
	'back_right'  : {'x': park.max.x      , 'y': park.max.y      , 'dz': 0                },
	'custom'      : {'x': tl.park.custom.x, 'y': tl.park.custom.y, 'dz': tl.park.custom.dz},
	'x_only'      : {'x': tl.park.custom.x, 'y': 'none'          , 'dz': tl.park.custom.dz},
	'y_only'      : {'x': 'none'          , 'y': tl.park.custom.y, 'dz': tl.park.custom.dz}} %}
	{% set _dummy = tl.park.update({'pos':params.PARK_POS|lower}) %}
	{% set _dummy = tl.park.update({'coord':dic[tl.park.pos]}) %}
	{% else %}
	{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"
	% params.PARK_POS|upper)}
	{% endif %}
	{% endif %}
	{% if params.PARK_TIME %}
	{% if params.PARK_TIME|float >= 0.0 %}
	{% set _dummy = tl.park.update({'time':params.PARK_TIME|float|round(3)}) %}
	{% else %}
	{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"
	{% if params.TRAVEL_SPEED %}
	{% if params.TRAVEL_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'travel':params.TRAVEL_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}
	{% endif %}
	{% endif %}
	{% if params.RETRACT_SPEED %}
	{% if params.RETRACT_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'retract':params.RETRACT_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}
	{% endif %}
	{% endif %}
	{% if params.EXTRUDE_SPEED %}
	{% if params.EXTRUDE_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'extrude':params.EXTRUDE_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"
	{% if params.EXTRUDE_DISTANCE %}
	{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}
	{% set _dummy = tl.extruder.update({'extrude':params.EXTRUDE_DISTANCE|float|round(3)}) %}
	{% else %}
	{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}
	{% endif %}
	{% endif %}
	{% if params.RETRACT_DISTANCE %}
	{% if params.RETRACT_DISTANCE|float >= 0.0 %}
	{% set _dummy = tl.extruder.update({'retract':params.RETRACT_DISTANCE|float|round(3)}) %}
	{% else %}
	{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}
	{% endif %}
	{% endif %}
	{% if params.FW_RETRACT %}
	{% if params.FW_RETRACT|lower is in ['true', 'false'] %}
	{% if 'firmware_retraction' in printer.configfile.settings %}
	{% set _dummy = tl.extruder.update({'fw_retract': True if params.FW_RETRACT|lower == 'true' else False}) %}
	{% else %}
	{% set _dummy = tl.extruder.update({'fw_retract':False}) %}
	{% if params.FW_RETRACT|capitalize == 'True' %}
	{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}
	{% endif %}
	{% endif %}
	{% else %}
	{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"
	{% if printer.configfile.settings['gcode_macro pause'] is defined %}
	{% set _dummy = tl.macro.update({'pause': printer.configfile.settings['gcode_macro pause'].rename_existing}) %}
	{% endif %}
	{% if printer.configfile.settings['gcode_macro resume'] is defined %}
	{% set _dummy = tl.macro.update({'resume': printer.configfile.settings['gcode_macro resume'].rename_existing}) %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"

[gcode_macro TIMELAPSE_TAKE_FRAME]
description = Take Timelapse shoot
variable_enable = False
variable_takingframe = False
variable_park = {'enable': False,
	'pos'   : 'center',
	'time'  : 0.1,
	'custom': {'x': 0, 'y': 0, 'dz': 0},
	'coord' : {'x': 0, 'y': 0, 'dz': 0}}
variable_extruder = {'fw_retract': False,
	'retract': 1.0,
	'extrude': 1.0}
variable_speed = {'travel': 100,
	'retract': 15,
	'extrude': 15}
variable_verbose = True
variable_restore = {'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}
variable_macro = {'pause': 'PAUSE', 'resume': 'RESUME'}
variable_is_paused = False
gcode = 
	{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower =='true' else False %}
	{% if enable %}
	{% if (hyperlapse and printer['gcode_macro HYPERLAPSE'].run) or
	(not hyperlapse and not printer['gcode_macro HYPERLAPSE'].run) %}
	{% if park.enable %}
	{% set pos = {'x': 'X' + park.coord.x|string if park.pos != 'y_only' else '',
	'y': 'Y' + park.coord.y|string if park.pos != 'x_only' else '',
	'z': 'Z'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}
	{% set restore = {'absolute': {'coordinates': printer.gcode_move.absolute_coordinates,
	'extrude'    : printer.gcode_move.absolute_extrude},
	'speed'   : printer.gcode_move.speed,
	'e'       : printer.gcode_move.gcode_position.e,
	'factor'  : {'speed'  : printer.gcode_move.speed_factor,
	'extrude': printer.gcode_move.extrude_factor}} %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"
	{% if not printer[printer.toolhead.extruder].can_extrude %}
	{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}
	{% else %}
	{% if extruder.fw_retract %}
	G10
	{% else %}
	M83
	G0 E-{extruder.retract} F{speed.retract * 60}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True
	{macro.pause}
	SET_GCODE_OFFSET X=0 Y=0
	G90
	{% if "xyz" not in printer.toolhead.homed_axes %}
	{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}
	{% else %}
	G0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5
	M400
	{% endif %}
	_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}
	{% endif %}
	{% else %}
	{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}
	{% endif %}

[gcode_macro _TIMELAPSE_NEW_FRAME]
description = action call for timelapse shoot. must be a seperate macro
gcode = 
	{action_call_remote_method("timelapse_newframe",
	macropark=printer['gcode_macro TIMELAPSE_TAKE_FRAME'].park,
	hyperlapse=params.HYPERLAPSE)}

[delayed_gcode _WAIT_TIMELAPSE_TAKE_FRAME]
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% set factor = {'speed': printer.gcode_move.speed_factor, 'extrude': printer.gcode_move.extrude_factor} %}
	{% if tl.takingframe %}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5
	{% else %}
	{tl.macro.resume} VELOCITY={tl.speed.travel}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False
	{% if not printer[printer.toolhead.extruder].can_extrude %}
	{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}
	{% else %}
	{% if tl.extruder.fw_retract %}
	G11
	{% else %}
	G0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}
	G0 F{tl.restore.speed}
	{% if tl.restore.absolute.extrude %}
	M82
	G92 E{tl.restore.e}
	{% endif %}
	{% endif %}
	{% endif %}
	{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}
	{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}
	{% if not tl.restore.absolute.coordinates %} G91 {% endif %}
	{% endif %}

[gcode_macro HYPERLAPSE]
description = Start/Stop a hyperlapse recording
variable_cycle = 0
variable_run = False
gcode = 
	{% set cycle = params.CYCLE|default(30)|int %}
	{% if params.ACTION and params.ACTION|lower == 'start' %}
	{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}
	TIMELAPSE_TAKE_FRAME HYPERLAPSE=True
	{% elif params.ACTION and params.ACTION|lower == 'stop' %}
	{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0
	{% else %}
	{action_raise_error("Hyperlapse: No valid input parameter
	Use:
	- HYPERLAPSE ACTION=START [CYCLE=time]
	- HYPERLAPSE ACTION=STOP")}
	{% endif %}

[delayed_gcode _HYPERLAPSE_LOOP]
gcode = 
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}
	TIMELAPSE_TAKE_FRAME HYPERLAPSE=True

[gcode_macro TIMELAPSE_RENDER]
description = Render Timelapse video and wait for the result
variable_render = False
variable_run_identifier = 0
gcode = 
	{action_respond_info("Timelapse: Rendering started")}
	{action_call_remote_method("timelapse_render", byrendermacro="True")}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True
	{printer.configfile.settings['gcode_macro pause'].rename_existing}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5

[delayed_gcode _WAIT_TIMELAPSE_RENDER]
gcode = 
	{% set ri = printer['gcode_macro TIMELAPSE_RENDER'].run_identifier % 4 %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}
	{% if printer['gcode_macro TIMELAPSE_RENDER'].render %}
	M117 Rendering {['-','\\','|','/'][ri]}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5
	{% else %}
	{action_respond_info("Timelapse: Rendering finished")}
	M117
	{printer.configfile.settings['gcode_macro resume'].rename_existing}
	{% endif %}

[gcode_macro TEST_STREAM_DELAY]
description = Helper macro to find stream and park delay
gcode = 
	{% set min = printer.toolhead.axis_minimum %}
	{% set max = printer.toolhead.axis_maximum %}
	{% set act = printer.toolhead.position %}
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% if act.z > 5.0 %}
	G0 X{min.x + 5.0} F{tl.speed.travel|int * 60}
	G0 X{(max.x-min.x)/2}
	G4 P{tl.park.time|float * 1000}
	_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE
	G0 X{max.x - 5.0}
	{% else %}
	{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}
	{% endif %}

[exclude_object]

[gcode_macro update_git]
gcode = 
	{% set message = params.MESSAGE|default() %}
	{% if message %}
	RUN_SHELL_COMMAND CMD=update_git_script_message PARAMS="'{params.MESSAGE}'"
	{% else %}
	RUN_SHELL_COMMAND CMD=update_git_script
	{% endif %}

[gcode_shell_command update_git_script]
command = bash -c "bash $HOME/klipper-backup/script.sh"
timeout = 90.0
verbose = True

[gcode_shell_command update_git_script_message]
command = bash -c "bash $HOME/klipper-backup/script.sh -c \"$0\""
timeout = 90.0
verbose = True

[mcu]
serial = /dev/ttyS3
restart_method = command

[output_pin Power]
pin = PC12
value = 1
shutdown_value = 1

[temperature_sensor orange_pi]
sensor_type = temperature_host
min_temp = 0
max_temp = 100

[heater_generic chamber_heater]
heater_pin = !PA7
sensor_type = ATC Semitec 104GT-2
sensor_pin = PA5
control = watermark
max_power = 1
min_temp = 15
max_temp = 85

[verify_heater chamber_heater]
max_error = 9999
check_gain_time = 9999
hysteresis = 5
heating_gain = 2

[filament_motion_sensor motion_sensor]
detection_length = 50
extruder = extruder
switch_pin = !PC15
pause_on_runout = True
runout_gcode = 
	SONG_CRAB_RAVE

[bltouch]
sensor_pin = ^PC14
control_pin = PA1
x_offset = -40
y_offset = 0.000
z_offset = 1.70
pin_up_reports_not_triggered = False
probe_with_touch_mode = True

[heater_bed]
heater_pin = PC9
sensor_type = ATC Semitec 104GT-2
sensor_pin = PC3
control = pid
pid_kp = 72.553
pid_ki = 1.154
pid_kd = 1139.994
min_temp = 5
max_temp = 125

[heater_fan radiator]
pin = PC7
max_power = 1.0
kick_start_time = 0.600
heater = extruder
heater_temp = 50.0
shutdown_speed = 1

[fan]
pin = PC6

[input_shaper]
shaper_type_x = 2hump_ei
shaper_freq_x = 43.0
shaper_type_y = mzv
shaper_freq_y = 32.6

[printer]
kinematics = cartesian
max_velocity = 300
max_accel = 1900
max_z_velocity = 30
max_z_accel = 100
square_corner_velocity = 4

[bed_mesh]
speed = 150
horizontal_move_z = 9
mesh_min = 10, 20
mesh_max = 195, 210
probe_count = 5
mesh_pps = 2, 3
algorithm = bicubic
bicubic_tension = 0.2
move_check_distance = 9
split_delta_z = .025
fade_start = 1
fade_end = 10
fade_target = 0

[screws_tilt_adjust]
screw1 = 79, 27
screw1_name = Peredniy Leviy
screw2 = 235, 27
screw2_name = Peredniy Praviy
screw3 = 235,197
screw3_name = Zadniy Praviy
screw4 = 79,197
screw4_name = Zadniy Leviy
speed = 120
horizontal_move_z = 9

[safe_z_home]
home_xy_position = 157,115
speed = 50
z_hop = 9.0
z_hop_speed = 20.0

[stepper_x]
step_pin = PB13
dir_pin = !PB12
enable_pin = !PB14
microsteps = 16
rotation_distance = 40
endstop_pin = ^PC0
position_endstop = 0
position_max = 240
position_min = -2
homing_retract_dist = 5
homing_speed = 50
second_homing_speed = 10

[tmc2209 stepper_x]
uart_pin = PC11
tx_pin = PC10
uart_address = 0
run_current = 0.580
stealthchop_threshold = 999999

[stepper_y]
step_pin = PB10
dir_pin = !PB2
enable_pin = !PB11
microsteps = 16
rotation_distance = 40
endstop_pin = ^PC1
position_endstop = 0
homing_retract_dist = 5
homing_speed = 50
second_homing_speed = 10
position_max = 231
position_min = 0

[tmc2209 stepper_y]
uart_pin = PC11
tx_pin = PC10
uart_address = 2
run_current = 0.6
stealthchop_threshold = 999999

[stepper_z]
step_pin = PB0
dir_pin = PC5
enable_pin = !PB1
microsteps = 16
rotation_distance = 40
gear_ratio = 80:16
full_steps_per_rotation = 200
endstop_pin = probe:z_virtual_endstop
homing_retract_dist = 9
second_homing_speed = 10
position_min = -5
position_max = 245
homing_speed = 50

[tmc2209 stepper_z]
uart_pin = PC11
tx_pin = PC10
uart_address = 1
run_current = 0.580
stealthchop_threshold = 999999
interpolate = false

[extruder]
step_pin = PB3
dir_pin = PB4
enable_pin = !PD2
microsteps = 16
rotation_distance = 4.637
nozzle_diameter = 0.400
filament_diameter = 1.750
heater_pin = PC8
sensor_type = ATC Semitec 104GT-2
sensor_pin = PA0
min_temp = 5
max_temp = 270
max_extrude_only_velocity = 120
max_extrude_only_accel = 3000
pressure_advance = 0.031
full_steps_per_rotation = 200
control = pid
pid_kp = 29.662
pid_ki = 2.382
pid_kd = 92.322

[tmc2209 extruder]
uart_pin = PC11
tx_pin = PC10
uart_address = 3
run_current = 0.7
stealthchop_threshold = 999999

[static_digital_output usb_pullup_enable]
pins = !PA14

[board_pins]
aliases = 
	
	EXP1_1=PB5,  EXP1_3=PA9,   EXP1_5=PA10, EXP1_7=PB8,  EXP1_9=<GND>,
	EXP1_2=PA15, EXP1_4=<RST>, EXP1_6=PB9,  EXP1_8=PB15, EXP1_10=<5V>

[display]
lcd_type = st7920
cs_pin = EXP1_7
sclk_pin = EXP1_6
sid_pin = EXP1_8
encoder_pins = ^EXP1_5, ^EXP1_3
click_pin = ^!EXP1_2

[pwm_cycle_time beeper]
pin = EXP1_1
shutdown_value = 0
cycle_time = 0.001

[firmware_retraction]
retract_length = 1.0
retract_speed = 80
unretract_extra_length = 0
unretract_speed = 80

[pwm_tool Laser]
pin = PA6
cycle_time = 0.0001
shutdown_value = 0
maximum_mcu_duration = 5

[bed_mesh 70]
version = 1
points = 
	-0.045000, 0.027500, 0.015000
	-0.055000, -0.005000, -0.035000
	-0.007500, 0.040000, -0.002500
x_count = 3
y_count = 3
mesh_x_pps = 2
mesh_y_pps = 3
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 195.0
min_y = 20.0
max_y = 210.0

[bed_mesh default]
version = 1
points = 
	0.020000, 0.025000, 0.030000, -0.007500, -0.052500
	0.015000, 0.017500, 0.022500, -0.007500, -0.057500
	0.030000, 0.030000, 0.037500, 0.002500, -0.035000
	0.012500, 0.030000, 0.050000, 0.035000, -0.010000
	0.080000, 0.087500, 0.115000, 0.097500, 0.067500
x_count = 5
y_count = 5
mesh_x_pps = 2
mesh_y_pps = 3
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 195.0
min_y = 20.0
max_y = 210.0
=======================
Extruder max_extrude_ratio=0.266081
mcu 'mcu': Starting serial connect
mcu 'mcu': got {'oid': 14, 'next_clock': 2788028416, 'value': 31186, '#name': 'analog_in_state', '#sent_time': 25.481446219000002, '#receive_time': 25.517447511}
mcu 'mcu': got {'oid': 18, 'next_clock': 2790908416, 'value': 31323, '#name': 'analog_in_state', '#sent_time': 25.535275594, '#receive_time': 25.557441928000003}
mcu 'mcu': got {'oid': 26, 'next_clock': 2796668416, 'value': 31270, '#name': 'analog_in_state', '#sent_time': 25.588531094, '#receive_time': 25.637441678000002}
mcu 'mcu': got {'oid': 14, 'next_clock': 2809628416, 'value': 31199, '#name': 'analog_in_state', '#sent_time': 25.798155761, '#receive_time': 25.817421261}
mcu 'mcu': got {'oid': 18, 'next_clock': 2812508416, 'value': 31329, '#name': 'analog_in_state', '#sent_time': 25.850510595000003, '#receive_time': 25.857408428000003}
Loaded MCU 'mcu' 118 commands (v0.12.0-404-g80d185c94 / gcc: (15:12.2.rel1-1) 12.2.1 20221205 binutils: (2.40-2+18+b1) 2.40)
MCU 'mcu' config: ADC_MAX=4095 BUS_PINS_i2c1=PB6,PB7 BUS_PINS_i2c1a=PB8,PB9 BUS_PINS_i2c2=PB10,PB11 BUS_PINS_spi1=PA6,PA7,PA5 BUS_PINS_spi1a=PB4,PB5,PB3 BUS_PINS_spi2=PB14,PB15,PB13 BUS_PINS_spi3=PB4,PB5,PB3 CLOCK_FREQ=72000000 INITIAL_PINS=!PA14 MCU=stm32f103xe PWM_MAX=255 RECEIVE_WINDOW=192 RESERVE_PINS_serial=PA3,PA2 SERIAL_BAUD=250000 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
Configured MCU 'mcu' (1024 moves)
Starting heater checks for chamber_heater
Starting heater checks for heater_bed
bed_mesh: generated points
Index |  Tool Adjusted  |   Probe
  0   | (50.0, 20.0)    | (10.0, 20.0)
  1   | (96.2, 20.0)    | (56.2, 20.0)
  2   | (142.5, 20.0)   | (102.5, 20.0)
  3   | (188.8, 20.0)   | (148.8, 20.0)
  4   | (235.0, 20.0)   | (195.0, 20.0)
  5   | (235.0, 67.5)   | (195.0, 67.5)
  6   | (188.8, 67.5)   | (148.8, 67.5)
  7   | (142.5, 67.5)   | (102.5, 67.5)
  8   | (96.2, 67.5)    | (56.2, 67.5)
  9   | (50.0, 67.5)    | (10.0, 67.5)
  10  | (50.0, 115.0)   | (10.0, 115.0)
  11  | (96.2, 115.0)   | (56.2, 115.0)
  12  | (142.5, 115.0)  | (102.5, 115.0)
  13  | (188.8, 115.0)  | (148.8, 115.0)
  14  | (235.0, 115.0)  | (195.0, 115.0)
  15  | (235.0, 162.5)  | (195.0, 162.5)
  16  | (188.8, 162.5)  | (148.8, 162.5)
  17  | (142.5, 162.5)  | (102.5, 162.5)
  18  | (96.2, 162.5)   | (56.2, 162.5)
  19  | (50.0, 162.5)   | (10.0, 162.5)
  20  | (50.0, 210.0)   | (10.0, 210.0)
  21  | (96.2, 210.0)   | (56.2, 210.0)
  22  | (142.5, 210.0)  | (102.5, 210.0)
  23  | (188.8, 210.0)  | (148.8, 210.0)
  24  | (235.0, 210.0)  | (195.0, 210.0)
webhooks client 281473327141920: New connection
webhooks client 281473327141920: Client info {'program': 'Moonraker', 'version': 'v0.9.3-4-ga4604e3'}
Starting heater checks for extruder
Stats 26.5: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=3073 bytes_read=6248 bytes_retransmit=0 bytes_invalid=0 send_seq=216 receive_seq=213 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=1953 upcoming_bytes=172 freq=72000109  orange_pi: temp=55.5 chamber_heater: target=0 temp=0.0 pwm=0.000 heater_bed: target=0 temp=0.0 pwm=0.000 sysload=1.90 cputime=4.681 memavail=1723528 print_time=1769.525 buffer_time=0.240 print_stall=0 extruder: target=0 temp=0.0 pwm=0.000
webhooks: registering remote method 'shutdown_machine' for connection id: 281473327141920
webhooks: registering remote method 'reboot_machine' for connection id: 281473327141920
webhooks: registering remote method 'pause_job_queue' for connection id: 281473327141920
webhooks: registering remote method 'start_job_queue' for connection id: 281473327141920
Stats 27.5: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=5427 bytes_read=6554 bytes_retransmit=0 bytes_invalid=0 send_seq=261 receive_seq=261 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998674  orange_pi: temp=53.5 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.90 cputime=4.727 memavail=1722068 print_time=1769.525 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 28.5: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000114 mcu_task_stddev=0.000265 bytes_write=5466 bytes_read=6732 bytes_retransmit=0 bytes_invalid=0 send_seq=264 receive_seq=264 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998396  orange_pi: temp=51.7 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.90 cputime=4.748 memavail=1719788 print_time=1769.525 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 29.5: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000114 mcu_task_stddev=0.000265 bytes_write=5472 bytes_read=6898 bytes_retransmit=0 bytes_invalid=0 send_seq=265 receive_seq=265 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998254  orange_pi: temp=51.0 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.90 cputime=4.766 memavail=1719788 print_time=1769.525 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 30.5: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000114 mcu_task_stddev=0.000265 bytes_write=5478 bytes_read=7079 bytes_retransmit=0 bytes_invalid=0 send_seq=266 receive_seq=266 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998223  orange_pi: temp=50.1 chamber_heater: target=0 temp=26.8 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.83 cputime=4.781 memavail=1735196 print_time=1769.525 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 31.5: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000114 mcu_task_stddev=0.000265 bytes_write=5484 bytes_read=7230 bytes_retransmit=0 bytes_invalid=0 send_seq=267 receive_seq=267 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998154  orange_pi: temp=47.5 chamber_heater: target=0 temp=27.0 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.83 cputime=4.794 memavail=1735200 print_time=1769.525 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 32.5: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000114 mcu_task_stddev=0.000265 bytes_write=5490 bytes_read=7396 bytes_retransmit=0 bytes_invalid=0 send_seq=268 receive_seq=268 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998172  orange_pi: temp=46.3 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.83 cputime=4.808 memavail=1735204 print_time=1769.525 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 33.5: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5496 bytes_read=7591 bytes_retransmit=0 bytes_invalid=0 send_seq=269 receive_seq=269 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998151  orange_pi: temp=46.9 chamber_heater: target=0 temp=26.3 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.83 cputime=4.821 memavail=1735204 print_time=1769.525 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 34.5: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5502 bytes_read=7742 bytes_retransmit=0 bytes_invalid=0 send_seq=270 receive_seq=270 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998161  orange_pi: temp=46.9 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.83 cputime=4.833 memavail=1735204 print_time=1769.525 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 35.5: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5508 bytes_read=7923 bytes_retransmit=0 bytes_invalid=0 send_seq=271 receive_seq=271 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998191  orange_pi: temp=46.3 chamber_heater: target=0 temp=26.3 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.76 cputime=4.846 memavail=1734200 print_time=1769.525 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 36.5: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5514 bytes_read=8089 bytes_retransmit=0 bytes_invalid=0 send_seq=272 receive_seq=272 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998194  orange_pi: temp=46.6 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.76 cputime=4.858 memavail=1734200 print_time=1769.525 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 37.5: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5520 bytes_read=8240 bytes_retransmit=0 bytes_invalid=0 send_seq=273 receive_seq=273 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998196  orange_pi: temp=46.7 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.76 cputime=4.871 memavail=1734200 print_time=1769.525 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 38.5: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5526 bytes_read=8435 bytes_retransmit=0 bytes_invalid=0 send_seq=274 receive_seq=274 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998205  orange_pi: temp=46.2 chamber_heater: target=0 temp=26.1 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.76 cputime=4.884 memavail=1734200 print_time=1769.525 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 39.5: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5532 bytes_read=8601 bytes_retransmit=0 bytes_invalid=0 send_seq=275 receive_seq=275 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998215  orange_pi: temp=45.8 chamber_heater: target=0 temp=26.1 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.76 cputime=4.897 memavail=1734200 print_time=1769.525 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 40.5: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5538 bytes_read=8752 bytes_retransmit=0 bytes_invalid=0 send_seq=276 receive_seq=276 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998215  orange_pi: temp=46.1 chamber_heater: target=0 temp=26.2 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.70 cputime=4.910 memavail=1734200 print_time=1769.525 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 41.5: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5544 bytes_read=8933 bytes_retransmit=0 bytes_invalid=0 send_seq=277 receive_seq=277 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998217  orange_pi: temp=46.2 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.70 cputime=4.923 memavail=1734200 print_time=1769.525 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.1 pwm=0.000
Stats 42.5: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5550 bytes_read=9099 bytes_retransmit=0 bytes_invalid=0 send_seq=278 receive_seq=278 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998224  orange_pi: temp=46.6 chamber_heater: target=0 temp=26.2 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.70 cputime=4.935 memavail=1734204 print_time=1769.525 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.2 pwm=0.000
Stats 43.5: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5556 bytes_read=9264 bytes_retransmit=0 bytes_invalid=0 send_seq=279 receive_seq=279 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998228  orange_pi: temp=46.0 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.70 cputime=4.948 memavail=1734204 print_time=1769.525 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 44.5: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5562 bytes_read=9445 bytes_retransmit=0 bytes_invalid=0 send_seq=280 receive_seq=280 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998241  orange_pi: temp=45.9 chamber_heater: target=0 temp=26.2 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.70 cputime=4.962 memavail=1734456 print_time=1769.525 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 45.5: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5568 bytes_read=9611 bytes_retransmit=0 bytes_invalid=0 send_seq=281 receive_seq=281 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998244  orange_pi: temp=46.6 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.64 cputime=4.975 memavail=1733952 print_time=1769.525 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 46.5: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5574 bytes_read=9753 bytes_retransmit=0 bytes_invalid=0 send_seq=282 receive_seq=282 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998255  orange_pi: temp=46.0 chamber_heater: target=0 temp=26.1 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.64 cputime=4.988 memavail=1733952 print_time=1769.525 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 47.5: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5580 bytes_read=9922 bytes_retransmit=0 bytes_invalid=0 send_seq=283 receive_seq=283 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998255  orange_pi: temp=45.9 chamber_heater: target=0 temp=26.2 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.64 cputime=5.000 memavail=1733952 print_time=1769.525 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 48.5: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000012 bytes_write=5586 bytes_read=10091 bytes_retransmit=0 bytes_invalid=0 send_seq=284 receive_seq=284 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998258  orange_pi: temp=45.8 chamber_heater: target=0 temp=26.2 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.64 cputime=5.013 memavail=1733728 print_time=1769.525 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 49.5: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000012 bytes_write=5592 bytes_read=10234 bytes_retransmit=0 bytes_invalid=0 send_seq=285 receive_seq=285 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998267  orange_pi: temp=45.8 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.64 cputime=5.026 memavail=1733728 print_time=1769.525 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 50.5: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000012 bytes_write=5598 bytes_read=10415 bytes_retransmit=0 bytes_invalid=0 send_seq=286 receive_seq=286 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998268  orange_pi: temp=45.9 chamber_heater: target=0 temp=26.2 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.59 cputime=5.039 memavail=1733732 print_time=1769.525 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 51.5: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000012 bytes_write=5604 bytes_read=10581 bytes_retransmit=0 bytes_invalid=0 send_seq=287 receive_seq=287 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998275  orange_pi: temp=45.7 chamber_heater: target=0 temp=26.3 pwm=0.000 heater_bed: target=0 temp=24.3 pwm=0.000 sysload=1.59 cputime=5.052 memavail=1733732 print_time=1769.525 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 52.5: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000012 bytes_write=5610 bytes_read=10732 bytes_retransmit=0 bytes_invalid=0 send_seq=288 receive_seq=288 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998280  orange_pi: temp=45.7 chamber_heater: target=0 temp=26.2 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.59 cputime=5.064 memavail=1733732 print_time=1769.525 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 53.5: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000012 bytes_write=5616 bytes_read=10927 bytes_retransmit=0 bytes_invalid=0 send_seq=289 receive_seq=289 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998284  orange_pi: temp=46.4 chamber_heater: target=0 temp=26.3 pwm=0.000 heater_bed: target=0 temp=24.7 pwm=0.000 sysload=1.59 cputime=5.077 memavail=1733732 print_time=1769.525 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 54.5: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000012 bytes_write=5666 bytes_read=11129 bytes_retransmit=0 bytes_invalid=0 send_seq=295 receive_seq=295 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998285  orange_pi: temp=46.0 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.59 cputime=5.091 memavail=1733732 print_time=1769.525 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 55.5: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000012 bytes_write=5672 bytes_read=11280 bytes_retransmit=0 bytes_invalid=0 send_seq=296 receive_seq=296 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998288  orange_pi: temp=46.1 chamber_heater: target=0 temp=26.3 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.54 cputime=5.104 memavail=1733732 print_time=1769.525 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 56.5: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000012 bytes_write=5678 bytes_read=11461 bytes_retransmit=0 bytes_invalid=0 send_seq=297 receive_seq=297 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998288  orange_pi: temp=45.6 chamber_heater: target=0 temp=26.2 pwm=0.000 heater_bed: target=0 temp=24.3 pwm=0.000 sysload=1.54 cputime=5.117 memavail=1733732 print_time=1769.525 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 57.5: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000012 bytes_write=5684 bytes_read=11627 bytes_retransmit=0 bytes_invalid=0 send_seq=298 receive_seq=298 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998288  orange_pi: temp=45.4 chamber_heater: target=0 temp=26.3 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.54 cputime=5.130 memavail=1733732 print_time=1769.525 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 58.5: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000015 bytes_write=5690 bytes_read=11792 bytes_retransmit=0 bytes_invalid=0 send_seq=299 receive_seq=299 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998289  orange_pi: temp=45.8 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.54 cputime=5.143 memavail=1733732 print_time=1769.525 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 59.5: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000015 bytes_write=5696 bytes_read=11973 bytes_retransmit=0 bytes_invalid=0 send_seq=300 receive_seq=300 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998293  orange_pi: temp=45.7 chamber_heater: target=0 temp=26.0 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.54 cputime=5.156 memavail=1733732 print_time=1769.525 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 60.5: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000015 bytes_write=5702 bytes_read=12139 bytes_retransmit=0 bytes_invalid=0 send_seq=301 receive_seq=301 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998293  orange_pi: temp=45.0 chamber_heater: target=0 temp=26.3 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.50 cputime=5.169 memavail=1733732 print_time=1769.525 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 61.5: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000015 bytes_write=5708 bytes_read=12290 bytes_retransmit=0 bytes_invalid=0 send_seq=302 receive_seq=302 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998294  orange_pi: temp=45.7 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.50 cputime=5.182 memavail=1733732 print_time=1769.525 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 62.5: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000015 bytes_write=5714 bytes_read=12471 bytes_retransmit=0 bytes_invalid=0 send_seq=303 receive_seq=303 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998297  orange_pi: temp=45.6 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.50 cputime=5.195 memavail=1733732 print_time=1769.525 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 63.5: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5720 bytes_read=12651 bytes_retransmit=0 bytes_invalid=0 send_seq=304 receive_seq=304 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998300  orange_pi: temp=45.8 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.50 cputime=5.209 memavail=1733732 print_time=1769.525 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 64.5: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5726 bytes_read=12802 bytes_retransmit=0 bytes_invalid=0 send_seq=305 receive_seq=305 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998300  orange_pi: temp=45.8 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.50 cputime=5.221 memavail=1733732 print_time=1769.525 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 65.5: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5732 bytes_read=12983 bytes_retransmit=0 bytes_invalid=0 send_seq=306 receive_seq=306 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998299  orange_pi: temp=45.9 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.46 cputime=5.234 memavail=1734260 print_time=1769.525 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 66.5: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5738 bytes_read=13149 bytes_retransmit=0 bytes_invalid=0 send_seq=307 receive_seq=307 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998299  orange_pi: temp=45.5 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.46 cputime=5.247 memavail=1734272 print_time=1769.525 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 67.5: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5744 bytes_read=13300 bytes_retransmit=0 bytes_invalid=0 send_seq=308 receive_seq=308 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998299  orange_pi: temp=45.7 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.3 pwm=0.000 sysload=1.46 cputime=5.260 memavail=1734272 print_time=1769.525 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 68.5: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5750 bytes_read=13495 bytes_retransmit=0 bytes_invalid=0 send_seq=309 receive_seq=309 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998299  orange_pi: temp=45.6 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.46 cputime=5.273 memavail=1734272 print_time=1769.525 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.2 pwm=0.000
Stats 69.5: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5756 bytes_read=13661 bytes_retransmit=0 bytes_invalid=0 send_seq=310 receive_seq=310 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998300  orange_pi: temp=45.7 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.46 cputime=5.285 memavail=1734272 print_time=1769.525 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 70.5: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5762 bytes_read=13812 bytes_retransmit=0 bytes_invalid=0 send_seq=311 receive_seq=311 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998303  orange_pi: temp=45.4 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.42 cputime=5.298 memavail=1734272 print_time=1769.525 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 71.5: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5768 bytes_read=13993 bytes_retransmit=0 bytes_invalid=0 send_seq=312 receive_seq=312 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998302  orange_pi: temp=45.8 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.42 cputime=5.311 memavail=1734272 print_time=1769.525 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 72.5: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5774 bytes_read=14159 bytes_retransmit=0 bytes_invalid=0 send_seq=313 receive_seq=313 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998302  orange_pi: temp=45.5 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.42 cputime=5.324 memavail=1734272 print_time=1769.525 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.2 pwm=0.000
Stats 73.5: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5780 bytes_read=14324 bytes_retransmit=0 bytes_invalid=0 send_seq=314 receive_seq=314 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998304  orange_pi: temp=45.6 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.42 cputime=5.337 memavail=1734272 print_time=1769.525 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 74.5: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5786 bytes_read=14505 bytes_retransmit=0 bytes_invalid=0 send_seq=315 receive_seq=315 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998308  orange_pi: temp=45.3 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.42 cputime=5.350 memavail=1734272 print_time=1769.525 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 75.5: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5792 bytes_read=14671 bytes_retransmit=0 bytes_invalid=0 send_seq=316 receive_seq=316 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998310  orange_pi: temp=45.6 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.39 cputime=5.364 memavail=1734020 print_time=1769.525 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 76.5: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5798 bytes_read=14822 bytes_retransmit=0 bytes_invalid=0 send_seq=317 receive_seq=317 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998312  orange_pi: temp=45.4 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.39 cputime=5.376 memavail=1734020 print_time=1769.525 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 77.5: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5804 bytes_read=15003 bytes_retransmit=0 bytes_invalid=0 send_seq=318 receive_seq=318 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998313  orange_pi: temp=45.5 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.39 cputime=5.389 memavail=1734020 print_time=1769.525 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 78.5: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5810 bytes_read=15183 bytes_retransmit=0 bytes_invalid=0 send_seq=319 receive_seq=319 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998312  orange_pi: temp=45.6 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.39 cputime=5.402 memavail=1734020 print_time=1769.525 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 79.5: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5816 bytes_read=15334 bytes_retransmit=0 bytes_invalid=0 send_seq=320 receive_seq=320 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998312  orange_pi: temp=45.7 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.39 cputime=5.415 memavail=1734020 print_time=1769.525 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 80.5: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5822 bytes_read=15515 bytes_retransmit=0 bytes_invalid=0 send_seq=321 receive_seq=321 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998312  orange_pi: temp=45.4 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.3 pwm=0.000 sysload=1.36 cputime=5.428 memavail=1734020 print_time=1769.525 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.2 pwm=0.000
Stats 81.5: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5828 bytes_read=15681 bytes_retransmit=0 bytes_invalid=0 send_seq=322 receive_seq=322 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998313  orange_pi: temp=45.4 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.36 cputime=5.441 memavail=1734020 print_time=1769.525 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 82.5: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5834 bytes_read=15832 bytes_retransmit=0 bytes_invalid=0 send_seq=323 receive_seq=323 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998312  orange_pi: temp=45.5 chamber_heater: target=0 temp=26.8 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.36 cputime=5.453 memavail=1734020 print_time=1769.525 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 83.5: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5840 bytes_read=16027 bytes_retransmit=0 bytes_invalid=0 send_seq=324 receive_seq=324 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998312  orange_pi: temp=45.2 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.3 pwm=0.000 sysload=1.36 cputime=5.466 memavail=1734020 print_time=1769.525 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 84.5: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5846 bytes_read=16193 bytes_retransmit=0 bytes_invalid=0 send_seq=325 receive_seq=325 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998312  orange_pi: temp=45.3 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.36 cputime=5.479 memavail=1734028 print_time=1769.525 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 85.5: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5852 bytes_read=16344 bytes_retransmit=0 bytes_invalid=0 send_seq=326 receive_seq=326 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998312  orange_pi: temp=45.0 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.33 cputime=5.492 memavail=1733776 print_time=1769.525 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 86.5: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5858 bytes_read=16525 bytes_retransmit=0 bytes_invalid=0 send_seq=327 receive_seq=327 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998312  orange_pi: temp=45.4 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.33 cputime=5.505 memavail=1733776 print_time=1769.525 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 2444.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=34738 bytes_read=419473 bytes_retransmit=0 bytes_invalid=0 send_seq=3904 receive_seq=3904 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998328  orange_pi: temp=45.8 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.09 cputime=52.514 memavail=1721804 print_time=4187.306 buffer_time=0.441 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
webhooks client 281473327141920: Disconnected
Restarting printer
Start printer at Wed Dec 25 20:57:42 2024 (1735149462.7 2445.7)
===== Config file =====
[virtual_sdcard]
path = /home/klipper/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[pause_resume]

[display_status]

[respond]

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = BASE_CANCEL_PRINT
gcode = 
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	TURN_OFF_HEATERS
	M107
	G91
	G1 E-{E} F1500
	G90
	CLEAR_PAUSE
	SDCARD_RESET_FILE
	BASE_CANCEL_PRINT
	PARK

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = BASE_PAUSE
gcode = 
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	SAVE_GCODE_STATE NAME=PAUSE_STATE
	BASE_PAUSE
	G91
	G1 E-{E} F1500
	G90
	PARK

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = BASE_RESUME
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	G91
	G1 E{E} F1500
	G90
	RESTORE_GCODE_STATE NAME=PAUSE_STATE MOVE=1
	BASE_RESUME

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[gcode_macro _CLIENT_LINEAR_MOVE]
description = Linear move with save and restore of the gcode state
gcode = 
	{% set x_move = "X" ~ params.X if params.X is defined else "" %}
	{% set y_move = "Y" ~ params.Y if params.Y is defined else "" %}
	{% set z_move = "Z" ~ params.Z if params.Z is defined else "" %}
	{% set e_move = "E" ~ params.E if params.E is defined else "" %}
	{% set rate = "F" ~ params.F if params.F is defined else "" %}
	{% set ABSOLUTE = params.ABSOLUTE | default(0) | int != 0 %}
	{% set ABSOLUTE_E = params.ABSOLUTE_E | default(0) | int != 0 %}
	SAVE_GCODE_STATE NAME=_client_movement
	{% if x_move or y_move or z_move %}
	G9{ 0 if ABSOLUTE else 1 }
	{% endif %}
	{% if e_move %}
	M8{ 2 if ABSOLUTE_E else 3 }
	{% endif %}
	G1 { x_move } { y_move } { z_move } { e_move } { rate }
	RESTORE_GCODE_STATE NAME=_client_movement

[gcode_macro list_sensors]
gcode = 
	{ action_respond_info(printer.heaters.available_heaters | join(', ')) }
	{ action_respond_info(printer.heaters.available_sensors | join(', ')) }

[gcode_macro Power_OFF]
gcode = SET_PIN PIN=Power VALUE=0

[gcode_macro _POWER_OFF_PRINTER]
gcode = SET_PIN PIN=Power VALUE=0

[gcode_macro ACTIVATE_POWER_OFF]
gcode = 
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK_ACT DURATION=60

[gcode_macro DEACTIVATE_POWER_OFF]
gcode = 
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK_ACT DURATION=0

[delayed_gcode POWER_OFF_PRINTER_CHECK_ACT]
gcode = 
	{% if printer.idle_timeout.state == "Idle" or printer.idle_timeout.state == "Ready" %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=30
	{% else %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK_ACT DURATION=60
	{% endif %}

[delayed_gcode POWER_OFF_PRINTER_CHECK]
gcode = 
	{% if printer.idle_timeout.state == "Idle" or printer.idle_timeout.state == "Ready" %}
	{% if printer.extruder.temperature < 50.0 and printer.heater_bed.temperature < 50.0 %}
	{% if printer.extruder.target == 0.0 and printer.heater_bed.target == 0.0 %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=0
	_POWER_OFF_PRINTER
	{% else %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=2
	{% endif %}
	{% else %}
	{% if printer.idle_timeout.state == "Printing" %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=0
	{% else %}
	{% if printer.extruder.target == 0.0 and printer.heater_bed.target == 0.0 %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=2
	{% else %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=0
	{% endif %}
	{% endif %}
	{% endif %}
	{% endif %}

[gcode_macro M141]
gcode = SET_HEATER_TEMPERATURE HEATER=chamber_heater TARGET={params.S|default(0)}

[gcode_macro M80]
gcode = SET_PIN PIN=Power  VALUE=1

[gcode_macro M81]
gcode = 
	
	SET_PIN PIN=Power VALUE=0

[gcode_macro M486]
gcode = 
	
	
	
	
	
	
	
	
	
	
	
	{% if 'exclude_object' not in printer %}
	{action_raise_error("[exclude_object] is not enabled")}
	{% endif %}
	
	{% if 'T' in params %}
	EXCLUDE_OBJECT RESET=1
	
	{% for i in range(params.T | int) %}
	EXCLUDE_OBJECT_DEFINE NAME={i}
	{% endfor %}
	{% endif %}
	
	{% if 'C' in params %}
	EXCLUDE_OBJECT CURRENT=1
	{% endif %}
	
	{% if 'P' in params %}
	EXCLUDE_OBJECT NAME={params.P}
	{% endif %}
	
	{% if 'S' in params %}
	{% if params.S == '-1' %}
	{% if printer.exclude_object.current_object %}
	EXCLUDE_OBJECT_END NAME={printer.exclude_object.current_object}
	{% endif %}
	{% else %}
	EXCLUDE_OBJECT_START NAME={params.S}
	{% endif %}
	{% endif %}
	
	{% if 'U' in params %}
	EXCLUDE_OBJECT RESET=1 NAME={params.U}
	{% endif %}

[gcode_macro M190]
rename_existing = M190.1
gcode = 
	{% if printer["gcode_macro status_heating"] != null %}
	status_heating
	{% endif %}
	M190.1 { rawparams }
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro _CHOME]
gcode = 
	{% if printer["gcode_macro status_homing"] != null %}
	status_homing
	{% endif %}
	{% if printer.toolhead.homed_axes != "xyz" %}
	G28
	{% endif %}
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro M109]
rename_existing = M109.1
gcode = 
	{% if printer["gcode_macro status_heating"] != null %}
	status_heating
	{% endif %}
	M109.1 { rawparams }
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro _MOVE_AWAY]
gcode = 
	{% set th = printer.toolhead %}
	{% set x_safe = th.position.x + 20 * (1 if th.axis_maximum.x - th.position.x > 20 else -1) %}
	{% set y_safe = th.position.y + 20 * (1 if th.axis_maximum.y - th.position.y > 20 else -1) %}
	{% set z_safe = [th.position.z + 2, th.axis_maximum.z]|min %}
	
	G90
	G0 X{x_safe} Y{y_safe} Z{z_safe} F20000

[gcode_macro PARK_CENTER_REAR]
gcode = 
	{% if printer["gcode_macro status_busy"] != null %}
	status_busy
	{% endif %}
	{% set th = printer.toolhead %}
	{% set x_safe = th.position.x + 20 * (1 if th.axis_maximum.x - th.position.x > 20 else -1) %}
	{% set y_safe = th.position.y + 20 * (1 if th.axis_maximum.y - th.position.y > 20 else -1) %}
	
	G0 X{th.axis_maximum.x//2} Y{th.axis_maximum.y - 2} F3600
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro START_PRINT]
variable_retract = 15
gcode = 
	{% set chamber_temp = params.CHAMBER_TEMP|default(0)|float %}
	{% set extruder_temp = params.EXTRUDER_TEMP|default(210)|float %}
	{% set bed_temp = params.BED_TEMP|default(60)|float %}
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	CLEAR_PAUSE
	G28
	Smart_Park
	M220 S100
	M221 S100
	SET_HEATER_TEMPERATURE HEATER=chamber_heater TARGET={chamber_temp}
	SET_HEATER_TEMPERATURE HEATER=heater_bed TARGET={bed_temp}
	TEMPERATURE_WAIT SENSOR=heater_bed MINIMUM={bed_temp * 0.75}
	SET_HEATER_TEMPERATURE HEATER=extruder TARGET={extruder_temp}
	G90
	M82
	TEMPERATURE_WAIT SENSOR=heater_bed MINIMUM={bed_temp}
	TEMPERATURE_WAIT SENSOR=extruder MINIMUM={extruder_temp}
	
	G1 E-15 F3600
	
	G28
	BED_MESH_CALIBRATE
	PRIME_LINE

[gcode_macro pid_soplo]
gcode = 
	PID_CALIBRATE HEATER=extruder TARGET=250

[gcode_macro pid_bed]
gcode = 
	PID_CALIBRATE HEATER=heater_bed TARGET=105

[gcode_macro BED]
gcode = 
	PROBE_CALIBRATE

[gcode_macro END_PRINT]
gcode = 
	
	{% set max_x = printer.configfile.config["stepper_x"]["position_max"]|float %}
	{% set max_y = printer.configfile.config["stepper_y"]["position_max"]|float %}
	{% set max_z = printer.configfile.config["stepper_z"]["position_max"]|float %}
	
	
	{% if printer.toolhead.position.x < (max_x - 20) %}
	{% set x_safe = 20.0 %}
	{% else %}
	{% set x_safe = -20.0 %}
	{% endif %}
	
	{% if printer.toolhead.position.y < (max_y - 20) %}
	{% set y_safe = 20.0 %}
	{% else %}
	{% set y_safe = -20.0 %}
	{% endif %}
	
	{% if printer.toolhead.position.z < (max_z - 2) %}
	{% set z_safe = 2.0 %}
	{% else %}
	{% set z_safe = max_z - printer.toolhead.position.z %}
	{% endif %}
	
	
	M400
	G92 E0
	G1 E-15 F3600
	G91
	G0 Z{z_safe} F3600
	G0 X{x_safe} Y{y_safe} F20000
	
	
	M104 S0
	M104 S0
	M140 S0
	M106 S0
	G90
	G0 X{max_x / 2} Y{max_y} F3600
	
	SONG_CRAB_RAVE
	
	
	
	M117 Finished!
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=30

[gcode_macro M300]
gcode = 
	
	{% set S = params.S|default(1000)|int %}
	
	{% set P = params.P|default(100)|int %}
	
	
	{% set V = params.V|default(99)|int %}
	SET_PIN PIN=beeper VALUE={0.1 * (V / 100) if S > 0 else 1} CYCLE_TIME={ 1.0 / S if S > 0 else 1 }
	G4 P{P}
	SET_PIN PIN=beeper VALUE=0 CYCLE_TIME={ 0.001 }
description = 
	"Plays a beep sound.
	@param {int} [S=1000] - Frequency in Hz
	@param {int} [P=100] - Duration in ms
	@param {int} [V=99] - Volume in percent"

[gcode_macro PRIME_LINE]
gcode = 
	{% set feedrate = params.F|default(10)|float * 60 %}
	{% set length = 100.0 %}
	{% set width = printer.configfile.settings.extruder.nozzle_diameter|float %}
	{% set height = ( (width / 0.04)|int - (width / 0.04 / 4)|int )|float * 0.04 %}
	
	{% set extrude = length * width * height * 1.5 %}
	SAVE_GCODE_STATE NAME=PRIME_LINE_STATE
	SET_IDLE_TIMEOUT TIMEOUT=7200
	{% if 'Y' in params %}
	{% set x_start = 1.0 %}
	{% set y_start = (printer.toolhead.axis_maximum.y|float - 100) / 2 %}
	G0 X{x_start} Y{y_start} F5000
	G0 Z{height} F1500
	G91
	
	G1 E8 F300
	
	
	G1 Y100 E{extrude} F{feedrate}
	G0 X{width} F5000
	G1 Y-100 E{extrude} F{feedrate}
	{% else %}
	{% set x_start = (printer.toolhead.axis_maximum.x|float - 100) / 2 %}
	{% set y_start = 1.0 %}
	G0 X{x_start} Y{y_start} F5000
	G0 Z{height} F1500
	G91
	
	G1 E8 F300
	
	
	G1 X100 E{extrude} F{feedrate}
	G0 Y{width} F5000
	G1 X-100 E{extrude} F{feedrate}
	{% endif %}
	RESTORE_GCODE_STATE NAME=PRIME_LINE_STATE

[gcode_macro VINT]
gcode = 
	SCREWS_TILT_CALCULATE

[gcode_macro LOW_TEMP_CHECK]
gcode = 
	{% set extruder_temp = params.T|default(240)|float %}
	{% if printer.extruder.target > extruder_temp %}
	{% set extruder_temp = printer.extruder.target %}
	{% endif %}
	{% if printer.extruder.temperature < extruder_temp %}
	M118 Heating to {extruder_temp}
	SET_HEATER_TEMPERATURE HEATER=extruder TARGET={extruder_temp}
	TEMPERATURE_WAIT SENSOR=extruder MINIMUM={extruder_temp}
	{% endif %}

[gcode_macro M76]
gcode = 
	PAUSE

[gcode_macro M601]
gcode = 
	PAUSE

[gcode_macro G27]
gcode = 
	PARK

[gcode_macro M125]
gcode = 
	PARK

[gcode_macro M600]
gcode = 
	PAUSE

[gcode_macro M701]
gcode = 
	FILAMENT_LOAD

[gcode_macro M702]
gcode = 
	FILAMENT_UNLOAD

[gcode_macro M500]
gcode = 
	SAVE_CONFIG

[gcode_macro PARK]
gcode = 
	{% set x_park = params.X|default(0)|float %}
	{% set y_park = params.Y|default(0)|float %}
	{% set z_park = params.Z|default(10)|float + printer.toolhead.position.z|float %}
	{% set x_max = printer.toolhead.axis_maximum.x|float %}
	{% set y_max = printer.toolhead.axis_maximum.y|float %}
	{% set z_max = printer.toolhead.axis_maximum.z|float %}
	{% if x_park > x_max %}
	{% set x_park = x_max %}
	{% endif %}
	{% if y_park > y_max %}
	{% set y_park = y_max %}
	{% endif %}
	{% if z_park > z_max %}
	{% set z_park = z_max %}
	{% endif %}
	SAVE_GCODE_STATE NAME=PARK_STATE
	G90
	G1 Z{z_park} F1500
	G1 X{x_park} Y{y_park} F5000
	RESTORE_GCODE_STATE name=PARK_STATE

[gcode_macro START_DRYER]
description = Start the heated bed filament dryer.
gcode = 
	{% set ChamberTemperature = params.CHAMBER | default(65.0) | float %}
	{% set BedTemperature = params.TEMPERATURE | default(0.0) | float %}
	{% set DryTime = params.TIME | default(14400) | int %}
	M140 S{BedTemperature}
	M141 S{ChamberTemperature}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=time_remaining VALUE={DryTime}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=bed_temperature VALUE={BedTemperature}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=chamber_temperature VALUE={ChamberTemperature}
	UPDATE_DELAYED_GCODE ID=DRYER_TIMER DURATION=1

[gcode_macro STOP_DRYER]
gcode = 
	M140 S0
	M141 S0
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=time_remaining VALUE=0
	UPDATE_DELAYED_GCODE ID=DRYER_TIMER DURATION=0
	M117 Drying Stopped

[gcode_macro DRYER_STATUS]
variable_time_remaining = 0
variable_bed_temperature = 0
variable_chamber_temperature = 0
gcode = 
	{% if time_remaining > 0 %}
	M140 S{bed_temperature}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=time_remaining VALUE={time_remaining - 1}
	M117 Drying {time_remaining}
	{% else %}
	STOP_DRYER
	{% endif %}

[delayed_gcode DRYER_TIMER]
gcode = 
	UPDATE_DELAYED_GCODE ID=DRYER_TIMER DURATION=1
	DRYER_STATUS

[gcode_macro DRY_tpu]
gcode = 
	START_DRYER TEMPERATURE=0 CHAMBER=50 TIME=18000

[gcode_macro DRY_PETG]
gcode = 
	START_DRYER TEMPERATURE=0  CHAMBER=65 TIME=18000

[gcode_macro DRY_ABS]
gcode = 
	{% set S = params.S|default(0.0)|float %}
	SET_PIN PIN=Laser VALUE={S / 255.0}

[gcode_macro M4]
gcode = 
	{% set S = params.S|default(0.0)|float %}
	SET_PIN PIN=Laser VALUE={S / 255.0}

[gcode_macro M5]
gcode = 
	SET_PIN PIN=Laser VALUE=0

[menu __main __control __toolonoff]
type = input
enable = {'pwm_tool Laser' in printer}
name = Fan: {'ON ' if menu.input else 'OFF'}
input = {printer['pwm_tool Laser'].value}
input_min = 0
input_max = 1
input_step = 1
gcode = 
	M3 S{255 if menu.input else 0}

[menu __main __control __toolspeed]
type = input
enable = {'pwm_tool Laser' in printer}
name = Laser speed: {'%3d' % (menu.input*100)}%
input = {printer['pwm_tool Laser'].value}
input_min = 0
input_max = 1
input_step = 0.01
gcode = 
	M3 S{'%d' % (menu.input*255)}

[gcode_macro NOTE]
description = 
	"Plays a specified note for a specified duration
	@param {string} [N=C5] - Note to play
	@param {int} [D=500] - Duration of note. There are currently some Klipper limitations to how short a note can be.
	@param {int} [V=99] - Volume in percent
	@param {bool} [S=true] - Whether or not to stop the note after duration"
gcode = 
	{% set notes = {
	'C0': 16.35,   'CS0': 17.32,   'D0': 18.35,   'DS0': 19.45,   'E0': 20.60,   'F0': 21.83,   'FS0': 23.12,   'G0': 24.50,   'GS0': 25.96,   'A0': 27.50,   'AS0': 29.14,   'B0': 30.87,
	'C1': 32.70,   'CS1': 34.65,   'D1': 36.71,   'DS1': 38.89,   'E1': 41.20,   'F1': 43.65,   'FS1': 46.25,   'G1': 49.00,   'GS1': 51.91,   'A1': 55.00,   'AS1': 58.27,   'B1': 61.74,
	'C2': 65.41,   'CS2': 69.30,   'D2': 73.42,   'DS2': 77.78,   'E2': 82.41,   'F2': 87.31,   'FS2': 92.50,   'G2': 98.00,   'GS2': 103.83,  'A2': 110.00,  'AS2': 116.54,  'B2': 123.47,
	'C3': 130.81,  'CS3': 138.59,  'D3': 146.83,  'DS3': 155.56,  'E3': 164.81,  'F3': 174.61,  'FS3': 185.00,  'G3': 196.00,  'GS3': 207.65,  'A3': 220.00,  'AS3': 233.08,  'B3': 246.94,
	'C4': 261.63,  'CS4': 277.18,  'D4': 293.66,  'DS4': 311.13,  'E4': 329.63,  'F4': 349.23,  'FS4': 369.99,  'G4': 392.00,  'GS4': 415.30,  'A4': 440.00,  'AS4': 466.16,  'B4': 493.88,
	'C5': 523.25,  'CS5': 554.37,  'D5': 587.33,  'DS5': 622.25,  'E5': 659.26,  'F5': 698.46,  'FS5': 739.99,  'G5': 783.99,  'GS5': 830.61,  'A5': 880.00,  'AS5': 932.33,  'B5': 987.77,
	'C6': 1046.50, 'CS6': 1108.73, 'D6': 1174.66, 'DS6': 1244.51, 'E6': 1318.51, 'F6': 1396.91, 'FS6': 1479.98, 'G6': 1567.98, 'GS6': 1661.22, 'A6': 1760.00, 'AS6': 1864.66, 'B6': 1975.53,
	'C7': 2093.00, 'CS7': 2217.46, 'D7': 2349.32, 'DS7': 2489.02, 'E7': 2637.02, 'F7': 2793.83, 'FS7': 2959.96, 'G7': 3135.96, 'GS7': 3322.44, 'A7': 3520.00, 'AS7': 3729.31, 'B7': 3951.07,
	'C8': 4186.01, 'CS8': 4434.92, 'D8': 4698.64, 'DS8': 4978.03, 'E8': 5274.04, 'F8': 5587.65, 'FS8': 5919.91, 'G8': 6271.93, 'GS8': 6644.88, 'A8': 7040.00, 'AS8': 7458.62, 'B8': 7902.13,
	} %}
	
	{% set note = params.N|default('C5')|string %}
	
	{% set dur = params.D|default(500)|int %}
	
	
	{% set volume = params.V|default(99)|int %}
	
	{% set stop = params.S|default('true')|string %}
	
	{% set freq = notes[note] %}
	
	SET_PIN PIN=beeper VALUE={0.1 * (volume / 100) if volume > 0 else 1} CYCLE_TIME={ 1.0 / freq }
	G4 P{dur}
	{% if stop|lower == 'true' %}
	SET_PIN PIN=beeper VALUE=0 CYCLE_TIME={ 0.001 }
	{% endif %}

[gcode_macro TONE_GEN]
description = "Used for the tone generator menu"
variable_tone_freq = 0.001093
gcode = 
	M117 {printer["gcode_macro TONE_GEN"].tone_freq}nothz

[gcode_macro SONG_STAR_WARS_MAIN_THEME]
description = "Plays the Star Wars main theme"
gcode = 
	NOTE N=D4 D=133
	NOTE N=D4 D=133
	NOTE N=D4 D=133
	NOTE N=G4 D=1000
	NOTE N=D5 D=1000
	
	NOTE N=C5 D=133
	NOTE N=B4 D=133
	NOTE N=A4 D=133
	NOTE N=G5 D=1000
	NOTE N=D5 D=500
	
	NOTE N=C5 D=133
	NOTE N=B4 D=133
	NOTE N=A4 D=133
	NOTE N=G5 D=1000
	NOTE N=D5 D=500
	
	NOTE N=C5 D=133
	NOTE N=B4 D=133
	NOTE N=C5 D=133
	NOTE N=A4 D=1000

[gcode_macro SONG_CRAB_RAVE]
description = "Plays Crab Rave"
gcode = 
	NOTE N=D6 D=150 V=30 S=1
	NOTE N=AS6 D=150 V=30 S=1
	NOTE N=G6 D=150 V=30 S=1
	NOTE N=G6 D=150 V=30 S=0
	NOTE N=D6 D=150 V=30 S=1
	NOTE N=D6 D=150 V=30 S=0
	NOTE N=A6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=0
	NOTE N=D6 D=150 V=30 S=1
	NOTE N=D6 D=150 V=30 S=0
	NOTE N=A6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=0
	NOTE N=C6 D=150 V=30 S=1
	NOTE N=C6 D=150 V=30 S=1
	NOTE N=E6 D=150 V=30 S=1
	NOTE N=E6 D=150 V=30 S=0
	NOTE N=F6 D=150 V=30 S=1
	SET_PIN PIN=beeper VALUE=0

[gcode_macro one]
description = "one"
gcode = 
	NOTE N=C6 D=600 V=30 S=1
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=G5 D=400 V=30 S=1
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=E6 D=400 V=30 S=1
	G4 P150
	NOTE N=G6 D=180 V=30 S=0
	NOTE N=F6 D=180 V=30 S=0
	NOTE N=E6 D=180 V=30 S=0
	NOTE N=D6 D=180 V=30 S=1
	NOTE N=C6 D=600 V=30 S=1
	
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=G5 D=400 V=30 S=1
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=C6 D=600 V=30 S=1
	SET_PIN PIN=beeper VALUE=0

[gcode_macro SONG_BOOMER]
description = "BOOMER"
gcode = 
	M300 P207 S659
	M300 P207 S784
	M300 P207 S494
	M300 P207 S494
	M300 P207 S392
	M300 P207 S494
	M300 P207 S494
	M300 P207 S330
	M300 P207 S784
	M300 P207 S659
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S988
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S659
	M300 P207 S784
	M300 P207 S494
	M300 P207 S494
	M300 P207 S392
	M300 P207 S494
	M300 P207 S494
	M300 P207 S330
	M300 P207 S784
	M300 P207 S659
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S988
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S659
	M300 P207 S784
	M300 P207 S494
	M300 P207 S494
	M300 P207 S392
	M300 P207 S494
	M300 P207 S494
	M300 P207 S330
	M300 P207 S784
	M300 P207 S659
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S988
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330

[gcode_macro GET_TIMELAPSE_SETUP]
description = Print the Timelapse setup
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% set output_txt = ["Timelapse Setup:"] %}
	{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}
	{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}
	{% if tl.park.enable %}
	{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}
	{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}
	{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}
	{% endif %}
	{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}
	{% if not tl.extruder.fw_retract %}
	{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}
	{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}
	{% endif %}
	{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}
	{action_respond_info(output_txt|join("\n"))}

[gcode_macro _SET_TIMELAPSE_SETUP]
description = Set user parameters for timelapse
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	
	{% set min = printer.toolhead.axis_minimum %}
	{% set max = printer.toolhead.axis_maximum %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	{% set park = {'min'   : {'x': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),
	'y': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},
	'max'   : {'x': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),
	'y': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},
	'center': {'x': (max.x-(max.x-min.x)/2)|round(3),
	'y': (max.y-(max.y-min.y)/2)|round(3)}} %}
	
	{% if params.ENABLE %}
	{% if params.ENABLE|lower is in ['true', 'false'] %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == 'true' else False}
	{% else %}
	{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.VERBOSE %}
	{% if params.VERBOSE|lower is in ['true', 'false'] %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == 'true' else False}
	{% else %}
	{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_X %}
	{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}
	{% set _dummy = tl.park.custom.update({'x':params.CUSTOM_POS_X|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_Y %}
	{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}
	{% set _dummy = tl.park.custom.update({'y':params.CUSTOM_POS_Y|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_DZ %}
	{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}
	{% set _dummy = tl.park.custom.update({'dz':params.CUSTOM_POS_DZ|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}
	{% endif %}
	{% endif %}
	{% if params.PARK_ENABLE %}
	{% if params.PARK_ENABLE|lower is in ['true', 'false'] %}
	{% set _dummy = tl.park.update({'enable':True if params.PARK_ENABLE|lower == 'true' else False}) %}
	{% else %}
	{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.PARK_POS %}
	{% if params.PARK_POS|lower is in ['center','front_left','front_right','back_left','back_right','custom','x_only','y_only'] %}
	{% set dic = {'center'      : {'x': park.center.x   , 'y': park.center.y   , 'dz': 1                },
	'front_left'  : {'x': park.min.x      , 'y': park.min.y      , 'dz': 0                },
	'front_right' : {'x': park.max.x      , 'y': park.min.y      , 'dz': 0                },
	'back_left'   : {'x': park.min.x      , 'y': park.max.y      , 'dz': 0                },
	'back_right'  : {'x': park.max.x      , 'y': park.max.y      , 'dz': 0                },
	'custom'      : {'x': tl.park.custom.x, 'y': tl.park.custom.y, 'dz': tl.park.custom.dz},
	'x_only'      : {'x': tl.park.custom.x, 'y': 'none'          , 'dz': tl.park.custom.dz},
	'y_only'      : {'x': 'none'          , 'y': tl.park.custom.y, 'dz': tl.park.custom.dz}} %}
	{% set _dummy = tl.park.update({'pos':params.PARK_POS|lower}) %}
	{% set _dummy = tl.park.update({'coord':dic[tl.park.pos]}) %}
	{% else %}
	{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"
	% params.PARK_POS|upper)}
	{% endif %}
	{% endif %}
	{% if params.PARK_TIME %}
	{% if params.PARK_TIME|float >= 0.0 %}
	{% set _dummy = tl.park.update({'time':params.PARK_TIME|float|round(3)}) %}
	{% else %}
	{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"
	{% if params.TRAVEL_SPEED %}
	{% if params.TRAVEL_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'travel':params.TRAVEL_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}
	{% endif %}
	{% endif %}
	{% if params.RETRACT_SPEED %}
	{% if params.RETRACT_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'retract':params.RETRACT_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}
	{% endif %}
	{% endif %}
	{% if params.EXTRUDE_SPEED %}
	{% if params.EXTRUDE_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'extrude':params.EXTRUDE_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"
	{% if params.EXTRUDE_DISTANCE %}
	{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}
	{% set _dummy = tl.extruder.update({'extrude':params.EXTRUDE_DISTANCE|float|round(3)}) %}
	{% else %}
	{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}
	{% endif %}
	{% endif %}
	{% if params.RETRACT_DISTANCE %}
	{% if params.RETRACT_DISTANCE|float >= 0.0 %}
	{% set _dummy = tl.extruder.update({'retract':params.RETRACT_DISTANCE|float|round(3)}) %}
	{% else %}
	{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}
	{% endif %}
	{% endif %}
	{% if params.FW_RETRACT %}
	{% if params.FW_RETRACT|lower is in ['true', 'false'] %}
	{% if 'firmware_retraction' in printer.configfile.settings %}
	{% set _dummy = tl.extruder.update({'fw_retract': True if params.FW_RETRACT|lower == 'true' else False}) %}
	{% else %}
	{% set _dummy = tl.extruder.update({'fw_retract':False}) %}
	{% if params.FW_RETRACT|capitalize == 'True' %}
	{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}
	{% endif %}
	{% endif %}
	{% else %}
	{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"
	{% if printer.configfile.settings['gcode_macro pause'] is defined %}
	{% set _dummy = tl.macro.update({'pause': printer.configfile.settings['gcode_macro pause'].rename_existing}) %}
	{% endif %}
	{% if printer.configfile.settings['gcode_macro resume'] is defined %}
	{% set _dummy = tl.macro.update({'resume': printer.configfile.settings['gcode_macro resume'].rename_existing}) %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"

[gcode_macro TIMELAPSE_TAKE_FRAME]
description = Take Timelapse shoot
variable_enable = False
variable_takingframe = False
variable_park = {'enable': False,
	'pos'   : 'center',
	'time'  : 0.1,
	'custom': {'x': 0, 'y': 0, 'dz': 0},
	'coord' : {'x': 0, 'y': 0, 'dz': 0}}
variable_extruder = {'fw_retract': False,
	'retract': 1.0,
	'extrude': 1.0}
variable_speed = {'travel': 100,
	'retract': 15,
	'extrude': 15}
variable_verbose = True
variable_restore = {'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}
variable_macro = {'pause': 'PAUSE', 'resume': 'RESUME'}
variable_is_paused = False
gcode = 
	{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower =='true' else False %}
	{% if enable %}
	{% if (hyperlapse and printer['gcode_macro HYPERLAPSE'].run) or
	(not hyperlapse and not printer['gcode_macro HYPERLAPSE'].run) %}
	{% if park.enable %}
	{% set pos = {'x': 'X' + park.coord.x|string if park.pos != 'y_only' else '',
	'y': 'Y' + park.coord.y|string if park.pos != 'x_only' else '',
	'z': 'Z'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}
	{% set restore = {'absolute': {'coordinates': printer.gcode_move.absolute_coordinates,
	'extrude'    : printer.gcode_move.absolute_extrude},
	'speed'   : printer.gcode_move.speed,
	'e'       : printer.gcode_move.gcode_position.e,
	'factor'  : {'speed'  : printer.gcode_move.speed_factor,
	'extrude': printer.gcode_move.extrude_factor}} %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"
	{% if not printer[printer.toolhead.extruder].can_extrude %}
	{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}
	{% else %}
	{% if extruder.fw_retract %}
	G10
	{% else %}
	M83
	G0 E-{extruder.retract} F{speed.retract * 60}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True
	{macro.pause}
	SET_GCODE_OFFSET X=0 Y=0
	G90
	{% if "xyz" not in printer.toolhead.homed_axes %}
	{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}
	{% else %}
	G0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5
	M400
	{% endif %}
	_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}
	{% endif %}
	{% else %}
	{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}
	{% endif %}

[gcode_macro _TIMELAPSE_NEW_FRAME]
description = action call for timelapse shoot. must be a seperate macro
gcode = 
	{action_call_remote_method("timelapse_newframe",
	macropark=printer['gcode_macro TIMELAPSE_TAKE_FRAME'].park,
	hyperlapse=params.HYPERLAPSE)}

[delayed_gcode _WAIT_TIMELAPSE_TAKE_FRAME]
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% set factor = {'speed': printer.gcode_move.speed_factor, 'extrude': printer.gcode_move.extrude_factor} %}
	{% if tl.takingframe %}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5
	{% else %}
	{tl.macro.resume} VELOCITY={tl.speed.travel}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False
	{% if not printer[printer.toolhead.extruder].can_extrude %}
	{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}
	{% else %}
	{% if tl.extruder.fw_retract %}
	G11
	{% else %}
	G0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}
	G0 F{tl.restore.speed}
	{% if tl.restore.absolute.extrude %}
	M82
	G92 E{tl.restore.e}
	{% endif %}
	{% endif %}
	{% endif %}
	{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}
	{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}
	{% if not tl.restore.absolute.coordinates %} G91 {% endif %}
	{% endif %}

[gcode_macro HYPERLAPSE]
description = Start/Stop a hyperlapse recording
variable_cycle = 0
variable_run = False
gcode = 
	{% set cycle = params.CYCLE|default(30)|int %}
	{% if params.ACTION and params.ACTION|lower == 'start' %}
	{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}
	TIMELAPSE_TAKE_FRAME HYPERLAPSE=True
	{% elif params.ACTION and params.ACTION|lower == 'stop' %}
	{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0
	{% else %}
	{action_raise_error("Hyperlapse: No valid input parameter
	Use:
	- HYPERLAPSE ACTION=START [CYCLE=time]
	- HYPERLAPSE ACTION=STOP")}
	{% endif %}

[delayed_gcode _HYPERLAPSE_LOOP]
gcode = 
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}
	TIMELAPSE_TAKE_FRAME HYPERLAPSE=True

[gcode_macro TIMELAPSE_RENDER]
description = Render Timelapse video and wait for the result
variable_render = False
variable_run_identifier = 0
gcode = 
	{action_respond_info("Timelapse: Rendering started")}
	{action_call_remote_method("timelapse_render", byrendermacro="True")}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True
	{printer.configfile.settings['gcode_macro pause'].rename_existing}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5

[delayed_gcode _WAIT_TIMELAPSE_RENDER]
gcode = 
	{% set ri = printer['gcode_macro TIMELAPSE_RENDER'].run_identifier % 4 %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}
	{% if printer['gcode_macro TIMELAPSE_RENDER'].render %}
	M117 Rendering {['-','\\','|','/'][ri]}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5
	{% else %}
	{action_respond_info("Timelapse: Rendering finished")}
	M117
	{printer.configfile.settings['gcode_macro resume'].rename_existing}
	{% endif %}

[gcode_macro TEST_STREAM_DELAY]
description = Helper macro to find stream and park delay
gcode = 
	{% set min = printer.toolhead.axis_minimum %}
	{% set max = printer.toolhead.axis_maximum %}
	{% set act = printer.toolhead.position %}
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% if act.z > 5.0 %}
	G0 X{min.x + 5.0} F{tl.speed.travel|int * 60}
	G0 X{(max.x-min.x)/2}
	G4 P{tl.park.time|float * 1000}
	_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE
	G0 X{max.x - 5.0}
	{% else %}
	{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}
	{% endif %}

[exclude_object]

[gcode_macro "БЭКАП на GIT-HUB" ]
gcode = 
	{% set message = params.MESSAGE|default() %}
	{% if message %}
	RUN_SHELL_COMMAND CMD=update_git_script_message PARAMS="'{params.MESSAGE}'"
	{% else %}
	RUN_SHELL_COMMAND CMD=update_git_script
	{% endif %}

[gcode_shell_command update_git_script]
command = bash -c "bash $HOME/klipper-backup/script.sh"
timeout = 90.0
verbose = True

[gcode_shell_command update_git_script_message]
command = bash -c "bash $HOME/klipper-backup/script.sh -c \"$0\""
timeout = 90.0
verbose = True

[mcu]
serial = /dev/ttyS3
restart_method = command

[output_pin Power]
pin = PC12
value = 1
shutdown_value = 1

[temperature_sensor orange_pi]
sensor_type = temperature_host
min_temp = 0
max_temp = 100

[heater_generic chamber_heater]
heater_pin = !PA7
sensor_type = ATC Semitec 104GT-2
sensor_pin = PA5
control = watermark
max_power = 1
min_temp = 15
max_temp = 85

[verify_heater chamber_heater]
max_error = 9999
check_gain_time = 9999
hysteresis = 5
heating_gain = 2

[filament_motion_sensor motion_sensor]
detection_length = 50
extruder = extruder
switch_pin = !PC15
pause_on_runout = True
runout_gcode = 
	SONG_CRAB_RAVE

[bltouch]
sensor_pin = ^PC14
control_pin = PA1
x_offset = -40
y_offset = 0.000
z_offset = 1.70
pin_up_reports_not_triggered = False
probe_with_touch_mode = True

[heater_bed]
heater_pin = PC9
sensor_type = ATC Semitec 104GT-2
sensor_pin = PC3
control = pid
pid_kp = 72.553
pid_ki = 1.154
pid_kd = 1139.994
min_temp = 5
max_temp = 125

[heater_fan radiator]
pin = PC7
max_power = 1.0
kick_start_time = 0.600
heater = extruder
heater_temp = 50.0
shutdown_speed = 1

[fan]
pin = PC6

[input_shaper]
shaper_type_x = 2hump_ei
shaper_freq_x = 43.0
shaper_type_y = mzv
shaper_freq_y = 32.6

[printer]
kinematics = cartesian
max_velocity = 300
max_accel = 1900
max_z_velocity = 30
max_z_accel = 100
square_corner_velocity = 4

[bed_mesh]
speed = 150
horizontal_move_z = 9
mesh_min = 10, 20
mesh_max = 195, 210
probe_count = 5
mesh_pps = 2, 3
algorithm = bicubic
bicubic_tension = 0.2
move_check_distance = 9
split_delta_z = .025
fade_start = 1
fade_end = 10
fade_target = 0

[screws_tilt_adjust]
screw1 = 79, 27
screw1_name = Peredniy Leviy
screw2 = 235, 27
screw2_name = Peredniy Praviy
screw3 = 235,197
screw3_name = Zadniy Praviy
screw4 = 79,197
screw4_name = Zadniy Leviy
speed = 120
horizontal_move_z = 9

[safe_z_home]
home_xy_position = 157,115
speed = 50
z_hop = 9.0
z_hop_speed = 20.0

[stepper_x]
step_pin = PB13
dir_pin = !PB12
enable_pin = !PB14
microsteps = 16
rotation_distance = 40
endstop_pin = ^PC0
position_endstop = 0
position_max = 240
position_min = -2
homing_retract_dist = 5
homing_speed = 50
second_homing_speed = 10

[tmc2209 stepper_x]
uart_pin = PC11
tx_pin = PC10
uart_address = 0
run_current = 0.580
stealthchop_threshold = 999999

[stepper_y]
step_pin = PB10
dir_pin = !PB2
enable_pin = !PB11
microsteps = 16
rotation_distance = 40
endstop_pin = ^PC1
position_endstop = 0
homing_retract_dist = 5
homing_speed = 50
second_homing_speed = 10
position_max = 231
position_min = 0

[tmc2209 stepper_y]
uart_pin = PC11
tx_pin = PC10
uart_address = 2
run_current = 0.6
stealthchop_threshold = 999999

[stepper_z]
step_pin = PB0
dir_pin = PC5
enable_pin = !PB1
microsteps = 16
rotation_distance = 40
gear_ratio = 80:16
full_steps_per_rotation = 200
endstop_pin = probe:z_virtual_endstop
homing_retract_dist = 9
second_homing_speed = 10
position_min = -5
position_max = 245
homing_speed = 50

[tmc2209 stepper_z]
uart_pin = PC11
tx_pin = PC10
uart_address = 1
run_current = 0.580
stealthchop_threshold = 999999
interpolate = false

[extruder]
step_pin = PB3
dir_pin = PB4
enable_pin = !PD2
microsteps = 16
rotation_distance = 4.637
nozzle_diameter = 0.400
filament_diameter = 1.750
heater_pin = PC8
sensor_type = ATC Semitec 104GT-2
sensor_pin = PA0
min_temp = 5
max_temp = 270
max_extrude_only_velocity = 120
max_extrude_only_accel = 3000
pressure_advance = 0.031
full_steps_per_rotation = 200
control = pid
pid_kp = 29.662
pid_ki = 2.382
pid_kd = 92.322

[tmc2209 extruder]
uart_pin = PC11
tx_pin = PC10
uart_address = 3
run_current = 0.7
stealthchop_threshold = 999999

[static_digital_output usb_pullup_enable]
pins = !PA14

[board_pins]
aliases = 
	
	EXP1_1=PB5,  EXP1_3=PA9,   EXP1_5=PA10, EXP1_7=PB8,  EXP1_9=<GND>,
	EXP1_2=PA15, EXP1_4=<RST>, EXP1_6=PB9,  EXP1_8=PB15, EXP1_10=<5V>

[display]
lcd_type = st7920
cs_pin = EXP1_7
sclk_pin = EXP1_6
sid_pin = EXP1_8
encoder_pins = ^EXP1_5, ^EXP1_3
click_pin = ^!EXP1_2

[pwm_cycle_time beeper]
pin = EXP1_1
shutdown_value = 0
cycle_time = 0.001

[firmware_retraction]
retract_length = 1.0
retract_speed = 80
unretract_extra_length = 0
unretract_speed = 80

[pwm_tool Laser]
pin = PA6
cycle_time = 0.0001
shutdown_value = 0
maximum_mcu_duration = 5

[bed_mesh 70]
version = 1
points = 
	-0.045000, 0.027500, 0.015000
	-0.055000, -0.005000, -0.035000
	-0.007500, 0.040000, -0.002500
x_count = 3
y_count = 3
mesh_x_pps = 2
mesh_y_pps = 3
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 195.0
min_y = 20.0
max_y = 210.0

[bed_mesh default]
version = 1
points = 
	0.020000, 0.025000, 0.030000, -0.007500, -0.052500
	0.015000, 0.017500, 0.022500, -0.007500, -0.057500
	0.030000, 0.030000, 0.037500, 0.002500, -0.035000
	0.012500, 0.030000, 0.050000, 0.035000, -0.010000
	0.080000, 0.087500, 0.115000, 0.097500, 0.067500
x_count = 5
y_count = 5
mesh_x_pps = 2
mesh_y_pps = 3
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 195.0
min_y = 20.0
max_y = 210.0
=======================
Config error
Traceback (most recent call last):
  File "/home/klipper/klipper/klippy/klippy.py", line 130, in _connect
    self._read_config()
  File "/home/klipper/klipper/klippy/klippy.py", line 123, in _read_config
    self.load_object(config, section_config.get_name(), None)
  File "/home/klipper/klipper/klippy/klippy.py", line 112, in load_object
    self.objects[section] = init_func(config.getsection(section))
  File "/home/klipper/klipper/klippy/extras/gcode_macro.py", line 194, in load_config_prefix
    return GCodeMacro(config)
  File "/home/klipper/klipper/klippy/extras/gcode_macro.py", line 117, in __init__
    raise config.error(
configparser.Error: Name of section 'gcode_macro "БЭКАП на GIT-HUB" ' contains illegal whitespace
webhooks client 281473323306240: New connection
webhooks client 281473323306240: Client info {'program': 'Moonraker', 'version': 'v0.9.3-4-ga4604e3'}
webhooks client 281473323306240: Disconnected
Restarting printer
Start printer at Wed Dec 25 21:03:47 2024 (1735149827.1 2810.1)
===== Config file =====
[virtual_sdcard]
path = /home/klipper/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[pause_resume]

[display_status]

[respond]

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = BASE_CANCEL_PRINT
gcode = 
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	TURN_OFF_HEATERS
	M107
	G91
	G1 E-{E} F1500
	G90
	CLEAR_PAUSE
	SDCARD_RESET_FILE
	BASE_CANCEL_PRINT
	PARK

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = BASE_PAUSE
gcode = 
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	SAVE_GCODE_STATE NAME=PAUSE_STATE
	BASE_PAUSE
	G91
	G1 E-{E} F1500
	G90
	PARK

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = BASE_RESUME
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	G91
	G1 E{E} F1500
	G90
	RESTORE_GCODE_STATE NAME=PAUSE_STATE MOVE=1
	BASE_RESUME

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[gcode_macro _CLIENT_LINEAR_MOVE]
description = Linear move with save and restore of the gcode state
gcode = 
	{% set x_move = "X" ~ params.X if params.X is defined else "" %}
	{% set y_move = "Y" ~ params.Y if params.Y is defined else "" %}
	{% set z_move = "Z" ~ params.Z if params.Z is defined else "" %}
	{% set e_move = "E" ~ params.E if params.E is defined else "" %}
	{% set rate = "F" ~ params.F if params.F is defined else "" %}
	{% set ABSOLUTE = params.ABSOLUTE | default(0) | int != 0 %}
	{% set ABSOLUTE_E = params.ABSOLUTE_E | default(0) | int != 0 %}
	SAVE_GCODE_STATE NAME=_client_movement
	{% if x_move or y_move or z_move %}
	G9{ 0 if ABSOLUTE else 1 }
	{% endif %}
	{% if e_move %}
	M8{ 2 if ABSOLUTE_E else 3 }
	{% endif %}
	G1 { x_move } { y_move } { z_move } { e_move } { rate }
	RESTORE_GCODE_STATE NAME=_client_movement

[gcode_macro list_sensors]
gcode = 
	{ action_respond_info(printer.heaters.available_heaters | join(', ')) }
	{ action_respond_info(printer.heaters.available_sensors | join(', ')) }

[gcode_macro Power_OFF]
gcode = SET_PIN PIN=Power VALUE=0

[gcode_macro _POWER_OFF_PRINTER]
gcode = SET_PIN PIN=Power VALUE=0

[gcode_macro ACTIVATE_POWER_OFF]
gcode = 
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK_ACT DURATION=60

[gcode_macro DEACTIVATE_POWER_OFF]
gcode = 
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK_ACT DURATION=0

[delayed_gcode POWER_OFF_PRINTER_CHECK_ACT]
gcode = 
	{% if printer.idle_timeout.state == "Idle" or printer.idle_timeout.state == "Ready" %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=30
	{% else %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK_ACT DURATION=60
	{% endif %}

[delayed_gcode POWER_OFF_PRINTER_CHECK]
gcode = 
	{% if printer.idle_timeout.state == "Idle" or printer.idle_timeout.state == "Ready" %}
	{% if printer.extruder.temperature < 50.0 and printer.heater_bed.temperature < 50.0 %}
	{% if printer.extruder.target == 0.0 and printer.heater_bed.target == 0.0 %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=0
	_POWER_OFF_PRINTER
	{% else %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=2
	{% endif %}
	{% else %}
	{% if printer.idle_timeout.state == "Printing" %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=0
	{% else %}
	{% if printer.extruder.target == 0.0 and printer.heater_bed.target == 0.0 %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=2
	{% else %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=0
	{% endif %}
	{% endif %}
	{% endif %}
	{% endif %}

[gcode_macro M141]
gcode = SET_HEATER_TEMPERATURE HEATER=chamber_heater TARGET={params.S|default(0)}

[gcode_macro M80]
gcode = SET_PIN PIN=Power  VALUE=1

[gcode_macro M81]
gcode = 
	
	SET_PIN PIN=Power VALUE=0

[gcode_macro M486]
gcode = 
	
	
	
	
	
	
	
	
	
	
	
	{% if 'exclude_object' not in printer %}
	{action_raise_error("[exclude_object] is not enabled")}
	{% endif %}
	
	{% if 'T' in params %}
	EXCLUDE_OBJECT RESET=1
	
	{% for i in range(params.T | int) %}
	EXCLUDE_OBJECT_DEFINE NAME={i}
	{% endfor %}
	{% endif %}
	
	{% if 'C' in params %}
	EXCLUDE_OBJECT CURRENT=1
	{% endif %}
	
	{% if 'P' in params %}
	EXCLUDE_OBJECT NAME={params.P}
	{% endif %}
	
	{% if 'S' in params %}
	{% if params.S == '-1' %}
	{% if printer.exclude_object.current_object %}
	EXCLUDE_OBJECT_END NAME={printer.exclude_object.current_object}
	{% endif %}
	{% else %}
	EXCLUDE_OBJECT_START NAME={params.S}
	{% endif %}
	{% endif %}
	
	{% if 'U' in params %}
	EXCLUDE_OBJECT RESET=1 NAME={params.U}
	{% endif %}

[gcode_macro M190]
rename_existing = M190.1
gcode = 
	{% if printer["gcode_macro status_heating"] != null %}
	status_heating
	{% endif %}
	M190.1 { rawparams }
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro _CHOME]
gcode = 
	{% if printer["gcode_macro status_homing"] != null %}
	status_homing
	{% endif %}
	{% if printer.toolhead.homed_axes != "xyz" %}
	G28
	{% endif %}
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro M109]
rename_existing = M109.1
gcode = 
	{% if printer["gcode_macro status_heating"] != null %}
	status_heating
	{% endif %}
	M109.1 { rawparams }
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro _MOVE_AWAY]
gcode = 
	{% set th = printer.toolhead %}
	{% set x_safe = th.position.x + 20 * (1 if th.axis_maximum.x - th.position.x > 20 else -1) %}
	{% set y_safe = th.position.y + 20 * (1 if th.axis_maximum.y - th.position.y > 20 else -1) %}
	{% set z_safe = [th.position.z + 2, th.axis_maximum.z]|min %}
	
	G90
	G0 X{x_safe} Y{y_safe} Z{z_safe} F20000

[gcode_macro PARK_CENTER_REAR]
gcode = 
	{% if printer["gcode_macro status_busy"] != null %}
	status_busy
	{% endif %}
	{% set th = printer.toolhead %}
	{% set x_safe = th.position.x + 20 * (1 if th.axis_maximum.x - th.position.x > 20 else -1) %}
	{% set y_safe = th.position.y + 20 * (1 if th.axis_maximum.y - th.position.y > 20 else -1) %}
	
	G0 X{th.axis_maximum.x//2} Y{th.axis_maximum.y - 2} F3600
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro START_PRINT]
variable_retract = 15
gcode = 
	{% set chamber_temp = params.CHAMBER_TEMP|default(0)|float %}
	{% set extruder_temp = params.EXTRUDER_TEMP|default(210)|float %}
	{% set bed_temp = params.BED_TEMP|default(60)|float %}
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	CLEAR_PAUSE
	G28
	Smart_Park
	M220 S100
	M221 S100
	SET_HEATER_TEMPERATURE HEATER=chamber_heater TARGET={chamber_temp}
	SET_HEATER_TEMPERATURE HEATER=heater_bed TARGET={bed_temp}
	TEMPERATURE_WAIT SENSOR=heater_bed MINIMUM={bed_temp * 0.75}
	SET_HEATER_TEMPERATURE HEATER=extruder TARGET={extruder_temp}
	G90
	M82
	TEMPERATURE_WAIT SENSOR=heater_bed MINIMUM={bed_temp}
	TEMPERATURE_WAIT SENSOR=extruder MINIMUM={extruder_temp}
	
	G1 E-15 F3600
	
	G28
	BED_MESH_CALIBRATE
	PRIME_LINE

[gcode_macro pid_soplo]
gcode = 
	PID_CALIBRATE HEATER=extruder TARGET=250

[gcode_macro pid_bed]
gcode = 
	PID_CALIBRATE HEATER=heater_bed TARGET=105

[gcode_macro BED]
gcode = 
	PROBE_CALIBRATE

[gcode_macro END_PRINT]
gcode = 
	
	{% set max_x = printer.configfile.config["stepper_x"]["position_max"]|float %}
	{% set max_y = printer.configfile.config["stepper_y"]["position_max"]|float %}
	{% set max_z = printer.configfile.config["stepper_z"]["position_max"]|float %}
	
	
	{% if printer.toolhead.position.x < (max_x - 20) %}
	{% set x_safe = 20.0 %}
	{% else %}
	{% set x_safe = -20.0 %}
	{% endif %}
	
	{% if printer.toolhead.position.y < (max_y - 20) %}
	{% set y_safe = 20.0 %}
	{% else %}
	{% set y_safe = -20.0 %}
	{% endif %}
	
	{% if printer.toolhead.position.z < (max_z - 2) %}
	{% set z_safe = 2.0 %}
	{% else %}
	{% set z_safe = max_z - printer.toolhead.position.z %}
	{% endif %}
	
	
	M400
	G92 E0
	G1 E-15 F3600
	G91
	G0 Z{z_safe} F3600
	G0 X{x_safe} Y{y_safe} F20000
	
	
	M104 S0
	M104 S0
	M140 S0
	M106 S0
	G90
	G0 X{max_x / 2} Y{max_y} F3600
	
	SONG_CRAB_RAVE
	
	
	
	M117 Finished!
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=30

[gcode_macro M300]
gcode = 
	
	{% set S = params.S|default(1000)|int %}
	
	{% set P = params.P|default(100)|int %}
	
	
	{% set V = params.V|default(99)|int %}
	SET_PIN PIN=beeper VALUE={0.1 * (V / 100) if S > 0 else 1} CYCLE_TIME={ 1.0 / S if S > 0 else 1 }
	G4 P{P}
	SET_PIN PIN=beeper VALUE=0 CYCLE_TIME={ 0.001 }
description = 
	"Plays a beep sound.
	@param {int} [S=1000] - Frequency in Hz
	@param {int} [P=100] - Duration in ms
	@param {int} [V=99] - Volume in percent"

[gcode_macro PRIME_LINE]
gcode = 
	{% set feedrate = params.F|default(10)|float * 60 %}
	{% set length = 100.0 %}
	{% set width = printer.configfile.settings.extruder.nozzle_diameter|float %}
	{% set height = ( (width / 0.04)|int - (width / 0.04 / 4)|int )|float * 0.04 %}
	
	{% set extrude = length * width * height * 1.5 %}
	SAVE_GCODE_STATE NAME=PRIME_LINE_STATE
	SET_IDLE_TIMEOUT TIMEOUT=7200
	{% if 'Y' in params %}
	{% set x_start = 1.0 %}
	{% set y_start = (printer.toolhead.axis_maximum.y|float - 100) / 2 %}
	G0 X{x_start} Y{y_start} F5000
	G0 Z{height} F1500
	G91
	
	G1 E8 F300
	
	
	G1 Y100 E{extrude} F{feedrate}
	G0 X{width} F5000
	G1 Y-100 E{extrude} F{feedrate}
	{% else %}
	{% set x_start = (printer.toolhead.axis_maximum.x|float - 100) / 2 %}
	{% set y_start = 1.0 %}
	G0 X{x_start} Y{y_start} F5000
	G0 Z{height} F1500
	G91
	
	G1 E8 F300
	
	
	G1 X100 E{extrude} F{feedrate}
	G0 Y{width} F5000
	G1 X-100 E{extrude} F{feedrate}
	{% endif %}
	RESTORE_GCODE_STATE NAME=PRIME_LINE_STATE

[gcode_macro VINT]
gcode = 
	SCREWS_TILT_CALCULATE

[gcode_macro LOW_TEMP_CHECK]
gcode = 
	{% set extruder_temp = params.T|default(240)|float %}
	{% if printer.extruder.target > extruder_temp %}
	{% set extruder_temp = printer.extruder.target %}
	{% endif %}
	{% if printer.extruder.temperature < extruder_temp %}
	M118 Heating to {extruder_temp}
	SET_HEATER_TEMPERATURE HEATER=extruder TARGET={extruder_temp}
	TEMPERATURE_WAIT SENSOR=extruder MINIMUM={extruder_temp}
	{% endif %}

[gcode_macro M76]
gcode = 
	PAUSE

[gcode_macro M601]
gcode = 
	PAUSE

[gcode_macro G27]
gcode = 
	PARK

[gcode_macro M125]
gcode = 
	PARK

[gcode_macro M600]
gcode = 
	PAUSE

[gcode_macro M701]
gcode = 
	FILAMENT_LOAD

[gcode_macro M702]
gcode = 
	FILAMENT_UNLOAD

[gcode_macro M500]
gcode = 
	SAVE_CONFIG

[gcode_macro PARK]
gcode = 
	{% set x_park = params.X|default(0)|float %}
	{% set y_park = params.Y|default(0)|float %}
	{% set z_park = params.Z|default(10)|float + printer.toolhead.position.z|float %}
	{% set x_max = printer.toolhead.axis_maximum.x|float %}
	{% set y_max = printer.toolhead.axis_maximum.y|float %}
	{% set z_max = printer.toolhead.axis_maximum.z|float %}
	{% if x_park > x_max %}
	{% set x_park = x_max %}
	{% endif %}
	{% if y_park > y_max %}
	{% set y_park = y_max %}
	{% endif %}
	{% if z_park > z_max %}
	{% set z_park = z_max %}
	{% endif %}
	SAVE_GCODE_STATE NAME=PARK_STATE
	G90
	G1 Z{z_park} F1500
	G1 X{x_park} Y{y_park} F5000
	RESTORE_GCODE_STATE name=PARK_STATE

[gcode_macro START_DRYER]
description = Start the heated bed filament dryer.
gcode = 
	{% set ChamberTemperature = params.CHAMBER | default(65.0) | float %}
	{% set BedTemperature = params.TEMPERATURE | default(0.0) | float %}
	{% set DryTime = params.TIME | default(14400) | int %}
	M140 S{BedTemperature}
	M141 S{ChamberTemperature}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=time_remaining VALUE={DryTime}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=bed_temperature VALUE={BedTemperature}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=chamber_temperature VALUE={ChamberTemperature}
	UPDATE_DELAYED_GCODE ID=DRYER_TIMER DURATION=1

[gcode_macro STOP_DRYER]
gcode = 
	M140 S0
	M141 S0
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=time_remaining VALUE=0
	UPDATE_DELAYED_GCODE ID=DRYER_TIMER DURATION=0
	M117 Drying Stopped

[gcode_macro DRYER_STATUS]
variable_time_remaining = 0
variable_bed_temperature = 0
variable_chamber_temperature = 0
gcode = 
	{% if time_remaining > 0 %}
	M140 S{bed_temperature}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=time_remaining VALUE={time_remaining - 1}
	M117 Drying {time_remaining}
	{% else %}
	STOP_DRYER
	{% endif %}

[delayed_gcode DRYER_TIMER]
gcode = 
	UPDATE_DELAYED_GCODE ID=DRYER_TIMER DURATION=1
	DRYER_STATUS

[gcode_macro DRY_tpu]
gcode = 
	START_DRYER TEMPERATURE=0 CHAMBER=50 TIME=18000

[gcode_macro DRY_PETG]
gcode = 
	START_DRYER TEMPERATURE=0  CHAMBER=65 TIME=18000

[gcode_macro DRY_ABS]
gcode = 
	{% set S = params.S|default(0.0)|float %}
	SET_PIN PIN=Laser VALUE={S / 255.0}

[gcode_macro M4]
gcode = 
	{% set S = params.S|default(0.0)|float %}
	SET_PIN PIN=Laser VALUE={S / 255.0}

[gcode_macro M5]
gcode = 
	SET_PIN PIN=Laser VALUE=0

[menu __main __control __toolonoff]
type = input
enable = {'pwm_tool Laser' in printer}
name = Fan: {'ON ' if menu.input else 'OFF'}
input = {printer['pwm_tool Laser'].value}
input_min = 0
input_max = 1
input_step = 1
gcode = 
	M3 S{255 if menu.input else 0}

[menu __main __control __toolspeed]
type = input
enable = {'pwm_tool Laser' in printer}
name = Laser speed: {'%3d' % (menu.input*100)}%
input = {printer['pwm_tool Laser'].value}
input_min = 0
input_max = 1
input_step = 0.01
gcode = 
	M3 S{'%d' % (menu.input*255)}

[gcode_macro NOTE]
description = 
	"Plays a specified note for a specified duration
	@param {string} [N=C5] - Note to play
	@param {int} [D=500] - Duration of note. There are currently some Klipper limitations to how short a note can be.
	@param {int} [V=99] - Volume in percent
	@param {bool} [S=true] - Whether or not to stop the note after duration"
gcode = 
	{% set notes = {
	'C0': 16.35,   'CS0': 17.32,   'D0': 18.35,   'DS0': 19.45,   'E0': 20.60,   'F0': 21.83,   'FS0': 23.12,   'G0': 24.50,   'GS0': 25.96,   'A0': 27.50,   'AS0': 29.14,   'B0': 30.87,
	'C1': 32.70,   'CS1': 34.65,   'D1': 36.71,   'DS1': 38.89,   'E1': 41.20,   'F1': 43.65,   'FS1': 46.25,   'G1': 49.00,   'GS1': 51.91,   'A1': 55.00,   'AS1': 58.27,   'B1': 61.74,
	'C2': 65.41,   'CS2': 69.30,   'D2': 73.42,   'DS2': 77.78,   'E2': 82.41,   'F2': 87.31,   'FS2': 92.50,   'G2': 98.00,   'GS2': 103.83,  'A2': 110.00,  'AS2': 116.54,  'B2': 123.47,
	'C3': 130.81,  'CS3': 138.59,  'D3': 146.83,  'DS3': 155.56,  'E3': 164.81,  'F3': 174.61,  'FS3': 185.00,  'G3': 196.00,  'GS3': 207.65,  'A3': 220.00,  'AS3': 233.08,  'B3': 246.94,
	'C4': 261.63,  'CS4': 277.18,  'D4': 293.66,  'DS4': 311.13,  'E4': 329.63,  'F4': 349.23,  'FS4': 369.99,  'G4': 392.00,  'GS4': 415.30,  'A4': 440.00,  'AS4': 466.16,  'B4': 493.88,
	'C5': 523.25,  'CS5': 554.37,  'D5': 587.33,  'DS5': 622.25,  'E5': 659.26,  'F5': 698.46,  'FS5': 739.99,  'G5': 783.99,  'GS5': 830.61,  'A5': 880.00,  'AS5': 932.33,  'B5': 987.77,
	'C6': 1046.50, 'CS6': 1108.73, 'D6': 1174.66, 'DS6': 1244.51, 'E6': 1318.51, 'F6': 1396.91, 'FS6': 1479.98, 'G6': 1567.98, 'GS6': 1661.22, 'A6': 1760.00, 'AS6': 1864.66, 'B6': 1975.53,
	'C7': 2093.00, 'CS7': 2217.46, 'D7': 2349.32, 'DS7': 2489.02, 'E7': 2637.02, 'F7': 2793.83, 'FS7': 2959.96, 'G7': 3135.96, 'GS7': 3322.44, 'A7': 3520.00, 'AS7': 3729.31, 'B7': 3951.07,
	'C8': 4186.01, 'CS8': 4434.92, 'D8': 4698.64, 'DS8': 4978.03, 'E8': 5274.04, 'F8': 5587.65, 'FS8': 5919.91, 'G8': 6271.93, 'GS8': 6644.88, 'A8': 7040.00, 'AS8': 7458.62, 'B8': 7902.13,
	} %}
	
	{% set note = params.N|default('C5')|string %}
	
	{% set dur = params.D|default(500)|int %}
	
	
	{% set volume = params.V|default(99)|int %}
	
	{% set stop = params.S|default('true')|string %}
	
	{% set freq = notes[note] %}
	
	SET_PIN PIN=beeper VALUE={0.1 * (volume / 100) if volume > 0 else 1} CYCLE_TIME={ 1.0 / freq }
	G4 P{dur}
	{% if stop|lower == 'true' %}
	SET_PIN PIN=beeper VALUE=0 CYCLE_TIME={ 0.001 }
	{% endif %}

[gcode_macro TONE_GEN]
description = "Used for the tone generator menu"
variable_tone_freq = 0.001093
gcode = 
	M117 {printer["gcode_macro TONE_GEN"].tone_freq}nothz

[gcode_macro SONG_STAR_WARS_MAIN_THEME]
description = "Plays the Star Wars main theme"
gcode = 
	NOTE N=D4 D=133
	NOTE N=D4 D=133
	NOTE N=D4 D=133
	NOTE N=G4 D=1000
	NOTE N=D5 D=1000
	
	NOTE N=C5 D=133
	NOTE N=B4 D=133
	NOTE N=A4 D=133
	NOTE N=G5 D=1000
	NOTE N=D5 D=500
	
	NOTE N=C5 D=133
	NOTE N=B4 D=133
	NOTE N=A4 D=133
	NOTE N=G5 D=1000
	NOTE N=D5 D=500
	
	NOTE N=C5 D=133
	NOTE N=B4 D=133
	NOTE N=C5 D=133
	NOTE N=A4 D=1000

[gcode_macro SONG_CRAB_RAVE]
description = "Plays Crab Rave"
gcode = 
	NOTE N=D6 D=150 V=30 S=1
	NOTE N=AS6 D=150 V=30 S=1
	NOTE N=G6 D=150 V=30 S=1
	NOTE N=G6 D=150 V=30 S=0
	NOTE N=D6 D=150 V=30 S=1
	NOTE N=D6 D=150 V=30 S=0
	NOTE N=A6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=0
	NOTE N=D6 D=150 V=30 S=1
	NOTE N=D6 D=150 V=30 S=0
	NOTE N=A6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=0
	NOTE N=C6 D=150 V=30 S=1
	NOTE N=C6 D=150 V=30 S=1
	NOTE N=E6 D=150 V=30 S=1
	NOTE N=E6 D=150 V=30 S=0
	NOTE N=F6 D=150 V=30 S=1
	SET_PIN PIN=beeper VALUE=0

[gcode_macro one]
description = "one"
gcode = 
	NOTE N=C6 D=600 V=30 S=1
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=G5 D=400 V=30 S=1
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=E6 D=400 V=30 S=1
	G4 P150
	NOTE N=G6 D=180 V=30 S=0
	NOTE N=F6 D=180 V=30 S=0
	NOTE N=E6 D=180 V=30 S=0
	NOTE N=D6 D=180 V=30 S=1
	NOTE N=C6 D=600 V=30 S=1
	
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=G5 D=400 V=30 S=1
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=C6 D=600 V=30 S=1
	SET_PIN PIN=beeper VALUE=0

[gcode_macro SONG_BOOMER]
description = "BOOMER"
gcode = 
	M300 P207 S659
	M300 P207 S784
	M300 P207 S494
	M300 P207 S494
	M300 P207 S392
	M300 P207 S494
	M300 P207 S494
	M300 P207 S330
	M300 P207 S784
	M300 P207 S659
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S988
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S659
	M300 P207 S784
	M300 P207 S494
	M300 P207 S494
	M300 P207 S392
	M300 P207 S494
	M300 P207 S494
	M300 P207 S330
	M300 P207 S784
	M300 P207 S659
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S988
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S659
	M300 P207 S784
	M300 P207 S494
	M300 P207 S494
	M300 P207 S392
	M300 P207 S494
	M300 P207 S494
	M300 P207 S330
	M300 P207 S784
	M300 P207 S659
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S988
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330

[gcode_macro GET_TIMELAPSE_SETUP]
description = Print the Timelapse setup
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% set output_txt = ["Timelapse Setup:"] %}
	{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}
	{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}
	{% if tl.park.enable %}
	{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}
	{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}
	{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}
	{% endif %}
	{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}
	{% if not tl.extruder.fw_retract %}
	{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}
	{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}
	{% endif %}
	{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}
	{action_respond_info(output_txt|join("\n"))}

[gcode_macro _SET_TIMELAPSE_SETUP]
description = Set user parameters for timelapse
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	
	{% set min = printer.toolhead.axis_minimum %}
	{% set max = printer.toolhead.axis_maximum %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	{% set park = {'min'   : {'x': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),
	'y': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},
	'max'   : {'x': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),
	'y': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},
	'center': {'x': (max.x-(max.x-min.x)/2)|round(3),
	'y': (max.y-(max.y-min.y)/2)|round(3)}} %}
	
	{% if params.ENABLE %}
	{% if params.ENABLE|lower is in ['true', 'false'] %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == 'true' else False}
	{% else %}
	{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.VERBOSE %}
	{% if params.VERBOSE|lower is in ['true', 'false'] %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == 'true' else False}
	{% else %}
	{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_X %}
	{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}
	{% set _dummy = tl.park.custom.update({'x':params.CUSTOM_POS_X|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_Y %}
	{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}
	{% set _dummy = tl.park.custom.update({'y':params.CUSTOM_POS_Y|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_DZ %}
	{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}
	{% set _dummy = tl.park.custom.update({'dz':params.CUSTOM_POS_DZ|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}
	{% endif %}
	{% endif %}
	{% if params.PARK_ENABLE %}
	{% if params.PARK_ENABLE|lower is in ['true', 'false'] %}
	{% set _dummy = tl.park.update({'enable':True if params.PARK_ENABLE|lower == 'true' else False}) %}
	{% else %}
	{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.PARK_POS %}
	{% if params.PARK_POS|lower is in ['center','front_left','front_right','back_left','back_right','custom','x_only','y_only'] %}
	{% set dic = {'center'      : {'x': park.center.x   , 'y': park.center.y   , 'dz': 1                },
	'front_left'  : {'x': park.min.x      , 'y': park.min.y      , 'dz': 0                },
	'front_right' : {'x': park.max.x      , 'y': park.min.y      , 'dz': 0                },
	'back_left'   : {'x': park.min.x      , 'y': park.max.y      , 'dz': 0                },
	'back_right'  : {'x': park.max.x      , 'y': park.max.y      , 'dz': 0                },
	'custom'      : {'x': tl.park.custom.x, 'y': tl.park.custom.y, 'dz': tl.park.custom.dz},
	'x_only'      : {'x': tl.park.custom.x, 'y': 'none'          , 'dz': tl.park.custom.dz},
	'y_only'      : {'x': 'none'          , 'y': tl.park.custom.y, 'dz': tl.park.custom.dz}} %}
	{% set _dummy = tl.park.update({'pos':params.PARK_POS|lower}) %}
	{% set _dummy = tl.park.update({'coord':dic[tl.park.pos]}) %}
	{% else %}
	{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"
	% params.PARK_POS|upper)}
	{% endif %}
	{% endif %}
	{% if params.PARK_TIME %}
	{% if params.PARK_TIME|float >= 0.0 %}
	{% set _dummy = tl.park.update({'time':params.PARK_TIME|float|round(3)}) %}
	{% else %}
	{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"
	{% if params.TRAVEL_SPEED %}
	{% if params.TRAVEL_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'travel':params.TRAVEL_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}
	{% endif %}
	{% endif %}
	{% if params.RETRACT_SPEED %}
	{% if params.RETRACT_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'retract':params.RETRACT_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}
	{% endif %}
	{% endif %}
	{% if params.EXTRUDE_SPEED %}
	{% if params.EXTRUDE_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'extrude':params.EXTRUDE_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"
	{% if params.EXTRUDE_DISTANCE %}
	{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}
	{% set _dummy = tl.extruder.update({'extrude':params.EXTRUDE_DISTANCE|float|round(3)}) %}
	{% else %}
	{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}
	{% endif %}
	{% endif %}
	{% if params.RETRACT_DISTANCE %}
	{% if params.RETRACT_DISTANCE|float >= 0.0 %}
	{% set _dummy = tl.extruder.update({'retract':params.RETRACT_DISTANCE|float|round(3)}) %}
	{% else %}
	{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}
	{% endif %}
	{% endif %}
	{% if params.FW_RETRACT %}
	{% if params.FW_RETRACT|lower is in ['true', 'false'] %}
	{% if 'firmware_retraction' in printer.configfile.settings %}
	{% set _dummy = tl.extruder.update({'fw_retract': True if params.FW_RETRACT|lower == 'true' else False}) %}
	{% else %}
	{% set _dummy = tl.extruder.update({'fw_retract':False}) %}
	{% if params.FW_RETRACT|capitalize == 'True' %}
	{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}
	{% endif %}
	{% endif %}
	{% else %}
	{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"
	{% if printer.configfile.settings['gcode_macro pause'] is defined %}
	{% set _dummy = tl.macro.update({'pause': printer.configfile.settings['gcode_macro pause'].rename_existing}) %}
	{% endif %}
	{% if printer.configfile.settings['gcode_macro resume'] is defined %}
	{% set _dummy = tl.macro.update({'resume': printer.configfile.settings['gcode_macro resume'].rename_existing}) %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"

[gcode_macro TIMELAPSE_TAKE_FRAME]
description = Take Timelapse shoot
variable_enable = False
variable_takingframe = False
variable_park = {'enable': False,
	'pos'   : 'center',
	'time'  : 0.1,
	'custom': {'x': 0, 'y': 0, 'dz': 0},
	'coord' : {'x': 0, 'y': 0, 'dz': 0}}
variable_extruder = {'fw_retract': False,
	'retract': 1.0,
	'extrude': 1.0}
variable_speed = {'travel': 100,
	'retract': 15,
	'extrude': 15}
variable_verbose = True
variable_restore = {'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}
variable_macro = {'pause': 'PAUSE', 'resume': 'RESUME'}
variable_is_paused = False
gcode = 
	{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower =='true' else False %}
	{% if enable %}
	{% if (hyperlapse and printer['gcode_macro HYPERLAPSE'].run) or
	(not hyperlapse and not printer['gcode_macro HYPERLAPSE'].run) %}
	{% if park.enable %}
	{% set pos = {'x': 'X' + park.coord.x|string if park.pos != 'y_only' else '',
	'y': 'Y' + park.coord.y|string if park.pos != 'x_only' else '',
	'z': 'Z'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}
	{% set restore = {'absolute': {'coordinates': printer.gcode_move.absolute_coordinates,
	'extrude'    : printer.gcode_move.absolute_extrude},
	'speed'   : printer.gcode_move.speed,
	'e'       : printer.gcode_move.gcode_position.e,
	'factor'  : {'speed'  : printer.gcode_move.speed_factor,
	'extrude': printer.gcode_move.extrude_factor}} %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"
	{% if not printer[printer.toolhead.extruder].can_extrude %}
	{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}
	{% else %}
	{% if extruder.fw_retract %}
	G10
	{% else %}
	M83
	G0 E-{extruder.retract} F{speed.retract * 60}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True
	{macro.pause}
	SET_GCODE_OFFSET X=0 Y=0
	G90
	{% if "xyz" not in printer.toolhead.homed_axes %}
	{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}
	{% else %}
	G0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5
	M400
	{% endif %}
	_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}
	{% endif %}
	{% else %}
	{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}
	{% endif %}

[gcode_macro _TIMELAPSE_NEW_FRAME]
description = action call for timelapse shoot. must be a seperate macro
gcode = 
	{action_call_remote_method("timelapse_newframe",
	macropark=printer['gcode_macro TIMELAPSE_TAKE_FRAME'].park,
	hyperlapse=params.HYPERLAPSE)}

[delayed_gcode _WAIT_TIMELAPSE_TAKE_FRAME]
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% set factor = {'speed': printer.gcode_move.speed_factor, 'extrude': printer.gcode_move.extrude_factor} %}
	{% if tl.takingframe %}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5
	{% else %}
	{tl.macro.resume} VELOCITY={tl.speed.travel}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False
	{% if not printer[printer.toolhead.extruder].can_extrude %}
	{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}
	{% else %}
	{% if tl.extruder.fw_retract %}
	G11
	{% else %}
	G0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}
	G0 F{tl.restore.speed}
	{% if tl.restore.absolute.extrude %}
	M82
	G92 E{tl.restore.e}
	{% endif %}
	{% endif %}
	{% endif %}
	{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}
	{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}
	{% if not tl.restore.absolute.coordinates %} G91 {% endif %}
	{% endif %}

[gcode_macro HYPERLAPSE]
description = Start/Stop a hyperlapse recording
variable_cycle = 0
variable_run = False
gcode = 
	{% set cycle = params.CYCLE|default(30)|int %}
	{% if params.ACTION and params.ACTION|lower == 'start' %}
	{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}
	TIMELAPSE_TAKE_FRAME HYPERLAPSE=True
	{% elif params.ACTION and params.ACTION|lower == 'stop' %}
	{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0
	{% else %}
	{action_raise_error("Hyperlapse: No valid input parameter
	Use:
	- HYPERLAPSE ACTION=START [CYCLE=time]
	- HYPERLAPSE ACTION=STOP")}
	{% endif %}

[delayed_gcode _HYPERLAPSE_LOOP]
gcode = 
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}
	TIMELAPSE_TAKE_FRAME HYPERLAPSE=True

[gcode_macro TIMELAPSE_RENDER]
description = Render Timelapse video and wait for the result
variable_render = False
variable_run_identifier = 0
gcode = 
	{action_respond_info("Timelapse: Rendering started")}
	{action_call_remote_method("timelapse_render", byrendermacro="True")}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True
	{printer.configfile.settings['gcode_macro pause'].rename_existing}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5

[delayed_gcode _WAIT_TIMELAPSE_RENDER]
gcode = 
	{% set ri = printer['gcode_macro TIMELAPSE_RENDER'].run_identifier % 4 %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}
	{% if printer['gcode_macro TIMELAPSE_RENDER'].render %}
	M117 Rendering {['-','\\','|','/'][ri]}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5
	{% else %}
	{action_respond_info("Timelapse: Rendering finished")}
	M117
	{printer.configfile.settings['gcode_macro resume'].rename_existing}
	{% endif %}

[gcode_macro TEST_STREAM_DELAY]
description = Helper macro to find stream and park delay
gcode = 
	{% set min = printer.toolhead.axis_minimum %}
	{% set max = printer.toolhead.axis_maximum %}
	{% set act = printer.toolhead.position %}
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% if act.z > 5.0 %}
	G0 X{min.x + 5.0} F{tl.speed.travel|int * 60}
	G0 X{(max.x-min.x)/2}
	G4 P{tl.park.time|float * 1000}
	_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE
	G0 X{max.x - 5.0}
	{% else %}
	{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}
	{% endif %}

[exclude_object]

[gcode_macro 'БЭКАП на GIT-HUB' ]
gcode = 
	{% set message = params.MESSAGE|default() %}
	{% if message %}
	RUN_SHELL_COMMAND CMD=update_git_script_message PARAMS="'{params.MESSAGE}'"
	{% else %}
	RUN_SHELL_COMMAND CMD=update_git_script
	{% endif %}

[gcode_shell_command update_git_script]
command = bash -c "bash $HOME/klipper-backup/script.sh"
timeout = 90.0
verbose = True

[gcode_shell_command update_git_script_message]
command = bash -c "bash $HOME/klipper-backup/script.sh -c \"$0\""
timeout = 90.0
verbose = True

[mcu]
serial = /dev/ttyS3
restart_method = command

[output_pin Power]
pin = PC12
value = 1
shutdown_value = 1

[temperature_sensor orange_pi]
sensor_type = temperature_host
min_temp = 0
max_temp = 100

[heater_generic chamber_heater]
heater_pin = !PA7
sensor_type = ATC Semitec 104GT-2
sensor_pin = PA5
control = watermark
max_power = 1
min_temp = 15
max_temp = 85

[verify_heater chamber_heater]
max_error = 9999
check_gain_time = 9999
hysteresis = 5
heating_gain = 2

[filament_motion_sensor motion_sensor]
detection_length = 50
extruder = extruder
switch_pin = !PC15
pause_on_runout = True
runout_gcode = 
	SONG_CRAB_RAVE

[bltouch]
sensor_pin = ^PC14
control_pin = PA1
x_offset = -40
y_offset = 0.000
z_offset = 1.70
pin_up_reports_not_triggered = False
probe_with_touch_mode = True

[heater_bed]
heater_pin = PC9
sensor_type = ATC Semitec 104GT-2
sensor_pin = PC3
control = pid
pid_kp = 72.553
pid_ki = 1.154
pid_kd = 1139.994
min_temp = 5
max_temp = 125

[heater_fan radiator]
pin = PC7
max_power = 1.0
kick_start_time = 0.600
heater = extruder
heater_temp = 50.0
shutdown_speed = 1

[fan]
pin = PC6

[input_shaper]
shaper_type_x = 2hump_ei
shaper_freq_x = 43.0
shaper_type_y = mzv
shaper_freq_y = 32.6

[printer]
kinematics = cartesian
max_velocity = 300
max_accel = 1900
max_z_velocity = 30
max_z_accel = 100
square_corner_velocity = 4

[bed_mesh]
speed = 150
horizontal_move_z = 9
mesh_min = 10, 20
mesh_max = 195, 210
probe_count = 5
mesh_pps = 2, 3
algorithm = bicubic
bicubic_tension = 0.2
move_check_distance = 9
split_delta_z = .025
fade_start = 1
fade_end = 10
fade_target = 0

[screws_tilt_adjust]
screw1 = 79, 27
screw1_name = Peredniy Leviy
screw2 = 235, 27
screw2_name = Peredniy Praviy
screw3 = 235,197
screw3_name = Zadniy Praviy
screw4 = 79,197
screw4_name = Zadniy Leviy
speed = 120
horizontal_move_z = 9

[safe_z_home]
home_xy_position = 157,115
speed = 50
z_hop = 9.0
z_hop_speed = 20.0

[stepper_x]
step_pin = PB13
dir_pin = !PB12
enable_pin = !PB14
microsteps = 16
rotation_distance = 40
endstop_pin = ^PC0
position_endstop = 0
position_max = 240
position_min = -2
homing_retract_dist = 5
homing_speed = 50
second_homing_speed = 10

[tmc2209 stepper_x]
uart_pin = PC11
tx_pin = PC10
uart_address = 0
run_current = 0.580
stealthchop_threshold = 999999

[stepper_y]
step_pin = PB10
dir_pin = !PB2
enable_pin = !PB11
microsteps = 16
rotation_distance = 40
endstop_pin = ^PC1
position_endstop = 0
homing_retract_dist = 5
homing_speed = 50
second_homing_speed = 10
position_max = 231
position_min = 0

[tmc2209 stepper_y]
uart_pin = PC11
tx_pin = PC10
uart_address = 2
run_current = 0.6
stealthchop_threshold = 999999

[stepper_z]
step_pin = PB0
dir_pin = PC5
enable_pin = !PB1
microsteps = 16
rotation_distance = 40
gear_ratio = 80:16
full_steps_per_rotation = 200
endstop_pin = probe:z_virtual_endstop
homing_retract_dist = 9
second_homing_speed = 10
position_min = -5
position_max = 245
homing_speed = 50

[tmc2209 stepper_z]
uart_pin = PC11
tx_pin = PC10
uart_address = 1
run_current = 0.580
stealthchop_threshold = 999999
interpolate = false

[extruder]
step_pin = PB3
dir_pin = PB4
enable_pin = !PD2
microsteps = 16
rotation_distance = 4.637
nozzle_diameter = 0.400
filament_diameter = 1.750
heater_pin = PC8
sensor_type = ATC Semitec 104GT-2
sensor_pin = PA0
min_temp = 5
max_temp = 270
max_extrude_only_velocity = 120
max_extrude_only_accel = 3000
pressure_advance = 0.031
full_steps_per_rotation = 200
control = pid
pid_kp = 29.662
pid_ki = 2.382
pid_kd = 92.322

[tmc2209 extruder]
uart_pin = PC11
tx_pin = PC10
uart_address = 3
run_current = 0.7
stealthchop_threshold = 999999

[static_digital_output usb_pullup_enable]
pins = !PA14

[board_pins]
aliases = 
	
	EXP1_1=PB5,  EXP1_3=PA9,   EXP1_5=PA10, EXP1_7=PB8,  EXP1_9=<GND>,
	EXP1_2=PA15, EXP1_4=<RST>, EXP1_6=PB9,  EXP1_8=PB15, EXP1_10=<5V>

[display]
lcd_type = st7920
cs_pin = EXP1_7
sclk_pin = EXP1_6
sid_pin = EXP1_8
encoder_pins = ^EXP1_5, ^EXP1_3
click_pin = ^!EXP1_2

[pwm_cycle_time beeper]
pin = EXP1_1
shutdown_value = 0
cycle_time = 0.001

[firmware_retraction]
retract_length = 1.0
retract_speed = 80
unretract_extra_length = 0
unretract_speed = 80

[pwm_tool Laser]
pin = PA6
cycle_time = 0.0001
shutdown_value = 0
maximum_mcu_duration = 5

[bed_mesh 70]
version = 1
points = 
	-0.045000, 0.027500, 0.015000
	-0.055000, -0.005000, -0.035000
	-0.007500, 0.040000, -0.002500
x_count = 3
y_count = 3
mesh_x_pps = 2
mesh_y_pps = 3
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 195.0
min_y = 20.0
max_y = 210.0

[bed_mesh default]
version = 1
points = 
	0.020000, 0.025000, 0.030000, -0.007500, -0.052500
	0.015000, 0.017500, 0.022500, -0.007500, -0.057500
	0.030000, 0.030000, 0.037500, 0.002500, -0.035000
	0.012500, 0.030000, 0.050000, 0.035000, -0.010000
	0.080000, 0.087500, 0.115000, 0.097500, 0.067500
x_count = 5
y_count = 5
mesh_x_pps = 2
mesh_y_pps = 3
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 195.0
min_y = 20.0
max_y = 210.0
=======================
Config error
Traceback (most recent call last):
  File "/home/klipper/klipper/klippy/klippy.py", line 130, in _connect
    self._read_config()
  File "/home/klipper/klipper/klippy/klippy.py", line 123, in _read_config
    self.load_object(config, section_config.get_name(), None)
  File "/home/klipper/klipper/klippy/klippy.py", line 112, in load_object
    self.objects[section] = init_func(config.getsection(section))
  File "/home/klipper/klipper/klippy/extras/gcode_macro.py", line 194, in load_config_prefix
    return GCodeMacro(config)
  File "/home/klipper/klipper/klippy/extras/gcode_macro.py", line 117, in __init__
    raise config.error(
configparser.Error: Name of section 'gcode_macro 'БЭКАП на GIT-HUB' ' contains illegal whitespace
webhooks client 281473333689840: New connection
webhooks client 281473333689840: Client info {'program': 'Moonraker', 'version': 'v0.9.3-4-ga4604e3'}
webhooks client 281473333689840: Disconnected
Restarting printer
Start printer at Wed Dec 25 21:04:17 2024 (1735149857.6 2840.6)
===== Config file =====
[virtual_sdcard]
path = /home/klipper/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[pause_resume]

[display_status]

[respond]

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = BASE_CANCEL_PRINT
gcode = 
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	TURN_OFF_HEATERS
	M107
	G91
	G1 E-{E} F1500
	G90
	CLEAR_PAUSE
	SDCARD_RESET_FILE
	BASE_CANCEL_PRINT
	PARK

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = BASE_PAUSE
gcode = 
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	SAVE_GCODE_STATE NAME=PAUSE_STATE
	BASE_PAUSE
	G91
	G1 E-{E} F1500
	G90
	PARK

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = BASE_RESUME
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	G91
	G1 E{E} F1500
	G90
	RESTORE_GCODE_STATE NAME=PAUSE_STATE MOVE=1
	BASE_RESUME

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[gcode_macro _CLIENT_LINEAR_MOVE]
description = Linear move with save and restore of the gcode state
gcode = 
	{% set x_move = "X" ~ params.X if params.X is defined else "" %}
	{% set y_move = "Y" ~ params.Y if params.Y is defined else "" %}
	{% set z_move = "Z" ~ params.Z if params.Z is defined else "" %}
	{% set e_move = "E" ~ params.E if params.E is defined else "" %}
	{% set rate = "F" ~ params.F if params.F is defined else "" %}
	{% set ABSOLUTE = params.ABSOLUTE | default(0) | int != 0 %}
	{% set ABSOLUTE_E = params.ABSOLUTE_E | default(0) | int != 0 %}
	SAVE_GCODE_STATE NAME=_client_movement
	{% if x_move or y_move or z_move %}
	G9{ 0 if ABSOLUTE else 1 }
	{% endif %}
	{% if e_move %}
	M8{ 2 if ABSOLUTE_E else 3 }
	{% endif %}
	G1 { x_move } { y_move } { z_move } { e_move } { rate }
	RESTORE_GCODE_STATE NAME=_client_movement

[gcode_macro list_sensors]
gcode = 
	{ action_respond_info(printer.heaters.available_heaters | join(', ')) }
	{ action_respond_info(printer.heaters.available_sensors | join(', ')) }

[gcode_macro Power_OFF]
gcode = SET_PIN PIN=Power VALUE=0

[gcode_macro _POWER_OFF_PRINTER]
gcode = SET_PIN PIN=Power VALUE=0

[gcode_macro ACTIVATE_POWER_OFF]
gcode = 
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK_ACT DURATION=60

[gcode_macro DEACTIVATE_POWER_OFF]
gcode = 
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK_ACT DURATION=0

[delayed_gcode POWER_OFF_PRINTER_CHECK_ACT]
gcode = 
	{% if printer.idle_timeout.state == "Idle" or printer.idle_timeout.state == "Ready" %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=30
	{% else %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK_ACT DURATION=60
	{% endif %}

[delayed_gcode POWER_OFF_PRINTER_CHECK]
gcode = 
	{% if printer.idle_timeout.state == "Idle" or printer.idle_timeout.state == "Ready" %}
	{% if printer.extruder.temperature < 50.0 and printer.heater_bed.temperature < 50.0 %}
	{% if printer.extruder.target == 0.0 and printer.heater_bed.target == 0.0 %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=0
	_POWER_OFF_PRINTER
	{% else %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=2
	{% endif %}
	{% else %}
	{% if printer.idle_timeout.state == "Printing" %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=0
	{% else %}
	{% if printer.extruder.target == 0.0 and printer.heater_bed.target == 0.0 %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=2
	{% else %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=0
	{% endif %}
	{% endif %}
	{% endif %}
	{% endif %}

[gcode_macro M141]
gcode = SET_HEATER_TEMPERATURE HEATER=chamber_heater TARGET={params.S|default(0)}

[gcode_macro M80]
gcode = SET_PIN PIN=Power  VALUE=1

[gcode_macro M81]
gcode = 
	
	SET_PIN PIN=Power VALUE=0

[gcode_macro M486]
gcode = 
	
	
	
	
	
	
	
	
	
	
	
	{% if 'exclude_object' not in printer %}
	{action_raise_error("[exclude_object] is not enabled")}
	{% endif %}
	
	{% if 'T' in params %}
	EXCLUDE_OBJECT RESET=1
	
	{% for i in range(params.T | int) %}
	EXCLUDE_OBJECT_DEFINE NAME={i}
	{% endfor %}
	{% endif %}
	
	{% if 'C' in params %}
	EXCLUDE_OBJECT CURRENT=1
	{% endif %}
	
	{% if 'P' in params %}
	EXCLUDE_OBJECT NAME={params.P}
	{% endif %}
	
	{% if 'S' in params %}
	{% if params.S == '-1' %}
	{% if printer.exclude_object.current_object %}
	EXCLUDE_OBJECT_END NAME={printer.exclude_object.current_object}
	{% endif %}
	{% else %}
	EXCLUDE_OBJECT_START NAME={params.S}
	{% endif %}
	{% endif %}
	
	{% if 'U' in params %}
	EXCLUDE_OBJECT RESET=1 NAME={params.U}
	{% endif %}

[gcode_macro M190]
rename_existing = M190.1
gcode = 
	{% if printer["gcode_macro status_heating"] != null %}
	status_heating
	{% endif %}
	M190.1 { rawparams }
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro _CHOME]
gcode = 
	{% if printer["gcode_macro status_homing"] != null %}
	status_homing
	{% endif %}
	{% if printer.toolhead.homed_axes != "xyz" %}
	G28
	{% endif %}
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro M109]
rename_existing = M109.1
gcode = 
	{% if printer["gcode_macro status_heating"] != null %}
	status_heating
	{% endif %}
	M109.1 { rawparams }
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro _MOVE_AWAY]
gcode = 
	{% set th = printer.toolhead %}
	{% set x_safe = th.position.x + 20 * (1 if th.axis_maximum.x - th.position.x > 20 else -1) %}
	{% set y_safe = th.position.y + 20 * (1 if th.axis_maximum.y - th.position.y > 20 else -1) %}
	{% set z_safe = [th.position.z + 2, th.axis_maximum.z]|min %}
	
	G90
	G0 X{x_safe} Y{y_safe} Z{z_safe} F20000

[gcode_macro PARK_CENTER_REAR]
gcode = 
	{% if printer["gcode_macro status_busy"] != null %}
	status_busy
	{% endif %}
	{% set th = printer.toolhead %}
	{% set x_safe = th.position.x + 20 * (1 if th.axis_maximum.x - th.position.x > 20 else -1) %}
	{% set y_safe = th.position.y + 20 * (1 if th.axis_maximum.y - th.position.y > 20 else -1) %}
	
	G0 X{th.axis_maximum.x//2} Y{th.axis_maximum.y - 2} F3600
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro START_PRINT]
variable_retract = 15
gcode = 
	{% set chamber_temp = params.CHAMBER_TEMP|default(0)|float %}
	{% set extruder_temp = params.EXTRUDER_TEMP|default(210)|float %}
	{% set bed_temp = params.BED_TEMP|default(60)|float %}
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	CLEAR_PAUSE
	G28
	Smart_Park
	M220 S100
	M221 S100
	SET_HEATER_TEMPERATURE HEATER=chamber_heater TARGET={chamber_temp}
	SET_HEATER_TEMPERATURE HEATER=heater_bed TARGET={bed_temp}
	TEMPERATURE_WAIT SENSOR=heater_bed MINIMUM={bed_temp * 0.75}
	SET_HEATER_TEMPERATURE HEATER=extruder TARGET={extruder_temp}
	G90
	M82
	TEMPERATURE_WAIT SENSOR=heater_bed MINIMUM={bed_temp}
	TEMPERATURE_WAIT SENSOR=extruder MINIMUM={extruder_temp}
	
	G1 E-15 F3600
	
	G28
	BED_MESH_CALIBRATE
	PRIME_LINE

[gcode_macro pid_soplo]
gcode = 
	PID_CALIBRATE HEATER=extruder TARGET=250

[gcode_macro pid_bed]
gcode = 
	PID_CALIBRATE HEATER=heater_bed TARGET=105

[gcode_macro BED]
gcode = 
	PROBE_CALIBRATE

[gcode_macro END_PRINT]
gcode = 
	
	{% set max_x = printer.configfile.config["stepper_x"]["position_max"]|float %}
	{% set max_y = printer.configfile.config["stepper_y"]["position_max"]|float %}
	{% set max_z = printer.configfile.config["stepper_z"]["position_max"]|float %}
	
	
	{% if printer.toolhead.position.x < (max_x - 20) %}
	{% set x_safe = 20.0 %}
	{% else %}
	{% set x_safe = -20.0 %}
	{% endif %}
	
	{% if printer.toolhead.position.y < (max_y - 20) %}
	{% set y_safe = 20.0 %}
	{% else %}
	{% set y_safe = -20.0 %}
	{% endif %}
	
	{% if printer.toolhead.position.z < (max_z - 2) %}
	{% set z_safe = 2.0 %}
	{% else %}
	{% set z_safe = max_z - printer.toolhead.position.z %}
	{% endif %}
	
	
	M400
	G92 E0
	G1 E-15 F3600
	G91
	G0 Z{z_safe} F3600
	G0 X{x_safe} Y{y_safe} F20000
	
	
	M104 S0
	M104 S0
	M140 S0
	M106 S0
	G90
	G0 X{max_x / 2} Y{max_y} F3600
	
	SONG_CRAB_RAVE
	
	
	
	M117 Finished!
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=30

[gcode_macro M300]
gcode = 
	
	{% set S = params.S|default(1000)|int %}
	
	{% set P = params.P|default(100)|int %}
	
	
	{% set V = params.V|default(99)|int %}
	SET_PIN PIN=beeper VALUE={0.1 * (V / 100) if S > 0 else 1} CYCLE_TIME={ 1.0 / S if S > 0 else 1 }
	G4 P{P}
	SET_PIN PIN=beeper VALUE=0 CYCLE_TIME={ 0.001 }
description = 
	"Plays a beep sound.
	@param {int} [S=1000] - Frequency in Hz
	@param {int} [P=100] - Duration in ms
	@param {int} [V=99] - Volume in percent"

[gcode_macro PRIME_LINE]
gcode = 
	{% set feedrate = params.F|default(10)|float * 60 %}
	{% set length = 100.0 %}
	{% set width = printer.configfile.settings.extruder.nozzle_diameter|float %}
	{% set height = ( (width / 0.04)|int - (width / 0.04 / 4)|int )|float * 0.04 %}
	
	{% set extrude = length * width * height * 1.5 %}
	SAVE_GCODE_STATE NAME=PRIME_LINE_STATE
	SET_IDLE_TIMEOUT TIMEOUT=7200
	{% if 'Y' in params %}
	{% set x_start = 1.0 %}
	{% set y_start = (printer.toolhead.axis_maximum.y|float - 100) / 2 %}
	G0 X{x_start} Y{y_start} F5000
	G0 Z{height} F1500
	G91
	
	G1 E8 F300
	
	
	G1 Y100 E{extrude} F{feedrate}
	G0 X{width} F5000
	G1 Y-100 E{extrude} F{feedrate}
	{% else %}
	{% set x_start = (printer.toolhead.axis_maximum.x|float - 100) / 2 %}
	{% set y_start = 1.0 %}
	G0 X{x_start} Y{y_start} F5000
	G0 Z{height} F1500
	G91
	
	G1 E8 F300
	
	
	G1 X100 E{extrude} F{feedrate}
	G0 Y{width} F5000
	G1 X-100 E{extrude} F{feedrate}
	{% endif %}
	RESTORE_GCODE_STATE NAME=PRIME_LINE_STATE

[gcode_macro VINT]
gcode = 
	SCREWS_TILT_CALCULATE

[gcode_macro LOW_TEMP_CHECK]
gcode = 
	{% set extruder_temp = params.T|default(240)|float %}
	{% if printer.extruder.target > extruder_temp %}
	{% set extruder_temp = printer.extruder.target %}
	{% endif %}
	{% if printer.extruder.temperature < extruder_temp %}
	M118 Heating to {extruder_temp}
	SET_HEATER_TEMPERATURE HEATER=extruder TARGET={extruder_temp}
	TEMPERATURE_WAIT SENSOR=extruder MINIMUM={extruder_temp}
	{% endif %}

[gcode_macro M76]
gcode = 
	PAUSE

[gcode_macro M601]
gcode = 
	PAUSE

[gcode_macro G27]
gcode = 
	PARK

[gcode_macro M125]
gcode = 
	PARK

[gcode_macro M600]
gcode = 
	PAUSE

[gcode_macro M701]
gcode = 
	FILAMENT_LOAD

[gcode_macro M702]
gcode = 
	FILAMENT_UNLOAD

[gcode_macro M500]
gcode = 
	SAVE_CONFIG

[gcode_macro PARK]
gcode = 
	{% set x_park = params.X|default(0)|float %}
	{% set y_park = params.Y|default(0)|float %}
	{% set z_park = params.Z|default(10)|float + printer.toolhead.position.z|float %}
	{% set x_max = printer.toolhead.axis_maximum.x|float %}
	{% set y_max = printer.toolhead.axis_maximum.y|float %}
	{% set z_max = printer.toolhead.axis_maximum.z|float %}
	{% if x_park > x_max %}
	{% set x_park = x_max %}
	{% endif %}
	{% if y_park > y_max %}
	{% set y_park = y_max %}
	{% endif %}
	{% if z_park > z_max %}
	{% set z_park = z_max %}
	{% endif %}
	SAVE_GCODE_STATE NAME=PARK_STATE
	G90
	G1 Z{z_park} F1500
	G1 X{x_park} Y{y_park} F5000
	RESTORE_GCODE_STATE name=PARK_STATE

[gcode_macro START_DRYER]
description = Start the heated bed filament dryer.
gcode = 
	{% set ChamberTemperature = params.CHAMBER | default(65.0) | float %}
	{% set BedTemperature = params.TEMPERATURE | default(0.0) | float %}
	{% set DryTime = params.TIME | default(14400) | int %}
	M140 S{BedTemperature}
	M141 S{ChamberTemperature}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=time_remaining VALUE={DryTime}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=bed_temperature VALUE={BedTemperature}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=chamber_temperature VALUE={ChamberTemperature}
	UPDATE_DELAYED_GCODE ID=DRYER_TIMER DURATION=1

[gcode_macro STOP_DRYER]
gcode = 
	M140 S0
	M141 S0
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=time_remaining VALUE=0
	UPDATE_DELAYED_GCODE ID=DRYER_TIMER DURATION=0
	M117 Drying Stopped

[gcode_macro DRYER_STATUS]
variable_time_remaining = 0
variable_bed_temperature = 0
variable_chamber_temperature = 0
gcode = 
	{% if time_remaining > 0 %}
	M140 S{bed_temperature}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=time_remaining VALUE={time_remaining - 1}
	M117 Drying {time_remaining}
	{% else %}
	STOP_DRYER
	{% endif %}

[delayed_gcode DRYER_TIMER]
gcode = 
	UPDATE_DELAYED_GCODE ID=DRYER_TIMER DURATION=1
	DRYER_STATUS

[gcode_macro DRY_tpu]
gcode = 
	START_DRYER TEMPERATURE=0 CHAMBER=50 TIME=18000

[gcode_macro DRY_PETG]
gcode = 
	START_DRYER TEMPERATURE=0  CHAMBER=65 TIME=18000

[gcode_macro DRY_ABS]
gcode = 
	{% set S = params.S|default(0.0)|float %}
	SET_PIN PIN=Laser VALUE={S / 255.0}

[gcode_macro M4]
gcode = 
	{% set S = params.S|default(0.0)|float %}
	SET_PIN PIN=Laser VALUE={S / 255.0}

[gcode_macro M5]
gcode = 
	SET_PIN PIN=Laser VALUE=0

[menu __main __control __toolonoff]
type = input
enable = {'pwm_tool Laser' in printer}
name = Fan: {'ON ' if menu.input else 'OFF'}
input = {printer['pwm_tool Laser'].value}
input_min = 0
input_max = 1
input_step = 1
gcode = 
	M3 S{255 if menu.input else 0}

[menu __main __control __toolspeed]
type = input
enable = {'pwm_tool Laser' in printer}
name = Laser speed: {'%3d' % (menu.input*100)}%
input = {printer['pwm_tool Laser'].value}
input_min = 0
input_max = 1
input_step = 0.01
gcode = 
	M3 S{'%d' % (menu.input*255)}

[gcode_macro NOTE]
description = 
	"Plays a specified note for a specified duration
	@param {string} [N=C5] - Note to play
	@param {int} [D=500] - Duration of note. There are currently some Klipper limitations to how short a note can be.
	@param {int} [V=99] - Volume in percent
	@param {bool} [S=true] - Whether or not to stop the note after duration"
gcode = 
	{% set notes = {
	'C0': 16.35,   'CS0': 17.32,   'D0': 18.35,   'DS0': 19.45,   'E0': 20.60,   'F0': 21.83,   'FS0': 23.12,   'G0': 24.50,   'GS0': 25.96,   'A0': 27.50,   'AS0': 29.14,   'B0': 30.87,
	'C1': 32.70,   'CS1': 34.65,   'D1': 36.71,   'DS1': 38.89,   'E1': 41.20,   'F1': 43.65,   'FS1': 46.25,   'G1': 49.00,   'GS1': 51.91,   'A1': 55.00,   'AS1': 58.27,   'B1': 61.74,
	'C2': 65.41,   'CS2': 69.30,   'D2': 73.42,   'DS2': 77.78,   'E2': 82.41,   'F2': 87.31,   'FS2': 92.50,   'G2': 98.00,   'GS2': 103.83,  'A2': 110.00,  'AS2': 116.54,  'B2': 123.47,
	'C3': 130.81,  'CS3': 138.59,  'D3': 146.83,  'DS3': 155.56,  'E3': 164.81,  'F3': 174.61,  'FS3': 185.00,  'G3': 196.00,  'GS3': 207.65,  'A3': 220.00,  'AS3': 233.08,  'B3': 246.94,
	'C4': 261.63,  'CS4': 277.18,  'D4': 293.66,  'DS4': 311.13,  'E4': 329.63,  'F4': 349.23,  'FS4': 369.99,  'G4': 392.00,  'GS4': 415.30,  'A4': 440.00,  'AS4': 466.16,  'B4': 493.88,
	'C5': 523.25,  'CS5': 554.37,  'D5': 587.33,  'DS5': 622.25,  'E5': 659.26,  'F5': 698.46,  'FS5': 739.99,  'G5': 783.99,  'GS5': 830.61,  'A5': 880.00,  'AS5': 932.33,  'B5': 987.77,
	'C6': 1046.50, 'CS6': 1108.73, 'D6': 1174.66, 'DS6': 1244.51, 'E6': 1318.51, 'F6': 1396.91, 'FS6': 1479.98, 'G6': 1567.98, 'GS6': 1661.22, 'A6': 1760.00, 'AS6': 1864.66, 'B6': 1975.53,
	'C7': 2093.00, 'CS7': 2217.46, 'D7': 2349.32, 'DS7': 2489.02, 'E7': 2637.02, 'F7': 2793.83, 'FS7': 2959.96, 'G7': 3135.96, 'GS7': 3322.44, 'A7': 3520.00, 'AS7': 3729.31, 'B7': 3951.07,
	'C8': 4186.01, 'CS8': 4434.92, 'D8': 4698.64, 'DS8': 4978.03, 'E8': 5274.04, 'F8': 5587.65, 'FS8': 5919.91, 'G8': 6271.93, 'GS8': 6644.88, 'A8': 7040.00, 'AS8': 7458.62, 'B8': 7902.13,
	} %}
	
	{% set note = params.N|default('C5')|string %}
	
	{% set dur = params.D|default(500)|int %}
	
	
	{% set volume = params.V|default(99)|int %}
	
	{% set stop = params.S|default('true')|string %}
	
	{% set freq = notes[note] %}
	
	SET_PIN PIN=beeper VALUE={0.1 * (volume / 100) if volume > 0 else 1} CYCLE_TIME={ 1.0 / freq }
	G4 P{dur}
	{% if stop|lower == 'true' %}
	SET_PIN PIN=beeper VALUE=0 CYCLE_TIME={ 0.001 }
	{% endif %}

[gcode_macro TONE_GEN]
description = "Used for the tone generator menu"
variable_tone_freq = 0.001093
gcode = 
	M117 {printer["gcode_macro TONE_GEN"].tone_freq}nothz

[gcode_macro SONG_STAR_WARS_MAIN_THEME]
description = "Plays the Star Wars main theme"
gcode = 
	NOTE N=D4 D=133
	NOTE N=D4 D=133
	NOTE N=D4 D=133
	NOTE N=G4 D=1000
	NOTE N=D5 D=1000
	
	NOTE N=C5 D=133
	NOTE N=B4 D=133
	NOTE N=A4 D=133
	NOTE N=G5 D=1000
	NOTE N=D5 D=500
	
	NOTE N=C5 D=133
	NOTE N=B4 D=133
	NOTE N=A4 D=133
	NOTE N=G5 D=1000
	NOTE N=D5 D=500
	
	NOTE N=C5 D=133
	NOTE N=B4 D=133
	NOTE N=C5 D=133
	NOTE N=A4 D=1000

[gcode_macro SONG_CRAB_RAVE]
description = "Plays Crab Rave"
gcode = 
	NOTE N=D6 D=150 V=30 S=1
	NOTE N=AS6 D=150 V=30 S=1
	NOTE N=G6 D=150 V=30 S=1
	NOTE N=G6 D=150 V=30 S=0
	NOTE N=D6 D=150 V=30 S=1
	NOTE N=D6 D=150 V=30 S=0
	NOTE N=A6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=0
	NOTE N=D6 D=150 V=30 S=1
	NOTE N=D6 D=150 V=30 S=0
	NOTE N=A6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=0
	NOTE N=C6 D=150 V=30 S=1
	NOTE N=C6 D=150 V=30 S=1
	NOTE N=E6 D=150 V=30 S=1
	NOTE N=E6 D=150 V=30 S=0
	NOTE N=F6 D=150 V=30 S=1
	SET_PIN PIN=beeper VALUE=0

[gcode_macro one]
description = "one"
gcode = 
	NOTE N=C6 D=600 V=30 S=1
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=G5 D=400 V=30 S=1
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=E6 D=400 V=30 S=1
	G4 P150
	NOTE N=G6 D=180 V=30 S=0
	NOTE N=F6 D=180 V=30 S=0
	NOTE N=E6 D=180 V=30 S=0
	NOTE N=D6 D=180 V=30 S=1
	NOTE N=C6 D=600 V=30 S=1
	
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=G5 D=400 V=30 S=1
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=C6 D=600 V=30 S=1
	SET_PIN PIN=beeper VALUE=0

[gcode_macro SONG_BOOMER]
description = "BOOMER"
gcode = 
	M300 P207 S659
	M300 P207 S784
	M300 P207 S494
	M300 P207 S494
	M300 P207 S392
	M300 P207 S494
	M300 P207 S494
	M300 P207 S330
	M300 P207 S784
	M300 P207 S659
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S988
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S659
	M300 P207 S784
	M300 P207 S494
	M300 P207 S494
	M300 P207 S392
	M300 P207 S494
	M300 P207 S494
	M300 P207 S330
	M300 P207 S784
	M300 P207 S659
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S988
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S659
	M300 P207 S784
	M300 P207 S494
	M300 P207 S494
	M300 P207 S392
	M300 P207 S494
	M300 P207 S494
	M300 P207 S330
	M300 P207 S784
	M300 P207 S659
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S988
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330

[gcode_macro GET_TIMELAPSE_SETUP]
description = Print the Timelapse setup
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% set output_txt = ["Timelapse Setup:"] %}
	{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}
	{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}
	{% if tl.park.enable %}
	{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}
	{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}
	{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}
	{% endif %}
	{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}
	{% if not tl.extruder.fw_retract %}
	{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}
	{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}
	{% endif %}
	{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}
	{action_respond_info(output_txt|join("\n"))}

[gcode_macro _SET_TIMELAPSE_SETUP]
description = Set user parameters for timelapse
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	
	{% set min = printer.toolhead.axis_minimum %}
	{% set max = printer.toolhead.axis_maximum %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	{% set park = {'min'   : {'x': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),
	'y': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},
	'max'   : {'x': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),
	'y': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},
	'center': {'x': (max.x-(max.x-min.x)/2)|round(3),
	'y': (max.y-(max.y-min.y)/2)|round(3)}} %}
	
	{% if params.ENABLE %}
	{% if params.ENABLE|lower is in ['true', 'false'] %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == 'true' else False}
	{% else %}
	{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.VERBOSE %}
	{% if params.VERBOSE|lower is in ['true', 'false'] %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == 'true' else False}
	{% else %}
	{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_X %}
	{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}
	{% set _dummy = tl.park.custom.update({'x':params.CUSTOM_POS_X|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_Y %}
	{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}
	{% set _dummy = tl.park.custom.update({'y':params.CUSTOM_POS_Y|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_DZ %}
	{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}
	{% set _dummy = tl.park.custom.update({'dz':params.CUSTOM_POS_DZ|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}
	{% endif %}
	{% endif %}
	{% if params.PARK_ENABLE %}
	{% if params.PARK_ENABLE|lower is in ['true', 'false'] %}
	{% set _dummy = tl.park.update({'enable':True if params.PARK_ENABLE|lower == 'true' else False}) %}
	{% else %}
	{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.PARK_POS %}
	{% if params.PARK_POS|lower is in ['center','front_left','front_right','back_left','back_right','custom','x_only','y_only'] %}
	{% set dic = {'center'      : {'x': park.center.x   , 'y': park.center.y   , 'dz': 1                },
	'front_left'  : {'x': park.min.x      , 'y': park.min.y      , 'dz': 0                },
	'front_right' : {'x': park.max.x      , 'y': park.min.y      , 'dz': 0                },
	'back_left'   : {'x': park.min.x      , 'y': park.max.y      , 'dz': 0                },
	'back_right'  : {'x': park.max.x      , 'y': park.max.y      , 'dz': 0                },
	'custom'      : {'x': tl.park.custom.x, 'y': tl.park.custom.y, 'dz': tl.park.custom.dz},
	'x_only'      : {'x': tl.park.custom.x, 'y': 'none'          , 'dz': tl.park.custom.dz},
	'y_only'      : {'x': 'none'          , 'y': tl.park.custom.y, 'dz': tl.park.custom.dz}} %}
	{% set _dummy = tl.park.update({'pos':params.PARK_POS|lower}) %}
	{% set _dummy = tl.park.update({'coord':dic[tl.park.pos]}) %}
	{% else %}
	{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"
	% params.PARK_POS|upper)}
	{% endif %}
	{% endif %}
	{% if params.PARK_TIME %}
	{% if params.PARK_TIME|float >= 0.0 %}
	{% set _dummy = tl.park.update({'time':params.PARK_TIME|float|round(3)}) %}
	{% else %}
	{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"
	{% if params.TRAVEL_SPEED %}
	{% if params.TRAVEL_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'travel':params.TRAVEL_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}
	{% endif %}
	{% endif %}
	{% if params.RETRACT_SPEED %}
	{% if params.RETRACT_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'retract':params.RETRACT_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}
	{% endif %}
	{% endif %}
	{% if params.EXTRUDE_SPEED %}
	{% if params.EXTRUDE_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'extrude':params.EXTRUDE_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"
	{% if params.EXTRUDE_DISTANCE %}
	{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}
	{% set _dummy = tl.extruder.update({'extrude':params.EXTRUDE_DISTANCE|float|round(3)}) %}
	{% else %}
	{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}
	{% endif %}
	{% endif %}
	{% if params.RETRACT_DISTANCE %}
	{% if params.RETRACT_DISTANCE|float >= 0.0 %}
	{% set _dummy = tl.extruder.update({'retract':params.RETRACT_DISTANCE|float|round(3)}) %}
	{% else %}
	{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}
	{% endif %}
	{% endif %}
	{% if params.FW_RETRACT %}
	{% if params.FW_RETRACT|lower is in ['true', 'false'] %}
	{% if 'firmware_retraction' in printer.configfile.settings %}
	{% set _dummy = tl.extruder.update({'fw_retract': True if params.FW_RETRACT|lower == 'true' else False}) %}
	{% else %}
	{% set _dummy = tl.extruder.update({'fw_retract':False}) %}
	{% if params.FW_RETRACT|capitalize == 'True' %}
	{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}
	{% endif %}
	{% endif %}
	{% else %}
	{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"
	{% if printer.configfile.settings['gcode_macro pause'] is defined %}
	{% set _dummy = tl.macro.update({'pause': printer.configfile.settings['gcode_macro pause'].rename_existing}) %}
	{% endif %}
	{% if printer.configfile.settings['gcode_macro resume'] is defined %}
	{% set _dummy = tl.macro.update({'resume': printer.configfile.settings['gcode_macro resume'].rename_existing}) %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"

[gcode_macro TIMELAPSE_TAKE_FRAME]
description = Take Timelapse shoot
variable_enable = False
variable_takingframe = False
variable_park = {'enable': False,
	'pos'   : 'center',
	'time'  : 0.1,
	'custom': {'x': 0, 'y': 0, 'dz': 0},
	'coord' : {'x': 0, 'y': 0, 'dz': 0}}
variable_extruder = {'fw_retract': False,
	'retract': 1.0,
	'extrude': 1.0}
variable_speed = {'travel': 100,
	'retract': 15,
	'extrude': 15}
variable_verbose = True
variable_restore = {'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}
variable_macro = {'pause': 'PAUSE', 'resume': 'RESUME'}
variable_is_paused = False
gcode = 
	{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower =='true' else False %}
	{% if enable %}
	{% if (hyperlapse and printer['gcode_macro HYPERLAPSE'].run) or
	(not hyperlapse and not printer['gcode_macro HYPERLAPSE'].run) %}
	{% if park.enable %}
	{% set pos = {'x': 'X' + park.coord.x|string if park.pos != 'y_only' else '',
	'y': 'Y' + park.coord.y|string if park.pos != 'x_only' else '',
	'z': 'Z'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}
	{% set restore = {'absolute': {'coordinates': printer.gcode_move.absolute_coordinates,
	'extrude'    : printer.gcode_move.absolute_extrude},
	'speed'   : printer.gcode_move.speed,
	'e'       : printer.gcode_move.gcode_position.e,
	'factor'  : {'speed'  : printer.gcode_move.speed_factor,
	'extrude': printer.gcode_move.extrude_factor}} %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"
	{% if not printer[printer.toolhead.extruder].can_extrude %}
	{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}
	{% else %}
	{% if extruder.fw_retract %}
	G10
	{% else %}
	M83
	G0 E-{extruder.retract} F{speed.retract * 60}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True
	{macro.pause}
	SET_GCODE_OFFSET X=0 Y=0
	G90
	{% if "xyz" not in printer.toolhead.homed_axes %}
	{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}
	{% else %}
	G0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5
	M400
	{% endif %}
	_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}
	{% endif %}
	{% else %}
	{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}
	{% endif %}

[gcode_macro _TIMELAPSE_NEW_FRAME]
description = action call for timelapse shoot. must be a seperate macro
gcode = 
	{action_call_remote_method("timelapse_newframe",
	macropark=printer['gcode_macro TIMELAPSE_TAKE_FRAME'].park,
	hyperlapse=params.HYPERLAPSE)}

[delayed_gcode _WAIT_TIMELAPSE_TAKE_FRAME]
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% set factor = {'speed': printer.gcode_move.speed_factor, 'extrude': printer.gcode_move.extrude_factor} %}
	{% if tl.takingframe %}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5
	{% else %}
	{tl.macro.resume} VELOCITY={tl.speed.travel}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False
	{% if not printer[printer.toolhead.extruder].can_extrude %}
	{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}
	{% else %}
	{% if tl.extruder.fw_retract %}
	G11
	{% else %}
	G0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}
	G0 F{tl.restore.speed}
	{% if tl.restore.absolute.extrude %}
	M82
	G92 E{tl.restore.e}
	{% endif %}
	{% endif %}
	{% endif %}
	{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}
	{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}
	{% if not tl.restore.absolute.coordinates %} G91 {% endif %}
	{% endif %}

[gcode_macro HYPERLAPSE]
description = Start/Stop a hyperlapse recording
variable_cycle = 0
variable_run = False
gcode = 
	{% set cycle = params.CYCLE|default(30)|int %}
	{% if params.ACTION and params.ACTION|lower == 'start' %}
	{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}
	TIMELAPSE_TAKE_FRAME HYPERLAPSE=True
	{% elif params.ACTION and params.ACTION|lower == 'stop' %}
	{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0
	{% else %}
	{action_raise_error("Hyperlapse: No valid input parameter
	Use:
	- HYPERLAPSE ACTION=START [CYCLE=time]
	- HYPERLAPSE ACTION=STOP")}
	{% endif %}

[delayed_gcode _HYPERLAPSE_LOOP]
gcode = 
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}
	TIMELAPSE_TAKE_FRAME HYPERLAPSE=True

[gcode_macro TIMELAPSE_RENDER]
description = Render Timelapse video and wait for the result
variable_render = False
variable_run_identifier = 0
gcode = 
	{action_respond_info("Timelapse: Rendering started")}
	{action_call_remote_method("timelapse_render", byrendermacro="True")}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True
	{printer.configfile.settings['gcode_macro pause'].rename_existing}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5

[delayed_gcode _WAIT_TIMELAPSE_RENDER]
gcode = 
	{% set ri = printer['gcode_macro TIMELAPSE_RENDER'].run_identifier % 4 %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}
	{% if printer['gcode_macro TIMELAPSE_RENDER'].render %}
	M117 Rendering {['-','\\','|','/'][ri]}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5
	{% else %}
	{action_respond_info("Timelapse: Rendering finished")}
	M117
	{printer.configfile.settings['gcode_macro resume'].rename_existing}
	{% endif %}

[gcode_macro TEST_STREAM_DELAY]
description = Helper macro to find stream and park delay
gcode = 
	{% set min = printer.toolhead.axis_minimum %}
	{% set max = printer.toolhead.axis_maximum %}
	{% set act = printer.toolhead.position %}
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% if act.z > 5.0 %}
	G0 X{min.x + 5.0} F{tl.speed.travel|int * 60}
	G0 X{(max.x-min.x)/2}
	G4 P{tl.park.time|float * 1000}
	_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE
	G0 X{max.x - 5.0}
	{% else %}
	{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}
	{% endif %}

[exclude_object]

[gcode_macro БЭКАП_на_GIT-HUB ]
gcode = 
	{% set message = params.MESSAGE|default() %}
	{% if message %}
	RUN_SHELL_COMMAND CMD=update_git_script_message PARAMS="'{params.MESSAGE}'"
	{% else %}
	RUN_SHELL_COMMAND CMD=update_git_script
	{% endif %}

[gcode_shell_command update_git_script]
command = bash -c "bash $HOME/klipper-backup/script.sh"
timeout = 90.0
verbose = True

[gcode_shell_command update_git_script_message]
command = bash -c "bash $HOME/klipper-backup/script.sh -c \"$0\""
timeout = 90.0
verbose = True

[mcu]
serial = /dev/ttyS3
restart_method = command

[output_pin Power]
pin = PC12
value = 1
shutdown_value = 1

[temperature_sensor orange_pi]
sensor_type = temperature_host
min_temp = 0
max_temp = 100

[heater_generic chamber_heater]
heater_pin = !PA7
sensor_type = ATC Semitec 104GT-2
sensor_pin = PA5
control = watermark
max_power = 1
min_temp = 15
max_temp = 85

[verify_heater chamber_heater]
max_error = 9999
check_gain_time = 9999
hysteresis = 5
heating_gain = 2

[filament_motion_sensor motion_sensor]
detection_length = 50
extruder = extruder
switch_pin = !PC15
pause_on_runout = True
runout_gcode = 
	SONG_CRAB_RAVE

[bltouch]
sensor_pin = ^PC14
control_pin = PA1
x_offset = -40
y_offset = 0.000
z_offset = 1.70
pin_up_reports_not_triggered = False
probe_with_touch_mode = True

[heater_bed]
heater_pin = PC9
sensor_type = ATC Semitec 104GT-2
sensor_pin = PC3
control = pid
pid_kp = 72.553
pid_ki = 1.154
pid_kd = 1139.994
min_temp = 5
max_temp = 125

[heater_fan radiator]
pin = PC7
max_power = 1.0
kick_start_time = 0.600
heater = extruder
heater_temp = 50.0
shutdown_speed = 1

[fan]
pin = PC6

[input_shaper]
shaper_type_x = 2hump_ei
shaper_freq_x = 43.0
shaper_type_y = mzv
shaper_freq_y = 32.6

[printer]
kinematics = cartesian
max_velocity = 300
max_accel = 1900
max_z_velocity = 30
max_z_accel = 100
square_corner_velocity = 4

[bed_mesh]
speed = 150
horizontal_move_z = 9
mesh_min = 10, 20
mesh_max = 195, 210
probe_count = 5
mesh_pps = 2, 3
algorithm = bicubic
bicubic_tension = 0.2
move_check_distance = 9
split_delta_z = .025
fade_start = 1
fade_end = 10
fade_target = 0

[screws_tilt_adjust]
screw1 = 79, 27
screw1_name = Peredniy Leviy
screw2 = 235, 27
screw2_name = Peredniy Praviy
screw3 = 235,197
screw3_name = Zadniy Praviy
screw4 = 79,197
screw4_name = Zadniy Leviy
speed = 120
horizontal_move_z = 9

[safe_z_home]
home_xy_position = 157,115
speed = 50
z_hop = 9.0
z_hop_speed = 20.0

[stepper_x]
step_pin = PB13
dir_pin = !PB12
enable_pin = !PB14
microsteps = 16
rotation_distance = 40
endstop_pin = ^PC0
position_endstop = 0
position_max = 240
position_min = -2
homing_retract_dist = 5
homing_speed = 50
second_homing_speed = 10

[tmc2209 stepper_x]
uart_pin = PC11
tx_pin = PC10
uart_address = 0
run_current = 0.580
stealthchop_threshold = 999999

[stepper_y]
step_pin = PB10
dir_pin = !PB2
enable_pin = !PB11
microsteps = 16
rotation_distance = 40
endstop_pin = ^PC1
position_endstop = 0
homing_retract_dist = 5
homing_speed = 50
second_homing_speed = 10
position_max = 231
position_min = 0

[tmc2209 stepper_y]
uart_pin = PC11
tx_pin = PC10
uart_address = 2
run_current = 0.6
stealthchop_threshold = 999999

[stepper_z]
step_pin = PB0
dir_pin = PC5
enable_pin = !PB1
microsteps = 16
rotation_distance = 40
gear_ratio = 80:16
full_steps_per_rotation = 200
endstop_pin = probe:z_virtual_endstop
homing_retract_dist = 9
second_homing_speed = 10
position_min = -5
position_max = 245
homing_speed = 50

[tmc2209 stepper_z]
uart_pin = PC11
tx_pin = PC10
uart_address = 1
run_current = 0.580
stealthchop_threshold = 999999
interpolate = false

[extruder]
step_pin = PB3
dir_pin = PB4
enable_pin = !PD2
microsteps = 16
rotation_distance = 4.637
nozzle_diameter = 0.400
filament_diameter = 1.750
heater_pin = PC8
sensor_type = ATC Semitec 104GT-2
sensor_pin = PA0
min_temp = 5
max_temp = 270
max_extrude_only_velocity = 120
max_extrude_only_accel = 3000
pressure_advance = 0.031
full_steps_per_rotation = 200
control = pid
pid_kp = 29.662
pid_ki = 2.382
pid_kd = 92.322

[tmc2209 extruder]
uart_pin = PC11
tx_pin = PC10
uart_address = 3
run_current = 0.7
stealthchop_threshold = 999999

[static_digital_output usb_pullup_enable]
pins = !PA14

[board_pins]
aliases = 
	
	EXP1_1=PB5,  EXP1_3=PA9,   EXP1_5=PA10, EXP1_7=PB8,  EXP1_9=<GND>,
	EXP1_2=PA15, EXP1_4=<RST>, EXP1_6=PB9,  EXP1_8=PB15, EXP1_10=<5V>

[display]
lcd_type = st7920
cs_pin = EXP1_7
sclk_pin = EXP1_6
sid_pin = EXP1_8
encoder_pins = ^EXP1_5, ^EXP1_3
click_pin = ^!EXP1_2

[pwm_cycle_time beeper]
pin = EXP1_1
shutdown_value = 0
cycle_time = 0.001

[firmware_retraction]
retract_length = 1.0
retract_speed = 80
unretract_extra_length = 0
unretract_speed = 80

[pwm_tool Laser]
pin = PA6
cycle_time = 0.0001
shutdown_value = 0
maximum_mcu_duration = 5

[bed_mesh 70]
version = 1
points = 
	-0.045000, 0.027500, 0.015000
	-0.055000, -0.005000, -0.035000
	-0.007500, 0.040000, -0.002500
x_count = 3
y_count = 3
mesh_x_pps = 2
mesh_y_pps = 3
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 195.0
min_y = 20.0
max_y = 210.0

[bed_mesh default]
version = 1
points = 
	0.020000, 0.025000, 0.030000, -0.007500, -0.052500
	0.015000, 0.017500, 0.022500, -0.007500, -0.057500
	0.030000, 0.030000, 0.037500, 0.002500, -0.035000
	0.012500, 0.030000, 0.050000, 0.035000, -0.010000
	0.080000, 0.087500, 0.115000, 0.097500, 0.067500
x_count = 5
y_count = 5
mesh_x_pps = 2
mesh_y_pps = 3
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 195.0
min_y = 20.0
max_y = 210.0
=======================
Config error
Traceback (most recent call last):
  File "/home/klipper/klipper/klippy/klippy.py", line 130, in _connect
    self._read_config()
  File "/home/klipper/klipper/klippy/klippy.py", line 123, in _read_config
    self.load_object(config, section_config.get_name(), None)
  File "/home/klipper/klipper/klippy/klippy.py", line 112, in load_object
    self.objects[section] = init_func(config.getsection(section))
  File "/home/klipper/klipper/klippy/extras/gcode_macro.py", line 194, in load_config_prefix
    return GCodeMacro(config)
  File "/home/klipper/klipper/klippy/extras/gcode_macro.py", line 137, in __init__
    self.gcode.register_command(self.alias, self.cmd,
  File "/home/klipper/klipper/klippy/gcode.py", line 137, in register_command
    raise self.printer.config_error(
configparser.Error: Can't register 'БЭКАП_НА_GIT-HUB' as it is an invalid name
webhooks client 281473333689936: New connection
webhooks client 281473333689936: Client info {'program': 'Moonraker', 'version': 'v0.9.3-4-ga4604e3'}
webhooks client 281473333689936: Disconnected
Restarting printer
Start printer at Wed Dec 25 21:04:58 2024 (1735149898.6 2881.6)
===== Config file =====
[virtual_sdcard]
path = /home/klipper/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[pause_resume]

[display_status]

[respond]

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = BASE_CANCEL_PRINT
gcode = 
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	TURN_OFF_HEATERS
	M107
	G91
	G1 E-{E} F1500
	G90
	CLEAR_PAUSE
	SDCARD_RESET_FILE
	BASE_CANCEL_PRINT
	PARK

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = BASE_PAUSE
gcode = 
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	SAVE_GCODE_STATE NAME=PAUSE_STATE
	BASE_PAUSE
	G91
	G1 E-{E} F1500
	G90
	PARK

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = BASE_RESUME
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	G91
	G1 E{E} F1500
	G90
	RESTORE_GCODE_STATE NAME=PAUSE_STATE MOVE=1
	BASE_RESUME

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[gcode_macro _CLIENT_LINEAR_MOVE]
description = Linear move with save and restore of the gcode state
gcode = 
	{% set x_move = "X" ~ params.X if params.X is defined else "" %}
	{% set y_move = "Y" ~ params.Y if params.Y is defined else "" %}
	{% set z_move = "Z" ~ params.Z if params.Z is defined else "" %}
	{% set e_move = "E" ~ params.E if params.E is defined else "" %}
	{% set rate = "F" ~ params.F if params.F is defined else "" %}
	{% set ABSOLUTE = params.ABSOLUTE | default(0) | int != 0 %}
	{% set ABSOLUTE_E = params.ABSOLUTE_E | default(0) | int != 0 %}
	SAVE_GCODE_STATE NAME=_client_movement
	{% if x_move or y_move or z_move %}
	G9{ 0 if ABSOLUTE else 1 }
	{% endif %}
	{% if e_move %}
	M8{ 2 if ABSOLUTE_E else 3 }
	{% endif %}
	G1 { x_move } { y_move } { z_move } { e_move } { rate }
	RESTORE_GCODE_STATE NAME=_client_movement

[gcode_macro list_sensors]
gcode = 
	{ action_respond_info(printer.heaters.available_heaters | join(', ')) }
	{ action_respond_info(printer.heaters.available_sensors | join(', ')) }

[gcode_macro Power_OFF]
gcode = SET_PIN PIN=Power VALUE=0

[gcode_macro _POWER_OFF_PRINTER]
gcode = SET_PIN PIN=Power VALUE=0

[gcode_macro ACTIVATE_POWER_OFF]
gcode = 
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK_ACT DURATION=60

[gcode_macro DEACTIVATE_POWER_OFF]
gcode = 
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK_ACT DURATION=0

[delayed_gcode POWER_OFF_PRINTER_CHECK_ACT]
gcode = 
	{% if printer.idle_timeout.state == "Idle" or printer.idle_timeout.state == "Ready" %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=30
	{% else %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK_ACT DURATION=60
	{% endif %}

[delayed_gcode POWER_OFF_PRINTER_CHECK]
gcode = 
	{% if printer.idle_timeout.state == "Idle" or printer.idle_timeout.state == "Ready" %}
	{% if printer.extruder.temperature < 50.0 and printer.heater_bed.temperature < 50.0 %}
	{% if printer.extruder.target == 0.0 and printer.heater_bed.target == 0.0 %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=0
	_POWER_OFF_PRINTER
	{% else %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=2
	{% endif %}
	{% else %}
	{% if printer.idle_timeout.state == "Printing" %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=0
	{% else %}
	{% if printer.extruder.target == 0.0 and printer.heater_bed.target == 0.0 %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=2
	{% else %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=0
	{% endif %}
	{% endif %}
	{% endif %}
	{% endif %}

[gcode_macro M141]
gcode = SET_HEATER_TEMPERATURE HEATER=chamber_heater TARGET={params.S|default(0)}

[gcode_macro M80]
gcode = SET_PIN PIN=Power  VALUE=1

[gcode_macro M81]
gcode = 
	
	SET_PIN PIN=Power VALUE=0

[gcode_macro M486]
gcode = 
	
	
	
	
	
	
	
	
	
	
	
	{% if 'exclude_object' not in printer %}
	{action_raise_error("[exclude_object] is not enabled")}
	{% endif %}
	
	{% if 'T' in params %}
	EXCLUDE_OBJECT RESET=1
	
	{% for i in range(params.T | int) %}
	EXCLUDE_OBJECT_DEFINE NAME={i}
	{% endfor %}
	{% endif %}
	
	{% if 'C' in params %}
	EXCLUDE_OBJECT CURRENT=1
	{% endif %}
	
	{% if 'P' in params %}
	EXCLUDE_OBJECT NAME={params.P}
	{% endif %}
	
	{% if 'S' in params %}
	{% if params.S == '-1' %}
	{% if printer.exclude_object.current_object %}
	EXCLUDE_OBJECT_END NAME={printer.exclude_object.current_object}
	{% endif %}
	{% else %}
	EXCLUDE_OBJECT_START NAME={params.S}
	{% endif %}
	{% endif %}
	
	{% if 'U' in params %}
	EXCLUDE_OBJECT RESET=1 NAME={params.U}
	{% endif %}

[gcode_macro M190]
rename_existing = M190.1
gcode = 
	{% if printer["gcode_macro status_heating"] != null %}
	status_heating
	{% endif %}
	M190.1 { rawparams }
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro _CHOME]
gcode = 
	{% if printer["gcode_macro status_homing"] != null %}
	status_homing
	{% endif %}
	{% if printer.toolhead.homed_axes != "xyz" %}
	G28
	{% endif %}
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro M109]
rename_existing = M109.1
gcode = 
	{% if printer["gcode_macro status_heating"] != null %}
	status_heating
	{% endif %}
	M109.1 { rawparams }
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro _MOVE_AWAY]
gcode = 
	{% set th = printer.toolhead %}
	{% set x_safe = th.position.x + 20 * (1 if th.axis_maximum.x - th.position.x > 20 else -1) %}
	{% set y_safe = th.position.y + 20 * (1 if th.axis_maximum.y - th.position.y > 20 else -1) %}
	{% set z_safe = [th.position.z + 2, th.axis_maximum.z]|min %}
	
	G90
	G0 X{x_safe} Y{y_safe} Z{z_safe} F20000

[gcode_macro PARK_CENTER_REAR]
gcode = 
	{% if printer["gcode_macro status_busy"] != null %}
	status_busy
	{% endif %}
	{% set th = printer.toolhead %}
	{% set x_safe = th.position.x + 20 * (1 if th.axis_maximum.x - th.position.x > 20 else -1) %}
	{% set y_safe = th.position.y + 20 * (1 if th.axis_maximum.y - th.position.y > 20 else -1) %}
	
	G0 X{th.axis_maximum.x//2} Y{th.axis_maximum.y - 2} F3600
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro START_PRINT]
variable_retract = 15
gcode = 
	{% set chamber_temp = params.CHAMBER_TEMP|default(0)|float %}
	{% set extruder_temp = params.EXTRUDER_TEMP|default(210)|float %}
	{% set bed_temp = params.BED_TEMP|default(60)|float %}
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	CLEAR_PAUSE
	G28
	Smart_Park
	M220 S100
	M221 S100
	SET_HEATER_TEMPERATURE HEATER=chamber_heater TARGET={chamber_temp}
	SET_HEATER_TEMPERATURE HEATER=heater_bed TARGET={bed_temp}
	TEMPERATURE_WAIT SENSOR=heater_bed MINIMUM={bed_temp * 0.75}
	SET_HEATER_TEMPERATURE HEATER=extruder TARGET={extruder_temp}
	G90
	M82
	TEMPERATURE_WAIT SENSOR=heater_bed MINIMUM={bed_temp}
	TEMPERATURE_WAIT SENSOR=extruder MINIMUM={extruder_temp}
	
	G1 E-15 F3600
	
	G28
	BED_MESH_CALIBRATE
	PRIME_LINE

[gcode_macro pid_soplo]
gcode = 
	PID_CALIBRATE HEATER=extruder TARGET=250

[gcode_macro pid_bed]
gcode = 
	PID_CALIBRATE HEATER=heater_bed TARGET=105

[gcode_macro BED]
gcode = 
	PROBE_CALIBRATE

[gcode_macro END_PRINT]
gcode = 
	
	{% set max_x = printer.configfile.config["stepper_x"]["position_max"]|float %}
	{% set max_y = printer.configfile.config["stepper_y"]["position_max"]|float %}
	{% set max_z = printer.configfile.config["stepper_z"]["position_max"]|float %}
	
	
	{% if printer.toolhead.position.x < (max_x - 20) %}
	{% set x_safe = 20.0 %}
	{% else %}
	{% set x_safe = -20.0 %}
	{% endif %}
	
	{% if printer.toolhead.position.y < (max_y - 20) %}
	{% set y_safe = 20.0 %}
	{% else %}
	{% set y_safe = -20.0 %}
	{% endif %}
	
	{% if printer.toolhead.position.z < (max_z - 2) %}
	{% set z_safe = 2.0 %}
	{% else %}
	{% set z_safe = max_z - printer.toolhead.position.z %}
	{% endif %}
	
	
	M400
	G92 E0
	G1 E-15 F3600
	G91
	G0 Z{z_safe} F3600
	G0 X{x_safe} Y{y_safe} F20000
	
	
	M104 S0
	M104 S0
	M140 S0
	M106 S0
	G90
	G0 X{max_x / 2} Y{max_y} F3600
	
	SONG_CRAB_RAVE
	
	
	
	M117 Finished!
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=30

[gcode_macro M300]
gcode = 
	
	{% set S = params.S|default(1000)|int %}
	
	{% set P = params.P|default(100)|int %}
	
	
	{% set V = params.V|default(99)|int %}
	SET_PIN PIN=beeper VALUE={0.1 * (V / 100) if S > 0 else 1} CYCLE_TIME={ 1.0 / S if S > 0 else 1 }
	G4 P{P}
	SET_PIN PIN=beeper VALUE=0 CYCLE_TIME={ 0.001 }
description = 
	"Plays a beep sound.
	@param {int} [S=1000] - Frequency in Hz
	@param {int} [P=100] - Duration in ms
	@param {int} [V=99] - Volume in percent"

[gcode_macro PRIME_LINE]
gcode = 
	{% set feedrate = params.F|default(10)|float * 60 %}
	{% set length = 100.0 %}
	{% set width = printer.configfile.settings.extruder.nozzle_diameter|float %}
	{% set height = ( (width / 0.04)|int - (width / 0.04 / 4)|int )|float * 0.04 %}
	
	{% set extrude = length * width * height * 1.5 %}
	SAVE_GCODE_STATE NAME=PRIME_LINE_STATE
	SET_IDLE_TIMEOUT TIMEOUT=7200
	{% if 'Y' in params %}
	{% set x_start = 1.0 %}
	{% set y_start = (printer.toolhead.axis_maximum.y|float - 100) / 2 %}
	G0 X{x_start} Y{y_start} F5000
	G0 Z{height} F1500
	G91
	
	G1 E8 F300
	
	
	G1 Y100 E{extrude} F{feedrate}
	G0 X{width} F5000
	G1 Y-100 E{extrude} F{feedrate}
	{% else %}
	{% set x_start = (printer.toolhead.axis_maximum.x|float - 100) / 2 %}
	{% set y_start = 1.0 %}
	G0 X{x_start} Y{y_start} F5000
	G0 Z{height} F1500
	G91
	
	G1 E8 F300
	
	
	G1 X100 E{extrude} F{feedrate}
	G0 Y{width} F5000
	G1 X-100 E{extrude} F{feedrate}
	{% endif %}
	RESTORE_GCODE_STATE NAME=PRIME_LINE_STATE

[gcode_macro VINT]
gcode = 
	SCREWS_TILT_CALCULATE

[gcode_macro LOW_TEMP_CHECK]
gcode = 
	{% set extruder_temp = params.T|default(240)|float %}
	{% if printer.extruder.target > extruder_temp %}
	{% set extruder_temp = printer.extruder.target %}
	{% endif %}
	{% if printer.extruder.temperature < extruder_temp %}
	M118 Heating to {extruder_temp}
	SET_HEATER_TEMPERATURE HEATER=extruder TARGET={extruder_temp}
	TEMPERATURE_WAIT SENSOR=extruder MINIMUM={extruder_temp}
	{% endif %}

[gcode_macro M76]
gcode = 
	PAUSE

[gcode_macro M601]
gcode = 
	PAUSE

[gcode_macro G27]
gcode = 
	PARK

[gcode_macro M125]
gcode = 
	PARK

[gcode_macro M600]
gcode = 
	PAUSE

[gcode_macro M701]
gcode = 
	FILAMENT_LOAD

[gcode_macro M702]
gcode = 
	FILAMENT_UNLOAD

[gcode_macro M500]
gcode = 
	SAVE_CONFIG

[gcode_macro PARK]
gcode = 
	{% set x_park = params.X|default(0)|float %}
	{% set y_park = params.Y|default(0)|float %}
	{% set z_park = params.Z|default(10)|float + printer.toolhead.position.z|float %}
	{% set x_max = printer.toolhead.axis_maximum.x|float %}
	{% set y_max = printer.toolhead.axis_maximum.y|float %}
	{% set z_max = printer.toolhead.axis_maximum.z|float %}
	{% if x_park > x_max %}
	{% set x_park = x_max %}
	{% endif %}
	{% if y_park > y_max %}
	{% set y_park = y_max %}
	{% endif %}
	{% if z_park > z_max %}
	{% set z_park = z_max %}
	{% endif %}
	SAVE_GCODE_STATE NAME=PARK_STATE
	G90
	G1 Z{z_park} F1500
	G1 X{x_park} Y{y_park} F5000
	RESTORE_GCODE_STATE name=PARK_STATE

[gcode_macro START_DRYER]
description = Start the heated bed filament dryer.
gcode = 
	{% set ChamberTemperature = params.CHAMBER | default(65.0) | float %}
	{% set BedTemperature = params.TEMPERATURE | default(0.0) | float %}
	{% set DryTime = params.TIME | default(14400) | int %}
	M140 S{BedTemperature}
	M141 S{ChamberTemperature}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=time_remaining VALUE={DryTime}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=bed_temperature VALUE={BedTemperature}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=chamber_temperature VALUE={ChamberTemperature}
	UPDATE_DELAYED_GCODE ID=DRYER_TIMER DURATION=1

[gcode_macro STOP_DRYER]
gcode = 
	M140 S0
	M141 S0
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=time_remaining VALUE=0
	UPDATE_DELAYED_GCODE ID=DRYER_TIMER DURATION=0
	M117 Drying Stopped

[gcode_macro DRYER_STATUS]
variable_time_remaining = 0
variable_bed_temperature = 0
variable_chamber_temperature = 0
gcode = 
	{% if time_remaining > 0 %}
	M140 S{bed_temperature}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=time_remaining VALUE={time_remaining - 1}
	M117 Drying {time_remaining}
	{% else %}
	STOP_DRYER
	{% endif %}

[delayed_gcode DRYER_TIMER]
gcode = 
	UPDATE_DELAYED_GCODE ID=DRYER_TIMER DURATION=1
	DRYER_STATUS

[gcode_macro DRY_tpu]
gcode = 
	START_DRYER TEMPERATURE=0 CHAMBER=50 TIME=18000

[gcode_macro DRY_PETG]
gcode = 
	START_DRYER TEMPERATURE=0  CHAMBER=65 TIME=18000

[gcode_macro DRY_ABS]
gcode = 
	{% set S = params.S|default(0.0)|float %}
	SET_PIN PIN=Laser VALUE={S / 255.0}

[gcode_macro M4]
gcode = 
	{% set S = params.S|default(0.0)|float %}
	SET_PIN PIN=Laser VALUE={S / 255.0}

[gcode_macro M5]
gcode = 
	SET_PIN PIN=Laser VALUE=0

[menu __main __control __toolonoff]
type = input
enable = {'pwm_tool Laser' in printer}
name = Fan: {'ON ' if menu.input else 'OFF'}
input = {printer['pwm_tool Laser'].value}
input_min = 0
input_max = 1
input_step = 1
gcode = 
	M3 S{255 if menu.input else 0}

[menu __main __control __toolspeed]
type = input
enable = {'pwm_tool Laser' in printer}
name = Laser speed: {'%3d' % (menu.input*100)}%
input = {printer['pwm_tool Laser'].value}
input_min = 0
input_max = 1
input_step = 0.01
gcode = 
	M3 S{'%d' % (menu.input*255)}

[gcode_macro NOTE]
description = 
	"Plays a specified note for a specified duration
	@param {string} [N=C5] - Note to play
	@param {int} [D=500] - Duration of note. There are currently some Klipper limitations to how short a note can be.
	@param {int} [V=99] - Volume in percent
	@param {bool} [S=true] - Whether or not to stop the note after duration"
gcode = 
	{% set notes = {
	'C0': 16.35,   'CS0': 17.32,   'D0': 18.35,   'DS0': 19.45,   'E0': 20.60,   'F0': 21.83,   'FS0': 23.12,   'G0': 24.50,   'GS0': 25.96,   'A0': 27.50,   'AS0': 29.14,   'B0': 30.87,
	'C1': 32.70,   'CS1': 34.65,   'D1': 36.71,   'DS1': 38.89,   'E1': 41.20,   'F1': 43.65,   'FS1': 46.25,   'G1': 49.00,   'GS1': 51.91,   'A1': 55.00,   'AS1': 58.27,   'B1': 61.74,
	'C2': 65.41,   'CS2': 69.30,   'D2': 73.42,   'DS2': 77.78,   'E2': 82.41,   'F2': 87.31,   'FS2': 92.50,   'G2': 98.00,   'GS2': 103.83,  'A2': 110.00,  'AS2': 116.54,  'B2': 123.47,
	'C3': 130.81,  'CS3': 138.59,  'D3': 146.83,  'DS3': 155.56,  'E3': 164.81,  'F3': 174.61,  'FS3': 185.00,  'G3': 196.00,  'GS3': 207.65,  'A3': 220.00,  'AS3': 233.08,  'B3': 246.94,
	'C4': 261.63,  'CS4': 277.18,  'D4': 293.66,  'DS4': 311.13,  'E4': 329.63,  'F4': 349.23,  'FS4': 369.99,  'G4': 392.00,  'GS4': 415.30,  'A4': 440.00,  'AS4': 466.16,  'B4': 493.88,
	'C5': 523.25,  'CS5': 554.37,  'D5': 587.33,  'DS5': 622.25,  'E5': 659.26,  'F5': 698.46,  'FS5': 739.99,  'G5': 783.99,  'GS5': 830.61,  'A5': 880.00,  'AS5': 932.33,  'B5': 987.77,
	'C6': 1046.50, 'CS6': 1108.73, 'D6': 1174.66, 'DS6': 1244.51, 'E6': 1318.51, 'F6': 1396.91, 'FS6': 1479.98, 'G6': 1567.98, 'GS6': 1661.22, 'A6': 1760.00, 'AS6': 1864.66, 'B6': 1975.53,
	'C7': 2093.00, 'CS7': 2217.46, 'D7': 2349.32, 'DS7': 2489.02, 'E7': 2637.02, 'F7': 2793.83, 'FS7': 2959.96, 'G7': 3135.96, 'GS7': 3322.44, 'A7': 3520.00, 'AS7': 3729.31, 'B7': 3951.07,
	'C8': 4186.01, 'CS8': 4434.92, 'D8': 4698.64, 'DS8': 4978.03, 'E8': 5274.04, 'F8': 5587.65, 'FS8': 5919.91, 'G8': 6271.93, 'GS8': 6644.88, 'A8': 7040.00, 'AS8': 7458.62, 'B8': 7902.13,
	} %}
	
	{% set note = params.N|default('C5')|string %}
	
	{% set dur = params.D|default(500)|int %}
	
	
	{% set volume = params.V|default(99)|int %}
	
	{% set stop = params.S|default('true')|string %}
	
	{% set freq = notes[note] %}
	
	SET_PIN PIN=beeper VALUE={0.1 * (volume / 100) if volume > 0 else 1} CYCLE_TIME={ 1.0 / freq }
	G4 P{dur}
	{% if stop|lower == 'true' %}
	SET_PIN PIN=beeper VALUE=0 CYCLE_TIME={ 0.001 }
	{% endif %}

[gcode_macro TONE_GEN]
description = "Used for the tone generator menu"
variable_tone_freq = 0.001093
gcode = 
	M117 {printer["gcode_macro TONE_GEN"].tone_freq}nothz

[gcode_macro SONG_STAR_WARS_MAIN_THEME]
description = "Plays the Star Wars main theme"
gcode = 
	NOTE N=D4 D=133
	NOTE N=D4 D=133
	NOTE N=D4 D=133
	NOTE N=G4 D=1000
	NOTE N=D5 D=1000
	
	NOTE N=C5 D=133
	NOTE N=B4 D=133
	NOTE N=A4 D=133
	NOTE N=G5 D=1000
	NOTE N=D5 D=500
	
	NOTE N=C5 D=133
	NOTE N=B4 D=133
	NOTE N=A4 D=133
	NOTE N=G5 D=1000
	NOTE N=D5 D=500
	
	NOTE N=C5 D=133
	NOTE N=B4 D=133
	NOTE N=C5 D=133
	NOTE N=A4 D=1000

[gcode_macro SONG_CRAB_RAVE]
description = "Plays Crab Rave"
gcode = 
	NOTE N=D6 D=150 V=30 S=1
	NOTE N=AS6 D=150 V=30 S=1
	NOTE N=G6 D=150 V=30 S=1
	NOTE N=G6 D=150 V=30 S=0
	NOTE N=D6 D=150 V=30 S=1
	NOTE N=D6 D=150 V=30 S=0
	NOTE N=A6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=0
	NOTE N=D6 D=150 V=30 S=1
	NOTE N=D6 D=150 V=30 S=0
	NOTE N=A6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=0
	NOTE N=C6 D=150 V=30 S=1
	NOTE N=C6 D=150 V=30 S=1
	NOTE N=E6 D=150 V=30 S=1
	NOTE N=E6 D=150 V=30 S=0
	NOTE N=F6 D=150 V=30 S=1
	SET_PIN PIN=beeper VALUE=0

[gcode_macro one]
description = "one"
gcode = 
	NOTE N=C6 D=600 V=30 S=1
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=G5 D=400 V=30 S=1
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=E6 D=400 V=30 S=1
	G4 P150
	NOTE N=G6 D=180 V=30 S=0
	NOTE N=F6 D=180 V=30 S=0
	NOTE N=E6 D=180 V=30 S=0
	NOTE N=D6 D=180 V=30 S=1
	NOTE N=C6 D=600 V=30 S=1
	
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=G5 D=400 V=30 S=1
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=C6 D=600 V=30 S=1
	SET_PIN PIN=beeper VALUE=0

[gcode_macro SONG_BOOMER]
description = "BOOMER"
gcode = 
	M300 P207 S659
	M300 P207 S784
	M300 P207 S494
	M300 P207 S494
	M300 P207 S392
	M300 P207 S494
	M300 P207 S494
	M300 P207 S330
	M300 P207 S784
	M300 P207 S659
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S988
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S659
	M300 P207 S784
	M300 P207 S494
	M300 P207 S494
	M300 P207 S392
	M300 P207 S494
	M300 P207 S494
	M300 P207 S330
	M300 P207 S784
	M300 P207 S659
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S988
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S659
	M300 P207 S784
	M300 P207 S494
	M300 P207 S494
	M300 P207 S392
	M300 P207 S494
	M300 P207 S494
	M300 P207 S330
	M300 P207 S784
	M300 P207 S659
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S988
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330

[gcode_macro GET_TIMELAPSE_SETUP]
description = Print the Timelapse setup
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% set output_txt = ["Timelapse Setup:"] %}
	{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}
	{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}
	{% if tl.park.enable %}
	{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}
	{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}
	{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}
	{% endif %}
	{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}
	{% if not tl.extruder.fw_retract %}
	{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}
	{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}
	{% endif %}
	{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}
	{action_respond_info(output_txt|join("\n"))}

[gcode_macro _SET_TIMELAPSE_SETUP]
description = Set user parameters for timelapse
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	
	{% set min = printer.toolhead.axis_minimum %}
	{% set max = printer.toolhead.axis_maximum %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	{% set park = {'min'   : {'x': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),
	'y': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},
	'max'   : {'x': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),
	'y': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},
	'center': {'x': (max.x-(max.x-min.x)/2)|round(3),
	'y': (max.y-(max.y-min.y)/2)|round(3)}} %}
	
	{% if params.ENABLE %}
	{% if params.ENABLE|lower is in ['true', 'false'] %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == 'true' else False}
	{% else %}
	{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.VERBOSE %}
	{% if params.VERBOSE|lower is in ['true', 'false'] %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == 'true' else False}
	{% else %}
	{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_X %}
	{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}
	{% set _dummy = tl.park.custom.update({'x':params.CUSTOM_POS_X|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_Y %}
	{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}
	{% set _dummy = tl.park.custom.update({'y':params.CUSTOM_POS_Y|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_DZ %}
	{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}
	{% set _dummy = tl.park.custom.update({'dz':params.CUSTOM_POS_DZ|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}
	{% endif %}
	{% endif %}
	{% if params.PARK_ENABLE %}
	{% if params.PARK_ENABLE|lower is in ['true', 'false'] %}
	{% set _dummy = tl.park.update({'enable':True if params.PARK_ENABLE|lower == 'true' else False}) %}
	{% else %}
	{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.PARK_POS %}
	{% if params.PARK_POS|lower is in ['center','front_left','front_right','back_left','back_right','custom','x_only','y_only'] %}
	{% set dic = {'center'      : {'x': park.center.x   , 'y': park.center.y   , 'dz': 1                },
	'front_left'  : {'x': park.min.x      , 'y': park.min.y      , 'dz': 0                },
	'front_right' : {'x': park.max.x      , 'y': park.min.y      , 'dz': 0                },
	'back_left'   : {'x': park.min.x      , 'y': park.max.y      , 'dz': 0                },
	'back_right'  : {'x': park.max.x      , 'y': park.max.y      , 'dz': 0                },
	'custom'      : {'x': tl.park.custom.x, 'y': tl.park.custom.y, 'dz': tl.park.custom.dz},
	'x_only'      : {'x': tl.park.custom.x, 'y': 'none'          , 'dz': tl.park.custom.dz},
	'y_only'      : {'x': 'none'          , 'y': tl.park.custom.y, 'dz': tl.park.custom.dz}} %}
	{% set _dummy = tl.park.update({'pos':params.PARK_POS|lower}) %}
	{% set _dummy = tl.park.update({'coord':dic[tl.park.pos]}) %}
	{% else %}
	{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"
	% params.PARK_POS|upper)}
	{% endif %}
	{% endif %}
	{% if params.PARK_TIME %}
	{% if params.PARK_TIME|float >= 0.0 %}
	{% set _dummy = tl.park.update({'time':params.PARK_TIME|float|round(3)}) %}
	{% else %}
	{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"
	{% if params.TRAVEL_SPEED %}
	{% if params.TRAVEL_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'travel':params.TRAVEL_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}
	{% endif %}
	{% endif %}
	{% if params.RETRACT_SPEED %}
	{% if params.RETRACT_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'retract':params.RETRACT_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}
	{% endif %}
	{% endif %}
	{% if params.EXTRUDE_SPEED %}
	{% if params.EXTRUDE_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'extrude':params.EXTRUDE_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"
	{% if params.EXTRUDE_DISTANCE %}
	{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}
	{% set _dummy = tl.extruder.update({'extrude':params.EXTRUDE_DISTANCE|float|round(3)}) %}
	{% else %}
	{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}
	{% endif %}
	{% endif %}
	{% if params.RETRACT_DISTANCE %}
	{% if params.RETRACT_DISTANCE|float >= 0.0 %}
	{% set _dummy = tl.extruder.update({'retract':params.RETRACT_DISTANCE|float|round(3)}) %}
	{% else %}
	{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}
	{% endif %}
	{% endif %}
	{% if params.FW_RETRACT %}
	{% if params.FW_RETRACT|lower is in ['true', 'false'] %}
	{% if 'firmware_retraction' in printer.configfile.settings %}
	{% set _dummy = tl.extruder.update({'fw_retract': True if params.FW_RETRACT|lower == 'true' else False}) %}
	{% else %}
	{% set _dummy = tl.extruder.update({'fw_retract':False}) %}
	{% if params.FW_RETRACT|capitalize == 'True' %}
	{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}
	{% endif %}
	{% endif %}
	{% else %}
	{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"
	{% if printer.configfile.settings['gcode_macro pause'] is defined %}
	{% set _dummy = tl.macro.update({'pause': printer.configfile.settings['gcode_macro pause'].rename_existing}) %}
	{% endif %}
	{% if printer.configfile.settings['gcode_macro resume'] is defined %}
	{% set _dummy = tl.macro.update({'resume': printer.configfile.settings['gcode_macro resume'].rename_existing}) %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"

[gcode_macro TIMELAPSE_TAKE_FRAME]
description = Take Timelapse shoot
variable_enable = False
variable_takingframe = False
variable_park = {'enable': False,
	'pos'   : 'center',
	'time'  : 0.1,
	'custom': {'x': 0, 'y': 0, 'dz': 0},
	'coord' : {'x': 0, 'y': 0, 'dz': 0}}
variable_extruder = {'fw_retract': False,
	'retract': 1.0,
	'extrude': 1.0}
variable_speed = {'travel': 100,
	'retract': 15,
	'extrude': 15}
variable_verbose = True
variable_restore = {'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}
variable_macro = {'pause': 'PAUSE', 'resume': 'RESUME'}
variable_is_paused = False
gcode = 
	{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower =='true' else False %}
	{% if enable %}
	{% if (hyperlapse and printer['gcode_macro HYPERLAPSE'].run) or
	(not hyperlapse and not printer['gcode_macro HYPERLAPSE'].run) %}
	{% if park.enable %}
	{% set pos = {'x': 'X' + park.coord.x|string if park.pos != 'y_only' else '',
	'y': 'Y' + park.coord.y|string if park.pos != 'x_only' else '',
	'z': 'Z'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}
	{% set restore = {'absolute': {'coordinates': printer.gcode_move.absolute_coordinates,
	'extrude'    : printer.gcode_move.absolute_extrude},
	'speed'   : printer.gcode_move.speed,
	'e'       : printer.gcode_move.gcode_position.e,
	'factor'  : {'speed'  : printer.gcode_move.speed_factor,
	'extrude': printer.gcode_move.extrude_factor}} %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"
	{% if not printer[printer.toolhead.extruder].can_extrude %}
	{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}
	{% else %}
	{% if extruder.fw_retract %}
	G10
	{% else %}
	M83
	G0 E-{extruder.retract} F{speed.retract * 60}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True
	{macro.pause}
	SET_GCODE_OFFSET X=0 Y=0
	G90
	{% if "xyz" not in printer.toolhead.homed_axes %}
	{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}
	{% else %}
	G0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5
	M400
	{% endif %}
	_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}
	{% endif %}
	{% else %}
	{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}
	{% endif %}

[gcode_macro _TIMELAPSE_NEW_FRAME]
description = action call for timelapse shoot. must be a seperate macro
gcode = 
	{action_call_remote_method("timelapse_newframe",
	macropark=printer['gcode_macro TIMELAPSE_TAKE_FRAME'].park,
	hyperlapse=params.HYPERLAPSE)}

[delayed_gcode _WAIT_TIMELAPSE_TAKE_FRAME]
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% set factor = {'speed': printer.gcode_move.speed_factor, 'extrude': printer.gcode_move.extrude_factor} %}
	{% if tl.takingframe %}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5
	{% else %}
	{tl.macro.resume} VELOCITY={tl.speed.travel}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False
	{% if not printer[printer.toolhead.extruder].can_extrude %}
	{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}
	{% else %}
	{% if tl.extruder.fw_retract %}
	G11
	{% else %}
	G0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}
	G0 F{tl.restore.speed}
	{% if tl.restore.absolute.extrude %}
	M82
	G92 E{tl.restore.e}
	{% endif %}
	{% endif %}
	{% endif %}
	{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}
	{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}
	{% if not tl.restore.absolute.coordinates %} G91 {% endif %}
	{% endif %}

[gcode_macro HYPERLAPSE]
description = Start/Stop a hyperlapse recording
variable_cycle = 0
variable_run = False
gcode = 
	{% set cycle = params.CYCLE|default(30)|int %}
	{% if params.ACTION and params.ACTION|lower == 'start' %}
	{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}
	TIMELAPSE_TAKE_FRAME HYPERLAPSE=True
	{% elif params.ACTION and params.ACTION|lower == 'stop' %}
	{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0
	{% else %}
	{action_raise_error("Hyperlapse: No valid input parameter
	Use:
	- HYPERLAPSE ACTION=START [CYCLE=time]
	- HYPERLAPSE ACTION=STOP")}
	{% endif %}

[delayed_gcode _HYPERLAPSE_LOOP]
gcode = 
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}
	TIMELAPSE_TAKE_FRAME HYPERLAPSE=True

[gcode_macro TIMELAPSE_RENDER]
description = Render Timelapse video and wait for the result
variable_render = False
variable_run_identifier = 0
gcode = 
	{action_respond_info("Timelapse: Rendering started")}
	{action_call_remote_method("timelapse_render", byrendermacro="True")}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True
	{printer.configfile.settings['gcode_macro pause'].rename_existing}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5

[delayed_gcode _WAIT_TIMELAPSE_RENDER]
gcode = 
	{% set ri = printer['gcode_macro TIMELAPSE_RENDER'].run_identifier % 4 %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}
	{% if printer['gcode_macro TIMELAPSE_RENDER'].render %}
	M117 Rendering {['-','\\','|','/'][ri]}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5
	{% else %}
	{action_respond_info("Timelapse: Rendering finished")}
	M117
	{printer.configfile.settings['gcode_macro resume'].rename_existing}
	{% endif %}

[gcode_macro TEST_STREAM_DELAY]
description = Helper macro to find stream and park delay
gcode = 
	{% set min = printer.toolhead.axis_minimum %}
	{% set max = printer.toolhead.axis_maximum %}
	{% set act = printer.toolhead.position %}
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% if act.z > 5.0 %}
	G0 X{min.x + 5.0} F{tl.speed.travel|int * 60}
	G0 X{(max.x-min.x)/2}
	G4 P{tl.park.time|float * 1000}
	_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE
	G0 X{max.x - 5.0}
	{% else %}
	{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}
	{% endif %}

[exclude_object]

[gcode_macro БЭКАП_на_GIT-HUB]
gcode = 
	{% set message = params.MESSAGE|default() %}
	{% if message %}
	RUN_SHELL_COMMAND CMD=update_git_script_message PARAMS="'{params.MESSAGE}'"
	{% else %}
	RUN_SHELL_COMMAND CMD=update_git_script
	{% endif %}

[gcode_shell_command update_git_script]
command = bash -c "bash $HOME/klipper-backup/script.sh"
timeout = 90.0
verbose = True

[gcode_shell_command update_git_script_message]
command = bash -c "bash $HOME/klipper-backup/script.sh -c \"$0\""
timeout = 90.0
verbose = True

[mcu]
serial = /dev/ttyS3
restart_method = command

[output_pin Power]
pin = PC12
value = 1
shutdown_value = 1

[temperature_sensor orange_pi]
sensor_type = temperature_host
min_temp = 0
max_temp = 100

[heater_generic chamber_heater]
heater_pin = !PA7
sensor_type = ATC Semitec 104GT-2
sensor_pin = PA5
control = watermark
max_power = 1
min_temp = 15
max_temp = 85

[verify_heater chamber_heater]
max_error = 9999
check_gain_time = 9999
hysteresis = 5
heating_gain = 2

[filament_motion_sensor motion_sensor]
detection_length = 50
extruder = extruder
switch_pin = !PC15
pause_on_runout = True
runout_gcode = 
	SONG_CRAB_RAVE

[bltouch]
sensor_pin = ^PC14
control_pin = PA1
x_offset = -40
y_offset = 0.000
z_offset = 1.70
pin_up_reports_not_triggered = False
probe_with_touch_mode = True

[heater_bed]
heater_pin = PC9
sensor_type = ATC Semitec 104GT-2
sensor_pin = PC3
control = pid
pid_kp = 72.553
pid_ki = 1.154
pid_kd = 1139.994
min_temp = 5
max_temp = 125

[heater_fan radiator]
pin = PC7
max_power = 1.0
kick_start_time = 0.600
heater = extruder
heater_temp = 50.0
shutdown_speed = 1

[fan]
pin = PC6

[input_shaper]
shaper_type_x = 2hump_ei
shaper_freq_x = 43.0
shaper_type_y = mzv
shaper_freq_y = 32.6

[printer]
kinematics = cartesian
max_velocity = 300
max_accel = 1900
max_z_velocity = 30
max_z_accel = 100
square_corner_velocity = 4

[bed_mesh]
speed = 150
horizontal_move_z = 9
mesh_min = 10, 20
mesh_max = 195, 210
probe_count = 5
mesh_pps = 2, 3
algorithm = bicubic
bicubic_tension = 0.2
move_check_distance = 9
split_delta_z = .025
fade_start = 1
fade_end = 10
fade_target = 0

[screws_tilt_adjust]
screw1 = 79, 27
screw1_name = Peredniy Leviy
screw2 = 235, 27
screw2_name = Peredniy Praviy
screw3 = 235,197
screw3_name = Zadniy Praviy
screw4 = 79,197
screw4_name = Zadniy Leviy
speed = 120
horizontal_move_z = 9

[safe_z_home]
home_xy_position = 157,115
speed = 50
z_hop = 9.0
z_hop_speed = 20.0

[stepper_x]
step_pin = PB13
dir_pin = !PB12
enable_pin = !PB14
microsteps = 16
rotation_distance = 40
endstop_pin = ^PC0
position_endstop = 0
position_max = 240
position_min = -2
homing_retract_dist = 5
homing_speed = 50
second_homing_speed = 10

[tmc2209 stepper_x]
uart_pin = PC11
tx_pin = PC10
uart_address = 0
run_current = 0.580
stealthchop_threshold = 999999

[stepper_y]
step_pin = PB10
dir_pin = !PB2
enable_pin = !PB11
microsteps = 16
rotation_distance = 40
endstop_pin = ^PC1
position_endstop = 0
homing_retract_dist = 5
homing_speed = 50
second_homing_speed = 10
position_max = 231
position_min = 0

[tmc2209 stepper_y]
uart_pin = PC11
tx_pin = PC10
uart_address = 2
run_current = 0.6
stealthchop_threshold = 999999

[stepper_z]
step_pin = PB0
dir_pin = PC5
enable_pin = !PB1
microsteps = 16
rotation_distance = 40
gear_ratio = 80:16
full_steps_per_rotation = 200
endstop_pin = probe:z_virtual_endstop
homing_retract_dist = 9
second_homing_speed = 10
position_min = -5
position_max = 245
homing_speed = 50

[tmc2209 stepper_z]
uart_pin = PC11
tx_pin = PC10
uart_address = 1
run_current = 0.580
stealthchop_threshold = 999999
interpolate = false

[extruder]
step_pin = PB3
dir_pin = PB4
enable_pin = !PD2
microsteps = 16
rotation_distance = 4.637
nozzle_diameter = 0.400
filament_diameter = 1.750
heater_pin = PC8
sensor_type = ATC Semitec 104GT-2
sensor_pin = PA0
min_temp = 5
max_temp = 270
max_extrude_only_velocity = 120
max_extrude_only_accel = 3000
pressure_advance = 0.031
full_steps_per_rotation = 200
control = pid
pid_kp = 29.662
pid_ki = 2.382
pid_kd = 92.322

[tmc2209 extruder]
uart_pin = PC11
tx_pin = PC10
uart_address = 3
run_current = 0.7
stealthchop_threshold = 999999

[static_digital_output usb_pullup_enable]
pins = !PA14

[board_pins]
aliases = 
	
	EXP1_1=PB5,  EXP1_3=PA9,   EXP1_5=PA10, EXP1_7=PB8,  EXP1_9=<GND>,
	EXP1_2=PA15, EXP1_4=<RST>, EXP1_6=PB9,  EXP1_8=PB15, EXP1_10=<5V>

[display]
lcd_type = st7920
cs_pin = EXP1_7
sclk_pin = EXP1_6
sid_pin = EXP1_8
encoder_pins = ^EXP1_5, ^EXP1_3
click_pin = ^!EXP1_2

[pwm_cycle_time beeper]
pin = EXP1_1
shutdown_value = 0
cycle_time = 0.001

[firmware_retraction]
retract_length = 1.0
retract_speed = 80
unretract_extra_length = 0
unretract_speed = 80

[pwm_tool Laser]
pin = PA6
cycle_time = 0.0001
shutdown_value = 0
maximum_mcu_duration = 5

[bed_mesh 70]
version = 1
points = 
	-0.045000, 0.027500, 0.015000
	-0.055000, -0.005000, -0.035000
	-0.007500, 0.040000, -0.002500
x_count = 3
y_count = 3
mesh_x_pps = 2
mesh_y_pps = 3
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 195.0
min_y = 20.0
max_y = 210.0

[bed_mesh default]
version = 1
points = 
	0.020000, 0.025000, 0.030000, -0.007500, -0.052500
	0.015000, 0.017500, 0.022500, -0.007500, -0.057500
	0.030000, 0.030000, 0.037500, 0.002500, -0.035000
	0.012500, 0.030000, 0.050000, 0.035000, -0.010000
	0.080000, 0.087500, 0.115000, 0.097500, 0.067500
x_count = 5
y_count = 5
mesh_x_pps = 2
mesh_y_pps = 3
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 195.0
min_y = 20.0
max_y = 210.0
=======================
Config error
Traceback (most recent call last):
  File "/home/klipper/klipper/klippy/klippy.py", line 130, in _connect
    self._read_config()
  File "/home/klipper/klipper/klippy/klippy.py", line 123, in _read_config
    self.load_object(config, section_config.get_name(), None)
  File "/home/klipper/klipper/klippy/klippy.py", line 112, in load_object
    self.objects[section] = init_func(config.getsection(section))
  File "/home/klipper/klipper/klippy/extras/gcode_macro.py", line 194, in load_config_prefix
    return GCodeMacro(config)
  File "/home/klipper/klipper/klippy/extras/gcode_macro.py", line 137, in __init__
    self.gcode.register_command(self.alias, self.cmd,
  File "/home/klipper/klipper/klippy/gcode.py", line 137, in register_command
    raise self.printer.config_error(
configparser.Error: Can't register 'БЭКАП_НА_GIT-HUB' as it is an invalid name
webhooks client 281473327150896: New connection
webhooks client 281473327150896: Client info {'program': 'Moonraker', 'version': 'v0.9.3-4-ga4604e3'}
webhooks client 281473327150896: Disconnected
Restarting printer
Start printer at Wed Dec 25 21:05:42 2024 (1735149942.4 2925.4)
===== Config file =====
[virtual_sdcard]
path = /home/klipper/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[pause_resume]

[display_status]

[respond]

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = BASE_CANCEL_PRINT
gcode = 
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	TURN_OFF_HEATERS
	M107
	G91
	G1 E-{E} F1500
	G90
	CLEAR_PAUSE
	SDCARD_RESET_FILE
	BASE_CANCEL_PRINT
	PARK

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = BASE_PAUSE
gcode = 
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	SAVE_GCODE_STATE NAME=PAUSE_STATE
	BASE_PAUSE
	G91
	G1 E-{E} F1500
	G90
	PARK

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = BASE_RESUME
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	G91
	G1 E{E} F1500
	G90
	RESTORE_GCODE_STATE NAME=PAUSE_STATE MOVE=1
	BASE_RESUME

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[gcode_macro _CLIENT_LINEAR_MOVE]
description = Linear move with save and restore of the gcode state
gcode = 
	{% set x_move = "X" ~ params.X if params.X is defined else "" %}
	{% set y_move = "Y" ~ params.Y if params.Y is defined else "" %}
	{% set z_move = "Z" ~ params.Z if params.Z is defined else "" %}
	{% set e_move = "E" ~ params.E if params.E is defined else "" %}
	{% set rate = "F" ~ params.F if params.F is defined else "" %}
	{% set ABSOLUTE = params.ABSOLUTE | default(0) | int != 0 %}
	{% set ABSOLUTE_E = params.ABSOLUTE_E | default(0) | int != 0 %}
	SAVE_GCODE_STATE NAME=_client_movement
	{% if x_move or y_move or z_move %}
	G9{ 0 if ABSOLUTE else 1 }
	{% endif %}
	{% if e_move %}
	M8{ 2 if ABSOLUTE_E else 3 }
	{% endif %}
	G1 { x_move } { y_move } { z_move } { e_move } { rate }
	RESTORE_GCODE_STATE NAME=_client_movement

[gcode_macro list_sensors]
gcode = 
	{ action_respond_info(printer.heaters.available_heaters | join(', ')) }
	{ action_respond_info(printer.heaters.available_sensors | join(', ')) }

[gcode_macro Power_OFF]
gcode = SET_PIN PIN=Power VALUE=0

[gcode_macro _POWER_OFF_PRINTER]
gcode = SET_PIN PIN=Power VALUE=0

[gcode_macro ACTIVATE_POWER_OFF]
gcode = 
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK_ACT DURATION=60

[gcode_macro DEACTIVATE_POWER_OFF]
gcode = 
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK_ACT DURATION=0

[delayed_gcode POWER_OFF_PRINTER_CHECK_ACT]
gcode = 
	{% if printer.idle_timeout.state == "Idle" or printer.idle_timeout.state == "Ready" %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=30
	{% else %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK_ACT DURATION=60
	{% endif %}

[delayed_gcode POWER_OFF_PRINTER_CHECK]
gcode = 
	{% if printer.idle_timeout.state == "Idle" or printer.idle_timeout.state == "Ready" %}
	{% if printer.extruder.temperature < 50.0 and printer.heater_bed.temperature < 50.0 %}
	{% if printer.extruder.target == 0.0 and printer.heater_bed.target == 0.0 %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=0
	_POWER_OFF_PRINTER
	{% else %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=2
	{% endif %}
	{% else %}
	{% if printer.idle_timeout.state == "Printing" %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=0
	{% else %}
	{% if printer.extruder.target == 0.0 and printer.heater_bed.target == 0.0 %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=2
	{% else %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=0
	{% endif %}
	{% endif %}
	{% endif %}
	{% endif %}

[gcode_macro M141]
gcode = SET_HEATER_TEMPERATURE HEATER=chamber_heater TARGET={params.S|default(0)}

[gcode_macro M80]
gcode = SET_PIN PIN=Power  VALUE=1

[gcode_macro M81]
gcode = 
	
	SET_PIN PIN=Power VALUE=0

[gcode_macro M486]
gcode = 
	
	
	
	
	
	
	
	
	
	
	
	{% if 'exclude_object' not in printer %}
	{action_raise_error("[exclude_object] is not enabled")}
	{% endif %}
	
	{% if 'T' in params %}
	EXCLUDE_OBJECT RESET=1
	
	{% for i in range(params.T | int) %}
	EXCLUDE_OBJECT_DEFINE NAME={i}
	{% endfor %}
	{% endif %}
	
	{% if 'C' in params %}
	EXCLUDE_OBJECT CURRENT=1
	{% endif %}
	
	{% if 'P' in params %}
	EXCLUDE_OBJECT NAME={params.P}
	{% endif %}
	
	{% if 'S' in params %}
	{% if params.S == '-1' %}
	{% if printer.exclude_object.current_object %}
	EXCLUDE_OBJECT_END NAME={printer.exclude_object.current_object}
	{% endif %}
	{% else %}
	EXCLUDE_OBJECT_START NAME={params.S}
	{% endif %}
	{% endif %}
	
	{% if 'U' in params %}
	EXCLUDE_OBJECT RESET=1 NAME={params.U}
	{% endif %}

[gcode_macro M190]
rename_existing = M190.1
gcode = 
	{% if printer["gcode_macro status_heating"] != null %}
	status_heating
	{% endif %}
	M190.1 { rawparams }
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro _CHOME]
gcode = 
	{% if printer["gcode_macro status_homing"] != null %}
	status_homing
	{% endif %}
	{% if printer.toolhead.homed_axes != "xyz" %}
	G28
	{% endif %}
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro M109]
rename_existing = M109.1
gcode = 
	{% if printer["gcode_macro status_heating"] != null %}
	status_heating
	{% endif %}
	M109.1 { rawparams }
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro _MOVE_AWAY]
gcode = 
	{% set th = printer.toolhead %}
	{% set x_safe = th.position.x + 20 * (1 if th.axis_maximum.x - th.position.x > 20 else -1) %}
	{% set y_safe = th.position.y + 20 * (1 if th.axis_maximum.y - th.position.y > 20 else -1) %}
	{% set z_safe = [th.position.z + 2, th.axis_maximum.z]|min %}
	
	G90
	G0 X{x_safe} Y{y_safe} Z{z_safe} F20000

[gcode_macro PARK_CENTER_REAR]
gcode = 
	{% if printer["gcode_macro status_busy"] != null %}
	status_busy
	{% endif %}
	{% set th = printer.toolhead %}
	{% set x_safe = th.position.x + 20 * (1 if th.axis_maximum.x - th.position.x > 20 else -1) %}
	{% set y_safe = th.position.y + 20 * (1 if th.axis_maximum.y - th.position.y > 20 else -1) %}
	
	G0 X{th.axis_maximum.x//2} Y{th.axis_maximum.y - 2} F3600
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro START_PRINT]
variable_retract = 15
gcode = 
	{% set chamber_temp = params.CHAMBER_TEMP|default(0)|float %}
	{% set extruder_temp = params.EXTRUDER_TEMP|default(210)|float %}
	{% set bed_temp = params.BED_TEMP|default(60)|float %}
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	CLEAR_PAUSE
	G28
	Smart_Park
	M220 S100
	M221 S100
	SET_HEATER_TEMPERATURE HEATER=chamber_heater TARGET={chamber_temp}
	SET_HEATER_TEMPERATURE HEATER=heater_bed TARGET={bed_temp}
	TEMPERATURE_WAIT SENSOR=heater_bed MINIMUM={bed_temp * 0.75}
	SET_HEATER_TEMPERATURE HEATER=extruder TARGET={extruder_temp}
	G90
	M82
	TEMPERATURE_WAIT SENSOR=heater_bed MINIMUM={bed_temp}
	TEMPERATURE_WAIT SENSOR=extruder MINIMUM={extruder_temp}
	
	G1 E-15 F3600
	
	G28
	BED_MESH_CALIBRATE
	PRIME_LINE

[gcode_macro pid_soplo]
gcode = 
	PID_CALIBRATE HEATER=extruder TARGET=250

[gcode_macro pid_bed]
gcode = 
	PID_CALIBRATE HEATER=heater_bed TARGET=105

[gcode_macro BED]
gcode = 
	PROBE_CALIBRATE

[gcode_macro END_PRINT]
gcode = 
	
	{% set max_x = printer.configfile.config["stepper_x"]["position_max"]|float %}
	{% set max_y = printer.configfile.config["stepper_y"]["position_max"]|float %}
	{% set max_z = printer.configfile.config["stepper_z"]["position_max"]|float %}
	
	
	{% if printer.toolhead.position.x < (max_x - 20) %}
	{% set x_safe = 20.0 %}
	{% else %}
	{% set x_safe = -20.0 %}
	{% endif %}
	
	{% if printer.toolhead.position.y < (max_y - 20) %}
	{% set y_safe = 20.0 %}
	{% else %}
	{% set y_safe = -20.0 %}
	{% endif %}
	
	{% if printer.toolhead.position.z < (max_z - 2) %}
	{% set z_safe = 2.0 %}
	{% else %}
	{% set z_safe = max_z - printer.toolhead.position.z %}
	{% endif %}
	
	
	M400
	G92 E0
	G1 E-15 F3600
	G91
	G0 Z{z_safe} F3600
	G0 X{x_safe} Y{y_safe} F20000
	
	
	M104 S0
	M104 S0
	M140 S0
	M106 S0
	G90
	G0 X{max_x / 2} Y{max_y} F3600
	
	SONG_CRAB_RAVE
	
	
	
	M117 Finished!
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=30

[gcode_macro M300]
gcode = 
	
	{% set S = params.S|default(1000)|int %}
	
	{% set P = params.P|default(100)|int %}
	
	
	{% set V = params.V|default(99)|int %}
	SET_PIN PIN=beeper VALUE={0.1 * (V / 100) if S > 0 else 1} CYCLE_TIME={ 1.0 / S if S > 0 else 1 }
	G4 P{P}
	SET_PIN PIN=beeper VALUE=0 CYCLE_TIME={ 0.001 }
description = 
	"Plays a beep sound.
	@param {int} [S=1000] - Frequency in Hz
	@param {int} [P=100] - Duration in ms
	@param {int} [V=99] - Volume in percent"

[gcode_macro PRIME_LINE]
gcode = 
	{% set feedrate = params.F|default(10)|float * 60 %}
	{% set length = 100.0 %}
	{% set width = printer.configfile.settings.extruder.nozzle_diameter|float %}
	{% set height = ( (width / 0.04)|int - (width / 0.04 / 4)|int )|float * 0.04 %}
	
	{% set extrude = length * width * height * 1.5 %}
	SAVE_GCODE_STATE NAME=PRIME_LINE_STATE
	SET_IDLE_TIMEOUT TIMEOUT=7200
	{% if 'Y' in params %}
	{% set x_start = 1.0 %}
	{% set y_start = (printer.toolhead.axis_maximum.y|float - 100) / 2 %}
	G0 X{x_start} Y{y_start} F5000
	G0 Z{height} F1500
	G91
	
	G1 E8 F300
	
	
	G1 Y100 E{extrude} F{feedrate}
	G0 X{width} F5000
	G1 Y-100 E{extrude} F{feedrate}
	{% else %}
	{% set x_start = (printer.toolhead.axis_maximum.x|float - 100) / 2 %}
	{% set y_start = 1.0 %}
	G0 X{x_start} Y{y_start} F5000
	G0 Z{height} F1500
	G91
	
	G1 E8 F300
	
	
	G1 X100 E{extrude} F{feedrate}
	G0 Y{width} F5000
	G1 X-100 E{extrude} F{feedrate}
	{% endif %}
	RESTORE_GCODE_STATE NAME=PRIME_LINE_STATE

[gcode_macro VINT]
gcode = 
	SCREWS_TILT_CALCULATE

[gcode_macro LOW_TEMP_CHECK]
gcode = 
	{% set extruder_temp = params.T|default(240)|float %}
	{% if printer.extruder.target > extruder_temp %}
	{% set extruder_temp = printer.extruder.target %}
	{% endif %}
	{% if printer.extruder.temperature < extruder_temp %}
	M118 Heating to {extruder_temp}
	SET_HEATER_TEMPERATURE HEATER=extruder TARGET={extruder_temp}
	TEMPERATURE_WAIT SENSOR=extruder MINIMUM={extruder_temp}
	{% endif %}

[gcode_macro M76]
gcode = 
	PAUSE

[gcode_macro M601]
gcode = 
	PAUSE

[gcode_macro G27]
gcode = 
	PARK

[gcode_macro M125]
gcode = 
	PARK

[gcode_macro M600]
gcode = 
	PAUSE

[gcode_macro M701]
gcode = 
	FILAMENT_LOAD

[gcode_macro M702]
gcode = 
	FILAMENT_UNLOAD

[gcode_macro M500]
gcode = 
	SAVE_CONFIG

[gcode_macro PARK]
gcode = 
	{% set x_park = params.X|default(0)|float %}
	{% set y_park = params.Y|default(0)|float %}
	{% set z_park = params.Z|default(10)|float + printer.toolhead.position.z|float %}
	{% set x_max = printer.toolhead.axis_maximum.x|float %}
	{% set y_max = printer.toolhead.axis_maximum.y|float %}
	{% set z_max = printer.toolhead.axis_maximum.z|float %}
	{% if x_park > x_max %}
	{% set x_park = x_max %}
	{% endif %}
	{% if y_park > y_max %}
	{% set y_park = y_max %}
	{% endif %}
	{% if z_park > z_max %}
	{% set z_park = z_max %}
	{% endif %}
	SAVE_GCODE_STATE NAME=PARK_STATE
	G90
	G1 Z{z_park} F1500
	G1 X{x_park} Y{y_park} F5000
	RESTORE_GCODE_STATE name=PARK_STATE

[gcode_macro START_DRYER]
description = Start the heated bed filament dryer.
gcode = 
	{% set ChamberTemperature = params.CHAMBER | default(65.0) | float %}
	{% set BedTemperature = params.TEMPERATURE | default(0.0) | float %}
	{% set DryTime = params.TIME | default(14400) | int %}
	M140 S{BedTemperature}
	M141 S{ChamberTemperature}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=time_remaining VALUE={DryTime}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=bed_temperature VALUE={BedTemperature}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=chamber_temperature VALUE={ChamberTemperature}
	UPDATE_DELAYED_GCODE ID=DRYER_TIMER DURATION=1

[gcode_macro STOP_DRYER]
gcode = 
	M140 S0
	M141 S0
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=time_remaining VALUE=0
	UPDATE_DELAYED_GCODE ID=DRYER_TIMER DURATION=0
	M117 Drying Stopped

[gcode_macro DRYER_STATUS]
variable_time_remaining = 0
variable_bed_temperature = 0
variable_chamber_temperature = 0
gcode = 
	{% if time_remaining > 0 %}
	M140 S{bed_temperature}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=time_remaining VALUE={time_remaining - 1}
	M117 Drying {time_remaining}
	{% else %}
	STOP_DRYER
	{% endif %}

[delayed_gcode DRYER_TIMER]
gcode = 
	UPDATE_DELAYED_GCODE ID=DRYER_TIMER DURATION=1
	DRYER_STATUS

[gcode_macro DRY_tpu]
gcode = 
	START_DRYER TEMPERATURE=0 CHAMBER=50 TIME=18000

[gcode_macro DRY_PETG]
gcode = 
	START_DRYER TEMPERATURE=0  CHAMBER=65 TIME=18000

[gcode_macro DRY_ABS]
gcode = 
	{% set S = params.S|default(0.0)|float %}
	SET_PIN PIN=Laser VALUE={S / 255.0}

[gcode_macro M4]
gcode = 
	{% set S = params.S|default(0.0)|float %}
	SET_PIN PIN=Laser VALUE={S / 255.0}

[gcode_macro M5]
gcode = 
	SET_PIN PIN=Laser VALUE=0

[menu __main __control __toolonoff]
type = input
enable = {'pwm_tool Laser' in printer}
name = Fan: {'ON ' if menu.input else 'OFF'}
input = {printer['pwm_tool Laser'].value}
input_min = 0
input_max = 1
input_step = 1
gcode = 
	M3 S{255 if menu.input else 0}

[menu __main __control __toolspeed]
type = input
enable = {'pwm_tool Laser' in printer}
name = Laser speed: {'%3d' % (menu.input*100)}%
input = {printer['pwm_tool Laser'].value}
input_min = 0
input_max = 1
input_step = 0.01
gcode = 
	M3 S{'%d' % (menu.input*255)}

[gcode_macro NOTE]
description = 
	"Plays a specified note for a specified duration
	@param {string} [N=C5] - Note to play
	@param {int} [D=500] - Duration of note. There are currently some Klipper limitations to how short a note can be.
	@param {int} [V=99] - Volume in percent
	@param {bool} [S=true] - Whether or not to stop the note after duration"
gcode = 
	{% set notes = {
	'C0': 16.35,   'CS0': 17.32,   'D0': 18.35,   'DS0': 19.45,   'E0': 20.60,   'F0': 21.83,   'FS0': 23.12,   'G0': 24.50,   'GS0': 25.96,   'A0': 27.50,   'AS0': 29.14,   'B0': 30.87,
	'C1': 32.70,   'CS1': 34.65,   'D1': 36.71,   'DS1': 38.89,   'E1': 41.20,   'F1': 43.65,   'FS1': 46.25,   'G1': 49.00,   'GS1': 51.91,   'A1': 55.00,   'AS1': 58.27,   'B1': 61.74,
	'C2': 65.41,   'CS2': 69.30,   'D2': 73.42,   'DS2': 77.78,   'E2': 82.41,   'F2': 87.31,   'FS2': 92.50,   'G2': 98.00,   'GS2': 103.83,  'A2': 110.00,  'AS2': 116.54,  'B2': 123.47,
	'C3': 130.81,  'CS3': 138.59,  'D3': 146.83,  'DS3': 155.56,  'E3': 164.81,  'F3': 174.61,  'FS3': 185.00,  'G3': 196.00,  'GS3': 207.65,  'A3': 220.00,  'AS3': 233.08,  'B3': 246.94,
	'C4': 261.63,  'CS4': 277.18,  'D4': 293.66,  'DS4': 311.13,  'E4': 329.63,  'F4': 349.23,  'FS4': 369.99,  'G4': 392.00,  'GS4': 415.30,  'A4': 440.00,  'AS4': 466.16,  'B4': 493.88,
	'C5': 523.25,  'CS5': 554.37,  'D5': 587.33,  'DS5': 622.25,  'E5': 659.26,  'F5': 698.46,  'FS5': 739.99,  'G5': 783.99,  'GS5': 830.61,  'A5': 880.00,  'AS5': 932.33,  'B5': 987.77,
	'C6': 1046.50, 'CS6': 1108.73, 'D6': 1174.66, 'DS6': 1244.51, 'E6': 1318.51, 'F6': 1396.91, 'FS6': 1479.98, 'G6': 1567.98, 'GS6': 1661.22, 'A6': 1760.00, 'AS6': 1864.66, 'B6': 1975.53,
	'C7': 2093.00, 'CS7': 2217.46, 'D7': 2349.32, 'DS7': 2489.02, 'E7': 2637.02, 'F7': 2793.83, 'FS7': 2959.96, 'G7': 3135.96, 'GS7': 3322.44, 'A7': 3520.00, 'AS7': 3729.31, 'B7': 3951.07,
	'C8': 4186.01, 'CS8': 4434.92, 'D8': 4698.64, 'DS8': 4978.03, 'E8': 5274.04, 'F8': 5587.65, 'FS8': 5919.91, 'G8': 6271.93, 'GS8': 6644.88, 'A8': 7040.00, 'AS8': 7458.62, 'B8': 7902.13,
	} %}
	
	{% set note = params.N|default('C5')|string %}
	
	{% set dur = params.D|default(500)|int %}
	
	
	{% set volume = params.V|default(99)|int %}
	
	{% set stop = params.S|default('true')|string %}
	
	{% set freq = notes[note] %}
	
	SET_PIN PIN=beeper VALUE={0.1 * (volume / 100) if volume > 0 else 1} CYCLE_TIME={ 1.0 / freq }
	G4 P{dur}
	{% if stop|lower == 'true' %}
	SET_PIN PIN=beeper VALUE=0 CYCLE_TIME={ 0.001 }
	{% endif %}

[gcode_macro TONE_GEN]
description = "Used for the tone generator menu"
variable_tone_freq = 0.001093
gcode = 
	M117 {printer["gcode_macro TONE_GEN"].tone_freq}nothz

[gcode_macro SONG_STAR_WARS_MAIN_THEME]
description = "Plays the Star Wars main theme"
gcode = 
	NOTE N=D4 D=133
	NOTE N=D4 D=133
	NOTE N=D4 D=133
	NOTE N=G4 D=1000
	NOTE N=D5 D=1000
	
	NOTE N=C5 D=133
	NOTE N=B4 D=133
	NOTE N=A4 D=133
	NOTE N=G5 D=1000
	NOTE N=D5 D=500
	
	NOTE N=C5 D=133
	NOTE N=B4 D=133
	NOTE N=A4 D=133
	NOTE N=G5 D=1000
	NOTE N=D5 D=500
	
	NOTE N=C5 D=133
	NOTE N=B4 D=133
	NOTE N=C5 D=133
	NOTE N=A4 D=1000

[gcode_macro SONG_CRAB_RAVE]
description = "Plays Crab Rave"
gcode = 
	NOTE N=D6 D=150 V=30 S=1
	NOTE N=AS6 D=150 V=30 S=1
	NOTE N=G6 D=150 V=30 S=1
	NOTE N=G6 D=150 V=30 S=0
	NOTE N=D6 D=150 V=30 S=1
	NOTE N=D6 D=150 V=30 S=0
	NOTE N=A6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=0
	NOTE N=D6 D=150 V=30 S=1
	NOTE N=D6 D=150 V=30 S=0
	NOTE N=A6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=0
	NOTE N=C6 D=150 V=30 S=1
	NOTE N=C6 D=150 V=30 S=1
	NOTE N=E6 D=150 V=30 S=1
	NOTE N=E6 D=150 V=30 S=0
	NOTE N=F6 D=150 V=30 S=1
	SET_PIN PIN=beeper VALUE=0

[gcode_macro one]
description = "one"
gcode = 
	NOTE N=C6 D=600 V=30 S=1
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=G5 D=400 V=30 S=1
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=E6 D=400 V=30 S=1
	G4 P150
	NOTE N=G6 D=180 V=30 S=0
	NOTE N=F6 D=180 V=30 S=0
	NOTE N=E6 D=180 V=30 S=0
	NOTE N=D6 D=180 V=30 S=1
	NOTE N=C6 D=600 V=30 S=1
	
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=G5 D=400 V=30 S=1
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=C6 D=600 V=30 S=1
	SET_PIN PIN=beeper VALUE=0

[gcode_macro SONG_BOOMER]
description = "BOOMER"
gcode = 
	M300 P207 S659
	M300 P207 S784
	M300 P207 S494
	M300 P207 S494
	M300 P207 S392
	M300 P207 S494
	M300 P207 S494
	M300 P207 S330
	M300 P207 S784
	M300 P207 S659
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S988
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S659
	M300 P207 S784
	M300 P207 S494
	M300 P207 S494
	M300 P207 S392
	M300 P207 S494
	M300 P207 S494
	M300 P207 S330
	M300 P207 S784
	M300 P207 S659
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S988
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S659
	M300 P207 S784
	M300 P207 S494
	M300 P207 S494
	M300 P207 S392
	M300 P207 S494
	M300 P207 S494
	M300 P207 S330
	M300 P207 S784
	M300 P207 S659
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S988
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330

[gcode_macro GET_TIMELAPSE_SETUP]
description = Print the Timelapse setup
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% set output_txt = ["Timelapse Setup:"] %}
	{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}
	{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}
	{% if tl.park.enable %}
	{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}
	{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}
	{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}
	{% endif %}
	{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}
	{% if not tl.extruder.fw_retract %}
	{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}
	{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}
	{% endif %}
	{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}
	{action_respond_info(output_txt|join("\n"))}

[gcode_macro _SET_TIMELAPSE_SETUP]
description = Set user parameters for timelapse
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	
	{% set min = printer.toolhead.axis_minimum %}
	{% set max = printer.toolhead.axis_maximum %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	{% set park = {'min'   : {'x': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),
	'y': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},
	'max'   : {'x': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),
	'y': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},
	'center': {'x': (max.x-(max.x-min.x)/2)|round(3),
	'y': (max.y-(max.y-min.y)/2)|round(3)}} %}
	
	{% if params.ENABLE %}
	{% if params.ENABLE|lower is in ['true', 'false'] %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == 'true' else False}
	{% else %}
	{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.VERBOSE %}
	{% if params.VERBOSE|lower is in ['true', 'false'] %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == 'true' else False}
	{% else %}
	{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_X %}
	{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}
	{% set _dummy = tl.park.custom.update({'x':params.CUSTOM_POS_X|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_Y %}
	{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}
	{% set _dummy = tl.park.custom.update({'y':params.CUSTOM_POS_Y|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_DZ %}
	{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}
	{% set _dummy = tl.park.custom.update({'dz':params.CUSTOM_POS_DZ|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}
	{% endif %}
	{% endif %}
	{% if params.PARK_ENABLE %}
	{% if params.PARK_ENABLE|lower is in ['true', 'false'] %}
	{% set _dummy = tl.park.update({'enable':True if params.PARK_ENABLE|lower == 'true' else False}) %}
	{% else %}
	{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.PARK_POS %}
	{% if params.PARK_POS|lower is in ['center','front_left','front_right','back_left','back_right','custom','x_only','y_only'] %}
	{% set dic = {'center'      : {'x': park.center.x   , 'y': park.center.y   , 'dz': 1                },
	'front_left'  : {'x': park.min.x      , 'y': park.min.y      , 'dz': 0                },
	'front_right' : {'x': park.max.x      , 'y': park.min.y      , 'dz': 0                },
	'back_left'   : {'x': park.min.x      , 'y': park.max.y      , 'dz': 0                },
	'back_right'  : {'x': park.max.x      , 'y': park.max.y      , 'dz': 0                },
	'custom'      : {'x': tl.park.custom.x, 'y': tl.park.custom.y, 'dz': tl.park.custom.dz},
	'x_only'      : {'x': tl.park.custom.x, 'y': 'none'          , 'dz': tl.park.custom.dz},
	'y_only'      : {'x': 'none'          , 'y': tl.park.custom.y, 'dz': tl.park.custom.dz}} %}
	{% set _dummy = tl.park.update({'pos':params.PARK_POS|lower}) %}
	{% set _dummy = tl.park.update({'coord':dic[tl.park.pos]}) %}
	{% else %}
	{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"
	% params.PARK_POS|upper)}
	{% endif %}
	{% endif %}
	{% if params.PARK_TIME %}
	{% if params.PARK_TIME|float >= 0.0 %}
	{% set _dummy = tl.park.update({'time':params.PARK_TIME|float|round(3)}) %}
	{% else %}
	{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"
	{% if params.TRAVEL_SPEED %}
	{% if params.TRAVEL_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'travel':params.TRAVEL_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}
	{% endif %}
	{% endif %}
	{% if params.RETRACT_SPEED %}
	{% if params.RETRACT_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'retract':params.RETRACT_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}
	{% endif %}
	{% endif %}
	{% if params.EXTRUDE_SPEED %}
	{% if params.EXTRUDE_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'extrude':params.EXTRUDE_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"
	{% if params.EXTRUDE_DISTANCE %}
	{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}
	{% set _dummy = tl.extruder.update({'extrude':params.EXTRUDE_DISTANCE|float|round(3)}) %}
	{% else %}
	{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}
	{% endif %}
	{% endif %}
	{% if params.RETRACT_DISTANCE %}
	{% if params.RETRACT_DISTANCE|float >= 0.0 %}
	{% set _dummy = tl.extruder.update({'retract':params.RETRACT_DISTANCE|float|round(3)}) %}
	{% else %}
	{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}
	{% endif %}
	{% endif %}
	{% if params.FW_RETRACT %}
	{% if params.FW_RETRACT|lower is in ['true', 'false'] %}
	{% if 'firmware_retraction' in printer.configfile.settings %}
	{% set _dummy = tl.extruder.update({'fw_retract': True if params.FW_RETRACT|lower == 'true' else False}) %}
	{% else %}
	{% set _dummy = tl.extruder.update({'fw_retract':False}) %}
	{% if params.FW_RETRACT|capitalize == 'True' %}
	{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}
	{% endif %}
	{% endif %}
	{% else %}
	{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"
	{% if printer.configfile.settings['gcode_macro pause'] is defined %}
	{% set _dummy = tl.macro.update({'pause': printer.configfile.settings['gcode_macro pause'].rename_existing}) %}
	{% endif %}
	{% if printer.configfile.settings['gcode_macro resume'] is defined %}
	{% set _dummy = tl.macro.update({'resume': printer.configfile.settings['gcode_macro resume'].rename_existing}) %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"

[gcode_macro TIMELAPSE_TAKE_FRAME]
description = Take Timelapse shoot
variable_enable = False
variable_takingframe = False
variable_park = {'enable': False,
	'pos'   : 'center',
	'time'  : 0.1,
	'custom': {'x': 0, 'y': 0, 'dz': 0},
	'coord' : {'x': 0, 'y': 0, 'dz': 0}}
variable_extruder = {'fw_retract': False,
	'retract': 1.0,
	'extrude': 1.0}
variable_speed = {'travel': 100,
	'retract': 15,
	'extrude': 15}
variable_verbose = True
variable_restore = {'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}
variable_macro = {'pause': 'PAUSE', 'resume': 'RESUME'}
variable_is_paused = False
gcode = 
	{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower =='true' else False %}
	{% if enable %}
	{% if (hyperlapse and printer['gcode_macro HYPERLAPSE'].run) or
	(not hyperlapse and not printer['gcode_macro HYPERLAPSE'].run) %}
	{% if park.enable %}
	{% set pos = {'x': 'X' + park.coord.x|string if park.pos != 'y_only' else '',
	'y': 'Y' + park.coord.y|string if park.pos != 'x_only' else '',
	'z': 'Z'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}
	{% set restore = {'absolute': {'coordinates': printer.gcode_move.absolute_coordinates,
	'extrude'    : printer.gcode_move.absolute_extrude},
	'speed'   : printer.gcode_move.speed,
	'e'       : printer.gcode_move.gcode_position.e,
	'factor'  : {'speed'  : printer.gcode_move.speed_factor,
	'extrude': printer.gcode_move.extrude_factor}} %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"
	{% if not printer[printer.toolhead.extruder].can_extrude %}
	{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}
	{% else %}
	{% if extruder.fw_retract %}
	G10
	{% else %}
	M83
	G0 E-{extruder.retract} F{speed.retract * 60}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True
	{macro.pause}
	SET_GCODE_OFFSET X=0 Y=0
	G90
	{% if "xyz" not in printer.toolhead.homed_axes %}
	{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}
	{% else %}
	G0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5
	M400
	{% endif %}
	_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}
	{% endif %}
	{% else %}
	{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}
	{% endif %}

[gcode_macro _TIMELAPSE_NEW_FRAME]
description = action call for timelapse shoot. must be a seperate macro
gcode = 
	{action_call_remote_method("timelapse_newframe",
	macropark=printer['gcode_macro TIMELAPSE_TAKE_FRAME'].park,
	hyperlapse=params.HYPERLAPSE)}

[delayed_gcode _WAIT_TIMELAPSE_TAKE_FRAME]
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% set factor = {'speed': printer.gcode_move.speed_factor, 'extrude': printer.gcode_move.extrude_factor} %}
	{% if tl.takingframe %}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5
	{% else %}
	{tl.macro.resume} VELOCITY={tl.speed.travel}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False
	{% if not printer[printer.toolhead.extruder].can_extrude %}
	{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}
	{% else %}
	{% if tl.extruder.fw_retract %}
	G11
	{% else %}
	G0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}
	G0 F{tl.restore.speed}
	{% if tl.restore.absolute.extrude %}
	M82
	G92 E{tl.restore.e}
	{% endif %}
	{% endif %}
	{% endif %}
	{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}
	{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}
	{% if not tl.restore.absolute.coordinates %} G91 {% endif %}
	{% endif %}

[gcode_macro HYPERLAPSE]
description = Start/Stop a hyperlapse recording
variable_cycle = 0
variable_run = False
gcode = 
	{% set cycle = params.CYCLE|default(30)|int %}
	{% if params.ACTION and params.ACTION|lower == 'start' %}
	{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}
	TIMELAPSE_TAKE_FRAME HYPERLAPSE=True
	{% elif params.ACTION and params.ACTION|lower == 'stop' %}
	{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0
	{% else %}
	{action_raise_error("Hyperlapse: No valid input parameter
	Use:
	- HYPERLAPSE ACTION=START [CYCLE=time]
	- HYPERLAPSE ACTION=STOP")}
	{% endif %}

[delayed_gcode _HYPERLAPSE_LOOP]
gcode = 
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}
	TIMELAPSE_TAKE_FRAME HYPERLAPSE=True

[gcode_macro TIMELAPSE_RENDER]
description = Render Timelapse video and wait for the result
variable_render = False
variable_run_identifier = 0
gcode = 
	{action_respond_info("Timelapse: Rendering started")}
	{action_call_remote_method("timelapse_render", byrendermacro="True")}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True
	{printer.configfile.settings['gcode_macro pause'].rename_existing}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5

[delayed_gcode _WAIT_TIMELAPSE_RENDER]
gcode = 
	{% set ri = printer['gcode_macro TIMELAPSE_RENDER'].run_identifier % 4 %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}
	{% if printer['gcode_macro TIMELAPSE_RENDER'].render %}
	M117 Rendering {['-','\\','|','/'][ri]}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5
	{% else %}
	{action_respond_info("Timelapse: Rendering finished")}
	M117
	{printer.configfile.settings['gcode_macro resume'].rename_existing}
	{% endif %}

[gcode_macro TEST_STREAM_DELAY]
description = Helper macro to find stream and park delay
gcode = 
	{% set min = printer.toolhead.axis_minimum %}
	{% set max = printer.toolhead.axis_maximum %}
	{% set act = printer.toolhead.position %}
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% if act.z > 5.0 %}
	G0 X{min.x + 5.0} F{tl.speed.travel|int * 60}
	G0 X{(max.x-min.x)/2}
	G4 P{tl.park.time|float * 1000}
	_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE
	G0 X{max.x - 5.0}
	{% else %}
	{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}
	{% endif %}

[exclude_object]

[gcode_macro Backup_on_GIT-HUB]
gcode = 
	{% set message = params.MESSAGE|default() %}
	{% if message %}
	RUN_SHELL_COMMAND CMD=update_git_script_message PARAMS="'{params.MESSAGE}'"
	{% else %}
	RUN_SHELL_COMMAND CMD=update_git_script
	{% endif %}

[gcode_shell_command update_git_script]
command = bash -c "bash $HOME/klipper-backup/script.sh"
timeout = 90.0
verbose = True

[gcode_shell_command update_git_script_message]
command = bash -c "bash $HOME/klipper-backup/script.sh -c \"$0\""
timeout = 90.0
verbose = True

[mcu]
serial = /dev/ttyS3
restart_method = command

[output_pin Power]
pin = PC12
value = 1
shutdown_value = 1

[temperature_sensor orange_pi]
sensor_type = temperature_host
min_temp = 0
max_temp = 100

[heater_generic chamber_heater]
heater_pin = !PA7
sensor_type = ATC Semitec 104GT-2
sensor_pin = PA5
control = watermark
max_power = 1
min_temp = 15
max_temp = 85

[verify_heater chamber_heater]
max_error = 9999
check_gain_time = 9999
hysteresis = 5
heating_gain = 2

[filament_motion_sensor motion_sensor]
detection_length = 50
extruder = extruder
switch_pin = !PC15
pause_on_runout = True
runout_gcode = 
	SONG_CRAB_RAVE

[bltouch]
sensor_pin = ^PC14
control_pin = PA1
x_offset = -40
y_offset = 0.000
z_offset = 1.70
pin_up_reports_not_triggered = False
probe_with_touch_mode = True

[heater_bed]
heater_pin = PC9
sensor_type = ATC Semitec 104GT-2
sensor_pin = PC3
control = pid
pid_kp = 72.553
pid_ki = 1.154
pid_kd = 1139.994
min_temp = 5
max_temp = 125

[heater_fan radiator]
pin = PC7
max_power = 1.0
kick_start_time = 0.600
heater = extruder
heater_temp = 50.0
shutdown_speed = 1

[fan]
pin = PC6

[input_shaper]
shaper_type_x = 2hump_ei
shaper_freq_x = 43.0
shaper_type_y = mzv
shaper_freq_y = 32.6

[printer]
kinematics = cartesian
max_velocity = 300
max_accel = 1900
max_z_velocity = 30
max_z_accel = 100
square_corner_velocity = 4

[bed_mesh]
speed = 150
horizontal_move_z = 9
mesh_min = 10, 20
mesh_max = 195, 210
probe_count = 5
mesh_pps = 2, 3
algorithm = bicubic
bicubic_tension = 0.2
move_check_distance = 9
split_delta_z = .025
fade_start = 1
fade_end = 10
fade_target = 0

[screws_tilt_adjust]
screw1 = 79, 27
screw1_name = Peredniy Leviy
screw2 = 235, 27
screw2_name = Peredniy Praviy
screw3 = 235,197
screw3_name = Zadniy Praviy
screw4 = 79,197
screw4_name = Zadniy Leviy
speed = 120
horizontal_move_z = 9

[safe_z_home]
home_xy_position = 157,115
speed = 50
z_hop = 9.0
z_hop_speed = 20.0

[stepper_x]
step_pin = PB13
dir_pin = !PB12
enable_pin = !PB14
microsteps = 16
rotation_distance = 40
endstop_pin = ^PC0
position_endstop = 0
position_max = 240
position_min = -2
homing_retract_dist = 5
homing_speed = 50
second_homing_speed = 10

[tmc2209 stepper_x]
uart_pin = PC11
tx_pin = PC10
uart_address = 0
run_current = 0.580
stealthchop_threshold = 999999

[stepper_y]
step_pin = PB10
dir_pin = !PB2
enable_pin = !PB11
microsteps = 16
rotation_distance = 40
endstop_pin = ^PC1
position_endstop = 0
homing_retract_dist = 5
homing_speed = 50
second_homing_speed = 10
position_max = 231
position_min = 0

[tmc2209 stepper_y]
uart_pin = PC11
tx_pin = PC10
uart_address = 2
run_current = 0.6
stealthchop_threshold = 999999

[stepper_z]
step_pin = PB0
dir_pin = PC5
enable_pin = !PB1
microsteps = 16
rotation_distance = 40
gear_ratio = 80:16
full_steps_per_rotation = 200
endstop_pin = probe:z_virtual_endstop
homing_retract_dist = 9
second_homing_speed = 10
position_min = -5
position_max = 245
homing_speed = 50

[tmc2209 stepper_z]
uart_pin = PC11
tx_pin = PC10
uart_address = 1
run_current = 0.580
stealthchop_threshold = 999999
interpolate = false

[extruder]
step_pin = PB3
dir_pin = PB4
enable_pin = !PD2
microsteps = 16
rotation_distance = 4.637
nozzle_diameter = 0.400
filament_diameter = 1.750
heater_pin = PC8
sensor_type = ATC Semitec 104GT-2
sensor_pin = PA0
min_temp = 5
max_temp = 270
max_extrude_only_velocity = 120
max_extrude_only_accel = 3000
pressure_advance = 0.031
full_steps_per_rotation = 200
control = pid
pid_kp = 29.662
pid_ki = 2.382
pid_kd = 92.322

[tmc2209 extruder]
uart_pin = PC11
tx_pin = PC10
uart_address = 3
run_current = 0.7
stealthchop_threshold = 999999

[static_digital_output usb_pullup_enable]
pins = !PA14

[board_pins]
aliases = 
	
	EXP1_1=PB5,  EXP1_3=PA9,   EXP1_5=PA10, EXP1_7=PB8,  EXP1_9=<GND>,
	EXP1_2=PA15, EXP1_4=<RST>, EXP1_6=PB9,  EXP1_8=PB15, EXP1_10=<5V>

[display]
lcd_type = st7920
cs_pin = EXP1_7
sclk_pin = EXP1_6
sid_pin = EXP1_8
encoder_pins = ^EXP1_5, ^EXP1_3
click_pin = ^!EXP1_2

[pwm_cycle_time beeper]
pin = EXP1_1
shutdown_value = 0
cycle_time = 0.001

[firmware_retraction]
retract_length = 1.0
retract_speed = 80
unretract_extra_length = 0
unretract_speed = 80

[pwm_tool Laser]
pin = PA6
cycle_time = 0.0001
shutdown_value = 0
maximum_mcu_duration = 5

[bed_mesh 70]
version = 1
points = 
	-0.045000, 0.027500, 0.015000
	-0.055000, -0.005000, -0.035000
	-0.007500, 0.040000, -0.002500
x_count = 3
y_count = 3
mesh_x_pps = 2
mesh_y_pps = 3
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 195.0
min_y = 20.0
max_y = 210.0

[bed_mesh default]
version = 1
points = 
	0.020000, 0.025000, 0.030000, -0.007500, -0.052500
	0.015000, 0.017500, 0.022500, -0.007500, -0.057500
	0.030000, 0.030000, 0.037500, 0.002500, -0.035000
	0.012500, 0.030000, 0.050000, 0.035000, -0.010000
	0.080000, 0.087500, 0.115000, 0.097500, 0.067500
x_count = 5
y_count = 5
mesh_x_pps = 2
mesh_y_pps = 3
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 195.0
min_y = 20.0
max_y = 210.0
=======================
Config error
Traceback (most recent call last):
  File "/home/klipper/klipper/klippy/klippy.py", line 130, in _connect
    self._read_config()
  File "/home/klipper/klipper/klippy/klippy.py", line 123, in _read_config
    self.load_object(config, section_config.get_name(), None)
  File "/home/klipper/klipper/klippy/klippy.py", line 112, in load_object
    self.objects[section] = init_func(config.getsection(section))
  File "/home/klipper/klipper/klippy/extras/gcode_macro.py", line 194, in load_config_prefix
    return GCodeMacro(config)
  File "/home/klipper/klipper/klippy/extras/gcode_macro.py", line 137, in __init__
    self.gcode.register_command(self.alias, self.cmd,
  File "/home/klipper/klipper/klippy/gcode.py", line 137, in register_command
    raise self.printer.config_error(
configparser.Error: Can't register 'BACKUP_ON_GIT-HUB' as it is an invalid name
webhooks client 281473325183232: New connection
webhooks client 281473325183232: Client info {'program': 'Moonraker', 'version': 'v0.9.3-4-ga4604e3'}
webhooks client 281473325183232: Disconnected
Restarting printer
Start printer at Wed Dec 25 21:06:31 2024 (1735149991.2 2974.2)
===== Config file =====
[virtual_sdcard]
path = /home/klipper/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[pause_resume]

[display_status]

[respond]

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = BASE_CANCEL_PRINT
gcode = 
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	TURN_OFF_HEATERS
	M107
	G91
	G1 E-{E} F1500
	G90
	CLEAR_PAUSE
	SDCARD_RESET_FILE
	BASE_CANCEL_PRINT
	PARK

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = BASE_PAUSE
gcode = 
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	SAVE_GCODE_STATE NAME=PAUSE_STATE
	BASE_PAUSE
	G91
	G1 E-{E} F1500
	G90
	PARK

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = BASE_RESUME
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	G91
	G1 E{E} F1500
	G90
	RESTORE_GCODE_STATE NAME=PAUSE_STATE MOVE=1
	BASE_RESUME

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[gcode_macro _CLIENT_LINEAR_MOVE]
description = Linear move with save and restore of the gcode state
gcode = 
	{% set x_move = "X" ~ params.X if params.X is defined else "" %}
	{% set y_move = "Y" ~ params.Y if params.Y is defined else "" %}
	{% set z_move = "Z" ~ params.Z if params.Z is defined else "" %}
	{% set e_move = "E" ~ params.E if params.E is defined else "" %}
	{% set rate = "F" ~ params.F if params.F is defined else "" %}
	{% set ABSOLUTE = params.ABSOLUTE | default(0) | int != 0 %}
	{% set ABSOLUTE_E = params.ABSOLUTE_E | default(0) | int != 0 %}
	SAVE_GCODE_STATE NAME=_client_movement
	{% if x_move or y_move or z_move %}
	G9{ 0 if ABSOLUTE else 1 }
	{% endif %}
	{% if e_move %}
	M8{ 2 if ABSOLUTE_E else 3 }
	{% endif %}
	G1 { x_move } { y_move } { z_move } { e_move } { rate }
	RESTORE_GCODE_STATE NAME=_client_movement

[gcode_macro list_sensors]
gcode = 
	{ action_respond_info(printer.heaters.available_heaters | join(', ')) }
	{ action_respond_info(printer.heaters.available_sensors | join(', ')) }

[gcode_macro Power_OFF]
gcode = SET_PIN PIN=Power VALUE=0

[gcode_macro _POWER_OFF_PRINTER]
gcode = SET_PIN PIN=Power VALUE=0

[gcode_macro ACTIVATE_POWER_OFF]
gcode = 
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK_ACT DURATION=60

[gcode_macro DEACTIVATE_POWER_OFF]
gcode = 
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK_ACT DURATION=0

[delayed_gcode POWER_OFF_PRINTER_CHECK_ACT]
gcode = 
	{% if printer.idle_timeout.state == "Idle" or printer.idle_timeout.state == "Ready" %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=30
	{% else %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK_ACT DURATION=60
	{% endif %}

[delayed_gcode POWER_OFF_PRINTER_CHECK]
gcode = 
	{% if printer.idle_timeout.state == "Idle" or printer.idle_timeout.state == "Ready" %}
	{% if printer.extruder.temperature < 50.0 and printer.heater_bed.temperature < 50.0 %}
	{% if printer.extruder.target == 0.0 and printer.heater_bed.target == 0.0 %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=0
	_POWER_OFF_PRINTER
	{% else %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=2
	{% endif %}
	{% else %}
	{% if printer.idle_timeout.state == "Printing" %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=0
	{% else %}
	{% if printer.extruder.target == 0.0 and printer.heater_bed.target == 0.0 %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=2
	{% else %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=0
	{% endif %}
	{% endif %}
	{% endif %}
	{% endif %}

[gcode_macro M141]
gcode = SET_HEATER_TEMPERATURE HEATER=chamber_heater TARGET={params.S|default(0)}

[gcode_macro M80]
gcode = SET_PIN PIN=Power  VALUE=1

[gcode_macro M81]
gcode = 
	
	SET_PIN PIN=Power VALUE=0

[gcode_macro M486]
gcode = 
	
	
	
	
	
	
	
	
	
	
	
	{% if 'exclude_object' not in printer %}
	{action_raise_error("[exclude_object] is not enabled")}
	{% endif %}
	
	{% if 'T' in params %}
	EXCLUDE_OBJECT RESET=1
	
	{% for i in range(params.T | int) %}
	EXCLUDE_OBJECT_DEFINE NAME={i}
	{% endfor %}
	{% endif %}
	
	{% if 'C' in params %}
	EXCLUDE_OBJECT CURRENT=1
	{% endif %}
	
	{% if 'P' in params %}
	EXCLUDE_OBJECT NAME={params.P}
	{% endif %}
	
	{% if 'S' in params %}
	{% if params.S == '-1' %}
	{% if printer.exclude_object.current_object %}
	EXCLUDE_OBJECT_END NAME={printer.exclude_object.current_object}
	{% endif %}
	{% else %}
	EXCLUDE_OBJECT_START NAME={params.S}
	{% endif %}
	{% endif %}
	
	{% if 'U' in params %}
	EXCLUDE_OBJECT RESET=1 NAME={params.U}
	{% endif %}

[gcode_macro M190]
rename_existing = M190.1
gcode = 
	{% if printer["gcode_macro status_heating"] != null %}
	status_heating
	{% endif %}
	M190.1 { rawparams }
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro _CHOME]
gcode = 
	{% if printer["gcode_macro status_homing"] != null %}
	status_homing
	{% endif %}
	{% if printer.toolhead.homed_axes != "xyz" %}
	G28
	{% endif %}
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro M109]
rename_existing = M109.1
gcode = 
	{% if printer["gcode_macro status_heating"] != null %}
	status_heating
	{% endif %}
	M109.1 { rawparams }
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro _MOVE_AWAY]
gcode = 
	{% set th = printer.toolhead %}
	{% set x_safe = th.position.x + 20 * (1 if th.axis_maximum.x - th.position.x > 20 else -1) %}
	{% set y_safe = th.position.y + 20 * (1 if th.axis_maximum.y - th.position.y > 20 else -1) %}
	{% set z_safe = [th.position.z + 2, th.axis_maximum.z]|min %}
	
	G90
	G0 X{x_safe} Y{y_safe} Z{z_safe} F20000

[gcode_macro PARK_CENTER_REAR]
gcode = 
	{% if printer["gcode_macro status_busy"] != null %}
	status_busy
	{% endif %}
	{% set th = printer.toolhead %}
	{% set x_safe = th.position.x + 20 * (1 if th.axis_maximum.x - th.position.x > 20 else -1) %}
	{% set y_safe = th.position.y + 20 * (1 if th.axis_maximum.y - th.position.y > 20 else -1) %}
	
	G0 X{th.axis_maximum.x//2} Y{th.axis_maximum.y - 2} F3600
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro START_PRINT]
variable_retract = 15
gcode = 
	{% set chamber_temp = params.CHAMBER_TEMP|default(0)|float %}
	{% set extruder_temp = params.EXTRUDER_TEMP|default(210)|float %}
	{% set bed_temp = params.BED_TEMP|default(60)|float %}
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	CLEAR_PAUSE
	G28
	Smart_Park
	M220 S100
	M221 S100
	SET_HEATER_TEMPERATURE HEATER=chamber_heater TARGET={chamber_temp}
	SET_HEATER_TEMPERATURE HEATER=heater_bed TARGET={bed_temp}
	TEMPERATURE_WAIT SENSOR=heater_bed MINIMUM={bed_temp * 0.75}
	SET_HEATER_TEMPERATURE HEATER=extruder TARGET={extruder_temp}
	G90
	M82
	TEMPERATURE_WAIT SENSOR=heater_bed MINIMUM={bed_temp}
	TEMPERATURE_WAIT SENSOR=extruder MINIMUM={extruder_temp}
	
	G1 E-15 F3600
	
	G28
	BED_MESH_CALIBRATE
	PRIME_LINE

[gcode_macro pid_soplo]
gcode = 
	PID_CALIBRATE HEATER=extruder TARGET=250

[gcode_macro pid_bed]
gcode = 
	PID_CALIBRATE HEATER=heater_bed TARGET=105

[gcode_macro BED]
gcode = 
	PROBE_CALIBRATE

[gcode_macro END_PRINT]
gcode = 
	
	{% set max_x = printer.configfile.config["stepper_x"]["position_max"]|float %}
	{% set max_y = printer.configfile.config["stepper_y"]["position_max"]|float %}
	{% set max_z = printer.configfile.config["stepper_z"]["position_max"]|float %}
	
	
	{% if printer.toolhead.position.x < (max_x - 20) %}
	{% set x_safe = 20.0 %}
	{% else %}
	{% set x_safe = -20.0 %}
	{% endif %}
	
	{% if printer.toolhead.position.y < (max_y - 20) %}
	{% set y_safe = 20.0 %}
	{% else %}
	{% set y_safe = -20.0 %}
	{% endif %}
	
	{% if printer.toolhead.position.z < (max_z - 2) %}
	{% set z_safe = 2.0 %}
	{% else %}
	{% set z_safe = max_z - printer.toolhead.position.z %}
	{% endif %}
	
	
	M400
	G92 E0
	G1 E-15 F3600
	G91
	G0 Z{z_safe} F3600
	G0 X{x_safe} Y{y_safe} F20000
	
	
	M104 S0
	M104 S0
	M140 S0
	M106 S0
	G90
	G0 X{max_x / 2} Y{max_y} F3600
	
	SONG_CRAB_RAVE
	
	
	
	M117 Finished!
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=30

[gcode_macro M300]
gcode = 
	
	{% set S = params.S|default(1000)|int %}
	
	{% set P = params.P|default(100)|int %}
	
	
	{% set V = params.V|default(99)|int %}
	SET_PIN PIN=beeper VALUE={0.1 * (V / 100) if S > 0 else 1} CYCLE_TIME={ 1.0 / S if S > 0 else 1 }
	G4 P{P}
	SET_PIN PIN=beeper VALUE=0 CYCLE_TIME={ 0.001 }
description = 
	"Plays a beep sound.
	@param {int} [S=1000] - Frequency in Hz
	@param {int} [P=100] - Duration in ms
	@param {int} [V=99] - Volume in percent"

[gcode_macro PRIME_LINE]
gcode = 
	{% set feedrate = params.F|default(10)|float * 60 %}
	{% set length = 100.0 %}
	{% set width = printer.configfile.settings.extruder.nozzle_diameter|float %}
	{% set height = ( (width / 0.04)|int - (width / 0.04 / 4)|int )|float * 0.04 %}
	
	{% set extrude = length * width * height * 1.5 %}
	SAVE_GCODE_STATE NAME=PRIME_LINE_STATE
	SET_IDLE_TIMEOUT TIMEOUT=7200
	{% if 'Y' in params %}
	{% set x_start = 1.0 %}
	{% set y_start = (printer.toolhead.axis_maximum.y|float - 100) / 2 %}
	G0 X{x_start} Y{y_start} F5000
	G0 Z{height} F1500
	G91
	
	G1 E8 F300
	
	
	G1 Y100 E{extrude} F{feedrate}
	G0 X{width} F5000
	G1 Y-100 E{extrude} F{feedrate}
	{% else %}
	{% set x_start = (printer.toolhead.axis_maximum.x|float - 100) / 2 %}
	{% set y_start = 1.0 %}
	G0 X{x_start} Y{y_start} F5000
	G0 Z{height} F1500
	G91
	
	G1 E8 F300
	
	
	G1 X100 E{extrude} F{feedrate}
	G0 Y{width} F5000
	G1 X-100 E{extrude} F{feedrate}
	{% endif %}
	RESTORE_GCODE_STATE NAME=PRIME_LINE_STATE

[gcode_macro VINT]
gcode = 
	SCREWS_TILT_CALCULATE

[gcode_macro LOW_TEMP_CHECK]
gcode = 
	{% set extruder_temp = params.T|default(240)|float %}
	{% if printer.extruder.target > extruder_temp %}
	{% set extruder_temp = printer.extruder.target %}
	{% endif %}
	{% if printer.extruder.temperature < extruder_temp %}
	M118 Heating to {extruder_temp}
	SET_HEATER_TEMPERATURE HEATER=extruder TARGET={extruder_temp}
	TEMPERATURE_WAIT SENSOR=extruder MINIMUM={extruder_temp}
	{% endif %}

[gcode_macro M76]
gcode = 
	PAUSE

[gcode_macro M601]
gcode = 
	PAUSE

[gcode_macro G27]
gcode = 
	PARK

[gcode_macro M125]
gcode = 
	PARK

[gcode_macro M600]
gcode = 
	PAUSE

[gcode_macro M701]
gcode = 
	FILAMENT_LOAD

[gcode_macro M702]
gcode = 
	FILAMENT_UNLOAD

[gcode_macro M500]
gcode = 
	SAVE_CONFIG

[gcode_macro PARK]
gcode = 
	{% set x_park = params.X|default(0)|float %}
	{% set y_park = params.Y|default(0)|float %}
	{% set z_park = params.Z|default(10)|float + printer.toolhead.position.z|float %}
	{% set x_max = printer.toolhead.axis_maximum.x|float %}
	{% set y_max = printer.toolhead.axis_maximum.y|float %}
	{% set z_max = printer.toolhead.axis_maximum.z|float %}
	{% if x_park > x_max %}
	{% set x_park = x_max %}
	{% endif %}
	{% if y_park > y_max %}
	{% set y_park = y_max %}
	{% endif %}
	{% if z_park > z_max %}
	{% set z_park = z_max %}
	{% endif %}
	SAVE_GCODE_STATE NAME=PARK_STATE
	G90
	G1 Z{z_park} F1500
	G1 X{x_park} Y{y_park} F5000
	RESTORE_GCODE_STATE name=PARK_STATE

[gcode_macro START_DRYER]
description = Start the heated bed filament dryer.
gcode = 
	{% set ChamberTemperature = params.CHAMBER | default(65.0) | float %}
	{% set BedTemperature = params.TEMPERATURE | default(0.0) | float %}
	{% set DryTime = params.TIME | default(14400) | int %}
	M140 S{BedTemperature}
	M141 S{ChamberTemperature}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=time_remaining VALUE={DryTime}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=bed_temperature VALUE={BedTemperature}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=chamber_temperature VALUE={ChamberTemperature}
	UPDATE_DELAYED_GCODE ID=DRYER_TIMER DURATION=1

[gcode_macro STOP_DRYER]
gcode = 
	M140 S0
	M141 S0
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=time_remaining VALUE=0
	UPDATE_DELAYED_GCODE ID=DRYER_TIMER DURATION=0
	M117 Drying Stopped

[gcode_macro DRYER_STATUS]
variable_time_remaining = 0
variable_bed_temperature = 0
variable_chamber_temperature = 0
gcode = 
	{% if time_remaining > 0 %}
	M140 S{bed_temperature}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=time_remaining VALUE={time_remaining - 1}
	M117 Drying {time_remaining}
	{% else %}
	STOP_DRYER
	{% endif %}

[delayed_gcode DRYER_TIMER]
gcode = 
	UPDATE_DELAYED_GCODE ID=DRYER_TIMER DURATION=1
	DRYER_STATUS

[gcode_macro DRY_tpu]
gcode = 
	START_DRYER TEMPERATURE=0 CHAMBER=50 TIME=18000

[gcode_macro DRY_PETG]
gcode = 
	START_DRYER TEMPERATURE=0  CHAMBER=65 TIME=18000

[gcode_macro DRY_ABS]
gcode = 
	{% set S = params.S|default(0.0)|float %}
	SET_PIN PIN=Laser VALUE={S / 255.0}

[gcode_macro M4]
gcode = 
	{% set S = params.S|default(0.0)|float %}
	SET_PIN PIN=Laser VALUE={S / 255.0}

[gcode_macro M5]
gcode = 
	SET_PIN PIN=Laser VALUE=0

[menu __main __control __toolonoff]
type = input
enable = {'pwm_tool Laser' in printer}
name = Fan: {'ON ' if menu.input else 'OFF'}
input = {printer['pwm_tool Laser'].value}
input_min = 0
input_max = 1
input_step = 1
gcode = 
	M3 S{255 if menu.input else 0}

[menu __main __control __toolspeed]
type = input
enable = {'pwm_tool Laser' in printer}
name = Laser speed: {'%3d' % (menu.input*100)}%
input = {printer['pwm_tool Laser'].value}
input_min = 0
input_max = 1
input_step = 0.01
gcode = 
	M3 S{'%d' % (menu.input*255)}

[gcode_macro NOTE]
description = 
	"Plays a specified note for a specified duration
	@param {string} [N=C5] - Note to play
	@param {int} [D=500] - Duration of note. There are currently some Klipper limitations to how short a note can be.
	@param {int} [V=99] - Volume in percent
	@param {bool} [S=true] - Whether or not to stop the note after duration"
gcode = 
	{% set notes = {
	'C0': 16.35,   'CS0': 17.32,   'D0': 18.35,   'DS0': 19.45,   'E0': 20.60,   'F0': 21.83,   'FS0': 23.12,   'G0': 24.50,   'GS0': 25.96,   'A0': 27.50,   'AS0': 29.14,   'B0': 30.87,
	'C1': 32.70,   'CS1': 34.65,   'D1': 36.71,   'DS1': 38.89,   'E1': 41.20,   'F1': 43.65,   'FS1': 46.25,   'G1': 49.00,   'GS1': 51.91,   'A1': 55.00,   'AS1': 58.27,   'B1': 61.74,
	'C2': 65.41,   'CS2': 69.30,   'D2': 73.42,   'DS2': 77.78,   'E2': 82.41,   'F2': 87.31,   'FS2': 92.50,   'G2': 98.00,   'GS2': 103.83,  'A2': 110.00,  'AS2': 116.54,  'B2': 123.47,
	'C3': 130.81,  'CS3': 138.59,  'D3': 146.83,  'DS3': 155.56,  'E3': 164.81,  'F3': 174.61,  'FS3': 185.00,  'G3': 196.00,  'GS3': 207.65,  'A3': 220.00,  'AS3': 233.08,  'B3': 246.94,
	'C4': 261.63,  'CS4': 277.18,  'D4': 293.66,  'DS4': 311.13,  'E4': 329.63,  'F4': 349.23,  'FS4': 369.99,  'G4': 392.00,  'GS4': 415.30,  'A4': 440.00,  'AS4': 466.16,  'B4': 493.88,
	'C5': 523.25,  'CS5': 554.37,  'D5': 587.33,  'DS5': 622.25,  'E5': 659.26,  'F5': 698.46,  'FS5': 739.99,  'G5': 783.99,  'GS5': 830.61,  'A5': 880.00,  'AS5': 932.33,  'B5': 987.77,
	'C6': 1046.50, 'CS6': 1108.73, 'D6': 1174.66, 'DS6': 1244.51, 'E6': 1318.51, 'F6': 1396.91, 'FS6': 1479.98, 'G6': 1567.98, 'GS6': 1661.22, 'A6': 1760.00, 'AS6': 1864.66, 'B6': 1975.53,
	'C7': 2093.00, 'CS7': 2217.46, 'D7': 2349.32, 'DS7': 2489.02, 'E7': 2637.02, 'F7': 2793.83, 'FS7': 2959.96, 'G7': 3135.96, 'GS7': 3322.44, 'A7': 3520.00, 'AS7': 3729.31, 'B7': 3951.07,
	'C8': 4186.01, 'CS8': 4434.92, 'D8': 4698.64, 'DS8': 4978.03, 'E8': 5274.04, 'F8': 5587.65, 'FS8': 5919.91, 'G8': 6271.93, 'GS8': 6644.88, 'A8': 7040.00, 'AS8': 7458.62, 'B8': 7902.13,
	} %}
	
	{% set note = params.N|default('C5')|string %}
	
	{% set dur = params.D|default(500)|int %}
	
	
	{% set volume = params.V|default(99)|int %}
	
	{% set stop = params.S|default('true')|string %}
	
	{% set freq = notes[note] %}
	
	SET_PIN PIN=beeper VALUE={0.1 * (volume / 100) if volume > 0 else 1} CYCLE_TIME={ 1.0 / freq }
	G4 P{dur}
	{% if stop|lower == 'true' %}
	SET_PIN PIN=beeper VALUE=0 CYCLE_TIME={ 0.001 }
	{% endif %}

[gcode_macro TONE_GEN]
description = "Used for the tone generator menu"
variable_tone_freq = 0.001093
gcode = 
	M117 {printer["gcode_macro TONE_GEN"].tone_freq}nothz

[gcode_macro SONG_STAR_WARS_MAIN_THEME]
description = "Plays the Star Wars main theme"
gcode = 
	NOTE N=D4 D=133
	NOTE N=D4 D=133
	NOTE N=D4 D=133
	NOTE N=G4 D=1000
	NOTE N=D5 D=1000
	
	NOTE N=C5 D=133
	NOTE N=B4 D=133
	NOTE N=A4 D=133
	NOTE N=G5 D=1000
	NOTE N=D5 D=500
	
	NOTE N=C5 D=133
	NOTE N=B4 D=133
	NOTE N=A4 D=133
	NOTE N=G5 D=1000
	NOTE N=D5 D=500
	
	NOTE N=C5 D=133
	NOTE N=B4 D=133
	NOTE N=C5 D=133
	NOTE N=A4 D=1000

[gcode_macro SONG_CRAB_RAVE]
description = "Plays Crab Rave"
gcode = 
	NOTE N=D6 D=150 V=30 S=1
	NOTE N=AS6 D=150 V=30 S=1
	NOTE N=G6 D=150 V=30 S=1
	NOTE N=G6 D=150 V=30 S=0
	NOTE N=D6 D=150 V=30 S=1
	NOTE N=D6 D=150 V=30 S=0
	NOTE N=A6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=0
	NOTE N=D6 D=150 V=30 S=1
	NOTE N=D6 D=150 V=30 S=0
	NOTE N=A6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=0
	NOTE N=C6 D=150 V=30 S=1
	NOTE N=C6 D=150 V=30 S=1
	NOTE N=E6 D=150 V=30 S=1
	NOTE N=E6 D=150 V=30 S=0
	NOTE N=F6 D=150 V=30 S=1
	SET_PIN PIN=beeper VALUE=0

[gcode_macro one]
description = "one"
gcode = 
	NOTE N=C6 D=600 V=30 S=1
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=G5 D=400 V=30 S=1
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=E6 D=400 V=30 S=1
	G4 P150
	NOTE N=G6 D=180 V=30 S=0
	NOTE N=F6 D=180 V=30 S=0
	NOTE N=E6 D=180 V=30 S=0
	NOTE N=D6 D=180 V=30 S=1
	NOTE N=C6 D=600 V=30 S=1
	
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=G5 D=400 V=30 S=1
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=C6 D=600 V=30 S=1
	SET_PIN PIN=beeper VALUE=0

[gcode_macro SONG_BOOMER]
description = "BOOMER"
gcode = 
	M300 P207 S659
	M300 P207 S784
	M300 P207 S494
	M300 P207 S494
	M300 P207 S392
	M300 P207 S494
	M300 P207 S494
	M300 P207 S330
	M300 P207 S784
	M300 P207 S659
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S988
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S659
	M300 P207 S784
	M300 P207 S494
	M300 P207 S494
	M300 P207 S392
	M300 P207 S494
	M300 P207 S494
	M300 P207 S330
	M300 P207 S784
	M300 P207 S659
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S988
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S659
	M300 P207 S784
	M300 P207 S494
	M300 P207 S494
	M300 P207 S392
	M300 P207 S494
	M300 P207 S494
	M300 P207 S330
	M300 P207 S784
	M300 P207 S659
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S988
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330

[gcode_macro GET_TIMELAPSE_SETUP]
description = Print the Timelapse setup
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% set output_txt = ["Timelapse Setup:"] %}
	{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}
	{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}
	{% if tl.park.enable %}
	{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}
	{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}
	{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}
	{% endif %}
	{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}
	{% if not tl.extruder.fw_retract %}
	{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}
	{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}
	{% endif %}
	{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}
	{action_respond_info(output_txt|join("\n"))}

[gcode_macro _SET_TIMELAPSE_SETUP]
description = Set user parameters for timelapse
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	
	{% set min = printer.toolhead.axis_minimum %}
	{% set max = printer.toolhead.axis_maximum %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	{% set park = {'min'   : {'x': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),
	'y': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},
	'max'   : {'x': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),
	'y': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},
	'center': {'x': (max.x-(max.x-min.x)/2)|round(3),
	'y': (max.y-(max.y-min.y)/2)|round(3)}} %}
	
	{% if params.ENABLE %}
	{% if params.ENABLE|lower is in ['true', 'false'] %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == 'true' else False}
	{% else %}
	{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.VERBOSE %}
	{% if params.VERBOSE|lower is in ['true', 'false'] %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == 'true' else False}
	{% else %}
	{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_X %}
	{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}
	{% set _dummy = tl.park.custom.update({'x':params.CUSTOM_POS_X|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_Y %}
	{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}
	{% set _dummy = tl.park.custom.update({'y':params.CUSTOM_POS_Y|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_DZ %}
	{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}
	{% set _dummy = tl.park.custom.update({'dz':params.CUSTOM_POS_DZ|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}
	{% endif %}
	{% endif %}
	{% if params.PARK_ENABLE %}
	{% if params.PARK_ENABLE|lower is in ['true', 'false'] %}
	{% set _dummy = tl.park.update({'enable':True if params.PARK_ENABLE|lower == 'true' else False}) %}
	{% else %}
	{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.PARK_POS %}
	{% if params.PARK_POS|lower is in ['center','front_left','front_right','back_left','back_right','custom','x_only','y_only'] %}
	{% set dic = {'center'      : {'x': park.center.x   , 'y': park.center.y   , 'dz': 1                },
	'front_left'  : {'x': park.min.x      , 'y': park.min.y      , 'dz': 0                },
	'front_right' : {'x': park.max.x      , 'y': park.min.y      , 'dz': 0                },
	'back_left'   : {'x': park.min.x      , 'y': park.max.y      , 'dz': 0                },
	'back_right'  : {'x': park.max.x      , 'y': park.max.y      , 'dz': 0                },
	'custom'      : {'x': tl.park.custom.x, 'y': tl.park.custom.y, 'dz': tl.park.custom.dz},
	'x_only'      : {'x': tl.park.custom.x, 'y': 'none'          , 'dz': tl.park.custom.dz},
	'y_only'      : {'x': 'none'          , 'y': tl.park.custom.y, 'dz': tl.park.custom.dz}} %}
	{% set _dummy = tl.park.update({'pos':params.PARK_POS|lower}) %}
	{% set _dummy = tl.park.update({'coord':dic[tl.park.pos]}) %}
	{% else %}
	{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"
	% params.PARK_POS|upper)}
	{% endif %}
	{% endif %}
	{% if params.PARK_TIME %}
	{% if params.PARK_TIME|float >= 0.0 %}
	{% set _dummy = tl.park.update({'time':params.PARK_TIME|float|round(3)}) %}
	{% else %}
	{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"
	{% if params.TRAVEL_SPEED %}
	{% if params.TRAVEL_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'travel':params.TRAVEL_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}
	{% endif %}
	{% endif %}
	{% if params.RETRACT_SPEED %}
	{% if params.RETRACT_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'retract':params.RETRACT_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}
	{% endif %}
	{% endif %}
	{% if params.EXTRUDE_SPEED %}
	{% if params.EXTRUDE_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'extrude':params.EXTRUDE_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"
	{% if params.EXTRUDE_DISTANCE %}
	{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}
	{% set _dummy = tl.extruder.update({'extrude':params.EXTRUDE_DISTANCE|float|round(3)}) %}
	{% else %}
	{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}
	{% endif %}
	{% endif %}
	{% if params.RETRACT_DISTANCE %}
	{% if params.RETRACT_DISTANCE|float >= 0.0 %}
	{% set _dummy = tl.extruder.update({'retract':params.RETRACT_DISTANCE|float|round(3)}) %}
	{% else %}
	{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}
	{% endif %}
	{% endif %}
	{% if params.FW_RETRACT %}
	{% if params.FW_RETRACT|lower is in ['true', 'false'] %}
	{% if 'firmware_retraction' in printer.configfile.settings %}
	{% set _dummy = tl.extruder.update({'fw_retract': True if params.FW_RETRACT|lower == 'true' else False}) %}
	{% else %}
	{% set _dummy = tl.extruder.update({'fw_retract':False}) %}
	{% if params.FW_RETRACT|capitalize == 'True' %}
	{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}
	{% endif %}
	{% endif %}
	{% else %}
	{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"
	{% if printer.configfile.settings['gcode_macro pause'] is defined %}
	{% set _dummy = tl.macro.update({'pause': printer.configfile.settings['gcode_macro pause'].rename_existing}) %}
	{% endif %}
	{% if printer.configfile.settings['gcode_macro resume'] is defined %}
	{% set _dummy = tl.macro.update({'resume': printer.configfile.settings['gcode_macro resume'].rename_existing}) %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"

[gcode_macro TIMELAPSE_TAKE_FRAME]
description = Take Timelapse shoot
variable_enable = False
variable_takingframe = False
variable_park = {'enable': False,
	'pos'   : 'center',
	'time'  : 0.1,
	'custom': {'x': 0, 'y': 0, 'dz': 0},
	'coord' : {'x': 0, 'y': 0, 'dz': 0}}
variable_extruder = {'fw_retract': False,
	'retract': 1.0,
	'extrude': 1.0}
variable_speed = {'travel': 100,
	'retract': 15,
	'extrude': 15}
variable_verbose = True
variable_restore = {'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}
variable_macro = {'pause': 'PAUSE', 'resume': 'RESUME'}
variable_is_paused = False
gcode = 
	{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower =='true' else False %}
	{% if enable %}
	{% if (hyperlapse and printer['gcode_macro HYPERLAPSE'].run) or
	(not hyperlapse and not printer['gcode_macro HYPERLAPSE'].run) %}
	{% if park.enable %}
	{% set pos = {'x': 'X' + park.coord.x|string if park.pos != 'y_only' else '',
	'y': 'Y' + park.coord.y|string if park.pos != 'x_only' else '',
	'z': 'Z'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}
	{% set restore = {'absolute': {'coordinates': printer.gcode_move.absolute_coordinates,
	'extrude'    : printer.gcode_move.absolute_extrude},
	'speed'   : printer.gcode_move.speed,
	'e'       : printer.gcode_move.gcode_position.e,
	'factor'  : {'speed'  : printer.gcode_move.speed_factor,
	'extrude': printer.gcode_move.extrude_factor}} %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"
	{% if not printer[printer.toolhead.extruder].can_extrude %}
	{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}
	{% else %}
	{% if extruder.fw_retract %}
	G10
	{% else %}
	M83
	G0 E-{extruder.retract} F{speed.retract * 60}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True
	{macro.pause}
	SET_GCODE_OFFSET X=0 Y=0
	G90
	{% if "xyz" not in printer.toolhead.homed_axes %}
	{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}
	{% else %}
	G0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5
	M400
	{% endif %}
	_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}
	{% endif %}
	{% else %}
	{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}
	{% endif %}

[gcode_macro _TIMELAPSE_NEW_FRAME]
description = action call for timelapse shoot. must be a seperate macro
gcode = 
	{action_call_remote_method("timelapse_newframe",
	macropark=printer['gcode_macro TIMELAPSE_TAKE_FRAME'].park,
	hyperlapse=params.HYPERLAPSE)}

[delayed_gcode _WAIT_TIMELAPSE_TAKE_FRAME]
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% set factor = {'speed': printer.gcode_move.speed_factor, 'extrude': printer.gcode_move.extrude_factor} %}
	{% if tl.takingframe %}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5
	{% else %}
	{tl.macro.resume} VELOCITY={tl.speed.travel}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False
	{% if not printer[printer.toolhead.extruder].can_extrude %}
	{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}
	{% else %}
	{% if tl.extruder.fw_retract %}
	G11
	{% else %}
	G0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}
	G0 F{tl.restore.speed}
	{% if tl.restore.absolute.extrude %}
	M82
	G92 E{tl.restore.e}
	{% endif %}
	{% endif %}
	{% endif %}
	{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}
	{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}
	{% if not tl.restore.absolute.coordinates %} G91 {% endif %}
	{% endif %}

[gcode_macro HYPERLAPSE]
description = Start/Stop a hyperlapse recording
variable_cycle = 0
variable_run = False
gcode = 
	{% set cycle = params.CYCLE|default(30)|int %}
	{% if params.ACTION and params.ACTION|lower == 'start' %}
	{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}
	TIMELAPSE_TAKE_FRAME HYPERLAPSE=True
	{% elif params.ACTION and params.ACTION|lower == 'stop' %}
	{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0
	{% else %}
	{action_raise_error("Hyperlapse: No valid input parameter
	Use:
	- HYPERLAPSE ACTION=START [CYCLE=time]
	- HYPERLAPSE ACTION=STOP")}
	{% endif %}

[delayed_gcode _HYPERLAPSE_LOOP]
gcode = 
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}
	TIMELAPSE_TAKE_FRAME HYPERLAPSE=True

[gcode_macro TIMELAPSE_RENDER]
description = Render Timelapse video and wait for the result
variable_render = False
variable_run_identifier = 0
gcode = 
	{action_respond_info("Timelapse: Rendering started")}
	{action_call_remote_method("timelapse_render", byrendermacro="True")}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True
	{printer.configfile.settings['gcode_macro pause'].rename_existing}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5

[delayed_gcode _WAIT_TIMELAPSE_RENDER]
gcode = 
	{% set ri = printer['gcode_macro TIMELAPSE_RENDER'].run_identifier % 4 %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}
	{% if printer['gcode_macro TIMELAPSE_RENDER'].render %}
	M117 Rendering {['-','\\','|','/'][ri]}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5
	{% else %}
	{action_respond_info("Timelapse: Rendering finished")}
	M117
	{printer.configfile.settings['gcode_macro resume'].rename_existing}
	{% endif %}

[gcode_macro TEST_STREAM_DELAY]
description = Helper macro to find stream and park delay
gcode = 
	{% set min = printer.toolhead.axis_minimum %}
	{% set max = printer.toolhead.axis_maximum %}
	{% set act = printer.toolhead.position %}
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% if act.z > 5.0 %}
	G0 X{min.x + 5.0} F{tl.speed.travel|int * 60}
	G0 X{(max.x-min.x)/2}
	G4 P{tl.park.time|float * 1000}
	_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE
	G0 X{max.x - 5.0}
	{% else %}
	{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}
	{% endif %}

[exclude_object]

[gcode_macro GIT-HUB]
gcode = 
	{% set message = params.MESSAGE|default() %}
	{% if message %}
	RUN_SHELL_COMMAND CMD=update_git_script_message PARAMS="'{params.MESSAGE}'"
	{% else %}
	RUN_SHELL_COMMAND CMD=update_git_script
	{% endif %}

[gcode_shell_command update_git_script]
command = bash -c "bash $HOME/klipper-backup/script.sh"
timeout = 90.0
verbose = True

[gcode_shell_command update_git_script_message]
command = bash -c "bash $HOME/klipper-backup/script.sh -c \"$0\""
timeout = 90.0
verbose = True

[mcu]
serial = /dev/ttyS3
restart_method = command

[output_pin Power]
pin = PC12
value = 1
shutdown_value = 1

[temperature_sensor orange_pi]
sensor_type = temperature_host
min_temp = 0
max_temp = 100

[heater_generic chamber_heater]
heater_pin = !PA7
sensor_type = ATC Semitec 104GT-2
sensor_pin = PA5
control = watermark
max_power = 1
min_temp = 15
max_temp = 85

[verify_heater chamber_heater]
max_error = 9999
check_gain_time = 9999
hysteresis = 5
heating_gain = 2

[filament_motion_sensor motion_sensor]
detection_length = 50
extruder = extruder
switch_pin = !PC15
pause_on_runout = True
runout_gcode = 
	SONG_CRAB_RAVE

[bltouch]
sensor_pin = ^PC14
control_pin = PA1
x_offset = -40
y_offset = 0.000
z_offset = 1.70
pin_up_reports_not_triggered = False
probe_with_touch_mode = True

[heater_bed]
heater_pin = PC9
sensor_type = ATC Semitec 104GT-2
sensor_pin = PC3
control = pid
pid_kp = 72.553
pid_ki = 1.154
pid_kd = 1139.994
min_temp = 5
max_temp = 125

[heater_fan radiator]
pin = PC7
max_power = 1.0
kick_start_time = 0.600
heater = extruder
heater_temp = 50.0
shutdown_speed = 1

[fan]
pin = PC6

[input_shaper]
shaper_type_x = 2hump_ei
shaper_freq_x = 43.0
shaper_type_y = mzv
shaper_freq_y = 32.6

[printer]
kinematics = cartesian
max_velocity = 300
max_accel = 1900
max_z_velocity = 30
max_z_accel = 100
square_corner_velocity = 4

[bed_mesh]
speed = 150
horizontal_move_z = 9
mesh_min = 10, 20
mesh_max = 195, 210
probe_count = 5
mesh_pps = 2, 3
algorithm = bicubic
bicubic_tension = 0.2
move_check_distance = 9
split_delta_z = .025
fade_start = 1
fade_end = 10
fade_target = 0

[screws_tilt_adjust]
screw1 = 79, 27
screw1_name = Peredniy Leviy
screw2 = 235, 27
screw2_name = Peredniy Praviy
screw3 = 235,197
screw3_name = Zadniy Praviy
screw4 = 79,197
screw4_name = Zadniy Leviy
speed = 120
horizontal_move_z = 9

[safe_z_home]
home_xy_position = 157,115
speed = 50
z_hop = 9.0
z_hop_speed = 20.0

[stepper_x]
step_pin = PB13
dir_pin = !PB12
enable_pin = !PB14
microsteps = 16
rotation_distance = 40
endstop_pin = ^PC0
position_endstop = 0
position_max = 240
position_min = -2
homing_retract_dist = 5
homing_speed = 50
second_homing_speed = 10

[tmc2209 stepper_x]
uart_pin = PC11
tx_pin = PC10
uart_address = 0
run_current = 0.580
stealthchop_threshold = 999999

[stepper_y]
step_pin = PB10
dir_pin = !PB2
enable_pin = !PB11
microsteps = 16
rotation_distance = 40
endstop_pin = ^PC1
position_endstop = 0
homing_retract_dist = 5
homing_speed = 50
second_homing_speed = 10
position_max = 231
position_min = 0

[tmc2209 stepper_y]
uart_pin = PC11
tx_pin = PC10
uart_address = 2
run_current = 0.6
stealthchop_threshold = 999999

[stepper_z]
step_pin = PB0
dir_pin = PC5
enable_pin = !PB1
microsteps = 16
rotation_distance = 40
gear_ratio = 80:16
full_steps_per_rotation = 200
endstop_pin = probe:z_virtual_endstop
homing_retract_dist = 9
second_homing_speed = 10
position_min = -5
position_max = 245
homing_speed = 50

[tmc2209 stepper_z]
uart_pin = PC11
tx_pin = PC10
uart_address = 1
run_current = 0.580
stealthchop_threshold = 999999
interpolate = false

[extruder]
step_pin = PB3
dir_pin = PB4
enable_pin = !PD2
microsteps = 16
rotation_distance = 4.637
nozzle_diameter = 0.400
filament_diameter = 1.750
heater_pin = PC8
sensor_type = ATC Semitec 104GT-2
sensor_pin = PA0
min_temp = 5
max_temp = 270
max_extrude_only_velocity = 120
max_extrude_only_accel = 3000
pressure_advance = 0.031
full_steps_per_rotation = 200
control = pid
pid_kp = 29.662
pid_ki = 2.382
pid_kd = 92.322

[tmc2209 extruder]
uart_pin = PC11
tx_pin = PC10
uart_address = 3
run_current = 0.7
stealthchop_threshold = 999999

[static_digital_output usb_pullup_enable]
pins = !PA14

[board_pins]
aliases = 
	
	EXP1_1=PB5,  EXP1_3=PA9,   EXP1_5=PA10, EXP1_7=PB8,  EXP1_9=<GND>,
	EXP1_2=PA15, EXP1_4=<RST>, EXP1_6=PB9,  EXP1_8=PB15, EXP1_10=<5V>

[display]
lcd_type = st7920
cs_pin = EXP1_7
sclk_pin = EXP1_6
sid_pin = EXP1_8
encoder_pins = ^EXP1_5, ^EXP1_3
click_pin = ^!EXP1_2

[pwm_cycle_time beeper]
pin = EXP1_1
shutdown_value = 0
cycle_time = 0.001

[firmware_retraction]
retract_length = 1.0
retract_speed = 80
unretract_extra_length = 0
unretract_speed = 80

[pwm_tool Laser]
pin = PA6
cycle_time = 0.0001
shutdown_value = 0
maximum_mcu_duration = 5

[bed_mesh 70]
version = 1
points = 
	-0.045000, 0.027500, 0.015000
	-0.055000, -0.005000, -0.035000
	-0.007500, 0.040000, -0.002500
x_count = 3
y_count = 3
mesh_x_pps = 2
mesh_y_pps = 3
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 195.0
min_y = 20.0
max_y = 210.0

[bed_mesh default]
version = 1
points = 
	0.020000, 0.025000, 0.030000, -0.007500, -0.052500
	0.015000, 0.017500, 0.022500, -0.007500, -0.057500
	0.030000, 0.030000, 0.037500, 0.002500, -0.035000
	0.012500, 0.030000, 0.050000, 0.035000, -0.010000
	0.080000, 0.087500, 0.115000, 0.097500, 0.067500
x_count = 5
y_count = 5
mesh_x_pps = 2
mesh_y_pps = 3
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 195.0
min_y = 20.0
max_y = 210.0
=======================
Config error
Traceback (most recent call last):
  File "/home/klipper/klipper/klippy/klippy.py", line 130, in _connect
    self._read_config()
  File "/home/klipper/klipper/klippy/klippy.py", line 123, in _read_config
    self.load_object(config, section_config.get_name(), None)
  File "/home/klipper/klipper/klippy/klippy.py", line 112, in load_object
    self.objects[section] = init_func(config.getsection(section))
  File "/home/klipper/klipper/klippy/extras/gcode_macro.py", line 194, in load_config_prefix
    return GCodeMacro(config)
  File "/home/klipper/klipper/klippy/extras/gcode_macro.py", line 137, in __init__
    self.gcode.register_command(self.alias, self.cmd,
  File "/home/klipper/klipper/klippy/gcode.py", line 137, in register_command
    raise self.printer.config_error(
configparser.Error: Can't register 'GIT-HUB' as it is an invalid name
webhooks client 281473333683936: New connection
webhooks client 281473333683936: Client info {'program': 'Moonraker', 'version': 'v0.9.3-4-ga4604e3'}
webhooks client 281473333683936: Disconnected
Restarting printer
Start printer at Wed Dec 25 21:06:49 2024 (1735150009.9 2992.9)
===== Config file =====
[virtual_sdcard]
path = /home/klipper/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[pause_resume]

[display_status]

[respond]

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = BASE_CANCEL_PRINT
gcode = 
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	TURN_OFF_HEATERS
	M107
	G91
	G1 E-{E} F1500
	G90
	CLEAR_PAUSE
	SDCARD_RESET_FILE
	BASE_CANCEL_PRINT
	PARK

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = BASE_PAUSE
gcode = 
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	SAVE_GCODE_STATE NAME=PAUSE_STATE
	BASE_PAUSE
	G91
	G1 E-{E} F1500
	G90
	PARK

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = BASE_RESUME
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	G91
	G1 E{E} F1500
	G90
	RESTORE_GCODE_STATE NAME=PAUSE_STATE MOVE=1
	BASE_RESUME

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[gcode_macro _CLIENT_LINEAR_MOVE]
description = Linear move with save and restore of the gcode state
gcode = 
	{% set x_move = "X" ~ params.X if params.X is defined else "" %}
	{% set y_move = "Y" ~ params.Y if params.Y is defined else "" %}
	{% set z_move = "Z" ~ params.Z if params.Z is defined else "" %}
	{% set e_move = "E" ~ params.E if params.E is defined else "" %}
	{% set rate = "F" ~ params.F if params.F is defined else "" %}
	{% set ABSOLUTE = params.ABSOLUTE | default(0) | int != 0 %}
	{% set ABSOLUTE_E = params.ABSOLUTE_E | default(0) | int != 0 %}
	SAVE_GCODE_STATE NAME=_client_movement
	{% if x_move or y_move or z_move %}
	G9{ 0 if ABSOLUTE else 1 }
	{% endif %}
	{% if e_move %}
	M8{ 2 if ABSOLUTE_E else 3 }
	{% endif %}
	G1 { x_move } { y_move } { z_move } { e_move } { rate }
	RESTORE_GCODE_STATE NAME=_client_movement

[gcode_macro list_sensors]
gcode = 
	{ action_respond_info(printer.heaters.available_heaters | join(', ')) }
	{ action_respond_info(printer.heaters.available_sensors | join(', ')) }

[gcode_macro Power_OFF]
gcode = SET_PIN PIN=Power VALUE=0

[gcode_macro _POWER_OFF_PRINTER]
gcode = SET_PIN PIN=Power VALUE=0

[gcode_macro ACTIVATE_POWER_OFF]
gcode = 
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK_ACT DURATION=60

[gcode_macro DEACTIVATE_POWER_OFF]
gcode = 
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK_ACT DURATION=0

[delayed_gcode POWER_OFF_PRINTER_CHECK_ACT]
gcode = 
	{% if printer.idle_timeout.state == "Idle" or printer.idle_timeout.state == "Ready" %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=30
	{% else %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK_ACT DURATION=60
	{% endif %}

[delayed_gcode POWER_OFF_PRINTER_CHECK]
gcode = 
	{% if printer.idle_timeout.state == "Idle" or printer.idle_timeout.state == "Ready" %}
	{% if printer.extruder.temperature < 50.0 and printer.heater_bed.temperature < 50.0 %}
	{% if printer.extruder.target == 0.0 and printer.heater_bed.target == 0.0 %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=0
	_POWER_OFF_PRINTER
	{% else %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=2
	{% endif %}
	{% else %}
	{% if printer.idle_timeout.state == "Printing" %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=0
	{% else %}
	{% if printer.extruder.target == 0.0 and printer.heater_bed.target == 0.0 %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=2
	{% else %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=0
	{% endif %}
	{% endif %}
	{% endif %}
	{% endif %}

[gcode_macro M141]
gcode = SET_HEATER_TEMPERATURE HEATER=chamber_heater TARGET={params.S|default(0)}

[gcode_macro M80]
gcode = SET_PIN PIN=Power  VALUE=1

[gcode_macro M81]
gcode = 
	
	SET_PIN PIN=Power VALUE=0

[gcode_macro M486]
gcode = 
	
	
	
	
	
	
	
	
	
	
	
	{% if 'exclude_object' not in printer %}
	{action_raise_error("[exclude_object] is not enabled")}
	{% endif %}
	
	{% if 'T' in params %}
	EXCLUDE_OBJECT RESET=1
	
	{% for i in range(params.T | int) %}
	EXCLUDE_OBJECT_DEFINE NAME={i}
	{% endfor %}
	{% endif %}
	
	{% if 'C' in params %}
	EXCLUDE_OBJECT CURRENT=1
	{% endif %}
	
	{% if 'P' in params %}
	EXCLUDE_OBJECT NAME={params.P}
	{% endif %}
	
	{% if 'S' in params %}
	{% if params.S == '-1' %}
	{% if printer.exclude_object.current_object %}
	EXCLUDE_OBJECT_END NAME={printer.exclude_object.current_object}
	{% endif %}
	{% else %}
	EXCLUDE_OBJECT_START NAME={params.S}
	{% endif %}
	{% endif %}
	
	{% if 'U' in params %}
	EXCLUDE_OBJECT RESET=1 NAME={params.U}
	{% endif %}

[gcode_macro M190]
rename_existing = M190.1
gcode = 
	{% if printer["gcode_macro status_heating"] != null %}
	status_heating
	{% endif %}
	M190.1 { rawparams }
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro _CHOME]
gcode = 
	{% if printer["gcode_macro status_homing"] != null %}
	status_homing
	{% endif %}
	{% if printer.toolhead.homed_axes != "xyz" %}
	G28
	{% endif %}
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro M109]
rename_existing = M109.1
gcode = 
	{% if printer["gcode_macro status_heating"] != null %}
	status_heating
	{% endif %}
	M109.1 { rawparams }
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro _MOVE_AWAY]
gcode = 
	{% set th = printer.toolhead %}
	{% set x_safe = th.position.x + 20 * (1 if th.axis_maximum.x - th.position.x > 20 else -1) %}
	{% set y_safe = th.position.y + 20 * (1 if th.axis_maximum.y - th.position.y > 20 else -1) %}
	{% set z_safe = [th.position.z + 2, th.axis_maximum.z]|min %}
	
	G90
	G0 X{x_safe} Y{y_safe} Z{z_safe} F20000

[gcode_macro PARK_CENTER_REAR]
gcode = 
	{% if printer["gcode_macro status_busy"] != null %}
	status_busy
	{% endif %}
	{% set th = printer.toolhead %}
	{% set x_safe = th.position.x + 20 * (1 if th.axis_maximum.x - th.position.x > 20 else -1) %}
	{% set y_safe = th.position.y + 20 * (1 if th.axis_maximum.y - th.position.y > 20 else -1) %}
	
	G0 X{th.axis_maximum.x//2} Y{th.axis_maximum.y - 2} F3600
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro START_PRINT]
variable_retract = 15
gcode = 
	{% set chamber_temp = params.CHAMBER_TEMP|default(0)|float %}
	{% set extruder_temp = params.EXTRUDER_TEMP|default(210)|float %}
	{% set bed_temp = params.BED_TEMP|default(60)|float %}
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	CLEAR_PAUSE
	G28
	Smart_Park
	M220 S100
	M221 S100
	SET_HEATER_TEMPERATURE HEATER=chamber_heater TARGET={chamber_temp}
	SET_HEATER_TEMPERATURE HEATER=heater_bed TARGET={bed_temp}
	TEMPERATURE_WAIT SENSOR=heater_bed MINIMUM={bed_temp * 0.75}
	SET_HEATER_TEMPERATURE HEATER=extruder TARGET={extruder_temp}
	G90
	M82
	TEMPERATURE_WAIT SENSOR=heater_bed MINIMUM={bed_temp}
	TEMPERATURE_WAIT SENSOR=extruder MINIMUM={extruder_temp}
	
	G1 E-15 F3600
	
	G28
	BED_MESH_CALIBRATE
	PRIME_LINE

[gcode_macro pid_soplo]
gcode = 
	PID_CALIBRATE HEATER=extruder TARGET=250

[gcode_macro pid_bed]
gcode = 
	PID_CALIBRATE HEATER=heater_bed TARGET=105

[gcode_macro BED]
gcode = 
	PROBE_CALIBRATE

[gcode_macro END_PRINT]
gcode = 
	
	{% set max_x = printer.configfile.config["stepper_x"]["position_max"]|float %}
	{% set max_y = printer.configfile.config["stepper_y"]["position_max"]|float %}
	{% set max_z = printer.configfile.config["stepper_z"]["position_max"]|float %}
	
	
	{% if printer.toolhead.position.x < (max_x - 20) %}
	{% set x_safe = 20.0 %}
	{% else %}
	{% set x_safe = -20.0 %}
	{% endif %}
	
	{% if printer.toolhead.position.y < (max_y - 20) %}
	{% set y_safe = 20.0 %}
	{% else %}
	{% set y_safe = -20.0 %}
	{% endif %}
	
	{% if printer.toolhead.position.z < (max_z - 2) %}
	{% set z_safe = 2.0 %}
	{% else %}
	{% set z_safe = max_z - printer.toolhead.position.z %}
	{% endif %}
	
	
	M400
	G92 E0
	G1 E-15 F3600
	G91
	G0 Z{z_safe} F3600
	G0 X{x_safe} Y{y_safe} F20000
	
	
	M104 S0
	M104 S0
	M140 S0
	M106 S0
	G90
	G0 X{max_x / 2} Y{max_y} F3600
	
	SONG_CRAB_RAVE
	
	
	
	M117 Finished!
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=30

[gcode_macro M300]
gcode = 
	
	{% set S = params.S|default(1000)|int %}
	
	{% set P = params.P|default(100)|int %}
	
	
	{% set V = params.V|default(99)|int %}
	SET_PIN PIN=beeper VALUE={0.1 * (V / 100) if S > 0 else 1} CYCLE_TIME={ 1.0 / S if S > 0 else 1 }
	G4 P{P}
	SET_PIN PIN=beeper VALUE=0 CYCLE_TIME={ 0.001 }
description = 
	"Plays a beep sound.
	@param {int} [S=1000] - Frequency in Hz
	@param {int} [P=100] - Duration in ms
	@param {int} [V=99] - Volume in percent"

[gcode_macro PRIME_LINE]
gcode = 
	{% set feedrate = params.F|default(10)|float * 60 %}
	{% set length = 100.0 %}
	{% set width = printer.configfile.settings.extruder.nozzle_diameter|float %}
	{% set height = ( (width / 0.04)|int - (width / 0.04 / 4)|int )|float * 0.04 %}
	
	{% set extrude = length * width * height * 1.5 %}
	SAVE_GCODE_STATE NAME=PRIME_LINE_STATE
	SET_IDLE_TIMEOUT TIMEOUT=7200
	{% if 'Y' in params %}
	{% set x_start = 1.0 %}
	{% set y_start = (printer.toolhead.axis_maximum.y|float - 100) / 2 %}
	G0 X{x_start} Y{y_start} F5000
	G0 Z{height} F1500
	G91
	
	G1 E8 F300
	
	
	G1 Y100 E{extrude} F{feedrate}
	G0 X{width} F5000
	G1 Y-100 E{extrude} F{feedrate}
	{% else %}
	{% set x_start = (printer.toolhead.axis_maximum.x|float - 100) / 2 %}
	{% set y_start = 1.0 %}
	G0 X{x_start} Y{y_start} F5000
	G0 Z{height} F1500
	G91
	
	G1 E8 F300
	
	
	G1 X100 E{extrude} F{feedrate}
	G0 Y{width} F5000
	G1 X-100 E{extrude} F{feedrate}
	{% endif %}
	RESTORE_GCODE_STATE NAME=PRIME_LINE_STATE

[gcode_macro VINT]
gcode = 
	SCREWS_TILT_CALCULATE

[gcode_macro LOW_TEMP_CHECK]
gcode = 
	{% set extruder_temp = params.T|default(240)|float %}
	{% if printer.extruder.target > extruder_temp %}
	{% set extruder_temp = printer.extruder.target %}
	{% endif %}
	{% if printer.extruder.temperature < extruder_temp %}
	M118 Heating to {extruder_temp}
	SET_HEATER_TEMPERATURE HEATER=extruder TARGET={extruder_temp}
	TEMPERATURE_WAIT SENSOR=extruder MINIMUM={extruder_temp}
	{% endif %}

[gcode_macro M76]
gcode = 
	PAUSE

[gcode_macro M601]
gcode = 
	PAUSE

[gcode_macro G27]
gcode = 
	PARK

[gcode_macro M125]
gcode = 
	PARK

[gcode_macro M600]
gcode = 
	PAUSE

[gcode_macro M701]
gcode = 
	FILAMENT_LOAD

[gcode_macro M702]
gcode = 
	FILAMENT_UNLOAD

[gcode_macro M500]
gcode = 
	SAVE_CONFIG

[gcode_macro PARK]
gcode = 
	{% set x_park = params.X|default(0)|float %}
	{% set y_park = params.Y|default(0)|float %}
	{% set z_park = params.Z|default(10)|float + printer.toolhead.position.z|float %}
	{% set x_max = printer.toolhead.axis_maximum.x|float %}
	{% set y_max = printer.toolhead.axis_maximum.y|float %}
	{% set z_max = printer.toolhead.axis_maximum.z|float %}
	{% if x_park > x_max %}
	{% set x_park = x_max %}
	{% endif %}
	{% if y_park > y_max %}
	{% set y_park = y_max %}
	{% endif %}
	{% if z_park > z_max %}
	{% set z_park = z_max %}
	{% endif %}
	SAVE_GCODE_STATE NAME=PARK_STATE
	G90
	G1 Z{z_park} F1500
	G1 X{x_park} Y{y_park} F5000
	RESTORE_GCODE_STATE name=PARK_STATE

[gcode_macro START_DRYER]
description = Start the heated bed filament dryer.
gcode = 
	{% set ChamberTemperature = params.CHAMBER | default(65.0) | float %}
	{% set BedTemperature = params.TEMPERATURE | default(0.0) | float %}
	{% set DryTime = params.TIME | default(14400) | int %}
	M140 S{BedTemperature}
	M141 S{ChamberTemperature}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=time_remaining VALUE={DryTime}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=bed_temperature VALUE={BedTemperature}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=chamber_temperature VALUE={ChamberTemperature}
	UPDATE_DELAYED_GCODE ID=DRYER_TIMER DURATION=1

[gcode_macro STOP_DRYER]
gcode = 
	M140 S0
	M141 S0
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=time_remaining VALUE=0
	UPDATE_DELAYED_GCODE ID=DRYER_TIMER DURATION=0
	M117 Drying Stopped

[gcode_macro DRYER_STATUS]
variable_time_remaining = 0
variable_bed_temperature = 0
variable_chamber_temperature = 0
gcode = 
	{% if time_remaining > 0 %}
	M140 S{bed_temperature}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=time_remaining VALUE={time_remaining - 1}
	M117 Drying {time_remaining}
	{% else %}
	STOP_DRYER
	{% endif %}

[delayed_gcode DRYER_TIMER]
gcode = 
	UPDATE_DELAYED_GCODE ID=DRYER_TIMER DURATION=1
	DRYER_STATUS

[gcode_macro DRY_tpu]
gcode = 
	START_DRYER TEMPERATURE=0 CHAMBER=50 TIME=18000

[gcode_macro DRY_PETG]
gcode = 
	START_DRYER TEMPERATURE=0  CHAMBER=65 TIME=18000

[gcode_macro DRY_ABS]
gcode = 
	{% set S = params.S|default(0.0)|float %}
	SET_PIN PIN=Laser VALUE={S / 255.0}

[gcode_macro M4]
gcode = 
	{% set S = params.S|default(0.0)|float %}
	SET_PIN PIN=Laser VALUE={S / 255.0}

[gcode_macro M5]
gcode = 
	SET_PIN PIN=Laser VALUE=0

[menu __main __control __toolonoff]
type = input
enable = {'pwm_tool Laser' in printer}
name = Fan: {'ON ' if menu.input else 'OFF'}
input = {printer['pwm_tool Laser'].value}
input_min = 0
input_max = 1
input_step = 1
gcode = 
	M3 S{255 if menu.input else 0}

[menu __main __control __toolspeed]
type = input
enable = {'pwm_tool Laser' in printer}
name = Laser speed: {'%3d' % (menu.input*100)}%
input = {printer['pwm_tool Laser'].value}
input_min = 0
input_max = 1
input_step = 0.01
gcode = 
	M3 S{'%d' % (menu.input*255)}

[gcode_macro NOTE]
description = 
	"Plays a specified note for a specified duration
	@param {string} [N=C5] - Note to play
	@param {int} [D=500] - Duration of note. There are currently some Klipper limitations to how short a note can be.
	@param {int} [V=99] - Volume in percent
	@param {bool} [S=true] - Whether or not to stop the note after duration"
gcode = 
	{% set notes = {
	'C0': 16.35,   'CS0': 17.32,   'D0': 18.35,   'DS0': 19.45,   'E0': 20.60,   'F0': 21.83,   'FS0': 23.12,   'G0': 24.50,   'GS0': 25.96,   'A0': 27.50,   'AS0': 29.14,   'B0': 30.87,
	'C1': 32.70,   'CS1': 34.65,   'D1': 36.71,   'DS1': 38.89,   'E1': 41.20,   'F1': 43.65,   'FS1': 46.25,   'G1': 49.00,   'GS1': 51.91,   'A1': 55.00,   'AS1': 58.27,   'B1': 61.74,
	'C2': 65.41,   'CS2': 69.30,   'D2': 73.42,   'DS2': 77.78,   'E2': 82.41,   'F2': 87.31,   'FS2': 92.50,   'G2': 98.00,   'GS2': 103.83,  'A2': 110.00,  'AS2': 116.54,  'B2': 123.47,
	'C3': 130.81,  'CS3': 138.59,  'D3': 146.83,  'DS3': 155.56,  'E3': 164.81,  'F3': 174.61,  'FS3': 185.00,  'G3': 196.00,  'GS3': 207.65,  'A3': 220.00,  'AS3': 233.08,  'B3': 246.94,
	'C4': 261.63,  'CS4': 277.18,  'D4': 293.66,  'DS4': 311.13,  'E4': 329.63,  'F4': 349.23,  'FS4': 369.99,  'G4': 392.00,  'GS4': 415.30,  'A4': 440.00,  'AS4': 466.16,  'B4': 493.88,
	'C5': 523.25,  'CS5': 554.37,  'D5': 587.33,  'DS5': 622.25,  'E5': 659.26,  'F5': 698.46,  'FS5': 739.99,  'G5': 783.99,  'GS5': 830.61,  'A5': 880.00,  'AS5': 932.33,  'B5': 987.77,
	'C6': 1046.50, 'CS6': 1108.73, 'D6': 1174.66, 'DS6': 1244.51, 'E6': 1318.51, 'F6': 1396.91, 'FS6': 1479.98, 'G6': 1567.98, 'GS6': 1661.22, 'A6': 1760.00, 'AS6': 1864.66, 'B6': 1975.53,
	'C7': 2093.00, 'CS7': 2217.46, 'D7': 2349.32, 'DS7': 2489.02, 'E7': 2637.02, 'F7': 2793.83, 'FS7': 2959.96, 'G7': 3135.96, 'GS7': 3322.44, 'A7': 3520.00, 'AS7': 3729.31, 'B7': 3951.07,
	'C8': 4186.01, 'CS8': 4434.92, 'D8': 4698.64, 'DS8': 4978.03, 'E8': 5274.04, 'F8': 5587.65, 'FS8': 5919.91, 'G8': 6271.93, 'GS8': 6644.88, 'A8': 7040.00, 'AS8': 7458.62, 'B8': 7902.13,
	} %}
	
	{% set note = params.N|default('C5')|string %}
	
	{% set dur = params.D|default(500)|int %}
	
	
	{% set volume = params.V|default(99)|int %}
	
	{% set stop = params.S|default('true')|string %}
	
	{% set freq = notes[note] %}
	
	SET_PIN PIN=beeper VALUE={0.1 * (volume / 100) if volume > 0 else 1} CYCLE_TIME={ 1.0 / freq }
	G4 P{dur}
	{% if stop|lower == 'true' %}
	SET_PIN PIN=beeper VALUE=0 CYCLE_TIME={ 0.001 }
	{% endif %}

[gcode_macro TONE_GEN]
description = "Used for the tone generator menu"
variable_tone_freq = 0.001093
gcode = 
	M117 {printer["gcode_macro TONE_GEN"].tone_freq}nothz

[gcode_macro SONG_STAR_WARS_MAIN_THEME]
description = "Plays the Star Wars main theme"
gcode = 
	NOTE N=D4 D=133
	NOTE N=D4 D=133
	NOTE N=D4 D=133
	NOTE N=G4 D=1000
	NOTE N=D5 D=1000
	
	NOTE N=C5 D=133
	NOTE N=B4 D=133
	NOTE N=A4 D=133
	NOTE N=G5 D=1000
	NOTE N=D5 D=500
	
	NOTE N=C5 D=133
	NOTE N=B4 D=133
	NOTE N=A4 D=133
	NOTE N=G5 D=1000
	NOTE N=D5 D=500
	
	NOTE N=C5 D=133
	NOTE N=B4 D=133
	NOTE N=C5 D=133
	NOTE N=A4 D=1000

[gcode_macro SONG_CRAB_RAVE]
description = "Plays Crab Rave"
gcode = 
	NOTE N=D6 D=150 V=30 S=1
	NOTE N=AS6 D=150 V=30 S=1
	NOTE N=G6 D=150 V=30 S=1
	NOTE N=G6 D=150 V=30 S=0
	NOTE N=D6 D=150 V=30 S=1
	NOTE N=D6 D=150 V=30 S=0
	NOTE N=A6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=0
	NOTE N=D6 D=150 V=30 S=1
	NOTE N=D6 D=150 V=30 S=0
	NOTE N=A6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=0
	NOTE N=C6 D=150 V=30 S=1
	NOTE N=C6 D=150 V=30 S=1
	NOTE N=E6 D=150 V=30 S=1
	NOTE N=E6 D=150 V=30 S=0
	NOTE N=F6 D=150 V=30 S=1
	SET_PIN PIN=beeper VALUE=0

[gcode_macro one]
description = "one"
gcode = 
	NOTE N=C6 D=600 V=30 S=1
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=G5 D=400 V=30 S=1
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=E6 D=400 V=30 S=1
	G4 P150
	NOTE N=G6 D=180 V=30 S=0
	NOTE N=F6 D=180 V=30 S=0
	NOTE N=E6 D=180 V=30 S=0
	NOTE N=D6 D=180 V=30 S=1
	NOTE N=C6 D=600 V=30 S=1
	
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=G5 D=400 V=30 S=1
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=C6 D=600 V=30 S=1
	SET_PIN PIN=beeper VALUE=0

[gcode_macro SONG_BOOMER]
description = "BOOMER"
gcode = 
	M300 P207 S659
	M300 P207 S784
	M300 P207 S494
	M300 P207 S494
	M300 P207 S392
	M300 P207 S494
	M300 P207 S494
	M300 P207 S330
	M300 P207 S784
	M300 P207 S659
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S988
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S659
	M300 P207 S784
	M300 P207 S494
	M300 P207 S494
	M300 P207 S392
	M300 P207 S494
	M300 P207 S494
	M300 P207 S330
	M300 P207 S784
	M300 P207 S659
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S988
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S659
	M300 P207 S784
	M300 P207 S494
	M300 P207 S494
	M300 P207 S392
	M300 P207 S494
	M300 P207 S494
	M300 P207 S330
	M300 P207 S784
	M300 P207 S659
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S988
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330

[gcode_macro GET_TIMELAPSE_SETUP]
description = Print the Timelapse setup
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% set output_txt = ["Timelapse Setup:"] %}
	{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}
	{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}
	{% if tl.park.enable %}
	{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}
	{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}
	{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}
	{% endif %}
	{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}
	{% if not tl.extruder.fw_retract %}
	{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}
	{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}
	{% endif %}
	{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}
	{action_respond_info(output_txt|join("\n"))}

[gcode_macro _SET_TIMELAPSE_SETUP]
description = Set user parameters for timelapse
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	
	{% set min = printer.toolhead.axis_minimum %}
	{% set max = printer.toolhead.axis_maximum %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	{% set park = {'min'   : {'x': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),
	'y': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},
	'max'   : {'x': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),
	'y': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},
	'center': {'x': (max.x-(max.x-min.x)/2)|round(3),
	'y': (max.y-(max.y-min.y)/2)|round(3)}} %}
	
	{% if params.ENABLE %}
	{% if params.ENABLE|lower is in ['true', 'false'] %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == 'true' else False}
	{% else %}
	{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.VERBOSE %}
	{% if params.VERBOSE|lower is in ['true', 'false'] %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == 'true' else False}
	{% else %}
	{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_X %}
	{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}
	{% set _dummy = tl.park.custom.update({'x':params.CUSTOM_POS_X|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_Y %}
	{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}
	{% set _dummy = tl.park.custom.update({'y':params.CUSTOM_POS_Y|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_DZ %}
	{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}
	{% set _dummy = tl.park.custom.update({'dz':params.CUSTOM_POS_DZ|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}
	{% endif %}
	{% endif %}
	{% if params.PARK_ENABLE %}
	{% if params.PARK_ENABLE|lower is in ['true', 'false'] %}
	{% set _dummy = tl.park.update({'enable':True if params.PARK_ENABLE|lower == 'true' else False}) %}
	{% else %}
	{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.PARK_POS %}
	{% if params.PARK_POS|lower is in ['center','front_left','front_right','back_left','back_right','custom','x_only','y_only'] %}
	{% set dic = {'center'      : {'x': park.center.x   , 'y': park.center.y   , 'dz': 1                },
	'front_left'  : {'x': park.min.x      , 'y': park.min.y      , 'dz': 0                },
	'front_right' : {'x': park.max.x      , 'y': park.min.y      , 'dz': 0                },
	'back_left'   : {'x': park.min.x      , 'y': park.max.y      , 'dz': 0                },
	'back_right'  : {'x': park.max.x      , 'y': park.max.y      , 'dz': 0                },
	'custom'      : {'x': tl.park.custom.x, 'y': tl.park.custom.y, 'dz': tl.park.custom.dz},
	'x_only'      : {'x': tl.park.custom.x, 'y': 'none'          , 'dz': tl.park.custom.dz},
	'y_only'      : {'x': 'none'          , 'y': tl.park.custom.y, 'dz': tl.park.custom.dz}} %}
	{% set _dummy = tl.park.update({'pos':params.PARK_POS|lower}) %}
	{% set _dummy = tl.park.update({'coord':dic[tl.park.pos]}) %}
	{% else %}
	{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"
	% params.PARK_POS|upper)}
	{% endif %}
	{% endif %}
	{% if params.PARK_TIME %}
	{% if params.PARK_TIME|float >= 0.0 %}
	{% set _dummy = tl.park.update({'time':params.PARK_TIME|float|round(3)}) %}
	{% else %}
	{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"
	{% if params.TRAVEL_SPEED %}
	{% if params.TRAVEL_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'travel':params.TRAVEL_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}
	{% endif %}
	{% endif %}
	{% if params.RETRACT_SPEED %}
	{% if params.RETRACT_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'retract':params.RETRACT_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}
	{% endif %}
	{% endif %}
	{% if params.EXTRUDE_SPEED %}
	{% if params.EXTRUDE_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'extrude':params.EXTRUDE_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"
	{% if params.EXTRUDE_DISTANCE %}
	{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}
	{% set _dummy = tl.extruder.update({'extrude':params.EXTRUDE_DISTANCE|float|round(3)}) %}
	{% else %}
	{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}
	{% endif %}
	{% endif %}
	{% if params.RETRACT_DISTANCE %}
	{% if params.RETRACT_DISTANCE|float >= 0.0 %}
	{% set _dummy = tl.extruder.update({'retract':params.RETRACT_DISTANCE|float|round(3)}) %}
	{% else %}
	{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}
	{% endif %}
	{% endif %}
	{% if params.FW_RETRACT %}
	{% if params.FW_RETRACT|lower is in ['true', 'false'] %}
	{% if 'firmware_retraction' in printer.configfile.settings %}
	{% set _dummy = tl.extruder.update({'fw_retract': True if params.FW_RETRACT|lower == 'true' else False}) %}
	{% else %}
	{% set _dummy = tl.extruder.update({'fw_retract':False}) %}
	{% if params.FW_RETRACT|capitalize == 'True' %}
	{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}
	{% endif %}
	{% endif %}
	{% else %}
	{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"
	{% if printer.configfile.settings['gcode_macro pause'] is defined %}
	{% set _dummy = tl.macro.update({'pause': printer.configfile.settings['gcode_macro pause'].rename_existing}) %}
	{% endif %}
	{% if printer.configfile.settings['gcode_macro resume'] is defined %}
	{% set _dummy = tl.macro.update({'resume': printer.configfile.settings['gcode_macro resume'].rename_existing}) %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"

[gcode_macro TIMELAPSE_TAKE_FRAME]
description = Take Timelapse shoot
variable_enable = False
variable_takingframe = False
variable_park = {'enable': False,
	'pos'   : 'center',
	'time'  : 0.1,
	'custom': {'x': 0, 'y': 0, 'dz': 0},
	'coord' : {'x': 0, 'y': 0, 'dz': 0}}
variable_extruder = {'fw_retract': False,
	'retract': 1.0,
	'extrude': 1.0}
variable_speed = {'travel': 100,
	'retract': 15,
	'extrude': 15}
variable_verbose = True
variable_restore = {'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}
variable_macro = {'pause': 'PAUSE', 'resume': 'RESUME'}
variable_is_paused = False
gcode = 
	{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower =='true' else False %}
	{% if enable %}
	{% if (hyperlapse and printer['gcode_macro HYPERLAPSE'].run) or
	(not hyperlapse and not printer['gcode_macro HYPERLAPSE'].run) %}
	{% if park.enable %}
	{% set pos = {'x': 'X' + park.coord.x|string if park.pos != 'y_only' else '',
	'y': 'Y' + park.coord.y|string if park.pos != 'x_only' else '',
	'z': 'Z'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}
	{% set restore = {'absolute': {'coordinates': printer.gcode_move.absolute_coordinates,
	'extrude'    : printer.gcode_move.absolute_extrude},
	'speed'   : printer.gcode_move.speed,
	'e'       : printer.gcode_move.gcode_position.e,
	'factor'  : {'speed'  : printer.gcode_move.speed_factor,
	'extrude': printer.gcode_move.extrude_factor}} %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"
	{% if not printer[printer.toolhead.extruder].can_extrude %}
	{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}
	{% else %}
	{% if extruder.fw_retract %}
	G10
	{% else %}
	M83
	G0 E-{extruder.retract} F{speed.retract * 60}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True
	{macro.pause}
	SET_GCODE_OFFSET X=0 Y=0
	G90
	{% if "xyz" not in printer.toolhead.homed_axes %}
	{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}
	{% else %}
	G0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5
	M400
	{% endif %}
	_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}
	{% endif %}
	{% else %}
	{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}
	{% endif %}

[gcode_macro _TIMELAPSE_NEW_FRAME]
description = action call for timelapse shoot. must be a seperate macro
gcode = 
	{action_call_remote_method("timelapse_newframe",
	macropark=printer['gcode_macro TIMELAPSE_TAKE_FRAME'].park,
	hyperlapse=params.HYPERLAPSE)}

[delayed_gcode _WAIT_TIMELAPSE_TAKE_FRAME]
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% set factor = {'speed': printer.gcode_move.speed_factor, 'extrude': printer.gcode_move.extrude_factor} %}
	{% if tl.takingframe %}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5
	{% else %}
	{tl.macro.resume} VELOCITY={tl.speed.travel}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False
	{% if not printer[printer.toolhead.extruder].can_extrude %}
	{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}
	{% else %}
	{% if tl.extruder.fw_retract %}
	G11
	{% else %}
	G0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}
	G0 F{tl.restore.speed}
	{% if tl.restore.absolute.extrude %}
	M82
	G92 E{tl.restore.e}
	{% endif %}
	{% endif %}
	{% endif %}
	{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}
	{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}
	{% if not tl.restore.absolute.coordinates %} G91 {% endif %}
	{% endif %}

[gcode_macro HYPERLAPSE]
description = Start/Stop a hyperlapse recording
variable_cycle = 0
variable_run = False
gcode = 
	{% set cycle = params.CYCLE|default(30)|int %}
	{% if params.ACTION and params.ACTION|lower == 'start' %}
	{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}
	TIMELAPSE_TAKE_FRAME HYPERLAPSE=True
	{% elif params.ACTION and params.ACTION|lower == 'stop' %}
	{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0
	{% else %}
	{action_raise_error("Hyperlapse: No valid input parameter
	Use:
	- HYPERLAPSE ACTION=START [CYCLE=time]
	- HYPERLAPSE ACTION=STOP")}
	{% endif %}

[delayed_gcode _HYPERLAPSE_LOOP]
gcode = 
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}
	TIMELAPSE_TAKE_FRAME HYPERLAPSE=True

[gcode_macro TIMELAPSE_RENDER]
description = Render Timelapse video and wait for the result
variable_render = False
variable_run_identifier = 0
gcode = 
	{action_respond_info("Timelapse: Rendering started")}
	{action_call_remote_method("timelapse_render", byrendermacro="True")}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True
	{printer.configfile.settings['gcode_macro pause'].rename_existing}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5

[delayed_gcode _WAIT_TIMELAPSE_RENDER]
gcode = 
	{% set ri = printer['gcode_macro TIMELAPSE_RENDER'].run_identifier % 4 %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}
	{% if printer['gcode_macro TIMELAPSE_RENDER'].render %}
	M117 Rendering {['-','\\','|','/'][ri]}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5
	{% else %}
	{action_respond_info("Timelapse: Rendering finished")}
	M117
	{printer.configfile.settings['gcode_macro resume'].rename_existing}
	{% endif %}

[gcode_macro TEST_STREAM_DELAY]
description = Helper macro to find stream and park delay
gcode = 
	{% set min = printer.toolhead.axis_minimum %}
	{% set max = printer.toolhead.axis_maximum %}
	{% set act = printer.toolhead.position %}
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% if act.z > 5.0 %}
	G0 X{min.x + 5.0} F{tl.speed.travel|int * 60}
	G0 X{(max.x-min.x)/2}
	G4 P{tl.park.time|float * 1000}
	_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE
	G0 X{max.x - 5.0}
	{% else %}
	{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}
	{% endif %}

[exclude_object]

[gcode_macro GIT]
gcode = 
	{% set message = params.MESSAGE|default() %}
	{% if message %}
	RUN_SHELL_COMMAND CMD=update_git_script_message PARAMS="'{params.MESSAGE}'"
	{% else %}
	RUN_SHELL_COMMAND CMD=update_git_script
	{% endif %}

[gcode_shell_command update_git_script]
command = bash -c "bash $HOME/klipper-backup/script.sh"
timeout = 90.0
verbose = True

[gcode_shell_command update_git_script_message]
command = bash -c "bash $HOME/klipper-backup/script.sh -c \"$0\""
timeout = 90.0
verbose = True

[mcu]
serial = /dev/ttyS3
restart_method = command

[output_pin Power]
pin = PC12
value = 1
shutdown_value = 1

[temperature_sensor orange_pi]
sensor_type = temperature_host
min_temp = 0
max_temp = 100

[heater_generic chamber_heater]
heater_pin = !PA7
sensor_type = ATC Semitec 104GT-2
sensor_pin = PA5
control = watermark
max_power = 1
min_temp = 15
max_temp = 85

[verify_heater chamber_heater]
max_error = 9999
check_gain_time = 9999
hysteresis = 5
heating_gain = 2

[filament_motion_sensor motion_sensor]
detection_length = 50
extruder = extruder
switch_pin = !PC15
pause_on_runout = True
runout_gcode = 
	SONG_CRAB_RAVE

[bltouch]
sensor_pin = ^PC14
control_pin = PA1
x_offset = -40
y_offset = 0.000
z_offset = 1.70
pin_up_reports_not_triggered = False
probe_with_touch_mode = True

[heater_bed]
heater_pin = PC9
sensor_type = ATC Semitec 104GT-2
sensor_pin = PC3
control = pid
pid_kp = 72.553
pid_ki = 1.154
pid_kd = 1139.994
min_temp = 5
max_temp = 125

[heater_fan radiator]
pin = PC7
max_power = 1.0
kick_start_time = 0.600
heater = extruder
heater_temp = 50.0
shutdown_speed = 1

[fan]
pin = PC6

[input_shaper]
shaper_type_x = 2hump_ei
shaper_freq_x = 43.0
shaper_type_y = mzv
shaper_freq_y = 32.6

[printer]
kinematics = cartesian
max_velocity = 300
max_accel = 1900
max_z_velocity = 30
max_z_accel = 100
square_corner_velocity = 4

[bed_mesh]
speed = 150
horizontal_move_z = 9
mesh_min = 10, 20
mesh_max = 195, 210
probe_count = 5
mesh_pps = 2, 3
algorithm = bicubic
bicubic_tension = 0.2
move_check_distance = 9
split_delta_z = .025
fade_start = 1
fade_end = 10
fade_target = 0

[screws_tilt_adjust]
screw1 = 79, 27
screw1_name = Peredniy Leviy
screw2 = 235, 27
screw2_name = Peredniy Praviy
screw3 = 235,197
screw3_name = Zadniy Praviy
screw4 = 79,197
screw4_name = Zadniy Leviy
speed = 120
horizontal_move_z = 9

[safe_z_home]
home_xy_position = 157,115
speed = 50
z_hop = 9.0
z_hop_speed = 20.0

[stepper_x]
step_pin = PB13
dir_pin = !PB12
enable_pin = !PB14
microsteps = 16
rotation_distance = 40
endstop_pin = ^PC0
position_endstop = 0
position_max = 240
position_min = -2
homing_retract_dist = 5
homing_speed = 50
second_homing_speed = 10

[tmc2209 stepper_x]
uart_pin = PC11
tx_pin = PC10
uart_address = 0
run_current = 0.580
stealthchop_threshold = 999999

[stepper_y]
step_pin = PB10
dir_pin = !PB2
enable_pin = !PB11
microsteps = 16
rotation_distance = 40
endstop_pin = ^PC1
position_endstop = 0
homing_retract_dist = 5
homing_speed = 50
second_homing_speed = 10
position_max = 231
position_min = 0

[tmc2209 stepper_y]
uart_pin = PC11
tx_pin = PC10
uart_address = 2
run_current = 0.6
stealthchop_threshold = 999999

[stepper_z]
step_pin = PB0
dir_pin = PC5
enable_pin = !PB1
microsteps = 16
rotation_distance = 40
gear_ratio = 80:16
full_steps_per_rotation = 200
endstop_pin = probe:z_virtual_endstop
homing_retract_dist = 9
second_homing_speed = 10
position_min = -5
position_max = 245
homing_speed = 50

[tmc2209 stepper_z]
uart_pin = PC11
tx_pin = PC10
uart_address = 1
run_current = 0.580
stealthchop_threshold = 999999
interpolate = false

[extruder]
step_pin = PB3
dir_pin = PB4
enable_pin = !PD2
microsteps = 16
rotation_distance = 4.637
nozzle_diameter = 0.400
filament_diameter = 1.750
heater_pin = PC8
sensor_type = ATC Semitec 104GT-2
sensor_pin = PA0
min_temp = 5
max_temp = 270
max_extrude_only_velocity = 120
max_extrude_only_accel = 3000
pressure_advance = 0.031
full_steps_per_rotation = 200
control = pid
pid_kp = 29.662
pid_ki = 2.382
pid_kd = 92.322

[tmc2209 extruder]
uart_pin = PC11
tx_pin = PC10
uart_address = 3
run_current = 0.7
stealthchop_threshold = 999999

[static_digital_output usb_pullup_enable]
pins = !PA14

[board_pins]
aliases = 
	
	EXP1_1=PB5,  EXP1_3=PA9,   EXP1_5=PA10, EXP1_7=PB8,  EXP1_9=<GND>,
	EXP1_2=PA15, EXP1_4=<RST>, EXP1_6=PB9,  EXP1_8=PB15, EXP1_10=<5V>

[display]
lcd_type = st7920
cs_pin = EXP1_7
sclk_pin = EXP1_6
sid_pin = EXP1_8
encoder_pins = ^EXP1_5, ^EXP1_3
click_pin = ^!EXP1_2

[pwm_cycle_time beeper]
pin = EXP1_1
shutdown_value = 0
cycle_time = 0.001

[firmware_retraction]
retract_length = 1.0
retract_speed = 80
unretract_extra_length = 0
unretract_speed = 80

[pwm_tool Laser]
pin = PA6
cycle_time = 0.0001
shutdown_value = 0
maximum_mcu_duration = 5

[bed_mesh 70]
version = 1
points = 
	-0.045000, 0.027500, 0.015000
	-0.055000, -0.005000, -0.035000
	-0.007500, 0.040000, -0.002500
x_count = 3
y_count = 3
mesh_x_pps = 2
mesh_y_pps = 3
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 195.0
min_y = 20.0
max_y = 210.0

[bed_mesh default]
version = 1
points = 
	0.020000, 0.025000, 0.030000, -0.007500, -0.052500
	0.015000, 0.017500, 0.022500, -0.007500, -0.057500
	0.030000, 0.030000, 0.037500, 0.002500, -0.035000
	0.012500, 0.030000, 0.050000, 0.035000, -0.010000
	0.080000, 0.087500, 0.115000, 0.097500, 0.067500
x_count = 5
y_count = 5
mesh_x_pps = 2
mesh_y_pps = 3
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 195.0
min_y = 20.0
max_y = 210.0
=======================
Extruder max_extrude_ratio=0.266081
mcu 'mcu': Starting serial connect
webhooks client 281473334531056: New connection
webhooks client 281473334531056: Client info {'program': 'Moonraker', 'version': 'v0.9.3-4-ga4604e3'}
mcu 'mcu': got {'oid': 14, 'next_clock': 1901263616, 'value': 31181, '#name': 'analog_in_state', '#sent_time': 2995.881310677, '#receive_time': 2995.8864513440003}
mcu 'mcu': got {'oid': 18, 'next_clock': 1904143616, 'value': 31320, '#name': 'analog_in_state', '#sent_time': 2995.881310677, '#receive_time': 2995.926440136}
mcu 'mcu': got {'oid': 26, 'next_clock': 1909903616, 'value': 31260, '#name': 'analog_in_state', '#sent_time': 2995.986144553, '#receive_time': 2996.006422928}
mcu 'mcu': got {'oid': 14, 'next_clock': 1922863616, 'value': 31187, '#name': 'analog_in_state', '#sent_time': 2996.1420994279997, '#receive_time': 2996.1864146360003}
Loaded MCU 'mcu' 118 commands (v0.12.0-404-g80d185c94 / gcc: (15:12.2.rel1-1) 12.2.1 20221205 binutils: (2.40-2+18+b1) 2.40)
MCU 'mcu' config: ADC_MAX=4095 BUS_PINS_i2c1=PB6,PB7 BUS_PINS_i2c1a=PB8,PB9 BUS_PINS_i2c2=PB10,PB11 BUS_PINS_spi1=PA6,PA7,PA5 BUS_PINS_spi1a=PB4,PB5,PB3 BUS_PINS_spi2=PB14,PB15,PB13 BUS_PINS_spi3=PB4,PB5,PB3 CLOCK_FREQ=72000000 INITIAL_PINS=!PA14 MCU=stm32f103xe PWM_MAX=255 RECEIVE_WINDOW=192 RESERVE_PINS_serial=PA3,PA2 SERIAL_BAUD=250000 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
Configured MCU 'mcu' (1024 moves)
Starting heater checks for chamber_heater
Starting heater checks for heater_bed
bed_mesh: generated points
Index |  Tool Adjusted  |   Probe
  0   | (50.0, 20.0)    | (10.0, 20.0)
  1   | (96.2, 20.0)    | (56.2, 20.0)
  2   | (142.5, 20.0)   | (102.5, 20.0)
  3   | (188.8, 20.0)   | (148.8, 20.0)
  4   | (235.0, 20.0)   | (195.0, 20.0)
  5   | (235.0, 67.5)   | (195.0, 67.5)
  6   | (188.8, 67.5)   | (148.8, 67.5)
  7   | (142.5, 67.5)   | (102.5, 67.5)
  8   | (96.2, 67.5)    | (56.2, 67.5)
  9   | (50.0, 67.5)    | (10.0, 67.5)
  10  | (50.0, 115.0)   | (10.0, 115.0)
  11  | (96.2, 115.0)   | (56.2, 115.0)
  12  | (142.5, 115.0)  | (102.5, 115.0)
  13  | (188.8, 115.0)  | (148.8, 115.0)
  14  | (235.0, 115.0)  | (195.0, 115.0)
  15  | (235.0, 162.5)  | (195.0, 162.5)
  16  | (188.8, 162.5)  | (148.8, 162.5)
  17  | (142.5, 162.5)  | (102.5, 162.5)
  18  | (96.2, 162.5)   | (56.2, 162.5)
  19  | (50.0, 162.5)   | (10.0, 162.5)
  20  | (50.0, 210.0)   | (10.0, 210.0)
  21  | (96.2, 210.0)   | (56.2, 210.0)
  22  | (142.5, 210.0)  | (102.5, 210.0)
  23  | (188.8, 210.0)  | (148.8, 210.0)
  24  | (235.0, 210.0)  | (195.0, 210.0)
Starting heater checks for extruder
Stats 2996.7: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=3022 bytes_read=6238 bytes_retransmit=0 bytes_invalid=0 send_seq=225 receive_seq=222 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=1955 upcoming_bytes=226 freq=71996281  orange_pi: temp=47.5 chamber_heater: target=0 temp=0.0 pwm=0.000 heater_bed: target=0 temp=0.0 pwm=0.000 sysload=1.01 cputime=64.476 memavail=1720172 print_time=4739.678 buffer_time=0.242 print_stall=0 extruder: target=0 temp=0.0 pwm=0.000
webhooks: registering remote method 'shutdown_machine' for connection id: 281473334531056
webhooks: registering remote method 'reboot_machine' for connection id: 281473334531056
webhooks: registering remote method 'pause_job_queue' for connection id: 281473334531056
webhooks: registering remote method 'start_job_queue' for connection id: 281473334531056
Stats 2997.7: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=5437 bytes_read=6549 bytes_retransmit=0 bytes_invalid=0 send_seq=271 receive_seq=271 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71997808  orange_pi: temp=46.8 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.09 cputime=64.519 memavail=1720244 print_time=4739.678 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 2998.7: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=5476 bytes_read=6740 bytes_retransmit=0 bytes_invalid=0 send_seq=274 receive_seq=274 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998417  orange_pi: temp=46.6 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.09 cputime=64.560 memavail=1720008 print_time=4739.678 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 2999.7: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000114 mcu_task_stddev=0.000265 bytes_write=5482 bytes_read=6923 bytes_retransmit=0 bytes_invalid=0 send_seq=275 receive_seq=275 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998175  orange_pi: temp=46.4 chamber_heater: target=0 temp=26.7 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.09 cputime=64.581 memavail=1719792 print_time=4739.678 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3000.7: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000114 mcu_task_stddev=0.000265 bytes_write=5488 bytes_read=7074 bytes_retransmit=0 bytes_invalid=0 send_seq=276 receive_seq=276 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998102  orange_pi: temp=46.4 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.09 cputime=64.601 memavail=1719572 print_time=4739.678 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3001.7: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000114 mcu_task_stddev=0.000265 bytes_write=5494 bytes_read=7255 bytes_retransmit=0 bytes_invalid=0 send_seq=277 receive_seq=277 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998115  orange_pi: temp=46.2 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.09 cputime=64.621 memavail=1719104 print_time=4739.678 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 3002.7: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000114 mcu_task_stddev=0.000265 bytes_write=5500 bytes_read=7421 bytes_retransmit=0 bytes_invalid=0 send_seq=278 receive_seq=278 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998183  orange_pi: temp=45.6 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.08 cputime=64.641 memavail=1719112 print_time=4739.678 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3003.7: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000114 mcu_task_stddev=0.000265 bytes_write=5506 bytes_read=7572 bytes_retransmit=0 bytes_invalid=0 send_seq=279 receive_seq=279 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998180  orange_pi: temp=45.4 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.08 cputime=64.661 memavail=1718388 print_time=4739.678 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3004.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5512 bytes_read=7767 bytes_retransmit=0 bytes_invalid=0 send_seq=280 receive_seq=280 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998176  orange_pi: temp=45.6 chamber_heater: target=0 temp=26.7 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.08 cputime=64.682 memavail=1718408 print_time=4739.678 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3005.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5518 bytes_read=7933 bytes_retransmit=0 bytes_invalid=0 send_seq=281 receive_seq=281 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998183  orange_pi: temp=45.9 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.08 cputime=64.702 memavail=1718316 print_time=4739.678 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3006.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5524 bytes_read=8084 bytes_retransmit=0 bytes_invalid=0 send_seq=282 receive_seq=282 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998208  orange_pi: temp=46.2 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.08 cputime=64.723 memavail=1718780 print_time=4739.678 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 3007.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5530 bytes_read=8265 bytes_retransmit=0 bytes_invalid=0 send_seq=283 receive_seq=283 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998204  orange_pi: temp=46.6 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.08 cputime=64.741 memavail=1718808 print_time=4739.678 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3008.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5536 bytes_read=8431 bytes_retransmit=0 bytes_invalid=0 send_seq=284 receive_seq=284 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998210  orange_pi: temp=45.8 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.08 cputime=64.762 memavail=1718808 print_time=4739.678 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3009.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5542 bytes_read=8596 bytes_retransmit=0 bytes_invalid=0 send_seq=285 receive_seq=285 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998225  orange_pi: temp=46.0 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.08 cputime=64.784 memavail=1719436 print_time=4739.678 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3010.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5548 bytes_read=8777 bytes_retransmit=0 bytes_invalid=0 send_seq=286 receive_seq=286 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998241  orange_pi: temp=45.5 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.08 cputime=64.805 memavail=1719832 print_time=4739.678 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3011.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5568 bytes_read=8948 bytes_retransmit=0 bytes_invalid=0 send_seq=288 receive_seq=288 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998248  orange_pi: temp=45.8 chamber_heater: target=0 temp=27.0 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.08 cputime=64.827 memavail=1719596 print_time=4739.678 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3012.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5607 bytes_read=9114 bytes_retransmit=0 bytes_invalid=0 send_seq=292 receive_seq=292 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998256  orange_pi: temp=45.6 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.07 cputime=64.848 memavail=1719776 print_time=4739.678 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3013.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5627 bytes_read=9300 bytes_retransmit=0 bytes_invalid=0 send_seq=294 receive_seq=294 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998253  orange_pi: temp=46.1 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.07 cputime=64.870 memavail=1719652 print_time=4739.678 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3014.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000021 bytes_write=5633 bytes_read=9481 bytes_retransmit=0 bytes_invalid=0 send_seq=295 receive_seq=295 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998255  orange_pi: temp=46.1 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.07 cputime=64.890 memavail=1719448 print_time=4739.678 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3015.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000021 bytes_write=5639 bytes_read=9632 bytes_retransmit=0 bytes_invalid=0 send_seq=296 receive_seq=296 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998253  orange_pi: temp=45.7 chamber_heater: target=0 temp=26.7 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.07 cputime=64.910 memavail=1719468 print_time=4739.678 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3016.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000021 bytes_write=5678 bytes_read=9828 bytes_retransmit=0 bytes_invalid=0 send_seq=300 receive_seq=300 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998252  orange_pi: temp=45.8 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.7 pwm=0.000 sysload=1.07 cputime=64.931 memavail=1718232 print_time=4739.678 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3017.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000021 bytes_write=5684 bytes_read=9994 bytes_retransmit=0 bytes_invalid=0 send_seq=301 receive_seq=301 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998260  orange_pi: temp=45.9 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.06 cputime=64.951 memavail=1718748 print_time=4739.678 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3018.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000021 bytes_write=5690 bytes_read=10145 bytes_retransmit=0 bytes_invalid=0 send_seq=302 receive_seq=302 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998260  orange_pi: temp=46.2 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.06 cputime=64.972 memavail=1718804 print_time=4739.678 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3019.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000017 bytes_write=5696 bytes_read=10340 bytes_retransmit=0 bytes_invalid=0 send_seq=303 receive_seq=303 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998260  orange_pi: temp=46.0 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.06 cputime=64.992 memavail=1718816 print_time=4739.678 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3020.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000017 bytes_write=5702 bytes_read=10506 bytes_retransmit=0 bytes_invalid=0 send_seq=304 receive_seq=304 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998266  orange_pi: temp=45.9 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.06 cputime=65.013 memavail=1719608 print_time=4739.678 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 3021.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000017 bytes_write=5708 bytes_read=10657 bytes_retransmit=0 bytes_invalid=0 send_seq=305 receive_seq=305 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998266  orange_pi: temp=45.6 chamber_heater: target=0 temp=26.3 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.06 cputime=65.033 memavail=1720624 print_time=4739.678 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3022.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000017 bytes_write=5714 bytes_read=10838 bytes_retransmit=0 bytes_invalid=0 send_seq=306 receive_seq=306 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998269  orange_pi: temp=46.2 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.14 cputime=65.054 memavail=1720900 print_time=4739.678 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 3023.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000017 bytes_write=5720 bytes_read=11004 bytes_retransmit=0 bytes_invalid=0 send_seq=307 receive_seq=307 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998273  orange_pi: temp=46.0 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.14 cputime=65.075 memavail=1721684 print_time=4739.678 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3024.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5726 bytes_read=11169 bytes_retransmit=0 bytes_invalid=0 send_seq=308 receive_seq=308 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998277  orange_pi: temp=46.0 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.14 cputime=65.094 memavail=1721740 print_time=4739.678 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3025.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5732 bytes_read=11350 bytes_retransmit=0 bytes_invalid=0 send_seq=309 receive_seq=309 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998280  orange_pi: temp=45.9 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.14 cputime=65.115 memavail=1721520 print_time=4739.678 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3026.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5738 bytes_read=11516 bytes_retransmit=0 bytes_invalid=0 send_seq=310 receive_seq=310 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998284  orange_pi: temp=45.8 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.14 cputime=65.137 memavail=1721584 print_time=4739.678 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3027.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5772 bytes_read=11692 bytes_retransmit=0 bytes_invalid=0 send_seq=313 receive_seq=313 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998290  orange_pi: temp=46.2 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.13 cputime=65.158 memavail=1722112 print_time=4739.678 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3028.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5798 bytes_read=11873 bytes_retransmit=0 bytes_invalid=0 send_seq=316 receive_seq=316 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998290  orange_pi: temp=46.0 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.13 cputime=65.179 memavail=1722132 print_time=4739.678 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3029.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000021 bytes_write=5823 bytes_read=12053 bytes_retransmit=0 bytes_invalid=0 send_seq=319 receive_seq=319 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998291  orange_pi: temp=46.0 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.13 cputime=65.200 memavail=1721880 print_time=4739.678 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 3030.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000021 bytes_write=5829 bytes_read=12208 bytes_retransmit=0 bytes_invalid=0 send_seq=320 receive_seq=320 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998293  orange_pi: temp=45.8 chamber_heater: target=0 temp=26.7 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.13 cputime=65.220 memavail=1721808 print_time=4739.678 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3031.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000021 bytes_write=5835 bytes_read=12363 bytes_retransmit=0 bytes_invalid=0 send_seq=321 receive_seq=321 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998293  orange_pi: temp=45.8 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.13 cputime=65.241 memavail=1721696 print_time=4739.678 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3032.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000021 bytes_write=5874 bytes_read=12541 bytes_retransmit=0 bytes_invalid=0 send_seq=325 receive_seq=325 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998294  orange_pi: temp=46.3 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.12 cputime=65.262 memavail=1721956 print_time=4739.678 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3033.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000021 bytes_write=5880 bytes_read=12707 bytes_retransmit=0 bytes_invalid=0 send_seq=326 receive_seq=326 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998296  orange_pi: temp=46.3 chamber_heater: target=0 temp=26.8 pwm=0.000 heater_bed: target=0 temp=24.3 pwm=0.000 sysload=1.12 cputime=65.283 memavail=1720712 print_time=4739.678 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3034.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000021 bytes_write=5905 bytes_read=12883 bytes_retransmit=0 bytes_invalid=0 send_seq=329 receive_seq=329 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998295  orange_pi: temp=46.4 chamber_heater: target=0 temp=26.7 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.12 cputime=65.304 memavail=1720724 print_time=4739.678 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3035.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000018 bytes_write=5925 bytes_read=13069 bytes_retransmit=0 bytes_invalid=0 send_seq=331 receive_seq=331 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998294  orange_pi: temp=46.1 chamber_heater: target=0 temp=26.7 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.12 cputime=65.325 memavail=1720480 print_time=4739.678 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3036.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000018 bytes_write=5931 bytes_read=13235 bytes_retransmit=0 bytes_invalid=0 send_seq=332 receive_seq=332 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998296  orange_pi: temp=45.6 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.12 cputime=65.345 memavail=1719012 print_time=4739.678 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.2 pwm=0.000
Stats 3037.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000018 bytes_write=5951 bytes_read=13406 bytes_retransmit=0 bytes_invalid=0 send_seq=334 receive_seq=334 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998297  orange_pi: temp=46.3 chamber_heater: target=0 temp=26.7 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.11 cputime=65.366 memavail=1719540 print_time=4739.678 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3038.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000018 bytes_write=5971 bytes_read=13577 bytes_retransmit=0 bytes_invalid=0 send_seq=336 receive_seq=336 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998296  orange_pi: temp=46.4 chamber_heater: target=0 temp=26.7 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.11 cputime=65.388 memavail=1719796 print_time=4739.678 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3039.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000018 bytes_write=5977 bytes_read=13743 bytes_retransmit=0 bytes_invalid=0 send_seq=337 receive_seq=337 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998295  orange_pi: temp=46.0 chamber_heater: target=0 temp=26.8 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.11 cputime=65.408 memavail=1719796 print_time=4739.678 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3040.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000021 bytes_write=5983 bytes_read=13924 bytes_retransmit=0 bytes_invalid=0 send_seq=338 receive_seq=338 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998297  orange_pi: temp=46.4 chamber_heater: target=0 temp=26.7 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.11 cputime=65.430 memavail=1720320 print_time=4739.678 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3041.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000021 bytes_write=5989 bytes_read=14090 bytes_retransmit=0 bytes_invalid=0 send_seq=339 receive_seq=339 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998301  orange_pi: temp=46.2 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.7 pwm=0.000 sysload=1.11 cputime=65.450 memavail=1720844 print_time=4739.678 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3042.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000021 bytes_write=5995 bytes_read=14256 bytes_retransmit=0 bytes_invalid=0 send_seq=340 receive_seq=340 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998299  orange_pi: temp=46.4 chamber_heater: target=0 temp=26.7 pwm=0.000 heater_bed: target=0 temp=24.7 pwm=0.000 sysload=1.10 cputime=65.471 memavail=1720884 print_time=4739.678 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3043.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000021 bytes_write=6001 bytes_read=14422 bytes_retransmit=0 bytes_invalid=0 send_seq=341 receive_seq=341 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998298  orange_pi: temp=46.2 chamber_heater: target=0 temp=26.8 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.10 cputime=65.492 memavail=1721140 print_time=4739.678 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3044.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000021 bytes_write=6007 bytes_read=14588 bytes_retransmit=0 bytes_invalid=0 send_seq=342 receive_seq=342 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998298  orange_pi: temp=46.3 chamber_heater: target=0 temp=26.8 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.10 cputime=65.512 memavail=1721160 print_time=4739.678 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3045.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000012 bytes_write=6013 bytes_read=14768 bytes_retransmit=0 bytes_invalid=0 send_seq=343 receive_seq=343 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998298  orange_pi: temp=46.1 chamber_heater: target=0 temp=27.0 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.10 cputime=65.533 memavail=1721688 print_time=4739.678 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3046.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000012 bytes_write=6019 bytes_read=14934 bytes_retransmit=0 bytes_invalid=0 send_seq=344 receive_seq=344 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998297  orange_pi: temp=45.9 chamber_heater: target=0 temp=27.0 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.10 cputime=65.554 memavail=1722260 print_time=4739.678 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3047.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000012 bytes_write=6025 bytes_read=15100 bytes_retransmit=0 bytes_invalid=0 send_seq=345 receive_seq=345 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998298  orange_pi: temp=46.3 chamber_heater: target=0 temp=27.0 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.09 cputime=65.574 memavail=1721776 print_time=4739.678 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3048.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000012 bytes_write=6031 bytes_read=15266 bytes_retransmit=0 bytes_invalid=0 send_seq=346 receive_seq=346 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998299  orange_pi: temp=46.1 chamber_heater: target=0 temp=27.0 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.09 cputime=65.595 memavail=1721200 print_time=4739.678 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3049.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000012 bytes_write=6037 bytes_read=15432 bytes_retransmit=0 bytes_invalid=0 send_seq=347 receive_seq=347 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998299  orange_pi: temp=46.4 chamber_heater: target=0 temp=27.0 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.09 cputime=65.615 memavail=1721340 print_time=4739.678 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3050.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=6043 bytes_read=15612 bytes_retransmit=0 bytes_invalid=0 send_seq=348 receive_seq=348 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998299  orange_pi: temp=45.7 chamber_heater: target=0 temp=27.2 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.09 cputime=65.636 memavail=1721864 print_time=4739.678 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3051.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=6049 bytes_read=15778 bytes_retransmit=0 bytes_invalid=0 send_seq=349 receive_seq=349 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998300  orange_pi: temp=46.4 chamber_heater: target=0 temp=26.9 pwm=0.000 heater_bed: target=0 temp=24.7 pwm=0.000 sysload=1.09 cputime=65.656 memavail=1721864 print_time=4739.678 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3052.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=6055 bytes_read=15944 bytes_retransmit=0 bytes_invalid=0 send_seq=350 receive_seq=350 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998301  orange_pi: temp=46.3 chamber_heater: target=0 temp=27.1 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.08 cputime=65.677 memavail=1721636 print_time=4739.678 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3053.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=6061 bytes_read=16110 bytes_retransmit=0 bytes_invalid=0 send_seq=351 receive_seq=351 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998301  orange_pi: temp=46.2 chamber_heater: target=0 temp=27.1 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.08 cputime=65.697 memavail=1721648 print_time=4739.678 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3054.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=6067 bytes_read=16276 bytes_retransmit=0 bytes_invalid=0 send_seq=352 receive_seq=352 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998301  orange_pi: temp=46.4 chamber_heater: target=0 temp=27.0 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.08 cputime=65.718 memavail=1721204 print_time=4739.678 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3055.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=6073 bytes_read=16471 bytes_retransmit=0 bytes_invalid=0 send_seq=353 receive_seq=353 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998301  orange_pi: temp=46.4 chamber_heater: target=0 temp=27.0 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.08 cputime=65.738 memavail=1721212 print_time=4739.678 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3056.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=6079 bytes_read=16622 bytes_retransmit=0 bytes_invalid=0 send_seq=354 receive_seq=354 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998300  orange_pi: temp=45.8 chamber_heater: target=0 temp=26.8 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.08 cputime=65.759 memavail=1718976 print_time=4739.678 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 3087.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=6265 bytes_read=21852 bytes_retransmit=0 bytes_invalid=0 send_seq=385 receive_seq=385 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998309  orange_pi: temp=46.2 chamber_heater: target=0 temp=27.0 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.14 cputime=66.378 memavail=1720432 print_time=4831.394 buffer_time=0.912 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
webhooks client 281473334531056: Disconnected
Restarting printer
Start printer at Wed Dec 25 21:08:26 2024 (1735150106.8 3089.8)
===== Config file =====
[virtual_sdcard]
path = /home/klipper/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[pause_resume]

[display_status]

[respond]

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = BASE_CANCEL_PRINT
gcode = 
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	TURN_OFF_HEATERS
	M107
	G91
	G1 E-{E} F1500
	G90
	CLEAR_PAUSE
	SDCARD_RESET_FILE
	BASE_CANCEL_PRINT
	PARK

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = BASE_PAUSE
gcode = 
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	SAVE_GCODE_STATE NAME=PAUSE_STATE
	BASE_PAUSE
	G91
	G1 E-{E} F1500
	G90
	PARK

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = BASE_RESUME
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	G91
	G1 E{E} F1500
	G90
	RESTORE_GCODE_STATE NAME=PAUSE_STATE MOVE=1
	BASE_RESUME

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[gcode_macro _CLIENT_LINEAR_MOVE]
description = Linear move with save and restore of the gcode state
gcode = 
	{% set x_move = "X" ~ params.X if params.X is defined else "" %}
	{% set y_move = "Y" ~ params.Y if params.Y is defined else "" %}
	{% set z_move = "Z" ~ params.Z if params.Z is defined else "" %}
	{% set e_move = "E" ~ params.E if params.E is defined else "" %}
	{% set rate = "F" ~ params.F if params.F is defined else "" %}
	{% set ABSOLUTE = params.ABSOLUTE | default(0) | int != 0 %}
	{% set ABSOLUTE_E = params.ABSOLUTE_E | default(0) | int != 0 %}
	SAVE_GCODE_STATE NAME=_client_movement
	{% if x_move or y_move or z_move %}
	G9{ 0 if ABSOLUTE else 1 }
	{% endif %}
	{% if e_move %}
	M8{ 2 if ABSOLUTE_E else 3 }
	{% endif %}
	G1 { x_move } { y_move } { z_move } { e_move } { rate }
	RESTORE_GCODE_STATE NAME=_client_movement

[gcode_macro list_sensors]
gcode = 
	{ action_respond_info(printer.heaters.available_heaters | join(', ')) }
	{ action_respond_info(printer.heaters.available_sensors | join(', ')) }

[gcode_macro Power_OFF]
gcode = SET_PIN PIN=Power VALUE=0

[gcode_macro _POWER_OFF_PRINTER]
gcode = SET_PIN PIN=Power VALUE=0

[gcode_macro ACTIVATE_POWER_OFF]
gcode = 
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK_ACT DURATION=60

[gcode_macro DEACTIVATE_POWER_OFF]
gcode = 
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK_ACT DURATION=0

[delayed_gcode POWER_OFF_PRINTER_CHECK_ACT]
gcode = 
	{% if printer.idle_timeout.state == "Idle" or printer.idle_timeout.state == "Ready" %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=30
	{% else %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK_ACT DURATION=60
	{% endif %}

[delayed_gcode POWER_OFF_PRINTER_CHECK]
gcode = 
	{% if printer.idle_timeout.state == "Idle" or printer.idle_timeout.state == "Ready" %}
	{% if printer.extruder.temperature < 50.0 and printer.heater_bed.temperature < 50.0 %}
	{% if printer.extruder.target == 0.0 and printer.heater_bed.target == 0.0 %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=0
	_POWER_OFF_PRINTER
	{% else %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=2
	{% endif %}
	{% else %}
	{% if printer.idle_timeout.state == "Printing" %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=0
	{% else %}
	{% if printer.extruder.target == 0.0 and printer.heater_bed.target == 0.0 %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=2
	{% else %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=0
	{% endif %}
	{% endif %}
	{% endif %}
	{% endif %}

[gcode_macro M141]
gcode = SET_HEATER_TEMPERATURE HEATER=chamber_heater TARGET={params.S|default(0)}

[gcode_macro M80]
gcode = SET_PIN PIN=Power  VALUE=1

[gcode_macro M81]
gcode = 
	
	SET_PIN PIN=Power VALUE=0

[gcode_macro M486]
gcode = 
	
	
	
	
	
	
	
	
	
	
	
	{% if 'exclude_object' not in printer %}
	{action_raise_error("[exclude_object] is not enabled")}
	{% endif %}
	
	{% if 'T' in params %}
	EXCLUDE_OBJECT RESET=1
	
	{% for i in range(params.T | int) %}
	EXCLUDE_OBJECT_DEFINE NAME={i}
	{% endfor %}
	{% endif %}
	
	{% if 'C' in params %}
	EXCLUDE_OBJECT CURRENT=1
	{% endif %}
	
	{% if 'P' in params %}
	EXCLUDE_OBJECT NAME={params.P}
	{% endif %}
	
	{% if 'S' in params %}
	{% if params.S == '-1' %}
	{% if printer.exclude_object.current_object %}
	EXCLUDE_OBJECT_END NAME={printer.exclude_object.current_object}
	{% endif %}
	{% else %}
	EXCLUDE_OBJECT_START NAME={params.S}
	{% endif %}
	{% endif %}
	
	{% if 'U' in params %}
	EXCLUDE_OBJECT RESET=1 NAME={params.U}
	{% endif %}

[gcode_macro M190]
rename_existing = M190.1
gcode = 
	{% if printer["gcode_macro status_heating"] != null %}
	status_heating
	{% endif %}
	M190.1 { rawparams }
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro _CHOME]
gcode = 
	{% if printer["gcode_macro status_homing"] != null %}
	status_homing
	{% endif %}
	{% if printer.toolhead.homed_axes != "xyz" %}
	G28
	{% endif %}
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro M109]
rename_existing = M109.1
gcode = 
	{% if printer["gcode_macro status_heating"] != null %}
	status_heating
	{% endif %}
	M109.1 { rawparams }
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro _MOVE_AWAY]
gcode = 
	{% set th = printer.toolhead %}
	{% set x_safe = th.position.x + 20 * (1 if th.axis_maximum.x - th.position.x > 20 else -1) %}
	{% set y_safe = th.position.y + 20 * (1 if th.axis_maximum.y - th.position.y > 20 else -1) %}
	{% set z_safe = [th.position.z + 2, th.axis_maximum.z]|min %}
	
	G90
	G0 X{x_safe} Y{y_safe} Z{z_safe} F20000

[gcode_macro PARK_CENTER_REAR]
gcode = 
	{% if printer["gcode_macro status_busy"] != null %}
	status_busy
	{% endif %}
	{% set th = printer.toolhead %}
	{% set x_safe = th.position.x + 20 * (1 if th.axis_maximum.x - th.position.x > 20 else -1) %}
	{% set y_safe = th.position.y + 20 * (1 if th.axis_maximum.y - th.position.y > 20 else -1) %}
	
	G0 X{th.axis_maximum.x//2} Y{th.axis_maximum.y - 2} F3600
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro START_PRINT]
variable_retract = 15
gcode = 
	{% set chamber_temp = params.CHAMBER_TEMP|default(0)|float %}
	{% set extruder_temp = params.EXTRUDER_TEMP|default(210)|float %}
	{% set bed_temp = params.BED_TEMP|default(60)|float %}
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	CLEAR_PAUSE
	G28
	Smart_Park
	M220 S100
	M221 S100
	SET_HEATER_TEMPERATURE HEATER=chamber_heater TARGET={chamber_temp}
	SET_HEATER_TEMPERATURE HEATER=heater_bed TARGET={bed_temp}
	TEMPERATURE_WAIT SENSOR=heater_bed MINIMUM={bed_temp * 0.75}
	SET_HEATER_TEMPERATURE HEATER=extruder TARGET={extruder_temp}
	G90
	M82
	TEMPERATURE_WAIT SENSOR=heater_bed MINIMUM={bed_temp}
	TEMPERATURE_WAIT SENSOR=extruder MINIMUM={extruder_temp}
	
	G1 E-15 F3600
	
	G28
	BED_MESH_CALIBRATE
	PRIME_LINE

[gcode_macro pid_soplo]
gcode = 
	PID_CALIBRATE HEATER=extruder TARGET=250

[gcode_macro pid_bed]
gcode = 
	PID_CALIBRATE HEATER=heater_bed TARGET=105

[gcode_macro BED]
gcode = 
	PROBE_CALIBRATE

[gcode_macro END_PRINT]
gcode = 
	
	{% set max_x = printer.configfile.config["stepper_x"]["position_max"]|float %}
	{% set max_y = printer.configfile.config["stepper_y"]["position_max"]|float %}
	{% set max_z = printer.configfile.config["stepper_z"]["position_max"]|float %}
	
	
	{% if printer.toolhead.position.x < (max_x - 20) %}
	{% set x_safe = 20.0 %}
	{% else %}
	{% set x_safe = -20.0 %}
	{% endif %}
	
	{% if printer.toolhead.position.y < (max_y - 20) %}
	{% set y_safe = 20.0 %}
	{% else %}
	{% set y_safe = -20.0 %}
	{% endif %}
	
	{% if printer.toolhead.position.z < (max_z - 2) %}
	{% set z_safe = 2.0 %}
	{% else %}
	{% set z_safe = max_z - printer.toolhead.position.z %}
	{% endif %}
	
	
	M400
	G92 E0
	G1 E-15 F3600
	G91
	G0 Z{z_safe} F3600
	G0 X{x_safe} Y{y_safe} F20000
	
	
	M104 S0
	M104 S0
	M140 S0
	M106 S0
	G90
	G0 X{max_x / 2} Y{max_y} F3600
	
	SONG_CRAB_RAVE
	
	
	
	M117 Finished!
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=30

[gcode_macro M300]
gcode = 
	
	{% set S = params.S|default(1000)|int %}
	
	{% set P = params.P|default(100)|int %}
	
	
	{% set V = params.V|default(99)|int %}
	SET_PIN PIN=beeper VALUE={0.1 * (V / 100) if S > 0 else 1} CYCLE_TIME={ 1.0 / S if S > 0 else 1 }
	G4 P{P}
	SET_PIN PIN=beeper VALUE=0 CYCLE_TIME={ 0.001 }
description = 
	"Plays a beep sound.
	@param {int} [S=1000] - Frequency in Hz
	@param {int} [P=100] - Duration in ms
	@param {int} [V=99] - Volume in percent"

[gcode_macro PRIME_LINE]
gcode = 
	{% set feedrate = params.F|default(10)|float * 60 %}
	{% set length = 100.0 %}
	{% set width = printer.configfile.settings.extruder.nozzle_diameter|float %}
	{% set height = ( (width / 0.04)|int - (width / 0.04 / 4)|int )|float * 0.04 %}
	
	{% set extrude = length * width * height * 1.5 %}
	SAVE_GCODE_STATE NAME=PRIME_LINE_STATE
	SET_IDLE_TIMEOUT TIMEOUT=7200
	{% if 'Y' in params %}
	{% set x_start = 1.0 %}
	{% set y_start = (printer.toolhead.axis_maximum.y|float - 100) / 2 %}
	G0 X{x_start} Y{y_start} F5000
	G0 Z{height} F1500
	G91
	
	G1 E8 F300
	
	
	G1 Y100 E{extrude} F{feedrate}
	G0 X{width} F5000
	G1 Y-100 E{extrude} F{feedrate}
	{% else %}
	{% set x_start = (printer.toolhead.axis_maximum.x|float - 100) / 2 %}
	{% set y_start = 1.0 %}
	G0 X{x_start} Y{y_start} F5000
	G0 Z{height} F1500
	G91
	
	G1 E8 F300
	
	
	G1 X100 E{extrude} F{feedrate}
	G0 Y{width} F5000
	G1 X-100 E{extrude} F{feedrate}
	{% endif %}
	RESTORE_GCODE_STATE NAME=PRIME_LINE_STATE

[gcode_macro VINT]
gcode = 
	SCREWS_TILT_CALCULATE

[gcode_macro LOW_TEMP_CHECK]
gcode = 
	{% set extruder_temp = params.T|default(240)|float %}
	{% if printer.extruder.target > extruder_temp %}
	{% set extruder_temp = printer.extruder.target %}
	{% endif %}
	{% if printer.extruder.temperature < extruder_temp %}
	M118 Heating to {extruder_temp}
	SET_HEATER_TEMPERATURE HEATER=extruder TARGET={extruder_temp}
	TEMPERATURE_WAIT SENSOR=extruder MINIMUM={extruder_temp}
	{% endif %}

[gcode_macro M76]
gcode = 
	PAUSE

[gcode_macro M601]
gcode = 
	PAUSE

[gcode_macro G27]
gcode = 
	PARK

[gcode_macro M125]
gcode = 
	PARK

[gcode_macro M600]
gcode = 
	PAUSE

[gcode_macro M701]
gcode = 
	FILAMENT_LOAD

[gcode_macro M702]
gcode = 
	FILAMENT_UNLOAD

[gcode_macro M500]
gcode = 
	SAVE_CONFIG

[gcode_macro PARK]
gcode = 
	{% set x_park = params.X|default(0)|float %}
	{% set y_park = params.Y|default(0)|float %}
	{% set z_park = params.Z|default(10)|float + printer.toolhead.position.z|float %}
	{% set x_max = printer.toolhead.axis_maximum.x|float %}
	{% set y_max = printer.toolhead.axis_maximum.y|float %}
	{% set z_max = printer.toolhead.axis_maximum.z|float %}
	{% if x_park > x_max %}
	{% set x_park = x_max %}
	{% endif %}
	{% if y_park > y_max %}
	{% set y_park = y_max %}
	{% endif %}
	{% if z_park > z_max %}
	{% set z_park = z_max %}
	{% endif %}
	SAVE_GCODE_STATE NAME=PARK_STATE
	G90
	G1 Z{z_park} F1500
	G1 X{x_park} Y{y_park} F5000
	RESTORE_GCODE_STATE name=PARK_STATE

[gcode_macro START_DRYER]
description = Start the heated bed filament dryer.
gcode = 
	{% set ChamberTemperature = params.CHAMBER | default(65.0) | float %}
	{% set BedTemperature = params.TEMPERATURE | default(0.0) | float %}
	{% set DryTime = params.TIME | default(14400) | int %}
	M140 S{BedTemperature}
	M141 S{ChamberTemperature}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=time_remaining VALUE={DryTime}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=bed_temperature VALUE={BedTemperature}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=chamber_temperature VALUE={ChamberTemperature}
	UPDATE_DELAYED_GCODE ID=DRYER_TIMER DURATION=1

[gcode_macro STOP_DRYER]
gcode = 
	M140 S0
	M141 S0
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=time_remaining VALUE=0
	UPDATE_DELAYED_GCODE ID=DRYER_TIMER DURATION=0
	M117 Drying Stopped

[gcode_macro DRYER_STATUS]
variable_time_remaining = 0
variable_bed_temperature = 0
variable_chamber_temperature = 0
gcode = 
	{% if time_remaining > 0 %}
	M140 S{bed_temperature}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=time_remaining VALUE={time_remaining - 1}
	M117 Drying {time_remaining}
	{% else %}
	STOP_DRYER
	{% endif %}

[delayed_gcode DRYER_TIMER]
gcode = 
	UPDATE_DELAYED_GCODE ID=DRYER_TIMER DURATION=1
	DRYER_STATUS

[gcode_macro DRY_tpu]
gcode = 
	START_DRYER TEMPERATURE=0 CHAMBER=50 TIME=18000

[gcode_macro DRY_PETG]
gcode = 
	START_DRYER TEMPERATURE=0  CHAMBER=65 TIME=18000

[gcode_macro DRY_ABS]
gcode = 
	{% set S = params.S|default(0.0)|float %}
	SET_PIN PIN=Laser VALUE={S / 255.0}

[gcode_macro M4]
gcode = 
	{% set S = params.S|default(0.0)|float %}
	SET_PIN PIN=Laser VALUE={S / 255.0}

[gcode_macro M5]
gcode = 
	SET_PIN PIN=Laser VALUE=0

[menu __main __control __toolonoff]
type = input
enable = {'pwm_tool Laser' in printer}
name = Fan: {'ON ' if menu.input else 'OFF'}
input = {printer['pwm_tool Laser'].value}
input_min = 0
input_max = 1
input_step = 1
gcode = 
	M3 S{255 if menu.input else 0}

[menu __main __control __toolspeed]
type = input
enable = {'pwm_tool Laser' in printer}
name = Laser speed: {'%3d' % (menu.input*100)}%
input = {printer['pwm_tool Laser'].value}
input_min = 0
input_max = 1
input_step = 0.01
gcode = 
	M3 S{'%d' % (menu.input*255)}

[gcode_macro NOTE]
description = 
	"Plays a specified note for a specified duration
	@param {string} [N=C5] - Note to play
	@param {int} [D=500] - Duration of note. There are currently some Klipper limitations to how short a note can be.
	@param {int} [V=99] - Volume in percent
	@param {bool} [S=true] - Whether or not to stop the note after duration"
gcode = 
	{% set notes = {
	'C0': 16.35,   'CS0': 17.32,   'D0': 18.35,   'DS0': 19.45,   'E0': 20.60,   'F0': 21.83,   'FS0': 23.12,   'G0': 24.50,   'GS0': 25.96,   'A0': 27.50,   'AS0': 29.14,   'B0': 30.87,
	'C1': 32.70,   'CS1': 34.65,   'D1': 36.71,   'DS1': 38.89,   'E1': 41.20,   'F1': 43.65,   'FS1': 46.25,   'G1': 49.00,   'GS1': 51.91,   'A1': 55.00,   'AS1': 58.27,   'B1': 61.74,
	'C2': 65.41,   'CS2': 69.30,   'D2': 73.42,   'DS2': 77.78,   'E2': 82.41,   'F2': 87.31,   'FS2': 92.50,   'G2': 98.00,   'GS2': 103.83,  'A2': 110.00,  'AS2': 116.54,  'B2': 123.47,
	'C3': 130.81,  'CS3': 138.59,  'D3': 146.83,  'DS3': 155.56,  'E3': 164.81,  'F3': 174.61,  'FS3': 185.00,  'G3': 196.00,  'GS3': 207.65,  'A3': 220.00,  'AS3': 233.08,  'B3': 246.94,
	'C4': 261.63,  'CS4': 277.18,  'D4': 293.66,  'DS4': 311.13,  'E4': 329.63,  'F4': 349.23,  'FS4': 369.99,  'G4': 392.00,  'GS4': 415.30,  'A4': 440.00,  'AS4': 466.16,  'B4': 493.88,
	'C5': 523.25,  'CS5': 554.37,  'D5': 587.33,  'DS5': 622.25,  'E5': 659.26,  'F5': 698.46,  'FS5': 739.99,  'G5': 783.99,  'GS5': 830.61,  'A5': 880.00,  'AS5': 932.33,  'B5': 987.77,
	'C6': 1046.50, 'CS6': 1108.73, 'D6': 1174.66, 'DS6': 1244.51, 'E6': 1318.51, 'F6': 1396.91, 'FS6': 1479.98, 'G6': 1567.98, 'GS6': 1661.22, 'A6': 1760.00, 'AS6': 1864.66, 'B6': 1975.53,
	'C7': 2093.00, 'CS7': 2217.46, 'D7': 2349.32, 'DS7': 2489.02, 'E7': 2637.02, 'F7': 2793.83, 'FS7': 2959.96, 'G7': 3135.96, 'GS7': 3322.44, 'A7': 3520.00, 'AS7': 3729.31, 'B7': 3951.07,
	'C8': 4186.01, 'CS8': 4434.92, 'D8': 4698.64, 'DS8': 4978.03, 'E8': 5274.04, 'F8': 5587.65, 'FS8': 5919.91, 'G8': 6271.93, 'GS8': 6644.88, 'A8': 7040.00, 'AS8': 7458.62, 'B8': 7902.13,
	} %}
	
	{% set note = params.N|default('C5')|string %}
	
	{% set dur = params.D|default(500)|int %}
	
	
	{% set volume = params.V|default(99)|int %}
	
	{% set stop = params.S|default('true')|string %}
	
	{% set freq = notes[note] %}
	
	SET_PIN PIN=beeper VALUE={0.1 * (volume / 100) if volume > 0 else 1} CYCLE_TIME={ 1.0 / freq }
	G4 P{dur}
	{% if stop|lower == 'true' %}
	SET_PIN PIN=beeper VALUE=0 CYCLE_TIME={ 0.001 }
	{% endif %}

[gcode_macro TONE_GEN]
description = "Used for the tone generator menu"
variable_tone_freq = 0.001093
gcode = 
	M117 {printer["gcode_macro TONE_GEN"].tone_freq}nothz

[gcode_macro SONG_STAR_WARS_MAIN_THEME]
description = "Plays the Star Wars main theme"
gcode = 
	NOTE N=D4 D=133
	NOTE N=D4 D=133
	NOTE N=D4 D=133
	NOTE N=G4 D=1000
	NOTE N=D5 D=1000
	
	NOTE N=C5 D=133
	NOTE N=B4 D=133
	NOTE N=A4 D=133
	NOTE N=G5 D=1000
	NOTE N=D5 D=500
	
	NOTE N=C5 D=133
	NOTE N=B4 D=133
	NOTE N=A4 D=133
	NOTE N=G5 D=1000
	NOTE N=D5 D=500
	
	NOTE N=C5 D=133
	NOTE N=B4 D=133
	NOTE N=C5 D=133
	NOTE N=A4 D=1000

[gcode_macro SONG_CRAB_RAVE]
description = "Plays Crab Rave"
gcode = 
	NOTE N=D6 D=150 V=30 S=1
	NOTE N=AS6 D=150 V=30 S=1
	NOTE N=G6 D=150 V=30 S=1
	NOTE N=G6 D=150 V=30 S=0
	NOTE N=D6 D=150 V=30 S=1
	NOTE N=D6 D=150 V=30 S=0
	NOTE N=A6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=0
	NOTE N=D6 D=150 V=30 S=1
	NOTE N=D6 D=150 V=30 S=0
	NOTE N=A6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=0
	NOTE N=C6 D=150 V=30 S=1
	NOTE N=C6 D=150 V=30 S=1
	NOTE N=E6 D=150 V=30 S=1
	NOTE N=E6 D=150 V=30 S=0
	NOTE N=F6 D=150 V=30 S=1
	SET_PIN PIN=beeper VALUE=0

[gcode_macro one]
description = "one"
gcode = 
	NOTE N=C6 D=600 V=30 S=1
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=G5 D=400 V=30 S=1
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=E6 D=400 V=30 S=1
	G4 P150
	NOTE N=G6 D=180 V=30 S=0
	NOTE N=F6 D=180 V=30 S=0
	NOTE N=E6 D=180 V=30 S=0
	NOTE N=D6 D=180 V=30 S=1
	NOTE N=C6 D=600 V=30 S=1
	
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=G5 D=400 V=30 S=1
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=C6 D=600 V=30 S=1
	SET_PIN PIN=beeper VALUE=0

[gcode_macro SONG_BOOMER]
description = "BOOMER"
gcode = 
	M300 P207 S659
	M300 P207 S784
	M300 P207 S494
	M300 P207 S494
	M300 P207 S392
	M300 P207 S494
	M300 P207 S494
	M300 P207 S330
	M300 P207 S784
	M300 P207 S659
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S988
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S659
	M300 P207 S784
	M300 P207 S494
	M300 P207 S494
	M300 P207 S392
	M300 P207 S494
	M300 P207 S494
	M300 P207 S330
	M300 P207 S784
	M300 P207 S659
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S988
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S659
	M300 P207 S784
	M300 P207 S494
	M300 P207 S494
	M300 P207 S392
	M300 P207 S494
	M300 P207 S494
	M300 P207 S330
	M300 P207 S784
	M300 P207 S659
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S988
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330

[gcode_macro GET_TIMELAPSE_SETUP]
description = Print the Timelapse setup
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% set output_txt = ["Timelapse Setup:"] %}
	{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}
	{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}
	{% if tl.park.enable %}
	{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}
	{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}
	{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}
	{% endif %}
	{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}
	{% if not tl.extruder.fw_retract %}
	{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}
	{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}
	{% endif %}
	{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}
	{action_respond_info(output_txt|join("\n"))}

[gcode_macro _SET_TIMELAPSE_SETUP]
description = Set user parameters for timelapse
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	
	{% set min = printer.toolhead.axis_minimum %}
	{% set max = printer.toolhead.axis_maximum %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	{% set park = {'min'   : {'x': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),
	'y': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},
	'max'   : {'x': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),
	'y': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},
	'center': {'x': (max.x-(max.x-min.x)/2)|round(3),
	'y': (max.y-(max.y-min.y)/2)|round(3)}} %}
	
	{% if params.ENABLE %}
	{% if params.ENABLE|lower is in ['true', 'false'] %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == 'true' else False}
	{% else %}
	{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.VERBOSE %}
	{% if params.VERBOSE|lower is in ['true', 'false'] %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == 'true' else False}
	{% else %}
	{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_X %}
	{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}
	{% set _dummy = tl.park.custom.update({'x':params.CUSTOM_POS_X|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_Y %}
	{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}
	{% set _dummy = tl.park.custom.update({'y':params.CUSTOM_POS_Y|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_DZ %}
	{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}
	{% set _dummy = tl.park.custom.update({'dz':params.CUSTOM_POS_DZ|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}
	{% endif %}
	{% endif %}
	{% if params.PARK_ENABLE %}
	{% if params.PARK_ENABLE|lower is in ['true', 'false'] %}
	{% set _dummy = tl.park.update({'enable':True if params.PARK_ENABLE|lower == 'true' else False}) %}
	{% else %}
	{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.PARK_POS %}
	{% if params.PARK_POS|lower is in ['center','front_left','front_right','back_left','back_right','custom','x_only','y_only'] %}
	{% set dic = {'center'      : {'x': park.center.x   , 'y': park.center.y   , 'dz': 1                },
	'front_left'  : {'x': park.min.x      , 'y': park.min.y      , 'dz': 0                },
	'front_right' : {'x': park.max.x      , 'y': park.min.y      , 'dz': 0                },
	'back_left'   : {'x': park.min.x      , 'y': park.max.y      , 'dz': 0                },
	'back_right'  : {'x': park.max.x      , 'y': park.max.y      , 'dz': 0                },
	'custom'      : {'x': tl.park.custom.x, 'y': tl.park.custom.y, 'dz': tl.park.custom.dz},
	'x_only'      : {'x': tl.park.custom.x, 'y': 'none'          , 'dz': tl.park.custom.dz},
	'y_only'      : {'x': 'none'          , 'y': tl.park.custom.y, 'dz': tl.park.custom.dz}} %}
	{% set _dummy = tl.park.update({'pos':params.PARK_POS|lower}) %}
	{% set _dummy = tl.park.update({'coord':dic[tl.park.pos]}) %}
	{% else %}
	{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"
	% params.PARK_POS|upper)}
	{% endif %}
	{% endif %}
	{% if params.PARK_TIME %}
	{% if params.PARK_TIME|float >= 0.0 %}
	{% set _dummy = tl.park.update({'time':params.PARK_TIME|float|round(3)}) %}
	{% else %}
	{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"
	{% if params.TRAVEL_SPEED %}
	{% if params.TRAVEL_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'travel':params.TRAVEL_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}
	{% endif %}
	{% endif %}
	{% if params.RETRACT_SPEED %}
	{% if params.RETRACT_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'retract':params.RETRACT_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}
	{% endif %}
	{% endif %}
	{% if params.EXTRUDE_SPEED %}
	{% if params.EXTRUDE_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'extrude':params.EXTRUDE_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"
	{% if params.EXTRUDE_DISTANCE %}
	{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}
	{% set _dummy = tl.extruder.update({'extrude':params.EXTRUDE_DISTANCE|float|round(3)}) %}
	{% else %}
	{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}
	{% endif %}
	{% endif %}
	{% if params.RETRACT_DISTANCE %}
	{% if params.RETRACT_DISTANCE|float >= 0.0 %}
	{% set _dummy = tl.extruder.update({'retract':params.RETRACT_DISTANCE|float|round(3)}) %}
	{% else %}
	{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}
	{% endif %}
	{% endif %}
	{% if params.FW_RETRACT %}
	{% if params.FW_RETRACT|lower is in ['true', 'false'] %}
	{% if 'firmware_retraction' in printer.configfile.settings %}
	{% set _dummy = tl.extruder.update({'fw_retract': True if params.FW_RETRACT|lower == 'true' else False}) %}
	{% else %}
	{% set _dummy = tl.extruder.update({'fw_retract':False}) %}
	{% if params.FW_RETRACT|capitalize == 'True' %}
	{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}
	{% endif %}
	{% endif %}
	{% else %}
	{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"
	{% if printer.configfile.settings['gcode_macro pause'] is defined %}
	{% set _dummy = tl.macro.update({'pause': printer.configfile.settings['gcode_macro pause'].rename_existing}) %}
	{% endif %}
	{% if printer.configfile.settings['gcode_macro resume'] is defined %}
	{% set _dummy = tl.macro.update({'resume': printer.configfile.settings['gcode_macro resume'].rename_existing}) %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"

[gcode_macro TIMELAPSE_TAKE_FRAME]
description = Take Timelapse shoot
variable_enable = False
variable_takingframe = False
variable_park = {'enable': False,
	'pos'   : 'center',
	'time'  : 0.1,
	'custom': {'x': 0, 'y': 0, 'dz': 0},
	'coord' : {'x': 0, 'y': 0, 'dz': 0}}
variable_extruder = {'fw_retract': False,
	'retract': 1.0,
	'extrude': 1.0}
variable_speed = {'travel': 100,
	'retract': 15,
	'extrude': 15}
variable_verbose = True
variable_restore = {'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}
variable_macro = {'pause': 'PAUSE', 'resume': 'RESUME'}
variable_is_paused = False
gcode = 
	{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower =='true' else False %}
	{% if enable %}
	{% if (hyperlapse and printer['gcode_macro HYPERLAPSE'].run) or
	(not hyperlapse and not printer['gcode_macro HYPERLAPSE'].run) %}
	{% if park.enable %}
	{% set pos = {'x': 'X' + park.coord.x|string if park.pos != 'y_only' else '',
	'y': 'Y' + park.coord.y|string if park.pos != 'x_only' else '',
	'z': 'Z'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}
	{% set restore = {'absolute': {'coordinates': printer.gcode_move.absolute_coordinates,
	'extrude'    : printer.gcode_move.absolute_extrude},
	'speed'   : printer.gcode_move.speed,
	'e'       : printer.gcode_move.gcode_position.e,
	'factor'  : {'speed'  : printer.gcode_move.speed_factor,
	'extrude': printer.gcode_move.extrude_factor}} %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"
	{% if not printer[printer.toolhead.extruder].can_extrude %}
	{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}
	{% else %}
	{% if extruder.fw_retract %}
	G10
	{% else %}
	M83
	G0 E-{extruder.retract} F{speed.retract * 60}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True
	{macro.pause}
	SET_GCODE_OFFSET X=0 Y=0
	G90
	{% if "xyz" not in printer.toolhead.homed_axes %}
	{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}
	{% else %}
	G0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5
	M400
	{% endif %}
	_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}
	{% endif %}
	{% else %}
	{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}
	{% endif %}

[gcode_macro _TIMELAPSE_NEW_FRAME]
description = action call for timelapse shoot. must be a seperate macro
gcode = 
	{action_call_remote_method("timelapse_newframe",
	macropark=printer['gcode_macro TIMELAPSE_TAKE_FRAME'].park,
	hyperlapse=params.HYPERLAPSE)}

[delayed_gcode _WAIT_TIMELAPSE_TAKE_FRAME]
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% set factor = {'speed': printer.gcode_move.speed_factor, 'extrude': printer.gcode_move.extrude_factor} %}
	{% if tl.takingframe %}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5
	{% else %}
	{tl.macro.resume} VELOCITY={tl.speed.travel}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False
	{% if not printer[printer.toolhead.extruder].can_extrude %}
	{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}
	{% else %}
	{% if tl.extruder.fw_retract %}
	G11
	{% else %}
	G0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}
	G0 F{tl.restore.speed}
	{% if tl.restore.absolute.extrude %}
	M82
	G92 E{tl.restore.e}
	{% endif %}
	{% endif %}
	{% endif %}
	{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}
	{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}
	{% if not tl.restore.absolute.coordinates %} G91 {% endif %}
	{% endif %}

[gcode_macro HYPERLAPSE]
description = Start/Stop a hyperlapse recording
variable_cycle = 0
variable_run = False
gcode = 
	{% set cycle = params.CYCLE|default(30)|int %}
	{% if params.ACTION and params.ACTION|lower == 'start' %}
	{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}
	TIMELAPSE_TAKE_FRAME HYPERLAPSE=True
	{% elif params.ACTION and params.ACTION|lower == 'stop' %}
	{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0
	{% else %}
	{action_raise_error("Hyperlapse: No valid input parameter
	Use:
	- HYPERLAPSE ACTION=START [CYCLE=time]
	- HYPERLAPSE ACTION=STOP")}
	{% endif %}

[delayed_gcode _HYPERLAPSE_LOOP]
gcode = 
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}
	TIMELAPSE_TAKE_FRAME HYPERLAPSE=True

[gcode_macro TIMELAPSE_RENDER]
description = Render Timelapse video and wait for the result
variable_render = False
variable_run_identifier = 0
gcode = 
	{action_respond_info("Timelapse: Rendering started")}
	{action_call_remote_method("timelapse_render", byrendermacro="True")}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True
	{printer.configfile.settings['gcode_macro pause'].rename_existing}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5

[delayed_gcode _WAIT_TIMELAPSE_RENDER]
gcode = 
	{% set ri = printer['gcode_macro TIMELAPSE_RENDER'].run_identifier % 4 %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}
	{% if printer['gcode_macro TIMELAPSE_RENDER'].render %}
	M117 Rendering {['-','\\','|','/'][ri]}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5
	{% else %}
	{action_respond_info("Timelapse: Rendering finished")}
	M117
	{printer.configfile.settings['gcode_macro resume'].rename_existing}
	{% endif %}

[gcode_macro TEST_STREAM_DELAY]
description = Helper macro to find stream and park delay
gcode = 
	{% set min = printer.toolhead.axis_minimum %}
	{% set max = printer.toolhead.axis_maximum %}
	{% set act = printer.toolhead.position %}
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% if act.z > 5.0 %}
	G0 X{min.x + 5.0} F{tl.speed.travel|int * 60}
	G0 X{(max.x-min.x)/2}
	G4 P{tl.park.time|float * 1000}
	_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE
	G0 X{max.x - 5.0}
	{% else %}
	{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}
	{% endif %}

[exclude_object]

[gcode_macro Backup_on_GitHub]
gcode = 
	{% set message = params.MESSAGE|default() %}
	{% if message %}
	RUN_SHELL_COMMAND CMD=update_git_script_message PARAMS="'{params.MESSAGE}'"
	{% else %}
	RUN_SHELL_COMMAND CMD=update_git_script
	{% endif %}

[gcode_shell_command update_git_script]
command = bash -c "bash $HOME/klipper-backup/script.sh"
timeout = 90.0
verbose = True

[gcode_shell_command update_git_script_message]
command = bash -c "bash $HOME/klipper-backup/script.sh -c \"$0\""
timeout = 90.0
verbose = True

[mcu]
serial = /dev/ttyS3
restart_method = command

[output_pin Power]
pin = PC12
value = 1
shutdown_value = 1

[temperature_sensor orange_pi]
sensor_type = temperature_host
min_temp = 0
max_temp = 100

[heater_generic chamber_heater]
heater_pin = !PA7
sensor_type = ATC Semitec 104GT-2
sensor_pin = PA5
control = watermark
max_power = 1
min_temp = 15
max_temp = 85

[verify_heater chamber_heater]
max_error = 9999
check_gain_time = 9999
hysteresis = 5
heating_gain = 2

[filament_motion_sensor motion_sensor]
detection_length = 50
extruder = extruder
switch_pin = !PC15
pause_on_runout = True
runout_gcode = 
	SONG_CRAB_RAVE

[bltouch]
sensor_pin = ^PC14
control_pin = PA1
x_offset = -40
y_offset = 0.000
z_offset = 1.70
pin_up_reports_not_triggered = False
probe_with_touch_mode = True

[heater_bed]
heater_pin = PC9
sensor_type = ATC Semitec 104GT-2
sensor_pin = PC3
control = pid
pid_kp = 72.553
pid_ki = 1.154
pid_kd = 1139.994
min_temp = 5
max_temp = 125

[heater_fan radiator]
pin = PC7
max_power = 1.0
kick_start_time = 0.600
heater = extruder
heater_temp = 50.0
shutdown_speed = 1

[fan]
pin = PC6

[input_shaper]
shaper_type_x = 2hump_ei
shaper_freq_x = 43.0
shaper_type_y = mzv
shaper_freq_y = 32.6

[printer]
kinematics = cartesian
max_velocity = 300
max_accel = 1900
max_z_velocity = 30
max_z_accel = 100
square_corner_velocity = 4

[bed_mesh]
speed = 150
horizontal_move_z = 9
mesh_min = 10, 20
mesh_max = 195, 210
probe_count = 5
mesh_pps = 2, 3
algorithm = bicubic
bicubic_tension = 0.2
move_check_distance = 9
split_delta_z = .025
fade_start = 1
fade_end = 10
fade_target = 0

[screws_tilt_adjust]
screw1 = 79, 27
screw1_name = Peredniy Leviy
screw2 = 235, 27
screw2_name = Peredniy Praviy
screw3 = 235,197
screw3_name = Zadniy Praviy
screw4 = 79,197
screw4_name = Zadniy Leviy
speed = 120
horizontal_move_z = 9

[safe_z_home]
home_xy_position = 157,115
speed = 50
z_hop = 9.0
z_hop_speed = 20.0

[stepper_x]
step_pin = PB13
dir_pin = !PB12
enable_pin = !PB14
microsteps = 16
rotation_distance = 40
endstop_pin = ^PC0
position_endstop = 0
position_max = 240
position_min = -2
homing_retract_dist = 5
homing_speed = 50
second_homing_speed = 10

[tmc2209 stepper_x]
uart_pin = PC11
tx_pin = PC10
uart_address = 0
run_current = 0.580
stealthchop_threshold = 999999

[stepper_y]
step_pin = PB10
dir_pin = !PB2
enable_pin = !PB11
microsteps = 16
rotation_distance = 40
endstop_pin = ^PC1
position_endstop = 0
homing_retract_dist = 5
homing_speed = 50
second_homing_speed = 10
position_max = 231
position_min = 0

[tmc2209 stepper_y]
uart_pin = PC11
tx_pin = PC10
uart_address = 2
run_current = 0.6
stealthchop_threshold = 999999

[stepper_z]
step_pin = PB0
dir_pin = PC5
enable_pin = !PB1
microsteps = 16
rotation_distance = 40
gear_ratio = 80:16
full_steps_per_rotation = 200
endstop_pin = probe:z_virtual_endstop
homing_retract_dist = 9
second_homing_speed = 10
position_min = -5
position_max = 245
homing_speed = 50

[tmc2209 stepper_z]
uart_pin = PC11
tx_pin = PC10
uart_address = 1
run_current = 0.580
stealthchop_threshold = 999999
interpolate = false

[extruder]
step_pin = PB3
dir_pin = PB4
enable_pin = !PD2
microsteps = 16
rotation_distance = 4.637
nozzle_diameter = 0.400
filament_diameter = 1.750
heater_pin = PC8
sensor_type = ATC Semitec 104GT-2
sensor_pin = PA0
min_temp = 5
max_temp = 270
max_extrude_only_velocity = 120
max_extrude_only_accel = 3000
pressure_advance = 0.031
full_steps_per_rotation = 200
control = pid
pid_kp = 29.662
pid_ki = 2.382
pid_kd = 92.322

[tmc2209 extruder]
uart_pin = PC11
tx_pin = PC10
uart_address = 3
run_current = 0.7
stealthchop_threshold = 999999

[static_digital_output usb_pullup_enable]
pins = !PA14

[board_pins]
aliases = 
	
	EXP1_1=PB5,  EXP1_3=PA9,   EXP1_5=PA10, EXP1_7=PB8,  EXP1_9=<GND>,
	EXP1_2=PA15, EXP1_4=<RST>, EXP1_6=PB9,  EXP1_8=PB15, EXP1_10=<5V>

[display]
lcd_type = st7920
cs_pin = EXP1_7
sclk_pin = EXP1_6
sid_pin = EXP1_8
encoder_pins = ^EXP1_5, ^EXP1_3
click_pin = ^!EXP1_2

[pwm_cycle_time beeper]
pin = EXP1_1
shutdown_value = 0
cycle_time = 0.001

[firmware_retraction]
retract_length = 1.0
retract_speed = 80
unretract_extra_length = 0
unretract_speed = 80

[pwm_tool Laser]
pin = PA6
cycle_time = 0.0001
shutdown_value = 0
maximum_mcu_duration = 5

[bed_mesh 70]
version = 1
points = 
	-0.045000, 0.027500, 0.015000
	-0.055000, -0.005000, -0.035000
	-0.007500, 0.040000, -0.002500
x_count = 3
y_count = 3
mesh_x_pps = 2
mesh_y_pps = 3
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 195.0
min_y = 20.0
max_y = 210.0

[bed_mesh default]
version = 1
points = 
	0.020000, 0.025000, 0.030000, -0.007500, -0.052500
	0.015000, 0.017500, 0.022500, -0.007500, -0.057500
	0.030000, 0.030000, 0.037500, 0.002500, -0.035000
	0.012500, 0.030000, 0.050000, 0.035000, -0.010000
	0.080000, 0.087500, 0.115000, 0.097500, 0.067500
x_count = 5
y_count = 5
mesh_x_pps = 2
mesh_y_pps = 3
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 195.0
min_y = 20.0
max_y = 210.0
=======================
Extruder max_extrude_ratio=0.266081
mcu 'mcu': Starting serial connect
webhooks client 281473326727904: New connection
webhooks client 281473326727904: Client info {'program': 'Moonraker', 'version': 'v0.9.3-4-ga4604e3'}
mcu 'mcu': got {'oid': 14, 'next_clock': 288129024, 'value': 31147, '#name': 'analog_in_state', '#sent_time': 3092.746949599, '#receive_time': 3092.7886824740003}
mcu 'mcu': got {'oid': 18, 'next_clock': 291009024, 'value': 31313, '#name': 'analog_in_state', '#sent_time': 3092.799422432, '#receive_time': 3092.8286755990002}
mcu 'mcu': got {'oid': 26, 'next_clock': 296769024, 'value': 31257, '#name': 'analog_in_state', '#sent_time': 3092.9030837239998, '#receive_time': 3092.908679307}
mcu 'mcu': got {'oid': 14, 'next_clock': 309729024, 'value': 31143, '#name': 'analog_in_state', '#sent_time': 3093.058856099, '#receive_time': 3093.0886847660004}
Loaded MCU 'mcu' 118 commands (v0.12.0-404-g80d185c94 / gcc: (15:12.2.rel1-1) 12.2.1 20221205 binutils: (2.40-2+18+b1) 2.40)
MCU 'mcu' config: ADC_MAX=4095 BUS_PINS_i2c1=PB6,PB7 BUS_PINS_i2c1a=PB8,PB9 BUS_PINS_i2c2=PB10,PB11 BUS_PINS_spi1=PA6,PA7,PA5 BUS_PINS_spi1a=PB4,PB5,PB3 BUS_PINS_spi2=PB14,PB15,PB13 BUS_PINS_spi3=PB4,PB5,PB3 CLOCK_FREQ=72000000 INITIAL_PINS=!PA14 MCU=stm32f103xe PWM_MAX=255 RECEIVE_WINDOW=192 RESERVE_PINS_serial=PA3,PA2 SERIAL_BAUD=250000 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
Configured MCU 'mcu' (1024 moves)
Starting heater checks for chamber_heater
Starting heater checks for heater_bed
bed_mesh: generated points
Index |  Tool Adjusted  |   Probe
  0   | (50.0, 20.0)    | (10.0, 20.0)
  1   | (96.2, 20.0)    | (56.2, 20.0)
  2   | (142.5, 20.0)   | (102.5, 20.0)
  3   | (188.8, 20.0)   | (148.8, 20.0)
  4   | (235.0, 20.0)   | (195.0, 20.0)
  5   | (235.0, 67.5)   | (195.0, 67.5)
  6   | (188.8, 67.5)   | (148.8, 67.5)
  7   | (142.5, 67.5)   | (102.5, 67.5)
  8   | (96.2, 67.5)    | (56.2, 67.5)
  9   | (50.0, 67.5)    | (10.0, 67.5)
  10  | (50.0, 115.0)   | (10.0, 115.0)
  11  | (96.2, 115.0)   | (56.2, 115.0)
  12  | (142.5, 115.0)  | (102.5, 115.0)
  13  | (188.8, 115.0)  | (148.8, 115.0)
  14  | (235.0, 115.0)  | (195.0, 115.0)
  15  | (235.0, 162.5)  | (195.0, 162.5)
  16  | (188.8, 162.5)  | (148.8, 162.5)
  17  | (142.5, 162.5)  | (102.5, 162.5)
  18  | (96.2, 162.5)   | (56.2, 162.5)
  19  | (50.0, 162.5)   | (10.0, 162.5)
  20  | (50.0, 210.0)   | (10.0, 210.0)
  21  | (96.2, 210.0)   | (56.2, 210.0)
  22  | (142.5, 210.0)  | (102.5, 210.0)
  23  | (188.8, 210.0)  | (148.8, 210.0)
  24  | (235.0, 210.0)  | (195.0, 210.0)
Starting heater checks for extruder
Stats 3093.6: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=3022 bytes_read=6253 bytes_retransmit=0 bytes_invalid=0 send_seq=212 receive_seq=209 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=1945 upcoming_bytes=236 freq=71995980  orange_pi: temp=47.5 chamber_heater: target=0 temp=0.0 pwm=0.000 heater_bed: target=0 temp=24.7 pwm=0.000 sysload=1.13 cputime=69.187 memavail=1720820 print_time=4836.590 buffer_time=0.242 print_stall=0 extruder: target=0 temp=0.0 pwm=0.000
webhooks: registering remote method 'shutdown_machine' for connection id: 281473326727904
webhooks: registering remote method 'reboot_machine' for connection id: 281473326727904
webhooks: registering remote method 'pause_job_queue' for connection id: 281473326727904
webhooks: registering remote method 'start_job_queue' for connection id: 281473326727904
Stats 3094.6: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=5437 bytes_read=6564 bytes_retransmit=0 bytes_invalid=0 send_seq=258 receive_seq=258 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71997804  orange_pi: temp=47.2 chamber_heater: target=0 temp=26.9 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.13 cputime=69.230 memavail=1720632 print_time=4836.590 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3095.6: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000114 mcu_task_stddev=0.000264 bytes_write=5465 bytes_read=6757 bytes_retransmit=0 bytes_invalid=0 send_seq=261 receive_seq=261 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998119  orange_pi: temp=47.0 chamber_heater: target=0 temp=26.9 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.13 cputime=69.268 memavail=1720952 print_time=4836.590 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3096.6: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000114 mcu_task_stddev=0.000264 bytes_write=5471 bytes_read=6923 bytes_retransmit=0 bytes_invalid=0 send_seq=262 receive_seq=262 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998271  orange_pi: temp=46.0 chamber_heater: target=0 temp=27.2 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.13 cputime=69.290 memavail=1721652 print_time=4836.590 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3097.6: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000114 mcu_task_stddev=0.000264 bytes_write=5477 bytes_read=7089 bytes_retransmit=0 bytes_invalid=0 send_seq=263 receive_seq=263 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998275  orange_pi: temp=46.4 chamber_heater: target=0 temp=27.1 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.12 cputime=69.311 memavail=1721508 print_time=4836.590 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3098.6: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000114 mcu_task_stddev=0.000264 bytes_write=5483 bytes_read=7255 bytes_retransmit=0 bytes_invalid=0 send_seq=264 receive_seq=264 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998231  orange_pi: temp=46.2 chamber_heater: target=0 temp=26.8 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.12 cputime=69.331 memavail=1721260 print_time=4836.590 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3099.6: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000114 mcu_task_stddev=0.000264 bytes_write=5489 bytes_read=7421 bytes_retransmit=0 bytes_invalid=0 send_seq=265 receive_seq=265 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998212  orange_pi: temp=46.0 chamber_heater: target=0 temp=27.0 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.12 cputime=69.352 memavail=1721260 print_time=4836.590 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3100.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5495 bytes_read=7601 bytes_retransmit=0 bytes_invalid=0 send_seq=266 receive_seq=266 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998240  orange_pi: temp=46.8 chamber_heater: target=0 temp=27.1 pwm=0.000 heater_bed: target=0 temp=24.7 pwm=0.000 sysload=1.12 cputime=69.373 memavail=1720776 print_time=4836.590 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3101.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5501 bytes_read=7767 bytes_retransmit=0 bytes_invalid=0 send_seq=267 receive_seq=267 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998239  orange_pi: temp=46.3 chamber_heater: target=0 temp=27.0 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.12 cputime=69.394 memavail=1720796 print_time=4836.590 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3102.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5507 bytes_read=7933 bytes_retransmit=0 bytes_invalid=0 send_seq=268 receive_seq=268 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998231  orange_pi: temp=46.3 chamber_heater: target=0 temp=27.0 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.11 cputime=69.415 memavail=1720292 print_time=4836.590 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3103.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5513 bytes_read=8099 bytes_retransmit=0 bytes_invalid=0 send_seq=269 receive_seq=269 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998241  orange_pi: temp=46.4 chamber_heater: target=0 temp=27.0 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.11 cputime=69.435 memavail=1719536 print_time=4836.590 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3104.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5519 bytes_read=8265 bytes_retransmit=0 bytes_invalid=0 send_seq=270 receive_seq=270 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998258  orange_pi: temp=46.5 chamber_heater: target=0 temp=26.9 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.11 cputime=69.456 memavail=1719032 print_time=4836.590 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3105.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000012 bytes_write=5525 bytes_read=8445 bytes_retransmit=0 bytes_invalid=0 send_seq=271 receive_seq=271 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998271  orange_pi: temp=46.2 chamber_heater: target=0 temp=26.9 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.11 cputime=69.474 memavail=1718800 print_time=4836.590 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3106.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000012 bytes_write=5531 bytes_read=8611 bytes_retransmit=0 bytes_invalid=0 send_seq=272 receive_seq=272 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998290  orange_pi: temp=46.6 chamber_heater: target=0 temp=26.7 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.11 cputime=69.496 memavail=1718044 print_time=4836.590 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3107.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000012 bytes_write=5537 bytes_read=8777 bytes_retransmit=0 bytes_invalid=0 send_seq=273 receive_seq=273 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998290  orange_pi: temp=46.0 chamber_heater: target=0 temp=26.9 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.10 cputime=69.517 memavail=1717040 print_time=4836.590 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 3108.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000012 bytes_write=5543 bytes_read=8943 bytes_retransmit=0 bytes_invalid=0 send_seq=274 receive_seq=274 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998293  orange_pi: temp=46.2 chamber_heater: target=0 temp=26.8 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.10 cputime=69.538 memavail=1716784 print_time=4836.590 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3109.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000012 bytes_write=5549 bytes_read=9109 bytes_retransmit=0 bytes_invalid=0 send_seq=275 receive_seq=275 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998295  orange_pi: temp=46.1 chamber_heater: target=0 temp=27.0 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.10 cputime=69.558 memavail=1716532 print_time=4836.590 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3110.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5555 bytes_read=9289 bytes_retransmit=0 bytes_invalid=0 send_seq=276 receive_seq=276 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998290  orange_pi: temp=46.0 chamber_heater: target=0 temp=27.2 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.10 cputime=69.579 memavail=1715780 print_time=4836.590 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3111.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5561 bytes_read=9455 bytes_retransmit=0 bytes_invalid=0 send_seq=277 receive_seq=277 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998289  orange_pi: temp=46.2 chamber_heater: target=0 temp=27.3 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.10 cputime=69.600 memavail=1715780 print_time=4836.590 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3112.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5567 bytes_read=9621 bytes_retransmit=0 bytes_invalid=0 send_seq=278 receive_seq=278 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998287  orange_pi: temp=45.8 chamber_heater: target=0 temp=26.9 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.09 cputime=69.621 memavail=1715784 print_time=4836.590 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3113.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5573 bytes_read=9787 bytes_retransmit=0 bytes_invalid=0 send_seq=279 receive_seq=279 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998284  orange_pi: temp=46.0 chamber_heater: target=0 temp=27.0 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.09 cputime=69.641 memavail=1716076 print_time=4836.590 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3114.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5579 bytes_read=9953 bytes_retransmit=0 bytes_invalid=0 send_seq=280 receive_seq=280 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998282  orange_pi: temp=46.4 chamber_heater: target=0 temp=27.0 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.09 cputime=69.663 memavail=1715832 print_time=4836.590 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3115.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5585 bytes_read=10119 bytes_retransmit=0 bytes_invalid=0 send_seq=281 receive_seq=281 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998288  orange_pi: temp=46.2 chamber_heater: target=0 temp=27.0 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.09 cputime=69.684 memavail=1715832 print_time=4836.590 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3116.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5591 bytes_read=10299 bytes_retransmit=0 bytes_invalid=0 send_seq=282 receive_seq=282 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998290  orange_pi: temp=46.2 chamber_heater: target=0 temp=26.9 pwm=0.000 heater_bed: target=0 temp=24.7 pwm=0.000 sysload=1.09 cputime=69.706 memavail=1715604 print_time=4836.590 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3117.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5597 bytes_read=10465 bytes_retransmit=0 bytes_invalid=0 send_seq=283 receive_seq=283 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998288  orange_pi: temp=46.3 chamber_heater: target=0 temp=27.0 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.09 cputime=69.727 memavail=1715612 print_time=4836.590 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3118.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5603 bytes_read=10631 bytes_retransmit=0 bytes_invalid=0 send_seq=284 receive_seq=284 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998292  orange_pi: temp=46.4 chamber_heater: target=0 temp=26.9 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.09 cputime=69.751 memavail=1715612 print_time=4836.590 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3119.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5609 bytes_read=10797 bytes_retransmit=0 bytes_invalid=0 send_seq=285 receive_seq=285 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998291  orange_pi: temp=46.0 chamber_heater: target=0 temp=26.8 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.09 cputime=69.772 memavail=1715612 print_time=4836.590 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3120.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5615 bytes_read=10963 bytes_retransmit=0 bytes_invalid=0 send_seq=286 receive_seq=286 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998296  orange_pi: temp=45.6 chamber_heater: target=0 temp=26.8 pwm=0.000 heater_bed: target=0 temp=24.7 pwm=0.000 sysload=1.09 cputime=69.793 memavail=1715872 print_time=4836.590 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3121.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5621 bytes_read=11143 bytes_retransmit=0 bytes_invalid=0 send_seq=287 receive_seq=287 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998299  orange_pi: temp=46.0 chamber_heater: target=0 temp=26.8 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.09 cputime=69.815 memavail=1715908 print_time=4836.590 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 3122.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5627 bytes_read=11309 bytes_retransmit=0 bytes_invalid=0 send_seq=288 receive_seq=288 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998302  orange_pi: temp=46.1 chamber_heater: target=0 temp=26.8 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.08 cputime=69.836 memavail=1715904 print_time=4836.590 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3123.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5633 bytes_read=11475 bytes_retransmit=0 bytes_invalid=0 send_seq=289 receive_seq=289 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998305  orange_pi: temp=45.8 chamber_heater: target=0 temp=27.2 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.08 cputime=69.857 memavail=1715404 print_time=4836.590 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3124.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5639 bytes_read=11641 bytes_retransmit=0 bytes_invalid=0 send_seq=290 receive_seq=290 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998304  orange_pi: temp=45.7 chamber_heater: target=0 temp=27.1 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.08 cputime=69.879 memavail=1715664 print_time=4836.590 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3125.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5651 bytes_read=11823 bytes_retransmit=0 bytes_invalid=0 send_seq=292 receive_seq=292 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998305  orange_pi: temp=46.0 chamber_heater: target=0 temp=26.9 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.08 cputime=69.900 memavail=1715424 print_time=4836.590 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3126.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5657 bytes_read=12003 bytes_retransmit=0 bytes_invalid=0 send_seq=293 receive_seq=293 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998307  orange_pi: temp=46.0 chamber_heater: target=0 temp=26.8 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.08 cputime=69.922 memavail=1715728 print_time=4836.590 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3127.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5663 bytes_read=12169 bytes_retransmit=0 bytes_invalid=0 send_seq=294 receive_seq=294 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998309  orange_pi: temp=46.0 chamber_heater: target=0 temp=26.8 pwm=0.000 heater_bed: target=0 temp=24.7 pwm=0.000 sysload=1.07 cputime=69.943 memavail=1715984 print_time=4836.590 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3128.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5669 bytes_read=12335 bytes_retransmit=0 bytes_invalid=0 send_seq=295 receive_seq=295 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998310  orange_pi: temp=46.2 chamber_heater: target=0 temp=26.7 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.07 cputime=69.965 memavail=1715480 print_time=4836.590 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3129.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5675 bytes_read=12516 bytes_retransmit=0 bytes_invalid=0 send_seq=296 receive_seq=296 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998308  orange_pi: temp=46.2 chamber_heater: target=0 temp=26.7 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.07 cputime=69.986 memavail=1715508 print_time=4836.590 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3130.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5681 bytes_read=12667 bytes_retransmit=0 bytes_invalid=0 send_seq=297 receive_seq=297 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998310  orange_pi: temp=46.2 chamber_heater: target=0 temp=26.8 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.07 cputime=70.007 memavail=1715004 print_time=4836.590 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3131.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5687 bytes_read=12847 bytes_retransmit=0 bytes_invalid=0 send_seq=298 receive_seq=298 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998311  orange_pi: temp=46.3 chamber_heater: target=0 temp=26.9 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.07 cputime=70.028 memavail=1715684 print_time=4836.590 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3132.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5693 bytes_read=13028 bytes_retransmit=0 bytes_invalid=0 send_seq=299 receive_seq=299 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998310  orange_pi: temp=46.0 chamber_heater: target=0 temp=26.8 pwm=0.000 heater_bed: target=0 temp=24.7 pwm=0.000 sysload=1.07 cputime=70.050 memavail=1715288 print_time=4836.590 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 3133.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5699 bytes_read=13179 bytes_retransmit=0 bytes_invalid=0 send_seq=300 receive_seq=300 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998310  orange_pi: temp=46.1 chamber_heater: target=0 temp=26.8 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.07 cputime=70.071 memavail=1715808 print_time=4836.590 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3134.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5705 bytes_read=13345 bytes_retransmit=0 bytes_invalid=0 send_seq=301 receive_seq=301 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998312  orange_pi: temp=45.6 chamber_heater: target=0 temp=26.7 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.07 cputime=70.092 memavail=1715836 print_time=4836.590 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3135.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5711 bytes_read=13526 bytes_retransmit=0 bytes_invalid=0 send_seq=302 receive_seq=302 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998314  orange_pi: temp=46.0 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.07 cputime=70.115 memavail=1716612 print_time=4836.590 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3136.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000012 bytes_write=5717 bytes_read=13691 bytes_retransmit=0 bytes_invalid=0 send_seq=303 receive_seq=303 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998315  orange_pi: temp=46.1 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.07 cputime=70.136 memavail=1716544 print_time=4836.590 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3137.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000012 bytes_write=5723 bytes_read=13857 bytes_retransmit=0 bytes_invalid=0 send_seq=304 receive_seq=304 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998313  orange_pi: temp=46.1 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.14 cputime=70.157 memavail=1716676 print_time=4836.590 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3138.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000012 bytes_write=5729 bytes_read=14038 bytes_retransmit=0 bytes_invalid=0 send_seq=305 receive_seq=305 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998313  orange_pi: temp=46.2 chamber_heater: target=0 temp=26.7 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.14 cputime=70.179 memavail=1716660 print_time=4836.590 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3139.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000012 bytes_write=5735 bytes_read=14189 bytes_retransmit=0 bytes_invalid=0 send_seq=306 receive_seq=306 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998317  orange_pi: temp=46.0 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.14 cputime=70.200 memavail=1716444 print_time=4836.590 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Running Command {update_git_script}...:
[1;93m●[0m Checking for installed dependencies /[K[1;92m●[0m Checking for installed dependencies [1;92mDone![0m


Stats 3140.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000012 bytes_write=5741 bytes_read=14355 bytes_retransmit=0 bytes_invalid=0 send_seq=307 receive_seq=307 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998319  orange_pi: temp=46.2 chamber_heater: target=0 temp=26.7 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.14 cputime=70.232 memavail=1711948 print_time=4836.590 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Klipper-Backup is up to date


Initialized empty Git repository in /home/klipper/config_backup/.git/

Stats 3141.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5747 bytes_read=14550 bytes_retransmit=0 bytes_invalid=0 send_seq=308 receive_seq=308 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998319  orange_pi: temp=48.5 chamber_heater: target=0 temp=26.7 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.14 cputime=70.264 memavail=1719756 print_time=4836.590 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3142.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5753 bytes_read=14701 bytes_retransmit=0 bytes_invalid=0 send_seq=309 receive_seq=309 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998319  orange_pi: temp=47.6 chamber_heater: target=0 temp=26.7 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.21 cputime=70.294 memavail=1712912 print_time=4836.590 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3143.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5759 bytes_read=14867 bytes_retransmit=0 bytes_invalid=0 send_seq=310 receive_seq=310 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998320  orange_pi: temp=50.1 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.21 cputime=70.333 memavail=1706220 print_time=4836.590 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3144.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5765 bytes_read=15048 bytes_retransmit=0 bytes_invalid=0 send_seq=311 receive_seq=311 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998321  orange_pi: temp=54.8 chamber_heater: target=0 temp=26.7 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.21 cputime=70.372 memavail=1667556 print_time=4836.590 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3145.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5771 bytes_read=15199 bytes_retransmit=0 bytes_invalid=0 send_seq=312 receive_seq=312 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998322  orange_pi: temp=54.2 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.21 cputime=70.403 memavail=1715028 print_time=4836.590 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3146.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5777 bytes_read=15379 bytes_retransmit=0 bytes_invalid=0 send_seq=313 receive_seq=313 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998322  orange_pi: temp=47.6 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.21 cputime=70.428 memavail=1713324 print_time=4836.590 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
From https://github.com/Ferz82/github-klipper-backup
 * branch            main       -> FETCH_HEAD

 * [new branch]      main       -> origin/main

Stats 3147.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5783 bytes_read=15558 bytes_retransmit=0 bytes_invalid=0 send_seq=314 receive_seq=314 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998326  orange_pi: temp=49.1 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.27 cputime=70.466 memavail=1667816 print_time=4836.590 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Skipping symbolic link: printer_data/config/mainsail.cfg

Stats 3148.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5789 bytes_read=15699 bytes_retransmit=0 bytes_invalid=0 send_seq=315 receive_seq=315 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998327  orange_pi: temp=51.4 chamber_heater: target=0 temp=26.7 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.27 cputime=70.502 memavail=1725592 print_time=4836.590 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3149.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5795 bytes_read=15854 bytes_retransmit=0 bytes_invalid=0 send_seq=316 receive_seq=316 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998326  orange_pi: temp=48.1 chamber_heater: target=0 temp=26.7 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.27 cputime=70.536 memavail=1716080 print_time=4836.590 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3150.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5801 bytes_read=16023 bytes_retransmit=0 bytes_invalid=0 send_seq=317 receive_seq=317 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998330  orange_pi: temp=48.4 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.27 cputime=70.572 memavail=1718680 print_time=4836.590 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3151.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000012 bytes_write=5807 bytes_read=16181 bytes_retransmit=0 bytes_invalid=0 send_seq=318 receive_seq=318 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998330  orange_pi: temp=48.9 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.27 cputime=70.603 memavail=1714192 print_time=4836.590 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 3152.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000012 bytes_write=5813 bytes_read=16347 bytes_retransmit=0 bytes_invalid=0 send_seq=319 receive_seq=319 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998329  orange_pi: temp=48.2 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.41 cputime=70.635 memavail=1712792 print_time=4836.590 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3153.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000012 bytes_write=5819 bytes_read=16528 bytes_retransmit=0 bytes_invalid=0 send_seq=320 receive_seq=320 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998328  orange_pi: temp=48.7 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.41 cputime=70.668 memavail=1712552 print_time=4836.590 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Command {update_git_script} timed out
Running Command {update_git_script_message}...:
[1;93m●[0m Checking for installed dependencies /[K[1;92m●[0m Checking for installed dependencies [1;92mDone![0m


Klipper-Backup is up to date


From https://github.com/Ferz82/github-klipper-backup
 * branch            main       -> FETCH_HEAD

Already up to date.

Skipping symbolic link: printer_data/config/mainsail.cfg

Skipping symbolic link: /bin

skipping non-regular file "boot/Image"
skipping non-regular file "boot/dtb"
skipping non-regular file "boot/uInitrd"

skipping non-regular file "dev/autofs"
skipping non-regular file "dev/btrfs-control"
skipping non-regular file "dev/cec0"
skipping non-regular file "dev/console"
skipping non-regular file "dev/core"
skipping non-regular file "dev/cpu_dma_latency"
skipping non-regular file "dev/cuse"
skipping non-regular file "dev/ecryptfs"
skipping non-regular file "dev/fb0"
skipping non-regular file "dev/fd"
skipping non-regular file "dev/full"
skipping non-regular file "dev/fuse"
skipping non-regular file "dev/gpiochip0"
skipping non-regular file "dev/gpiochip1"
skipping non-regular file "dev/hidraw0"
skipping non-regular file "dev/hidraw1"
skipping non-regular file "dev/hwrng"
skipping non-regular file "dev/i2c-0"
skipping non-regular file "dev/i2c-1"
skipping non-regular file "dev/i2c-2"
skipping non-regular file "dev/initctl"
skipping non-regular file "dev/kmsg"
skipping non-regular file "dev/lirc0"
skipping non-regular file "dev/log"
skipping non-regular file "dev/loop-control"
skipping non-regular file "dev/loop0"
skipping non-regular file "dev/loop1"
skipping non-regular file "dev/loop2"
skipping non-regular file "dev/loop3"
skipping non-regular file "dev/loop4"
skipping non-regular file "dev/loop5"
skipping non-regular file "dev/loop6"
skipping non-regular file "dev/loop7"

skipping non-regular file "dev/media0"
skipping non-regular file "dev/mem"
skipping non-regular file "dev/mmcblk0"
skipping non-regular file "dev/mmcblk0p1"
skipping non-regular file "dev/mmcblk2"
skipping non-regular file "dev/mmcblk2boot0"
skipping non-regular file "dev/mmcblk2boot1"
skipping non-regular file "dev/mmcblk2p1"
skipping non-regular file "dev/null"
skipping non-regular file "dev/ppp"
skipping non-regular file "dev/psaux"
skipping non-regular file "dev/ptmx"
skipping non-regular file "dev/random"
skipping non-regular file "dev/rfkill"
skipping non-regular file "dev/rtc"
skipping non-regular file "dev/rtc0"
skipping non-regular file "dev/slog_wcn0"
skipping non-regular file "dev/slog_wcn1"
skipping non-regular file "dev/spidev1.0"
skipping non-regular file "dev/stderr"
skipping non-regular file "dev/stdin"
skipping non-regular file "dev/stdout"
skipping non-regular file "dev/sunxi-reg"
skipping non-regular file "dev/sunxi_soc_info"
skipping non-regular file "dev/tty"
skipping non-regular file "dev/tty0"
skipping non-regular file "dev/tty1"
skipping non-regular file "dev/tty10"
skipping non-regular file "dev/tty11"
skipping non-regular file "dev/tty12"
skipping non-regular file "dev/tty13"
skipping non-regular file "dev/tty14"
skipping non-regular file "dev/tty15"
skipping non-regular file "dev/tty16"
skipping non-regular file "dev/tty17"
skipping non-regular file "dev/tty18"
skipping non-regular file "dev/tty19"
skipping non-regular file "dev/tty2"
skipping non-regular file "dev/tty20"
skipping non-regular file "dev/tty21"
skipping non-regular file "dev/tty22"
skipping non-regular file "dev/tty23"
skipping non-regular file "dev/tty24"
skipping non-regular file "dev/tty25"
skipping non-regular file "dev/tty26"
skipping non-regular file "dev/tty27"
skipping non-regular file "dev/tty28"
skipping non-regular file "dev/tty29"
skipping non-regular file "dev/tty3"
skipping non-regular file "dev/tty30"
skipping non-regular file "dev/tty31"
skipping non-regular file "dev/tty32"
skipping non-regular file "dev/tty33"
skipping non-regular file "dev/tty34"
skipping non-regular file "dev/tty35"
skipping non-regular file "dev/tty36"
skipping non-regular file "dev/tty37"
skipping non-regular file "dev/tty38"
skipping non-regular file "dev/tty39"
skipping non-regular file "dev/tty4"
skipping non-regular file "dev/tty40"
skipping non-regular file "dev/tty41"
skipping non-regular file "dev/tty42"
skipping non-regular file "dev/tty43"
skipping non-regular file "dev/tty44"
skipping non-regular file "dev/tty45"
skipping non-regular file "dev/tty46"
skipping non-regular file "dev/tty47"
skipping non-regular file "dev/tty48"
skipping non-regular file "dev/tty49"
skipping non-regular file "dev/tty5"
skipping non-regular file "dev/tty50"
skipping non-regular file "dev/tty51"
skipping non-regular file "dev/tty52"
skipping non-regular file "dev/tty53"
skipping non-regular file "dev/tty54"
skipping non-regular file "dev/tty55"
skipping non-regular file "dev/tty56"
skipping non-regular file "dev/tty57"
skipping non-regular file "dev/tty58"
skipping non-regular file "dev/tty59"
skipping non-regular file "dev/tty6"
skipping non-regular file "dev/tty60"
skipping non-regular file "dev/tty61"
skipping non-regular file "dev/tty62"
skipping non-regular file "dev/tty63"
skipping non-regular file "dev/tty7"
skipping non-regular file "dev/tty8"
skipping non-regular file "dev/tty9"
skipping non-regular file "dev/ttyBT0"
skipping non-regular file "dev/ttyBT1"
skipping non-regular file "dev/ttyS0"
skipping non-regular file "dev/ttyS1"
skipping non-regular file "dev/ttyS2"
skipping non-regular file "dev/ttyS3"
skipping non-regular file "dev/ttyS4"
skipping non-regular file "dev/ttyS5"
skipping non-regular file "dev/uhid"
skipping non-regular file "dev/uinput"
skipping non-regular file "dev/uleds"
skipping non-regular file "dev/urandom"
skipping non-regular file "dev/vcs"
skipping non-regular file "dev/vcs1"
skipping non-regular file "dev/vcs2"
skipping non-regular file "dev/vcs3"
skipping non-regular file "dev/vcs4"

skipping non-regular file "dev/vcs5"
skipping non-regular file "dev/vcs6"
skipping non-regular file "dev/vcsa"
skipping non-regular file "dev/vcsa1"
skipping non-regular file "dev/vcsa2"
skipping non-regular file "dev/vcsa3"
skipping non-regular file "dev/vcsa4"
skipping non-regular file "dev/vcsa5"
skipping non-regular file "dev/vcsa6"
skipping non-regular file "dev/vcsu"
skipping non-regular file "dev/vcsu1"
skipping non-regular file "dev/vcsu2"
skipping non-regular file "dev/vcsu3"
skipping non-regular file "dev/vcsu4"
skipping non-regular file "dev/vcsu5"
skipping non-regular file "dev/vcsu6"
skipping non-regular file "dev/vhci"
skipping non-regular file "dev/video0"
skipping non-regular file "dev/watchdog"
skipping non-regular file "dev/watchdog0"
skipping non-regular file "dev/wcn_op"
skipping non-regular file "dev/zero"
skipping non-regular file "dev/zram0"
skipping non-regular file "dev/zram1"
skipping non-regular file "dev/zram2"

skipping non-regular file "dev/block/179:0"
skipping non-regular file "dev/block/179:1"
skipping non-regular file "dev/block/179:32"
skipping non-regular file "dev/block/179:33"
skipping non-regular file "dev/block/179:64"
skipping non-regular file "dev/block/179:96"
skipping non-regular file "dev/block/252:0"
skipping non-regular file "dev/block/252:1"
skipping non-regular file "dev/block/252:2"
skipping non-regular file "dev/block/7:0"
skipping non-regular file "dev/block/7:1"
skipping non-regular file "dev/block/7:2"
skipping non-regular file "dev/block/7:3"
skipping non-regular file "dev/block/7:4"
skipping non-regular file "dev/block/7:5"
skipping non-regular file "dev/block/7:6"
skipping non-regular file "dev/block/7:7"
skipping non-regular file "dev/bus/usb/001/001"
skipping non-regular file "dev/bus/usb/002/001"
skipping non-regular file "dev/bus/usb/003/001"
skipping non-regular file "dev/bus/usb/004/001"
skipping non-regular file "dev/bus/usb/005/001"
skipping non-regular file "dev/bus/usb/005/002"
skipping non-regular file "dev/bus/usb/006/001"
skipping non-regular file "dev/bus/usb/007/001"
skipping non-regular file "dev/char/10:1"
skipping non-regular file "dev/char/10:122"
skipping non-regular file "dev/char/10:123"
skipping non-regular file "dev/char/10:124"
skipping non-regular file "dev/char/10:125"
skipping non-regular file "dev/char/10:126"
skipping non-regular file "dev/char/10:127"
skipping non-regular file "dev/char/10:130"
skipping non-regular file "dev/char/10:183"
skipping non-regular file "dev/char/10:229"
skipping non-regular file "dev/char/10:234"

skipping non-regular file "dev/char/10:235"
skipping non-regular file "dev/char/10:237"
skipping non-regular file "dev/char/10:242"
skipping non-regular file "dev/char/116:0"
skipping non-regular file "dev/char/116:16"
skipping non-regular file "dev/char/116:24"
skipping non-regular file "dev/char/116:32"
skipping non-regular file "dev/char/116:33"
skipping non-regular file "dev/char/116:48"
skipping non-regular file "dev/char/13:32"
skipping non-regular file "dev/char/13:63"
skipping non-regular file "dev/char/13:64"
skipping non-regular file "dev/char/13:65"
skipping non-regular file "dev/char/13:66"
skipping non-regular file "dev/char/13:67"
skipping non-regular file "dev/char/13:68"
skipping non-regular file "dev/char/13:69"
skipping non-regular file "dev/char/153:0"
skipping non-regular file "dev/char/189:0"
skipping non-regular file "dev/char/189:128"
skipping non-regular file "dev/char/189:256"
skipping non-regular file "dev/char/189:384"
skipping non-regular file "dev/char/189:512"
skipping non-regular file "dev/char/189:513"
skipping non-regular file "dev/char/189:640"
skipping non-regular file "dev/char/189:768"
skipping non-regular file "dev/char/1:1"
skipping non-regular file "dev/char/1:11"
skipping non-regular file "dev/char/1:3"
skipping non-regular file "dev/char/1:5"
skipping non-regular file "dev/char/1:7"
skipping non-regular file "dev/char/1:8"
skipping non-regular file "dev/char/1:9"
skipping non-regular file "dev/char/226:0"
skipping non-regular file "dev/char/226:1"
skipping non-regular file "dev/char/226:128"
skipping non-regular file "dev/char/242:0"
skipping non-regular file "dev/char/243:0"
skipping non-regular file "dev/char/244:0"
skipping non-regular file "dev/char/244:1"
skipping non-regular file "dev/char/245:0"
skipping non-regular file "dev/char/245:1"
skipping non-regular file "dev/char/248:0"
skipping non-regular file "dev/char/251:0"
skipping non-regular file "dev/char/252:0"
skipping non-regular file "dev/char/254:0"
skipping non-regular file "dev/char/254:1"
skipping non-regular file "dev/char/255:0"
skipping non-regular file "dev/char/255:1"
skipping non-regular file "dev/char/29:0"
skipping non-regular file "dev/char/4:0"
skipping non-regular file "dev/char/4:1"
skipping non-regular file "dev/char/4:10"
skipping non-regular file "dev/char/4:11"
skipping non-regular file "dev/char/4:12"
skipping non-regular file "dev/char/4:13"
skipping non-regular file "dev/char/4:14"
skipping non-regular file "dev/char/4:15"
skipping non-regular file "dev/char/4:16"
skipping non-regular file "dev/char/4:17"
skipping non-regular file "dev/char/4:18"
skipping non-regular file "dev/char/4:19"
skipping non-regular file "dev/char/4:2"
skipping non-regular file "dev/char/4:20"
skipping non-regular file "dev/char/4:21"
skipping non-regular file "dev/char/4:22"
skipping non-regular file "dev/char/4:23"
skipping non-regular file "dev/char/4:24"
skipping non-regular file "dev/char/4:25"
skipping non-regular file "dev/char/4:26"
skipping non-regular file "dev/char/4:27"
skipping non-regular file "dev/char/4:28"
skipping non-regular file "dev/char/4:29"
skipping non-regular file "dev/char/4:3"
skipping non-regular file "dev/char/4:30"
skipping non-regular file "dev/char/4:31"
skipping non-regular file "dev/char/4:32"
skipping non-regular file "dev/char/4:33"
skipping non-regular file "dev/char/4:34"
skipping non-regular file "dev/char/4:35"
skipping non-regular file "dev/char/4:36"
skipping non-regular file "dev/char/4:37"
skipping non-regular file "dev/char/4:38"
skipping non-regular file "dev/char/4:39"
skipping non-regular file "dev/char/4:4"
skipping non-regular file "dev/char/4:40"
skipping non-regular file "dev/char/4:41"
skipping non-regular file "dev/char/4:42"
skipping non-regular file "dev/char/4:43"
skipping non-regular file "dev/char/4:44"
skipping non-regular file "dev/char/4:45"
skipping non-regular file "dev/char/4:46"
skipping non-regular file "dev/char/4:47"
skipping non-regular file "dev/char/4:48"
skipping non-regular file "dev/char/4:49"
skipping non-regular file "dev/char/4:5"

skipping non-regular file "dev/char/4:50"
skipping non-regular file "dev/char/4:51"
skipping non-regular file "dev/char/4:52"
skipping non-regular file "dev/char/4:53"
skipping non-regular file "dev/char/4:54"
skipping non-regular file "dev/char/4:55"
skipping non-regular file "dev/char/4:56"
skipping non-regular file "dev/char/4:57"
skipping non-regular file "dev/char/4:58"
skipping non-regular file "dev/char/4:59"
skipping non-regular file "dev/char/4:6"
skipping non-regular file "dev/char/4:60"
skipping non-regular file "dev/char/4:61"
skipping non-regular file "dev/char/4:62"
skipping non-regular file "dev/char/4:63"
skipping non-regular file "dev/char/4:64"
skipping non-regular file "dev/char/4:65"
skipping non-regular file "dev/char/4:66"
skipping non-regular file "dev/char/4:67"
skipping non-regular file "dev/char/4:68"
skipping non-regular file "dev/char/4:69"
skipping non-regular file "dev/char/4:7"
skipping non-regular file "dev/char/4:8"
skipping non-regular file "dev/char/4:9"
skipping non-regular file "dev/char/5:0"
skipping non-regular file "dev/char/5:1"
skipping non-regular file "dev/char/5:2"
skipping non-regular file "dev/char/7:0"
skipping non-regular file "dev/char/7:1"
skipping non-regular file "dev/char/7:128"
skipping non-regular file "dev/char/7:129"
skipping non-regular file "dev/char/7:130"
skipping non-regular file "dev/char/7:131"
skipping non-regular file "dev/char/7:132"
skipping non-regular file "dev/char/7:133"
skipping non-regular file "dev/char/7:134"
skipping non-regular file "dev/char/7:2"
skipping non-regular file "dev/char/7:3"
skipping non-regular file "dev/char/7:4"
skipping non-regular file "dev/char/7:5"
skipping non-regular file "dev/char/7:6"
skipping non-regular file "dev/char/7:64"
skipping non-regular file "dev/char/7:65"
skipping non-regular file "dev/char/7:66"
skipping non-regular file "dev/char/7:67"
skipping non-regular file "dev/char/7:68"
skipping non-regular file "dev/char/7:69"
skipping non-regular file "dev/char/7:70"
skipping non-regular file "dev/char/81:0"
skipping non-regular file "dev/char/89:0"
skipping non-regular file "dev/char/89:1"
skipping non-regular file "dev/char/89:2"
skipping non-regular file "dev/disk/by-id/mmc-8GTF4R_0xbcfdfecb"
skipping non-regular file "dev/disk/by-id/mmc-8GTF4R_0xbcfdfecb-part1"
skipping non-regular file "dev/disk/by-id/mmc-NCard_0x0afe1619"
skipping non-regular file "dev/disk/by-id/mmc-NCard_0x0afe1619-part1"
skipping non-regular file "dev/disk/by-partuuid/370cc450-01"
skipping non-regular file "dev/disk/by-partuuid/e8e42744-01"
skipping non-regular file "dev/disk/by-path/platform-4020000.mmc"
skipping non-regular file "dev/disk/by-path/platform-4020000.mmc-part1"
skipping non-regular file "dev/disk/by-path/platform-4022000.mmc"
skipping non-regular file "dev/disk/by-path/platform-4022000.mmc-boot0"
skipping non-regular file "dev/disk/by-path/platform-4022000.mmc-boot1"
skipping non-regular file "dev/disk/by-path/platform-4022000.mmc-part1"
skipping non-regular file "dev/disk/by-uuid/b8b65899-d6d1-4527-9775-432e2e85bcd2"
skipping non-regular file "dev/disk/by-uuid/c08b33d6-48ce-45f2-bcfb-cd816b103e4e"
skipping non-regular file "dev/dri/card0"
skipping non-regular file "dev/dri/card1"
skipping non-regular file "dev/dri/renderD128"
skipping non-regular file "dev/dri/by-path/platform-1800000.gpu-card"
skipping non-regular file "dev/dri/by-path/platform-1800000.gpu-render"
skipping non-regular file "dev/dri/by-path/platform-display-engine-card"
skipping non-regular file "dev/input/event0"
skipping non-regular file "dev/input/event1"
skipping non-regular file "dev/input/event2"
skipping non-regular file "dev/input/event3"
skipping non-regular file "dev/input/event4"
skipping non-regular file "dev/input/event5"
skipping non-regular file "dev/input/mice"
skipping non-regular file "dev/input/mouse0"
skipping non-regular file "dev/input/by-id/usb-XING_WEI_2.4G_US_USB_Composite_Device_1120030506060321-event-if01"
skipping non-regular file "dev/input/by-id/usb-XING_WEI_2.4G_US_USB_Composite_Device_1120030506060321-event-kbd"

skipping non-regular file "dev/input/by-id/usb-XING_WEI_2.4G_US_USB_Composite_Device_1120030506060321-if01-event-mouse"
skipping non-regular file "dev/input/by-id/usb-XING_WEI_2.4G_US_USB_Composite_Device_1120030506060321-if01-mouse"
skipping non-regular file "dev/input/by-path/platform-5101400.usb-usb-0:1:1.0-event-kbd"
skipping non-regular file "dev/input/by-path/platform-5101400.usb-usb-0:1:1.1-event"
skipping non-regular file "dev/input/by-path/platform-5101400.usb-usb-0:1:1.1-event-mouse"
skipping non-regular file "dev/input/by-path/platform-5101400.usb-usb-0:1:1.1-mouse"
skipping non-regular file "dev/input/by-path/platform-7040000.ir-event"
skipping non-regular file "dev/input/by-path/platform-7081400.i2c-platform-axp221-pek-event"
skipping non-regular file "dev/mapper/control"
skipping non-regular file "dev/net/tun"
skipping non-regular file "dev/pts/0"
skipping non-regular file "dev/pts/1"
skipping non-regular file "dev/pts/ptmx"
skipping non-regular file "dev/snd/controlC0"
skipping non-regular file "dev/snd/controlC1"
skipping non-regular file "dev/snd/pcmC0D0c"
skipping non-regular file "dev/snd/pcmC0D0p"
skipping non-regular file "dev/snd/pcmC1D0p"
skipping non-regular file "dev/snd/seq"
skipping non-regular file "dev/snd/timer"
skipping non-regular file "dev/snd/by-path/platform-sound_ac200"
skipping non-regular file "dev/snd/by-path/platform-sound_hdmi"
skipping non-regular file "dev/v4l/by-path/platform-1c0e000.video-codec-video-index0"

Write g-code response
Traceback (most recent call last):
  File "/home/klipper/klipper/klippy/gcode.py", line 459, in _respond_raw
    os.write(self.fd, (msg+"\n").encode())
BlockingIOError: [Errno 11] Resource temporarily unavailable
skipping non-regular file "etc/localtime"
skipping non-regular file "etc/motd"
skipping non-regular file "etc/mtab"
skipping non-regular file "etc/os-release"
skipping non-regular file "etc/rmt"
skipping non-regular file "etc/vtrgb"
rsync: [sender] send_files failed to open "/etc/.pwd.lock": Permission denied (13)

rsync: [sender] send_files failed to open "/etc/gshadow": Permission denied (13)
rsync: [sender] send_files failed to open "/etc/gshadow-": Permission denied (13)

rsync: [sender] send_files failed to open "/etc/shadow": Permission denied (13)
rsync: [sender] send_files failed to open "/etc/shadow-": Permission denied (13)

rsync: [sender] send_files failed to open "/etc/sudoers": Permission denied (13)

skipping non-regular file "etc/alternatives/aclocal"
skipping non-regular file "etc/alternatives/aclocal.1.gz"
skipping non-regular file "etc/alternatives/aptitude"
skipping non-regular file "etc/alternatives/aptitude.8.gz"
skipping non-regular file "etc/alternatives/aptitude.cs.8.gz"
skipping non-regular file "etc/alternatives/aptitude.de.8.gz"
skipping non-regular file "etc/alternatives/aptitude.es.8.gz"
skipping non-regular file "etc/alternatives/aptitude.fi.8.gz"
skipping non-regular file "etc/alternatives/aptitude.fr.8.gz"
skipping non-regular file "etc/alternatives/aptitude.gl.8.gz"
skipping non-regular file "etc/alternatives/aptitude.it.8.gz"
skipping non-regular file "etc/alternatives/aptitude.ja.8.gz"
skipping non-regular file "etc/alternatives/aptitude.pl.8.gz"
skipping non-regular file "etc/alternatives/arptables"
skipping non-regular file "etc/alternatives/arptables-restore"
skipping non-regular file "etc/alternatives/arptables-save"
skipping non-regular file "etc/alternatives/automake"
skipping non-regular file "etc/alternatives/automake.1.gz"
skipping non-regular file "etc/alternatives/awk"
skipping non-regular file "etc/alternatives/awk.1.gz"
skipping non-regular file "etc/alternatives/builtins.7.gz"
skipping non-regular file "etc/alternatives/c++"
skipping non-regular file "etc/alternatives/c++.1.gz"
skipping non-regular file "etc/alternatives/c89"
skipping non-regular file "etc/alternatives/c89.1.gz"
skipping non-regular file "etc/alternatives/c99"
skipping non-regular file "etc/alternatives/c99.1.gz"
skipping non-regular file "etc/alternatives/cc"
skipping non-regular file "etc/alternatives/cc.1.gz"
skipping non-regular file "etc/alternatives/cpp"

skipping non-regular file "etc/alternatives/ebtables"
skipping non-regular file "etc/alternatives/ebtables-restore"
skipping non-regular file "etc/alternatives/ebtables-save"
skipping non-regular file "etc/alternatives/editor"
skipping non-regular file "etc/alternatives/editor.1.gz"
skipping non-regular file "etc/alternatives/ex"
skipping non-regular file "etc/alternatives/ex.1.gz"
skipping non-regular file "etc/alternatives/ex.da.1.gz"
skipping non-regular file "etc/alternatives/ex.de.1.gz"
skipping non-regular file "etc/alternatives/ex.fr.1.gz"
skipping non-regular file "etc/alternatives/ex.it.1.gz"
skipping non-regular file "etc/alternatives/ex.ja.1.gz"
skipping non-regular file "etc/alternatives/ex.pl.1.gz"
skipping non-regular file "etc/alternatives/ex.ru.1.gz"
skipping non-regular file "etc/alternatives/figlet"
skipping non-regular file "etc/alternatives/figlet.6.gz"
skipping non-regular file "etc/alternatives/gcc-arm-none-eabi-include"
skipping non-regular file "etc/alternatives/gcc-arm-none-eabi-lib"
skipping non-regular file "etc/alternatives/iotop"
skipping non-regular file "etc/alternatives/iotop.8.gz"
skipping non-regular file "etc/alternatives/ip6tables"
skipping non-regular file "etc/alternatives/ip6tables-restore"
skipping non-regular file "etc/alternatives/ip6tables-save"
skipping non-regular file "etc/alternatives/iptables"
skipping non-regular file "etc/alternatives/iptables-restore"
skipping non-regular file "etc/alternatives/iptables-save"
skipping non-regular file "etc/alternatives/lzcat"
skipping non-regular file "etc/alternatives/lzcat.1.gz"
skipping non-regular file "etc/alternatives/lzcmp"
skipping non-regular file "etc/alternatives/lzcmp.1.gz"
skipping non-regular file "etc/alternatives/lzdiff"
skipping non-regular file "etc/alternatives/lzdiff.1.gz"
skipping non-regular file "etc/alternatives/lzegrep"
skipping non-regular file "etc/alternatives/lzegrep.1.gz"
skipping non-regular file "etc/alternatives/lzfgrep"
skipping non-regular file "etc/alternatives/lzfgrep.1.gz"
skipping non-regular file "etc/alternatives/lzgrep"
skipping non-regular file "etc/alternatives/lzgrep.1.gz"
skipping non-regular file "etc/alternatives/lzless"
skipping non-regular file "etc/alternatives/lzless.1.gz"
skipping non-regular file "etc/alternatives/lzma"
skipping non-regular file "etc/alternatives/lzma.1.gz"
skipping non-regular file "etc/alternatives/lzmore"
skipping non-regular file "etc/alternatives/lzmore.1.gz"
skipping non-regular file "etc/alternatives/mt"
skipping non-regular file "etc/alternatives/mt.1.gz"
skipping non-regular file "etc/alternatives/nawk"
skipping non-regular file "etc/alternatives/nawk.1.gz"
skipping non-regular file "etc/alternatives/nc"
skipping non-regular file "etc/alternatives/nc.1.gz"
skipping non-regular file "etc/alternatives/netcat"
skipping non-regular file "etc/alternatives/netcat.1.gz"
skipping non-regular file "etc/alternatives/newt-palette"
skipping non-regular file "etc/alternatives/pager"
skipping non-regular file "etc/alternatives/pager.1.gz"
skipping non-regular file "etc/alternatives/pico"
skipping non-regular file "etc/alternatives/pico.1.gz"
skipping non-regular file "etc/alternatives/pinentry"
skipping non-regular file "etc/alternatives/pinentry.1.gz"
skipping non-regular file "etc/alternatives/rcp"
skipping non-regular file "etc/alternatives/rcp.1.gz"
skipping non-regular file "etc/alternatives/rlogin"
skipping non-regular file "etc/alternatives/rlogin.1.gz"
skipping non-regular file "etc/alternatives/rmt"
skipping non-regular file "etc/alternatives/rmt.8.gz"
skipping non-regular file "etc/alternatives/rsh"
skipping non-regular file "etc/alternatives/rsh.1.gz"
skipping non-regular file "etc/alternatives/rview"
skipping non-regular file "etc/alternatives/rvim"
skipping non-regular file "etc/alternatives/sar"
skipping non-regular file "etc/alternatives/sar.1.gz"
skipping non-regular file "etc/alternatives/unlzma"
skipping non-regular file "etc/alternatives/unlzma.1.gz"
skipping non-regular file "etc/alternatives/vi"
skipping non-regular file "etc/alternatives/vi.1.gz"

skipping non-regular file "etc/alternatives/vi.da.1.gz"
skipping non-regular file "etc/alternatives/vi.de.1.gz"
skipping non-regular file "etc/alternatives/vi.fr.1.gz"
skipping non-regular file "etc/alternatives/vi.it.1.gz"
skipping non-regular file "etc/alternatives/vi.ja.1.gz"
skipping non-regular file "etc/alternatives/vi.pl.1.gz"
skipping non-regular file "etc/alternatives/vi.ru.1.gz"
skipping non-regular file "etc/alternatives/view"
skipping non-regular file "etc/alternatives/view.1.gz"
skipping non-regular file "etc/alternatives/view.da.1.gz"
skipping non-regular file "etc/alternatives/view.de.1.gz"
skipping non-regular file "etc/alternatives/view.fr.1.gz"
skipping non-regular file "etc/alternatives/view.it.1.gz"
skipping non-regular file "etc/alternatives/view.ja.1.gz"
skipping non-regular file "etc/alternatives/view.pl.1.gz"
skipping non-regular file "etc/alternatives/view.ru.1.gz"
skipping non-regular file "etc/alternatives/vim"
skipping non-regular file "etc/alternatives/vimdiff"
skipping non-regular file "etc/alternatives/vtrgb"
skipping non-regular file "etc/alternatives/which"
skipping non-regular file "etc/alternatives/which.1.gz"
skipping non-regular file "etc/alternatives/which.de1.gz"
skipping non-regular file "etc/alternatives/which.es1.gz"
skipping non-regular file "etc/alternatives/which.fr1.gz"
skipping non-regular file "etc/alternatives/which.it1.gz"
skipping non-regular file "etc/alternatives/which.ja1.gz"
skipping non-regular file "etc/alternatives/which.pl1.gz"
skipping non-regular file "etc/alternatives/which.sl1.gz"
skipping non-regular file "etc/alternatives/write"
skipping non-regular file "etc/alternatives/write.1.gz"
skipping non-regular file "etc/alternatives/yacc"
skipping non-regular file "etc/alternatives/yaccman"
skipping non-regular file "etc/apparmor.d/disable/usr.sbin.rsyslogd"
skipping non-regular file "etc/apparmor/init/network-interface-security/sbin.dhclient"
skipping non-regular file "etc/dhcp/dhclient-enter-hooks.d/debug"
skipping non-regular file "etc/dhcp/dhclient-exit-hooks.d/debug"
skipping non-regular file "etc/dkms/template-dkms-mkdsc"
skipping non-regular file "etc/dpkg/origins/default"
skipping non-regular file "etc/fonts/conf.d/10-antialias.conf"
skipping non-regular file "etc/fonts/conf.d/10-hinting-slight.conf"
skipping non-regular file "etc/fonts/conf.d/10-scale-bitmap-fonts.conf"
skipping non-regular file "etc/fonts/conf.d/11-lcdfilter-default.conf"
skipping non-regular file "etc/fonts/conf.d/20-unhint-small-dejavu-lgc-sans-mono.conf"
skipping non-regular file "etc/fonts/conf.d/20-unhint-small-dejavu-lgc-sans.conf"
skipping non-regular file "etc/fonts/conf.d/20-unhint-small-dejavu-lgc-serif.conf"
skipping non-regular file "etc/fonts/conf.d/20-unhint-small-dejavu-sans-mono.conf"
skipping non-regular file "etc/fonts/conf.d/20-unhint-small-dejavu-sans.conf"
skipping non-regular file "etc/fonts/conf.d/20-unhint-small-dejavu-serif.conf"
skipping non-regular file "etc/fonts/conf.d/20-unhint-small-vera.conf"
skipping non-regular file "etc/fonts/conf.d/30-metric-aliases.conf"
skipping non-regular file "etc/fonts/conf.d/40-nonlatin.conf"
skipping non-regular file "etc/fonts/conf.d/45-generic.conf"
skipping non-regular file "etc/fonts/conf.d/45-latin.conf"
skipping non-regular file "etc/fonts/conf.d/49-sansserif.conf"
skipping non-regular file "etc/fonts/conf.d/50-user.conf"
skipping non-regular file "etc/fonts/conf.d/51-local.conf"
skipping non-regular file "etc/fonts/conf.d/57-dejavu-sans-mono.conf"
skipping non-regular file "etc/fonts/conf.d/57-dejavu-sans.conf"
skipping non-regular file "etc/fonts/conf.d/57-dejavu-serif.conf"
skipping non-regular file "etc/fonts/conf.d/58-dejavu-lgc-sans-mono.conf"
skipping non-regular file "etc/fonts/conf.d/58-dejavu-lgc-sans.conf"
skipping non-regular file "etc/fonts/conf.d/58-dejavu-lgc-serif.conf"
skipping non-regular file "etc/fonts/conf.d/60-generic.conf"
skipping non-regular file "etc/fonts/conf.d/60-latin.conf"
skipping non-regular file "etc/fonts/conf.d/65-fonts-persian.conf"

skipping non-regular file "etc/fonts/conf.d/65-nonlatin.conf"
skipping non-regular file "etc/fonts/conf.d/69-unifont.conf"
skipping non-regular file "etc/fonts/conf.d/70-no-bitmaps.conf"
skipping non-regular file "etc/fonts/conf.d/80-delicious.conf"
skipping non-regular file "etc/fonts/conf.d/90-synthetic.conf"
skipping non-regular file "etc/ifplugd/action.d/action_wpa"
skipping non-regular file "etc/mc/mc.keymap"
skipping non-regular file "etc/modules-load.d/modules.conf"
skipping non-regular file "etc/network/if-down.d/bridge"
skipping non-regular file "etc/network/if-down.d/wpasupplicant"
skipping non-regular file "etc/network/if-post-down.d/bridge"
skipping non-regular file "etc/network/if-post-down.d/hostapd"
skipping non-regular file "etc/network/if-post-down.d/wpasupplicant"
skipping non-regular file "etc/network/if-pre-up.d/bridge"
skipping non-regular file "etc/network/if-pre-up.d/hostapd"
skipping non-regular file "etc/network/if-pre-up.d/wpasupplicant"
skipping non-regular file "etc/network/if-up.d/wpasupplicant"
skipping non-regular file "etc/nginx/modules-enabled/50-mod-http-geoip2.conf"
skipping non-regular file "etc/nginx/modules-enabled/50-mod-http-image-filter.conf"
skipping non-regular file "etc/nginx/modules-enabled/50-mod-http-xslt-filter.conf"
skipping non-regular file "etc/nginx/modules-enabled/50-mod-mail.conf"
skipping non-regular file "etc/nginx/modules-enabled/50-mod-stream.conf"
skipping non-regular file "etc/nginx/modules-enabled/70-mod-stream-geoip2.conf"
skipping non-regular file "etc/nginx/sites-enabled/mainsail"
rsync: [sender] send_files failed to open "/etc/NetworkManager/system-connections/ASUS12-5.nmconnection": Permission denied (13)

rsync: [sender] send_files failed to open "/etc/chrony/chrony.keys": Permission denied (13)

rsync: [sender] opendir "/etc/polkit-1/localauthority" failed: Permission denied (13)

skipping non-regular file "etc/oh-my-zsh/plugins/per-directory-history/per-directory-history.plugin.zsh"

rsync: [sender] opendir "/etc/ssl/private" failed: Permission denied (13)

skipping non-regular file "etc/oh-my-zsh/themes/macovsky-ruby.zsh-theme"
skipping non-regular file "etc/orangepimonitor/datasources/soctemp"

skipping non-regular file "etc/rc0.d/K01alsa-utils"
skipping non-regular file "etc/rc0.d/K01chrony"
skipping non-regular file "etc/rc0.d/K01fake-hwclock"
skipping non-regular file "etc/rc0.d/K01haveged"
skipping non-regular file "etc/rc0.d/K01hostapd"
skipping non-regular file "etc/rc0.d/K01networking"
skipping non-regular file "etc/rc0.d/K01nfs-common"
skipping non-regular file "etc/rc0.d/K01nfs-kernel-server"
skipping non-regular file "etc/rc0.d/K01nginx"
skipping non-regular file "etc/rc0.d/K01openvpn"
skipping non-regular file "etc/rc0.d/K01resolvconf"
skipping non-regular file "etc/rc0.d/K01rpcbind"
skipping non-regular file "etc/rc0.d/K01smartmontools"
skipping non-regular file "etc/rc0.d/K01udev"
skipping non-regular file "etc/rc0.d/K01unattended-upgrades"
skipping non-regular file "etc/rc0.d/K01vnstat"
skipping non-regular file "etc/rc1.d/K01alsa-utils"
skipping non-regular file "etc/rc1.d/K01chrony"
skipping non-regular file "etc/rc1.d/K01fake-hwclock"
skipping non-regular file "etc/rc1.d/K01haveged"
skipping non-regular file "etc/rc1.d/K01hostapd"
skipping non-regular file "etc/rc1.d/K01nfs-common"
skipping non-regular file "etc/rc1.d/K01nfs-kernel-server"
skipping non-regular file "etc/rc1.d/K01nginx"
skipping non-regular file "etc/rc1.d/K01openvpn"
skipping non-regular file "etc/rc1.d/K01rpcbind"
skipping non-regular file "etc/rc1.d/K01smartmontools"
skipping non-regular file "etc/rc1.d/K01vnstat"

skipping non-regular file "etc/rc2.d/K01sysstat"
skipping non-regular file "etc/rc2.d/S01chrony"
skipping non-regular file "etc/rc2.d/S01console-setup.sh"
skipping non-regular file "etc/rc2.d/S01cpufrequtils"
skipping non-regular file "etc/rc2.d/S01cron"
skipping non-regular file "etc/rc2.d/S01dbus"
skipping non-regular file "etc/rc2.d/S01haveged"
skipping non-regular file "etc/rc2.d/S01hostapd"
skipping non-regular file "etc/rc2.d/S01loadcpufreq"
skipping non-regular file "etc/rc2.d/S01nfs-kernel-server"
skipping non-regular file "etc/rc2.d/S01nginx"
skipping non-regular file "etc/rc2.d/S01openvpn"
skipping non-regular file "etc/rc2.d/S01rsync"
skipping non-regular file "etc/rc2.d/S01smartmontools"
skipping non-regular file "etc/rc2.d/S01ssh"
skipping non-regular file "etc/rc2.d/S01sysfsutils"
skipping non-regular file "etc/rc2.d/S01unattended-upgrades"
skipping non-regular file "etc/rc2.d/S01vnstat"
skipping non-regular file "etc/rc3.d/K01sysstat"
skipping non-regular file "etc/rc3.d/S01chrony"
skipping non-regular file "etc/rc3.d/S01console-setup.sh"
skipping non-regular file "etc/rc3.d/S01cpufrequtils"
skipping non-regular file "etc/rc3.d/S01cron"
skipping non-regular file "etc/rc3.d/S01dbus"
skipping non-regular file "etc/rc3.d/S01haveged"

skipping non-regular file "etc/rc3.d/S01hostapd"
skipping non-regular file "etc/rc3.d/S01loadcpufreq"
skipping non-regular file "etc/rc3.d/S01nfs-kernel-server"
skipping non-regular file "etc/rc3.d/S01nginx"
skipping non-regular file "etc/rc3.d/S01openvpn"
skipping non-regular file "etc/rc3.d/S01rsync"
skipping non-regular file "etc/rc3.d/S01smartmontools"
skipping non-regular file "etc/rc3.d/S01ssh"
skipping non-regular file "etc/rc3.d/S01sysfsutils"
skipping non-regular file "etc/rc3.d/S01unattended-upgrades"
skipping non-regular file "etc/rc3.d/S01vnstat"
skipping non-regular file "etc/rc4.d/K01sysstat"
skipping non-regular file "etc/rc4.d/S01chrony"
skipping non-regular file "etc/rc4.d/S01console-setup.sh"
skipping non-regular file "etc/rc4.d/S01cpufrequtils"
skipping non-regular file "etc/rc4.d/S01cron"
skipping non-regular file "etc/rc4.d/S01dbus"
skipping non-regular file "etc/rc4.d/S01haveged"
skipping non-regular file "etc/rc4.d/S01hostapd"
skipping non-regular file "etc/rc4.d/S01loadcpufreq"
skipping non-regular file "etc/rc4.d/S01nfs-kernel-server"
skipping non-regular file "etc/rc4.d/S01nginx"
skipping non-regular file "etc/rc4.d/S01openvpn"
skipping non-regular file "etc/rc4.d/S01rsync"
skipping non-regular file "etc/rc4.d/S01smartmontools"
skipping non-regular file "etc/rc4.d/S01ssh"
skipping non-regular file "etc/rc4.d/S01sysfsutils"
skipping non-regular file "etc/rc4.d/S01unattended-upgrades"
skipping non-regular file "etc/rc4.d/S01vnstat"
skipping non-regular file "etc/rc5.d/K01sysstat"
skipping non-regular file "etc/rc5.d/S01chrony"
skipping non-regular file "etc/rc5.d/S01console-setup.sh"
skipping non-regular file "etc/rc5.d/S01cpufrequtils"
skipping non-regular file "etc/rc5.d/S01cron"
skipping non-regular file "etc/rc5.d/S01dbus"
skipping non-regular file "etc/rc5.d/S01haveged"
skipping non-regular file "etc/rc5.d/S01hostapd"
skipping non-regular file "etc/rc5.d/S01loadcpufreq"
skipping non-regular file "etc/rc5.d/S01nfs-kernel-server"
skipping non-regular file "etc/rc5.d/S01nginx"
skipping non-regular file "etc/rc5.d/S01openvpn"
skipping non-regular file "etc/rc5.d/S01rsync"
skipping non-regular file "etc/rc5.d/S01smartmontools"
skipping non-regular file "etc/rc5.d/S01ssh"
skipping non-regular file "etc/rc5.d/S01sysfsutils"
skipping non-regular file "etc/rc5.d/S01unattended-upgrades"
skipping non-regular file "etc/rc5.d/S01vnstat"
skipping non-regular file "etc/rc6.d/K01alsa-utils"
skipping non-regular file "etc/rc6.d/K01chrony"
skipping non-regular file "etc/rc6.d/K01fake-hwclock"
skipping non-regular file "etc/rc6.d/K01haveged"
skipping non-regular file "etc/rc6.d/K01hostapd"
skipping non-regular file "etc/rc6.d/K01networking"
skipping non-regular file "etc/rc6.d/K01nfs-common"
skipping non-regular file "etc/rc6.d/K01nfs-kernel-server"
skipping non-regular file "etc/rc6.d/K01nginx"
skipping non-regular file "etc/rc6.d/K01openvpn"
skipping non-regular file "etc/rc6.d/K01resolvconf"
skipping non-regular file "etc/rc6.d/K01rpcbind"
skipping non-regular file "etc/rc6.d/K01smartmontools"
skipping non-regular file "etc/rc6.d/K01udev"
skipping non-regular file "etc/rc6.d/K01unattended-upgrades"
skipping non-regular file "etc/rc6.d/K01vnstat"
skipping non-regular file "etc/rcS.d/S01alsa-utils"
skipping non-regular file "etc/rcS.d/S01fake-hwclock"
skipping non-regular file "etc/rcS.d/S01keyboard-setup.sh"
skipping non-regular file "etc/rcS.d/S01kmod"
skipping non-regular file "etc/rcS.d/S01networking"
skipping non-regular file "etc/rcS.d/S01nfs-common"
skipping non-regular file "etc/rcS.d/S01procps"
skipping non-regular file "etc/rcS.d/S01resolvconf"
skipping non-regular file "etc/rcS.d/S01rpcbind"
skipping non-regular file "etc/rcS.d/S01screen-cleanup"
skipping non-regular file "etc/rcS.d/S01selinux-autorelabel"
skipping non-regular file "etc/rcS.d/S01udev"
skipping non-regular file "etc/ssl/certs/002c0b4f.0"
skipping non-regular file "etc/ssl/certs/0179095f.0"
skipping non-regular file "etc/ssl/certs/02265526.0"
skipping non-regular file "etc/ssl/certs/062cdee6.0"

skipping non-regular file "etc/ssl/certs/064e0aa9.0"
skipping non-regular file "etc/ssl/certs/06dc52d5.0"
skipping non-regular file "etc/ssl/certs/08063a00.0"
skipping non-regular file "etc/ssl/certs/09789157.0"
skipping non-regular file "etc/ssl/certs/0a775a30.0"
skipping non-regular file "etc/ssl/certs/0b1b94ef.0"
skipping non-regular file "etc/ssl/certs/0b9bc432.0"
skipping non-regular file "etc/ssl/certs/0bf05006.0"
skipping non-regular file "etc/ssl/certs/0f5dc4f3.0"
skipping non-regular file "etc/ssl/certs/0f6fa695.0"
skipping non-regular file "etc/ssl/certs/1001acf7.0"
skipping non-regular file "etc/ssl/certs/106f3e4d.0"
skipping non-regular file "etc/ssl/certs/14bc7599.0"
skipping non-regular file "etc/ssl/certs/18856ac4.0"
skipping non-regular file "etc/ssl/certs/1cef98f5.0"
skipping non-regular file "etc/ssl/certs/1d3472b9.0"
skipping non-regular file "etc/ssl/certs/1e08bfd1.0"
skipping non-regular file "etc/ssl/certs/1e09d511.0"
skipping non-regular file "etc/ssl/certs/228f89db.0"
skipping non-regular file "etc/ssl/certs/244b5494.0"
skipping non-regular file "etc/ssl/certs/2923b3f9.0"
skipping non-regular file "etc/ssl/certs/2ae6433e.0"
skipping non-regular file "etc/ssl/certs/2b349938.0"
skipping non-regular file "etc/ssl/certs/32888f65.0"
skipping non-regular file "etc/ssl/certs/3513523f.0"
skipping non-regular file "etc/ssl/certs/3bde41ac.0"
skipping non-regular file "etc/ssl/certs/3e359ba6.0"
skipping non-regular file "etc/ssl/certs/3fb36b73.0"
skipping non-regular file "etc/ssl/certs/40193066.0"
skipping non-regular file "etc/ssl/certs/4042bcee.0"
skipping non-regular file "etc/ssl/certs/40547a79.0"
skipping non-regular file "etc/ssl/certs/406c9bb1.0"
skipping non-regular file "etc/ssl/certs/48bec511.0"
skipping non-regular file "etc/ssl/certs/4b718d9b.0"
skipping non-regular file "etc/ssl/certs/4bfab552.0"
skipping non-regular file "etc/ssl/certs/4f316efb.0"
skipping non-regular file "etc/ssl/certs/4fd49c6c.0"
skipping non-regular file "etc/ssl/certs/5443e9e3.0"
skipping non-regular file "etc/ssl/certs/54657681.0"
skipping non-regular file "etc/ssl/certs/57bcb2da.0"
skipping non-regular file "etc/ssl/certs/5860aaa6.0"
skipping non-regular file "etc/ssl/certs/5931b5bc.0"
skipping non-regular file "etc/ssl/certs/5ad8a5d6.0"
skipping non-regular file "etc/ssl/certs/5cd81ad7.0"
skipping non-regular file "etc/ssl/certs/5e98733a.0"
skipping non-regular file "etc/ssl/certs/5f15c80c.0"
skipping non-regular file "etc/ssl/certs/5f618aec.0"
skipping non-regular file "etc/ssl/certs/607986c7.0"
skipping non-regular file "etc/ssl/certs/626dceaf.0"
skipping non-regular file "etc/ssl/certs/653b494a.0"
skipping non-regular file "etc/ssl/certs/68dd7389.0"
skipping non-regular file "etc/ssl/certs/6b99d060.0"
skipping non-regular file "etc/ssl/certs/6d41d539.0"
skipping non-regular file "etc/ssl/certs/6fa5da56.0"
skipping non-regular file "etc/ssl/certs/706f604c.0"
skipping non-regular file "etc/ssl/certs/749e9e03.0"
skipping non-regular file "etc/ssl/certs/75d1b2ed.0"
skipping non-regular file "etc/ssl/certs/76faf6c0.0"
skipping non-regular file "etc/ssl/certs/7719f463.0"
skipping non-regular file "etc/ssl/certs/773e07ad.0"
skipping non-regular file "etc/ssl/certs/7a3adc42.0"
skipping non-regular file "etc/ssl/certs/7a780d93.0"
skipping non-regular file "etc/ssl/certs/7f3d5d1d.0"
skipping non-regular file "etc/ssl/certs/8160b96c.0"
skipping non-regular file "etc/ssl/certs/81f2d2b1.0"
skipping non-regular file "etc/ssl/certs/8312c4c1.0"
skipping non-regular file "etc/ssl/certs/8508e720.0"
skipping non-regular file "etc/ssl/certs/865fbdf9.0"
skipping non-regular file "etc/ssl/certs/8cb5ee0f.0"
skipping non-regular file "etc/ssl/certs/8d86cdd1.0"
skipping non-regular file "etc/ssl/certs/8d89cda1.0"
skipping non-regular file "etc/ssl/certs/8f103249.0"
skipping non-regular file "etc/ssl/certs/9046744a.0"
skipping non-regular file "etc/ssl/certs/90c5a3c8.0"
skipping non-regular file "etc/ssl/certs/930ac5d2.0"
skipping non-regular file "etc/ssl/certs/93bc0acc.0"
skipping non-regular file "etc/ssl/certs/9482e63a.0"
skipping non-regular file "etc/ssl/certs/9846683b.0"

skipping non-regular file "etc/ssl/certs/988a38cb.0"
skipping non-regular file "etc/ssl/certs/9b46e03d.0"
skipping non-regular file "etc/ssl/certs/9b5697b0.0"
skipping non-regular file "etc/ssl/certs/9bf03295.0"
skipping non-regular file "etc/ssl/certs/9c8dfbd4.0"
skipping non-regular file "etc/ssl/certs/9d04f354.0"
skipping non-regular file "etc/ssl/certs/9ef4a08a.0"
skipping non-regular file "etc/ssl/certs/9f727ac7.0"
skipping non-regular file "etc/ssl/certs/ACCVRAIZ1.pem"
skipping non-regular file "etc/ssl/certs/AC_RAIZ_FNMT-RCM.pem"
skipping non-regular file "etc/ssl/certs/AC_RAIZ_FNMT-RCM_SERVIDORES_SEGUROS.pem"
skipping non-regular file "etc/ssl/certs/ANF_Secure_Server_Root_CA.pem"
skipping non-regular file "etc/ssl/certs/Actalis_Authentication_Root_CA.pem"
skipping non-regular file "etc/ssl/certs/AffirmTrust_Commercial.pem"
skipping non-regular file "etc/ssl/certs/AffirmTrust_Networking.pem"
skipping non-regular file "etc/ssl/certs/AffirmTrust_Premium.pem"
skipping non-regular file "etc/ssl/certs/AffirmTrust_Premium_ECC.pem"
skipping non-regular file "etc/ssl/certs/Amazon_Root_CA_1.pem"
skipping non-regular file "etc/ssl/certs/Amazon_Root_CA_2.pem"
skipping non-regular file "etc/ssl/certs/Amazon_Root_CA_3.pem"
skipping non-regular file "etc/ssl/certs/Amazon_Root_CA_4.pem"
skipping non-regular file "etc/ssl/certs/Atos_TrustedRoot_2011.pem"
skipping non-regular file "etc/ssl/certs/Atos_TrustedRoot_Root_CA_ECC_TLS_2021.pem"
skipping non-regular file "etc/ssl/certs/Atos_TrustedRoot_Root_CA_RSA_TLS_2021.pem"
skipping non-regular file "etc/ssl/certs/Autoridad_de_Certificacion_Firmaprofesional_CIF_A62634068.pem"
skipping non-regular file "etc/ssl/certs/BJCA_Global_Root_CA1.pem"
skipping non-regular file "etc/ssl/certs/BJCA_Global_Root_CA2.pem"
skipping non-regular file "etc/ssl/certs/Baltimore_CyberTrust_Root.pem"
skipping non-regular file "etc/ssl/certs/Buypass_Class_2_Root_CA.pem"
skipping non-regular file "etc/ssl/certs/Buypass_Class_3_Root_CA.pem"
skipping non-regular file "etc/ssl/certs/CA_Disig_Root_R2.pem"
skipping non-regular file "etc/ssl/certs/CFCA_EV_ROOT.pem"
skipping non-regular file "etc/ssl/certs/COMODO_Certification_Authority.pem"
skipping non-regular file "etc/ssl/certs/COMODO_ECC_Certification_Authority.pem"
skipping non-regular file "etc/ssl/certs/COMODO_RSA_Certification_Authority.pem"
skipping non-regular file "etc/ssl/certs/Certainly_Root_E1.pem"
skipping non-regular file "etc/ssl/certs/Certainly_Root_R1.pem"
skipping non-regular file "etc/ssl/certs/Certigna.pem"
skipping non-regular file "etc/ssl/certs/Certigna_Root_CA.pem"
skipping non-regular file "etc/ssl/certs/Certum_EC-384_CA.pem"
skipping non-regular file "etc/ssl/certs/Certum_Trusted_Network_CA.pem"
skipping non-regular file "etc/ssl/certs/Certum_Trusted_Network_CA_2.pem"
skipping non-regular file "etc/ssl/certs/Certum_Trusted_Root_CA.pem"
skipping non-regular file "etc/ssl/certs/CommScope_Public_Trust_ECC_Root-01.pem"
skipping non-regular file "etc/ssl/certs/CommScope_Public_Trust_ECC_Root-02.pem"
skipping non-regular file "etc/ssl/certs/CommScope_Public_Trust_RSA_Root-01.pem"
skipping non-regular file "etc/ssl/certs/CommScope_Public_Trust_RSA_Root-02.pem"
skipping non-regular file "etc/ssl/certs/Comodo_AAA_Services_root.pem"
skipping non-regular file "etc/ssl/certs/D-TRUST_BR_Root_CA_1_2020.pem"
skipping non-regular file "etc/ssl/certs/D-TRUST_EV_Root_CA_1_2020.pem"
skipping non-regular file "etc/ssl/certs/D-TRUST_Root_Class_3_CA_2_2009.pem"
skipping non-regular file "etc/ssl/certs/D-TRUST_Root_Class_3_CA_2_EV_2009.pem"
skipping non-regular file "etc/ssl/certs/DigiCert_Assured_ID_Root_CA.pem"
skipping non-regular file "etc/ssl/certs/DigiCert_Assured_ID_Root_G2.pem"
skipping non-regular file "etc/ssl/certs/DigiCert_Assured_ID_Root_G3.pem"
skipping non-regular file "etc/ssl/certs/DigiCert_Global_Root_CA.pem"
skipping non-regular file "etc/ssl/certs/DigiCert_Global_Root_G2.pem"
skipping non-regular file "etc/ssl/certs/DigiCert_Global_Root_G3.pem"
skipping non-regular file "etc/ssl/certs/DigiCert_High_Assurance_EV_Root_CA.pem"

skipping non-regular file "etc/ssl/certs/DigiCert_TLS_ECC_P384_Root_G5.pem"
skipping non-regular file "etc/ssl/certs/DigiCert_TLS_RSA4096_Root_G5.pem"
skipping non-regular file "etc/ssl/certs/DigiCert_Trusted_Root_G4.pem"
skipping non-regular file "etc/ssl/certs/Entrust.net_Premium_2048_Secure_Server_CA.pem"
skipping non-regular file "etc/ssl/certs/Entrust_Root_Certification_Authority.pem"
skipping non-regular file "etc/ssl/certs/Entrust_Root_Certification_Authority_-_EC1.pem"
skipping non-regular file "etc/ssl/certs/Entrust_Root_Certification_Authority_-_G2.pem"
skipping non-regular file "etc/ssl/certs/Entrust_Root_Certification_Authority_-_G4.pem"
skipping non-regular file "etc/ssl/certs/GDCA_TrustAUTH_R5_ROOT.pem"
skipping non-regular file "etc/ssl/certs/GLOBALTRUST_2020.pem"
skipping non-regular file "etc/ssl/certs/GTS_Root_R1.pem"
skipping non-regular file "etc/ssl/certs/GTS_Root_R2.pem"
skipping non-regular file "etc/ssl/certs/GTS_Root_R3.pem"
skipping non-regular file "etc/ssl/certs/GTS_Root_R4.pem"
skipping non-regular file "etc/ssl/certs/GlobalSign_ECC_Root_CA_-_R4.pem"
skipping non-regular file "etc/ssl/certs/GlobalSign_ECC_Root_CA_-_R5.pem"
skipping non-regular file "etc/ssl/certs/GlobalSign_Root_CA.pem"
skipping non-regular file "etc/ssl/certs/GlobalSign_Root_CA_-_R3.pem"
skipping non-regular file "etc/ssl/certs/GlobalSign_Root_CA_-_R6.pem"
skipping non-regular file "etc/ssl/certs/GlobalSign_Root_E46.pem"
skipping non-regular file "etc/ssl/certs/GlobalSign_Root_R46.pem"
skipping non-regular file "etc/ssl/certs/Go_Daddy_Class_2_CA.pem"
skipping non-regular file "etc/ssl/certs/Go_Daddy_Root_Certificate_Authority_-_G2.pem"
skipping non-regular file "etc/ssl/certs/HARICA_TLS_ECC_Root_CA_2021.pem"
skipping non-regular file "etc/ssl/certs/HARICA_TLS_RSA_Root_CA_2021.pem"
skipping non-regular file "etc/ssl/certs/Hellenic_Academic_and_Research_Institutions_ECC_RootCA_2015.pem"
skipping non-regular file "etc/ssl/certs/Hellenic_Academic_and_Research_Institutions_RootCA_2015.pem"
skipping non-regular file "etc/ssl/certs/HiPKI_Root_CA_-_G1.pem"
skipping non-regular file "etc/ssl/certs/Hongkong_Post_Root_CA_3.pem"
skipping non-regular file "etc/ssl/certs/ISRG_Root_X1.pem"
skipping non-regular file "etc/ssl/certs/ISRG_Root_X2.pem"
skipping non-regular file "etc/ssl/certs/IdenTrust_Commercial_Root_CA_1.pem"
skipping non-regular file "etc/ssl/certs/IdenTrust_Public_Sector_Root_CA_1.pem"
skipping non-regular file "etc/ssl/certs/Izenpe.com.pem"
skipping non-regular file "etc/ssl/certs/Microsec_e-Szigno_Root_CA_2009.pem"
skipping non-regular file "etc/ssl/certs/Microsoft_ECC_Root_Certificate_Authority_2017.pem"
skipping non-regular file "etc/ssl/certs/Microsoft_RSA_Root_Certificate_Authority_2017.pem"
skipping non-regular file "etc/ssl/certs/NAVER_Global_Root_Certification_Authority.pem"
skipping non-regular file "etc/ssl/certs/NetLock_Arany_=Class_Gold=_Főtanúsítvány.pem"
skipping non-regular file "etc/ssl/certs/OISTE_WISeKey_Global_Root_GB_CA.pem"
skipping non-regular file "etc/ssl/certs/OISTE_WISeKey_Global_Root_GC_CA.pem"
skipping non-regular file "etc/ssl/certs/QuoVadis_Root_CA_1_G3.pem"
skipping non-regular file "etc/ssl/certs/QuoVadis_Root_CA_2.pem"
skipping non-regular file "etc/ssl/certs/QuoVadis_Root_CA_2_G3.pem"
skipping non-regular file "etc/ssl/certs/QuoVadis_Root_CA_3.pem"
skipping non-regular file "etc/ssl/certs/QuoVadis_Root_CA_3_G3.pem"
skipping non-regular file "etc/ssl/certs/SSL.com_EV_Root_Certification_Authority_ECC.pem"
skipping non-regular file "etc/ssl/certs/SSL.com_EV_Root_Certification_Authority_RSA_R2.pem"
skipping non-regular file "etc/ssl/certs/SSL.com_Root_Certification_Authority_ECC.pem"
skipping non-regular file "etc/ssl/certs/SSL.com_Root_Certification_Authority_RSA.pem"
skipping non-regular file "etc/ssl/certs/SSL.com_TLS_ECC_Root_CA_2022.pem"
skipping non-regular file "etc/ssl/certs/SSL.com_TLS_RSA_Root_CA_2022.pem"
skipping non-regular file "etc/ssl/certs/SZAFIR_ROOT_CA2.pem"
skipping non-regular file "etc/ssl/certs/Sectigo_Public_Server_Authentication_Root_E46.pem"

skipping non-regular file "etc/ssl/certs/Sectigo_Public_Server_Authentication_Root_R46.pem"
skipping non-regular file "etc/ssl/certs/SecureSign_RootCA11.pem"
skipping non-regular file "etc/ssl/certs/SecureTrust_CA.pem"
skipping non-regular file "etc/ssl/certs/Secure_Global_CA.pem"
skipping non-regular file "etc/ssl/certs/Security_Communication_ECC_RootCA1.pem"
skipping non-regular file "etc/ssl/certs/Security_Communication_RootCA2.pem"
skipping non-regular file "etc/ssl/certs/Security_Communication_RootCA3.pem"
skipping non-regular file "etc/ssl/certs/Security_Communication_Root_CA.pem"
skipping non-regular file "etc/ssl/certs/Starfield_Class_2_CA.pem"
skipping non-regular file "etc/ssl/certs/Starfield_Root_Certificate_Authority_-_G2.pem"
skipping non-regular file "etc/ssl/certs/Starfield_Services_Root_Certificate_Authority_-_G2.pem"
skipping non-regular file "etc/ssl/certs/SwissSign_Gold_CA_-_G2.pem"
skipping non-regular file "etc/ssl/certs/SwissSign_Silver_CA_-_G2.pem"
skipping non-regular file "etc/ssl/certs/T-TeleSec_GlobalRoot_Class_2.pem"
skipping non-regular file "etc/ssl/certs/T-TeleSec_GlobalRoot_Class_3.pem"
skipping non-regular file "etc/ssl/certs/TUBITAK_Kamu_SM_SSL_Kok_Sertifikasi_-_Surum_1.pem"
skipping non-regular file "etc/ssl/certs/TWCA_Global_Root_CA.pem"
skipping non-regular file "etc/ssl/certs/TWCA_Root_Certification_Authority.pem"
skipping non-regular file "etc/ssl/certs/TeliaSonera_Root_CA_v1.pem"
skipping non-regular file "etc/ssl/certs/Telia_Root_CA_v2.pem"
skipping non-regular file "etc/ssl/certs/TrustAsia_Global_Root_CA_G3.pem"
skipping non-regular file "etc/ssl/certs/TrustAsia_Global_Root_CA_G4.pem"
skipping non-regular file "etc/ssl/certs/Trustwave_Global_Certification_Authority.pem"
skipping non-regular file "etc/ssl/certs/Trustwave_Global_ECC_P256_Certification_Authority.pem"
skipping non-regular file "etc/ssl/certs/Trustwave_Global_ECC_P384_Certification_Authority.pem"
skipping non-regular file "etc/ssl/certs/TunTrust_Root_CA.pem"
skipping non-regular file "etc/ssl/certs/UCA_Extended_Validation_Root.pem"
skipping non-regular file "etc/ssl/certs/UCA_Global_G2_Root.pem"
skipping non-regular file "etc/ssl/certs/USERTrust_ECC_Certification_Authority.pem"
skipping non-regular file "etc/ssl/certs/USERTrust_RSA_Certification_Authority.pem"
skipping non-regular file "etc/ssl/certs/XRamp_Global_CA_Root.pem"
skipping non-regular file "etc/ssl/certs/a3418fda.0"
skipping non-regular file "etc/ssl/certs/a89d74c2.0"
skipping non-regular file "etc/ssl/certs/a94d09e5.0"
skipping non-regular file "etc/ssl/certs/aee5f10d.0"
skipping non-regular file "etc/ssl/certs/b0e59380.0"
skipping non-regular file "etc/ssl/certs/b1159c4c.0"
skipping non-regular file "etc/ssl/certs/b433981b.0"
skipping non-regular file "etc/ssl/certs/b66938e9.0"
skipping non-regular file "etc/ssl/certs/b727005e.0"
skipping non-regular file "etc/ssl/certs/b7a5b843.0"
skipping non-regular file "etc/ssl/certs/b81b93f0.0"
skipping non-regular file "etc/ssl/certs/bf53fb88.0"
skipping non-regular file "etc/ssl/certs/c01eb047.0"
skipping non-regular file "etc/ssl/certs/c28a8a30.0"
skipping non-regular file "etc/ssl/certs/ca6e4ad9.0"
skipping non-regular file "etc/ssl/certs/cbf06781.0"
skipping non-regular file "etc/ssl/certs/cc450945.0"
skipping non-regular file "etc/ssl/certs/cd58d51e.0"
skipping non-regular file "etc/ssl/certs/cd8c0d63.0"
skipping non-regular file "etc/ssl/certs/ce5e74ef.0"
skipping non-regular file "etc/ssl/certs/certSIGN_ROOT_CA.pem"
skipping non-regular file "etc/ssl/certs/certSIGN_Root_CA_G2.pem"
skipping non-regular file "etc/ssl/certs/d4dae3dd.0"
skipping non-regular file "etc/ssl/certs/d52c538d.0"
skipping non-regular file "etc/ssl/certs/d6325660.0"
skipping non-regular file "etc/ssl/certs/d7e8dc79.0"
skipping non-regular file "etc/ssl/certs/d887a5bb.0"
skipping non-regular file "etc/ssl/certs/da0cfd1d.0"
skipping non-regular file "etc/ssl/certs/dc4d6a89.0"
skipping non-regular file "etc/ssl/certs/dd8e9d41.0"
skipping non-regular file "etc/ssl/certs/de6d66f3.0"
skipping non-regular file "etc/ssl/certs/e-Szigno_Root_CA_2017.pem"

skipping non-regular file "etc/ssl/certs/e113c810.0"
skipping non-regular file "etc/ssl/certs/e18bfb83.0"
skipping non-regular file "etc/ssl/certs/e35234b1.0"
skipping non-regular file "etc/ssl/certs/e36a6752.0"
skipping non-regular file "etc/ssl/certs/e73d606e.0"
skipping non-regular file "etc/ssl/certs/e868b802.0"
skipping non-regular file "etc/ssl/certs/e8de2f56.0"
skipping non-regular file "etc/ssl/certs/ePKI_Root_Certification_Authority.pem"
skipping non-regular file "etc/ssl/certs/ecccd8db.0"
skipping non-regular file "etc/ssl/certs/ed858448.0"
skipping non-regular file "etc/ssl/certs/ee64a828.0"
skipping non-regular file "etc/ssl/certs/eed8c118.0"
skipping non-regular file "etc/ssl/certs/ef954a4e.0"
skipping non-regular file "etc/ssl/certs/emSign_ECC_Root_CA_-_C3.pem"
skipping non-regular file "etc/ssl/certs/emSign_ECC_Root_CA_-_G3.pem"
skipping non-regular file "etc/ssl/certs/emSign_Root_CA_-_C1.pem"
skipping non-regular file "etc/ssl/certs/emSign_Root_CA_-_G1.pem"
skipping non-regular file "etc/ssl/certs/f081611a.0"
skipping non-regular file "etc/ssl/certs/f0c70a8d.0"
skipping non-regular file "etc/ssl/certs/f249de83.0"
skipping non-regular file "etc/ssl/certs/f30dd6ad.0"
skipping non-regular file "etc/ssl/certs/f3377b1b.0"
skipping non-regular file "etc/ssl/certs/f387163d.0"
skipping non-regular file "etc/ssl/certs/f39fc864.0"
skipping non-regular file "etc/ssl/certs/f51bb24c.0"
skipping non-regular file "etc/ssl/certs/fa5da96b.0"
skipping non-regular file "etc/ssl/certs/fb717492.0"
skipping non-regular file "etc/ssl/certs/fc5a8f99.0"
skipping non-regular file "etc/ssl/certs/fd64f3fc.0"
skipping non-regular file "etc/ssl/certs/fe8a2cd8.0"
skipping non-regular file "etc/ssl/certs/feffd413.0"
skipping non-regular file "etc/ssl/certs/ff34af3f.0"
skipping non-regular file "etc/ssl/certs/vTrus_ECC_Root_CA.pem"
skipping non-regular file "etc/ssl/certs/vTrus_Root_CA.pem"

rsync: [sender] send_files failed to open "/etc/security/opasswd": Permission denied (13)

rsync: [sender] send_files failed to open "/etc/ssh/ssh_host_ecdsa_key": Permission denied (13)
rsync: [sender] send_files failed to open "/etc/ssh/ssh_host_ed25519_key": Permission denied (13)
rsync: [sender] send_files failed to open "/etc/ssh/ssh_host_rsa_key": Permission denied (13)

skipping non-regular file "etc/sysctl.d/99-sysctl.conf"

rsync: [sender] send_files failed to open "/etc/sudoers.d/README": Permission denied (13)

skipping non-regular file "etc/systemd/system/chronyd.service"
skipping non-regular file "etc/systemd/system/dbus-fi.w1.wpa_supplicant1.service"
skipping non-regular file "etc/systemd/system/dbus-org.freedesktop.nm-dispatcher.service"
skipping non-regular file "etc/systemd/system/dbus-org.freedesktop.resolve1.service"
skipping non-regular file "etc/systemd/system/ondemand.service"
skipping non-regular file "etc/systemd/system/smartd.service"
skipping non-regular file "etc/systemd/system/sshd.service"
skipping non-regular file "etc/systemd/system/sudo.service"
skipping non-regular file "etc/systemd/system/syslog.service"

skipping non-regular file "etc/systemd/system/basic.target.wants/orangepi-hardware-monitor.service"
skipping non-regular file "etc/systemd/system/basic.target.wants/orangepi-hardware-optimize.service"
skipping non-regular file "etc/systemd/system/getty.target.wants/getty@tty1.service"
skipping non-regular file "etc/systemd/system/getty.target.wants/serial-getty@ttyS0.service"
skipping non-regular file "etc/systemd/system/graphical.target.wants/bootsplash-hide-when-booted.service"
skipping non-regular file "etc/systemd/system/halt.target.wants/bootsplash-show-on-shutdown.service"
skipping non-regular file "etc/systemd/system/kexec.target.wants/bootsplash-show-on-shutdown.service"
skipping non-regular file "etc/systemd/system/multi-user.target.wants/NetworkManager.service"
skipping non-regular file "etc/systemd/system/multi-user.target.wants/chrony.service"
skipping non-regular file "etc/systemd/system/multi-user.target.wants/console-setup.service"
skipping non-regular file "etc/systemd/system/multi-user.target.wants/cron.service"
skipping non-regular file "etc/systemd/system/multi-user.target.wants/dmesg.service"
skipping non-regular file "etc/systemd/system/multi-user.target.wants/e2scrub_reap.service"
skipping non-regular file "etc/systemd/system/multi-user.target.wants/hostapd.service"
skipping non-regular file "etc/systemd/system/multi-user.target.wants/klipper.service"
skipping non-regular file "etc/systemd/system/multi-user.target.wants/moonraker.service"
skipping non-regular file "etc/systemd/system/multi-user.target.wants/networkd-dispatcher.service"
skipping non-regular file "etc/systemd/system/multi-user.target.wants/networking.service"
skipping non-regular file "etc/systemd/system/multi-user.target.wants/nfs-client.target"
skipping non-regular file "etc/systemd/system/multi-user.target.wants/nfs-server.service"
skipping non-regular file "etc/systemd/system/multi-user.target.wants/nginx.service"
skipping non-regular file "etc/systemd/system/multi-user.target.wants/openvpn.service"
skipping non-regular file "etc/systemd/system/multi-user.target.wants/orangepi-firstrun-config.service"
skipping non-regular file "etc/systemd/system/multi-user.target.wants/remote-fs.target"
skipping non-regular file "etc/systemd/system/multi-user.target.wants/rpcbind.service"
skipping non-regular file "etc/systemd/system/multi-user.target.wants/rsyslog.service"
skipping non-regular file "etc/systemd/system/multi-user.target.wants/smartmontools.service"
skipping non-regular file "etc/systemd/system/multi-user.target.wants/ssh.service"
skipping non-regular file "etc/systemd/system/multi-user.target.wants/systemd-resolved.service"
skipping non-regular file "etc/systemd/system/multi-user.target.wants/unattended-upgrades.service"
skipping non-regular file "etc/systemd/system/multi-user.target.wants/vnstat.service"
skipping non-regular file "etc/systemd/system/multi-user.target.wants/wpa_supplicant.service"
skipping non-regular file "etc/systemd/system/network-online.target.wants/networking.service"
skipping non-regular file "etc/systemd/system/nfs-client.target.wants/nfs-blkmap.service"
skipping non-regular file "etc/systemd/system/poweroff.target.wants/bootsplash-show-on-shutdown.service"
skipping non-regular file "etc/systemd/system/reboot.target.wants/bootsplash-show-on-shutdown.service"
skipping non-regular file "etc/systemd/system/remote-fs.target.wants/nfs-client.target"
skipping non-regular file "etc/systemd/system/sockets.target.wants/rpcbind.socket"
skipping non-regular file "etc/systemd/system/sysinit.target.wants/bootsplash-ask-password-console.path"
skipping non-regular file "etc/systemd/system/sysinit.target.wants/fake-hwclock.service"
skipping non-regular file "etc/systemd/system/sysinit.target.wants/haveged.service"
skipping non-regular file "etc/systemd/system/sysinit.target.wants/keyboard-setup.service"
skipping non-regular file "etc/systemd/system/sysinit.target.wants/orangepi-ramlog.service"
skipping non-regular file "etc/systemd/system/sysinit.target.wants/orangepi-zram-config.service"

skipping non-regular file "etc/systemd/system/sysinit.target.wants/resolvconf.service"
skipping non-regular file "etc/systemd/system/sysinit.target.wants/setvtrgb.service"
skipping non-regular file "etc/systemd/system/sysinit.target.wants/systemd-pstore.service"
skipping non-regular file "etc/systemd/system/systemd-resolved.service.wants/resolvconf-pull-resolved.path"
skipping non-regular file "etc/systemd/system/systemd-resolved.service.wants/resolvconf-pull-resolved.service"
skipping non-regular file "etc/systemd/system/timers.target.wants/apt-daily-upgrade.timer"
skipping non-regular file "etc/systemd/system/timers.target.wants/apt-daily.timer"
skipping non-regular file "etc/systemd/system/timers.target.wants/dpkg-db-backup.timer"
skipping non-regular file "etc/systemd/system/timers.target.wants/e2scrub_all.timer"
skipping non-regular file "etc/systemd/system/timers.target.wants/fstrim.timer"
skipping non-regular file "etc/systemd/system/timers.target.wants/logrotate.timer"
skipping non-regular file "etc/systemd/system/timers.target.wants/man-db.timer"
skipping non-regular file "etc/systemd/user/sockets.target.wants/dirmngr.socket"
skipping non-regular file "etc/systemd/user/sockets.target.wants/gpg-agent-browser.socket"
skipping non-regular file "etc/systemd/user/sockets.target.wants/gpg-agent-extra.socket"
skipping non-regular file "etc/systemd/user/sockets.target.wants/gpg-agent-ssh.socket"
skipping non-regular file "etc/systemd/user/sockets.target.wants/gpg-agent.socket"
skipping non-regular file "etc/systemd/user/sockets.target.wants/pk-debconf-helper.socket"
skipping non-regular file "etc/xdg/systemd/user"

rsync error: some files/attrs were not transferred (see previous errors) (code 23) at main.c(1338) [sender=3.2.7]

Command {update_git_script_message} timed out
Stats 3785.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=10362 bytes_read=123108 bytes_retransmit=0 bytes_invalid=0 send_seq=1014 receive_seq=1014 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998316  orange_pi: temp=47.9 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=4.63 cputime=85.422 memavail=1676956 print_time=5528.603 buffer_time=0.793 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
webhooks client 281473326727904: Disconnected
Restarting printer
Start printer at Wed Dec 25 21:20:04 2024 (1735150804.3 3787.3)
===== Config file =====
[virtual_sdcard]
path = /home/klipper/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[pause_resume]

[display_status]

[respond]

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = BASE_CANCEL_PRINT
gcode = 
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	TURN_OFF_HEATERS
	M107
	G91
	G1 E-{E} F1500
	G90
	CLEAR_PAUSE
	SDCARD_RESET_FILE
	BASE_CANCEL_PRINT
	PARK

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = BASE_PAUSE
gcode = 
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	SAVE_GCODE_STATE NAME=PAUSE_STATE
	BASE_PAUSE
	G91
	G1 E-{E} F1500
	G90
	PARK

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = BASE_RESUME
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	G91
	G1 E{E} F1500
	G90
	RESTORE_GCODE_STATE NAME=PAUSE_STATE MOVE=1
	BASE_RESUME

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[gcode_macro _CLIENT_LINEAR_MOVE]
description = Linear move with save and restore of the gcode state
gcode = 
	{% set x_move = "X" ~ params.X if params.X is defined else "" %}
	{% set y_move = "Y" ~ params.Y if params.Y is defined else "" %}
	{% set z_move = "Z" ~ params.Z if params.Z is defined else "" %}
	{% set e_move = "E" ~ params.E if params.E is defined else "" %}
	{% set rate = "F" ~ params.F if params.F is defined else "" %}
	{% set ABSOLUTE = params.ABSOLUTE | default(0) | int != 0 %}
	{% set ABSOLUTE_E = params.ABSOLUTE_E | default(0) | int != 0 %}
	SAVE_GCODE_STATE NAME=_client_movement
	{% if x_move or y_move or z_move %}
	G9{ 0 if ABSOLUTE else 1 }
	{% endif %}
	{% if e_move %}
	M8{ 2 if ABSOLUTE_E else 3 }
	{% endif %}
	G1 { x_move } { y_move } { z_move } { e_move } { rate }
	RESTORE_GCODE_STATE NAME=_client_movement

[gcode_macro list_sensors]
gcode = 
	{ action_respond_info(printer.heaters.available_heaters | join(', ')) }
	{ action_respond_info(printer.heaters.available_sensors | join(', ')) }

[gcode_macro Power_OFF]
gcode = SET_PIN PIN=Power VALUE=0

[gcode_macro _POWER_OFF_PRINTER]
gcode = SET_PIN PIN=Power VALUE=0

[gcode_macro ACTIVATE_POWER_OFF]
gcode = 
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK_ACT DURATION=60

[gcode_macro DEACTIVATE_POWER_OFF]
gcode = 
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK_ACT DURATION=0

[delayed_gcode POWER_OFF_PRINTER_CHECK_ACT]
gcode = 
	{% if printer.idle_timeout.state == "Idle" or printer.idle_timeout.state == "Ready" %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=30
	{% else %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK_ACT DURATION=60
	{% endif %}

[delayed_gcode POWER_OFF_PRINTER_CHECK]
gcode = 
	{% if printer.idle_timeout.state == "Idle" or printer.idle_timeout.state == "Ready" %}
	{% if printer.extruder.temperature < 50.0 and printer.heater_bed.temperature < 50.0 %}
	{% if printer.extruder.target == 0.0 and printer.heater_bed.target == 0.0 %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=0
	_POWER_OFF_PRINTER
	{% else %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=2
	{% endif %}
	{% else %}
	{% if printer.idle_timeout.state == "Printing" %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=0
	{% else %}
	{% if printer.extruder.target == 0.0 and printer.heater_bed.target == 0.0 %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=2
	{% else %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=0
	{% endif %}
	{% endif %}
	{% endif %}
	{% endif %}

[gcode_macro M141]
gcode = SET_HEATER_TEMPERATURE HEATER=chamber_heater TARGET={params.S|default(0)}

[gcode_macro M80]
gcode = SET_PIN PIN=Power  VALUE=1

[gcode_macro M81]
gcode = 
	
	SET_PIN PIN=Power VALUE=0

[gcode_macro M486]
gcode = 
	
	
	
	
	
	
	
	
	
	
	
	{% if 'exclude_object' not in printer %}
	{action_raise_error("[exclude_object] is not enabled")}
	{% endif %}
	
	{% if 'T' in params %}
	EXCLUDE_OBJECT RESET=1
	
	{% for i in range(params.T | int) %}
	EXCLUDE_OBJECT_DEFINE NAME={i}
	{% endfor %}
	{% endif %}
	
	{% if 'C' in params %}
	EXCLUDE_OBJECT CURRENT=1
	{% endif %}
	
	{% if 'P' in params %}
	EXCLUDE_OBJECT NAME={params.P}
	{% endif %}
	
	{% if 'S' in params %}
	{% if params.S == '-1' %}
	{% if printer.exclude_object.current_object %}
	EXCLUDE_OBJECT_END NAME={printer.exclude_object.current_object}
	{% endif %}
	{% else %}
	EXCLUDE_OBJECT_START NAME={params.S}
	{% endif %}
	{% endif %}
	
	{% if 'U' in params %}
	EXCLUDE_OBJECT RESET=1 NAME={params.U}
	{% endif %}

[gcode_macro M190]
rename_existing = M190.1
gcode = 
	{% if printer["gcode_macro status_heating"] != null %}
	status_heating
	{% endif %}
	M190.1 { rawparams }
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro _CHOME]
gcode = 
	{% if printer["gcode_macro status_homing"] != null %}
	status_homing
	{% endif %}
	{% if printer.toolhead.homed_axes != "xyz" %}
	G28
	{% endif %}
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro M109]
rename_existing = M109.1
gcode = 
	{% if printer["gcode_macro status_heating"] != null %}
	status_heating
	{% endif %}
	M109.1 { rawparams }
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro _MOVE_AWAY]
gcode = 
	{% set th = printer.toolhead %}
	{% set x_safe = th.position.x + 20 * (1 if th.axis_maximum.x - th.position.x > 20 else -1) %}
	{% set y_safe = th.position.y + 20 * (1 if th.axis_maximum.y - th.position.y > 20 else -1) %}
	{% set z_safe = [th.position.z + 2, th.axis_maximum.z]|min %}
	
	G90
	G0 X{x_safe} Y{y_safe} Z{z_safe} F20000

[gcode_macro PARK_CENTER_REAR]
gcode = 
	{% if printer["gcode_macro status_busy"] != null %}
	status_busy
	{% endif %}
	{% set th = printer.toolhead %}
	{% set x_safe = th.position.x + 20 * (1 if th.axis_maximum.x - th.position.x > 20 else -1) %}
	{% set y_safe = th.position.y + 20 * (1 if th.axis_maximum.y - th.position.y > 20 else -1) %}
	
	G0 X{th.axis_maximum.x//2} Y{th.axis_maximum.y - 2} F3600
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro START_PRINT]
variable_retract = 15
gcode = 
	{% set chamber_temp = params.CHAMBER_TEMP|default(0)|float %}
	{% set extruder_temp = params.EXTRUDER_TEMP|default(210)|float %}
	{% set bed_temp = params.BED_TEMP|default(60)|float %}
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	CLEAR_PAUSE
	G28
	Smart_Park
	M220 S100
	M221 S100
	SET_HEATER_TEMPERATURE HEATER=chamber_heater TARGET={chamber_temp}
	SET_HEATER_TEMPERATURE HEATER=heater_bed TARGET={bed_temp}
	TEMPERATURE_WAIT SENSOR=heater_bed MINIMUM={bed_temp * 0.75}
	SET_HEATER_TEMPERATURE HEATER=extruder TARGET={extruder_temp}
	G90
	M82
	TEMPERATURE_WAIT SENSOR=heater_bed MINIMUM={bed_temp}
	TEMPERATURE_WAIT SENSOR=extruder MINIMUM={extruder_temp}
	
	G1 E-15 F3600
	
	G28
	BED_MESH_CALIBRATE
	PRIME_LINE

[gcode_macro pid_soplo]
gcode = 
	PID_CALIBRATE HEATER=extruder TARGET=250

[gcode_macro pid_bed]
gcode = 
	PID_CALIBRATE HEATER=heater_bed TARGET=105

[gcode_macro BED]
gcode = 
	PROBE_CALIBRATE

[gcode_macro END_PRINT]
gcode = 
	
	{% set max_x = printer.configfile.config["stepper_x"]["position_max"]|float %}
	{% set max_y = printer.configfile.config["stepper_y"]["position_max"]|float %}
	{% set max_z = printer.configfile.config["stepper_z"]["position_max"]|float %}
	
	
	{% if printer.toolhead.position.x < (max_x - 20) %}
	{% set x_safe = 20.0 %}
	{% else %}
	{% set x_safe = -20.0 %}
	{% endif %}
	
	{% if printer.toolhead.position.y < (max_y - 20) %}
	{% set y_safe = 20.0 %}
	{% else %}
	{% set y_safe = -20.0 %}
	{% endif %}
	
	{% if printer.toolhead.position.z < (max_z - 2) %}
	{% set z_safe = 2.0 %}
	{% else %}
	{% set z_safe = max_z - printer.toolhead.position.z %}
	{% endif %}
	
	
	M400
	G92 E0
	G1 E-15 F3600
	G91
	G0 Z{z_safe} F3600
	G0 X{x_safe} Y{y_safe} F20000
	
	
	M104 S0
	M104 S0
	M140 S0
	M106 S0
	G90
	G0 X{max_x / 2} Y{max_y} F3600
	
	SONG_CRAB_RAVE
	
	
	
	M117 Finished!
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=30

[gcode_macro M300]
gcode = 
	
	{% set S = params.S|default(1000)|int %}
	
	{% set P = params.P|default(100)|int %}
	
	
	{% set V = params.V|default(99)|int %}
	SET_PIN PIN=beeper VALUE={0.1 * (V / 100) if S > 0 else 1} CYCLE_TIME={ 1.0 / S if S > 0 else 1 }
	G4 P{P}
	SET_PIN PIN=beeper VALUE=0 CYCLE_TIME={ 0.001 }
description = 
	"Plays a beep sound.
	@param {int} [S=1000] - Frequency in Hz
	@param {int} [P=100] - Duration in ms
	@param {int} [V=99] - Volume in percent"

[gcode_macro PRIME_LINE]
gcode = 
	{% set feedrate = params.F|default(10)|float * 60 %}
	{% set length = 100.0 %}
	{% set width = printer.configfile.settings.extruder.nozzle_diameter|float %}
	{% set height = ( (width / 0.04)|int - (width / 0.04 / 4)|int )|float * 0.04 %}
	
	{% set extrude = length * width * height * 1.5 %}
	SAVE_GCODE_STATE NAME=PRIME_LINE_STATE
	SET_IDLE_TIMEOUT TIMEOUT=7200
	{% if 'Y' in params %}
	{% set x_start = 1.0 %}
	{% set y_start = (printer.toolhead.axis_maximum.y|float - 100) / 2 %}
	G0 X{x_start} Y{y_start} F5000
	G0 Z{height} F1500
	G91
	
	G1 E8 F300
	
	
	G1 Y100 E{extrude} F{feedrate}
	G0 X{width} F5000
	G1 Y-100 E{extrude} F{feedrate}
	{% else %}
	{% set x_start = (printer.toolhead.axis_maximum.x|float - 100) / 2 %}
	{% set y_start = 1.0 %}
	G0 X{x_start} Y{y_start} F5000
	G0 Z{height} F1500
	G91
	
	G1 E8 F300
	
	
	G1 X100 E{extrude} F{feedrate}
	G0 Y{width} F5000
	G1 X-100 E{extrude} F{feedrate}
	{% endif %}
	RESTORE_GCODE_STATE NAME=PRIME_LINE_STATE

[gcode_macro VINT]
gcode = 
	SCREWS_TILT_CALCULATE

[gcode_macro LOW_TEMP_CHECK]
gcode = 
	{% set extruder_temp = params.T|default(240)|float %}
	{% if printer.extruder.target > extruder_temp %}
	{% set extruder_temp = printer.extruder.target %}
	{% endif %}
	{% if printer.extruder.temperature < extruder_temp %}
	M118 Heating to {extruder_temp}
	SET_HEATER_TEMPERATURE HEATER=extruder TARGET={extruder_temp}
	TEMPERATURE_WAIT SENSOR=extruder MINIMUM={extruder_temp}
	{% endif %}

[gcode_macro M76]
gcode = 
	PAUSE

[gcode_macro M601]
gcode = 
	PAUSE

[gcode_macro G27]
gcode = 
	PARK

[gcode_macro M125]
gcode = 
	PARK

[gcode_macro M600]
gcode = 
	PAUSE

[gcode_macro M701]
gcode = 
	FILAMENT_LOAD

[gcode_macro M702]
gcode = 
	FILAMENT_UNLOAD

[gcode_macro M500]
gcode = 
	SAVE_CONFIG

[gcode_macro PARK]
gcode = 
	{% set x_park = params.X|default(0)|float %}
	{% set y_park = params.Y|default(0)|float %}
	{% set z_park = params.Z|default(10)|float + printer.toolhead.position.z|float %}
	{% set x_max = printer.toolhead.axis_maximum.x|float %}
	{% set y_max = printer.toolhead.axis_maximum.y|float %}
	{% set z_max = printer.toolhead.axis_maximum.z|float %}
	{% if x_park > x_max %}
	{% set x_park = x_max %}
	{% endif %}
	{% if y_park > y_max %}
	{% set y_park = y_max %}
	{% endif %}
	{% if z_park > z_max %}
	{% set z_park = z_max %}
	{% endif %}
	SAVE_GCODE_STATE NAME=PARK_STATE
	G90
	G1 Z{z_park} F1500
	G1 X{x_park} Y{y_park} F5000
	RESTORE_GCODE_STATE name=PARK_STATE

[gcode_macro START_DRYER]
description = Start the heated bed filament dryer.
gcode = 
	{% set ChamberTemperature = params.CHAMBER | default(65.0) | float %}
	{% set BedTemperature = params.TEMPERATURE | default(0.0) | float %}
	{% set DryTime = params.TIME | default(14400) | int %}
	M140 S{BedTemperature}
	M141 S{ChamberTemperature}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=time_remaining VALUE={DryTime}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=bed_temperature VALUE={BedTemperature}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=chamber_temperature VALUE={ChamberTemperature}
	UPDATE_DELAYED_GCODE ID=DRYER_TIMER DURATION=1

[gcode_macro STOP_DRYER]
gcode = 
	M140 S0
	M141 S0
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=time_remaining VALUE=0
	UPDATE_DELAYED_GCODE ID=DRYER_TIMER DURATION=0
	M117 Drying Stopped

[gcode_macro DRYER_STATUS]
variable_time_remaining = 0
variable_bed_temperature = 0
variable_chamber_temperature = 0
gcode = 
	{% if time_remaining > 0 %}
	M140 S{bed_temperature}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=time_remaining VALUE={time_remaining - 1}
	M117 Drying {time_remaining}
	{% else %}
	STOP_DRYER
	{% endif %}

[delayed_gcode DRYER_TIMER]
gcode = 
	UPDATE_DELAYED_GCODE ID=DRYER_TIMER DURATION=1
	DRYER_STATUS

[gcode_macro DRY_tpu]
gcode = 
	START_DRYER TEMPERATURE=0 CHAMBER=50 TIME=18000

[gcode_macro DRY_PETG]
gcode = 
	START_DRYER TEMPERATURE=0  CHAMBER=65 TIME=18000

[gcode_macro DRY_ABS]
gcode = 
	{% set S = params.S|default(0.0)|float %}
	SET_PIN PIN=Laser VALUE={S / 255.0}

[gcode_macro M4]
gcode = 
	{% set S = params.S|default(0.0)|float %}
	SET_PIN PIN=Laser VALUE={S / 255.0}

[gcode_macro M5]
gcode = 
	SET_PIN PIN=Laser VALUE=0

[menu __main __control __toolonoff]
type = input
enable = {'pwm_tool Laser' in printer}
name = Fan: {'ON ' if menu.input else 'OFF'}
input = {printer['pwm_tool Laser'].value}
input_min = 0
input_max = 1
input_step = 1
gcode = 
	M3 S{255 if menu.input else 0}

[menu __main __control __toolspeed]
type = input
enable = {'pwm_tool Laser' in printer}
name = Laser speed: {'%3d' % (menu.input*100)}%
input = {printer['pwm_tool Laser'].value}
input_min = 0
input_max = 1
input_step = 0.01
gcode = 
	M3 S{'%d' % (menu.input*255)}

[gcode_macro NOTE]
description = 
	"Plays a specified note for a specified duration
	@param {string} [N=C5] - Note to play
	@param {int} [D=500] - Duration of note. There are currently some Klipper limitations to how short a note can be.
	@param {int} [V=99] - Volume in percent
	@param {bool} [S=true] - Whether or not to stop the note after duration"
gcode = 
	{% set notes = {
	'C0': 16.35,   'CS0': 17.32,   'D0': 18.35,   'DS0': 19.45,   'E0': 20.60,   'F0': 21.83,   'FS0': 23.12,   'G0': 24.50,   'GS0': 25.96,   'A0': 27.50,   'AS0': 29.14,   'B0': 30.87,
	'C1': 32.70,   'CS1': 34.65,   'D1': 36.71,   'DS1': 38.89,   'E1': 41.20,   'F1': 43.65,   'FS1': 46.25,   'G1': 49.00,   'GS1': 51.91,   'A1': 55.00,   'AS1': 58.27,   'B1': 61.74,
	'C2': 65.41,   'CS2': 69.30,   'D2': 73.42,   'DS2': 77.78,   'E2': 82.41,   'F2': 87.31,   'FS2': 92.50,   'G2': 98.00,   'GS2': 103.83,  'A2': 110.00,  'AS2': 116.54,  'B2': 123.47,
	'C3': 130.81,  'CS3': 138.59,  'D3': 146.83,  'DS3': 155.56,  'E3': 164.81,  'F3': 174.61,  'FS3': 185.00,  'G3': 196.00,  'GS3': 207.65,  'A3': 220.00,  'AS3': 233.08,  'B3': 246.94,
	'C4': 261.63,  'CS4': 277.18,  'D4': 293.66,  'DS4': 311.13,  'E4': 329.63,  'F4': 349.23,  'FS4': 369.99,  'G4': 392.00,  'GS4': 415.30,  'A4': 440.00,  'AS4': 466.16,  'B4': 493.88,
	'C5': 523.25,  'CS5': 554.37,  'D5': 587.33,  'DS5': 622.25,  'E5': 659.26,  'F5': 698.46,  'FS5': 739.99,  'G5': 783.99,  'GS5': 830.61,  'A5': 880.00,  'AS5': 932.33,  'B5': 987.77,
	'C6': 1046.50, 'CS6': 1108.73, 'D6': 1174.66, 'DS6': 1244.51, 'E6': 1318.51, 'F6': 1396.91, 'FS6': 1479.98, 'G6': 1567.98, 'GS6': 1661.22, 'A6': 1760.00, 'AS6': 1864.66, 'B6': 1975.53,
	'C7': 2093.00, 'CS7': 2217.46, 'D7': 2349.32, 'DS7': 2489.02, 'E7': 2637.02, 'F7': 2793.83, 'FS7': 2959.96, 'G7': 3135.96, 'GS7': 3322.44, 'A7': 3520.00, 'AS7': 3729.31, 'B7': 3951.07,
	'C8': 4186.01, 'CS8': 4434.92, 'D8': 4698.64, 'DS8': 4978.03, 'E8': 5274.04, 'F8': 5587.65, 'FS8': 5919.91, 'G8': 6271.93, 'GS8': 6644.88, 'A8': 7040.00, 'AS8': 7458.62, 'B8': 7902.13,
	} %}
	
	{% set note = params.N|default('C5')|string %}
	
	{% set dur = params.D|default(500)|int %}
	
	
	{% set volume = params.V|default(99)|int %}
	
	{% set stop = params.S|default('true')|string %}
	
	{% set freq = notes[note] %}
	
	SET_PIN PIN=beeper VALUE={0.1 * (volume / 100) if volume > 0 else 1} CYCLE_TIME={ 1.0 / freq }
	G4 P{dur}
	{% if stop|lower == 'true' %}
	SET_PIN PIN=beeper VALUE=0 CYCLE_TIME={ 0.001 }
	{% endif %}

[gcode_macro TONE_GEN]
description = "Used for the tone generator menu"
variable_tone_freq = 0.001093
gcode = 
	M117 {printer["gcode_macro TONE_GEN"].tone_freq}nothz

[gcode_macro SONG_STAR_WARS_MAIN_THEME]
description = "Plays the Star Wars main theme"
gcode = 
	NOTE N=D4 D=133
	NOTE N=D4 D=133
	NOTE N=D4 D=133
	NOTE N=G4 D=1000
	NOTE N=D5 D=1000
	
	NOTE N=C5 D=133
	NOTE N=B4 D=133
	NOTE N=A4 D=133
	NOTE N=G5 D=1000
	NOTE N=D5 D=500
	
	NOTE N=C5 D=133
	NOTE N=B4 D=133
	NOTE N=A4 D=133
	NOTE N=G5 D=1000
	NOTE N=D5 D=500
	
	NOTE N=C5 D=133
	NOTE N=B4 D=133
	NOTE N=C5 D=133
	NOTE N=A4 D=1000

[gcode_macro SONG_CRAB_RAVE]
description = "Plays Crab Rave"
gcode = 
	NOTE N=D6 D=150 V=30 S=1
	NOTE N=AS6 D=150 V=30 S=1
	NOTE N=G6 D=150 V=30 S=1
	NOTE N=G6 D=150 V=30 S=0
	NOTE N=D6 D=150 V=30 S=1
	NOTE N=D6 D=150 V=30 S=0
	NOTE N=A6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=0
	NOTE N=D6 D=150 V=30 S=1
	NOTE N=D6 D=150 V=30 S=0
	NOTE N=A6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=0
	NOTE N=C6 D=150 V=30 S=1
	NOTE N=C6 D=150 V=30 S=1
	NOTE N=E6 D=150 V=30 S=1
	NOTE N=E6 D=150 V=30 S=0
	NOTE N=F6 D=150 V=30 S=1
	SET_PIN PIN=beeper VALUE=0

[gcode_macro one]
description = "one"
gcode = 
	NOTE N=C6 D=600 V=30 S=1
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=G5 D=400 V=30 S=1
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=E6 D=400 V=30 S=1
	G4 P150
	NOTE N=G6 D=180 V=30 S=0
	NOTE N=F6 D=180 V=30 S=0
	NOTE N=E6 D=180 V=30 S=0
	NOTE N=D6 D=180 V=30 S=1
	NOTE N=C6 D=600 V=30 S=1
	
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=G5 D=400 V=30 S=1
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=C6 D=600 V=30 S=1
	SET_PIN PIN=beeper VALUE=0

[gcode_macro SONG_BOOMER]
description = "BOOMER"
gcode = 
	M300 P207 S659
	M300 P207 S784
	M300 P207 S494
	M300 P207 S494
	M300 P207 S392
	M300 P207 S494
	M300 P207 S494
	M300 P207 S330
	M300 P207 S784
	M300 P207 S659
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S988
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S659
	M300 P207 S784
	M300 P207 S494
	M300 P207 S494
	M300 P207 S392
	M300 P207 S494
	M300 P207 S494
	M300 P207 S330
	M300 P207 S784
	M300 P207 S659
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S988
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S659
	M300 P207 S784
	M300 P207 S494
	M300 P207 S494
	M300 P207 S392
	M300 P207 S494
	M300 P207 S494
	M300 P207 S330
	M300 P207 S784
	M300 P207 S659
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S988
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330

[gcode_macro GET_TIMELAPSE_SETUP]
description = Print the Timelapse setup
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% set output_txt = ["Timelapse Setup:"] %}
	{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}
	{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}
	{% if tl.park.enable %}
	{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}
	{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}
	{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}
	{% endif %}
	{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}
	{% if not tl.extruder.fw_retract %}
	{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}
	{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}
	{% endif %}
	{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}
	{action_respond_info(output_txt|join("\n"))}

[gcode_macro _SET_TIMELAPSE_SETUP]
description = Set user parameters for timelapse
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	
	{% set min = printer.toolhead.axis_minimum %}
	{% set max = printer.toolhead.axis_maximum %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	{% set park = {'min'   : {'x': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),
	'y': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},
	'max'   : {'x': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),
	'y': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},
	'center': {'x': (max.x-(max.x-min.x)/2)|round(3),
	'y': (max.y-(max.y-min.y)/2)|round(3)}} %}
	
	{% if params.ENABLE %}
	{% if params.ENABLE|lower is in ['true', 'false'] %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == 'true' else False}
	{% else %}
	{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.VERBOSE %}
	{% if params.VERBOSE|lower is in ['true', 'false'] %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == 'true' else False}
	{% else %}
	{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_X %}
	{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}
	{% set _dummy = tl.park.custom.update({'x':params.CUSTOM_POS_X|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_Y %}
	{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}
	{% set _dummy = tl.park.custom.update({'y':params.CUSTOM_POS_Y|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_DZ %}
	{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}
	{% set _dummy = tl.park.custom.update({'dz':params.CUSTOM_POS_DZ|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}
	{% endif %}
	{% endif %}
	{% if params.PARK_ENABLE %}
	{% if params.PARK_ENABLE|lower is in ['true', 'false'] %}
	{% set _dummy = tl.park.update({'enable':True if params.PARK_ENABLE|lower == 'true' else False}) %}
	{% else %}
	{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.PARK_POS %}
	{% if params.PARK_POS|lower is in ['center','front_left','front_right','back_left','back_right','custom','x_only','y_only'] %}
	{% set dic = {'center'      : {'x': park.center.x   , 'y': park.center.y   , 'dz': 1                },
	'front_left'  : {'x': park.min.x      , 'y': park.min.y      , 'dz': 0                },
	'front_right' : {'x': park.max.x      , 'y': park.min.y      , 'dz': 0                },
	'back_left'   : {'x': park.min.x      , 'y': park.max.y      , 'dz': 0                },
	'back_right'  : {'x': park.max.x      , 'y': park.max.y      , 'dz': 0                },
	'custom'      : {'x': tl.park.custom.x, 'y': tl.park.custom.y, 'dz': tl.park.custom.dz},
	'x_only'      : {'x': tl.park.custom.x, 'y': 'none'          , 'dz': tl.park.custom.dz},
	'y_only'      : {'x': 'none'          , 'y': tl.park.custom.y, 'dz': tl.park.custom.dz}} %}
	{% set _dummy = tl.park.update({'pos':params.PARK_POS|lower}) %}
	{% set _dummy = tl.park.update({'coord':dic[tl.park.pos]}) %}
	{% else %}
	{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"
	% params.PARK_POS|upper)}
	{% endif %}
	{% endif %}
	{% if params.PARK_TIME %}
	{% if params.PARK_TIME|float >= 0.0 %}
	{% set _dummy = tl.park.update({'time':params.PARK_TIME|float|round(3)}) %}
	{% else %}
	{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"
	{% if params.TRAVEL_SPEED %}
	{% if params.TRAVEL_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'travel':params.TRAVEL_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}
	{% endif %}
	{% endif %}
	{% if params.RETRACT_SPEED %}
	{% if params.RETRACT_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'retract':params.RETRACT_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}
	{% endif %}
	{% endif %}
	{% if params.EXTRUDE_SPEED %}
	{% if params.EXTRUDE_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'extrude':params.EXTRUDE_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"
	{% if params.EXTRUDE_DISTANCE %}
	{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}
	{% set _dummy = tl.extruder.update({'extrude':params.EXTRUDE_DISTANCE|float|round(3)}) %}
	{% else %}
	{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}
	{% endif %}
	{% endif %}
	{% if params.RETRACT_DISTANCE %}
	{% if params.RETRACT_DISTANCE|float >= 0.0 %}
	{% set _dummy = tl.extruder.update({'retract':params.RETRACT_DISTANCE|float|round(3)}) %}
	{% else %}
	{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}
	{% endif %}
	{% endif %}
	{% if params.FW_RETRACT %}
	{% if params.FW_RETRACT|lower is in ['true', 'false'] %}
	{% if 'firmware_retraction' in printer.configfile.settings %}
	{% set _dummy = tl.extruder.update({'fw_retract': True if params.FW_RETRACT|lower == 'true' else False}) %}
	{% else %}
	{% set _dummy = tl.extruder.update({'fw_retract':False}) %}
	{% if params.FW_RETRACT|capitalize == 'True' %}
	{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}
	{% endif %}
	{% endif %}
	{% else %}
	{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"
	{% if printer.configfile.settings['gcode_macro pause'] is defined %}
	{% set _dummy = tl.macro.update({'pause': printer.configfile.settings['gcode_macro pause'].rename_existing}) %}
	{% endif %}
	{% if printer.configfile.settings['gcode_macro resume'] is defined %}
	{% set _dummy = tl.macro.update({'resume': printer.configfile.settings['gcode_macro resume'].rename_existing}) %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"

[gcode_macro TIMELAPSE_TAKE_FRAME]
description = Take Timelapse shoot
variable_enable = False
variable_takingframe = False
variable_park = {'enable': False,
	'pos'   : 'center',
	'time'  : 0.1,
	'custom': {'x': 0, 'y': 0, 'dz': 0},
	'coord' : {'x': 0, 'y': 0, 'dz': 0}}
variable_extruder = {'fw_retract': False,
	'retract': 1.0,
	'extrude': 1.0}
variable_speed = {'travel': 100,
	'retract': 15,
	'extrude': 15}
variable_verbose = True
variable_restore = {'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}
variable_macro = {'pause': 'PAUSE', 'resume': 'RESUME'}
variable_is_paused = False
gcode = 
	{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower =='true' else False %}
	{% if enable %}
	{% if (hyperlapse and printer['gcode_macro HYPERLAPSE'].run) or
	(not hyperlapse and not printer['gcode_macro HYPERLAPSE'].run) %}
	{% if park.enable %}
	{% set pos = {'x': 'X' + park.coord.x|string if park.pos != 'y_only' else '',
	'y': 'Y' + park.coord.y|string if park.pos != 'x_only' else '',
	'z': 'Z'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}
	{% set restore = {'absolute': {'coordinates': printer.gcode_move.absolute_coordinates,
	'extrude'    : printer.gcode_move.absolute_extrude},
	'speed'   : printer.gcode_move.speed,
	'e'       : printer.gcode_move.gcode_position.e,
	'factor'  : {'speed'  : printer.gcode_move.speed_factor,
	'extrude': printer.gcode_move.extrude_factor}} %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"
	{% if not printer[printer.toolhead.extruder].can_extrude %}
	{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}
	{% else %}
	{% if extruder.fw_retract %}
	G10
	{% else %}
	M83
	G0 E-{extruder.retract} F{speed.retract * 60}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True
	{macro.pause}
	SET_GCODE_OFFSET X=0 Y=0
	G90
	{% if "xyz" not in printer.toolhead.homed_axes %}
	{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}
	{% else %}
	G0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5
	M400
	{% endif %}
	_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}
	{% endif %}
	{% else %}
	{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}
	{% endif %}

[gcode_macro _TIMELAPSE_NEW_FRAME]
description = action call for timelapse shoot. must be a seperate macro
gcode = 
	{action_call_remote_method("timelapse_newframe",
	macropark=printer['gcode_macro TIMELAPSE_TAKE_FRAME'].park,
	hyperlapse=params.HYPERLAPSE)}

[delayed_gcode _WAIT_TIMELAPSE_TAKE_FRAME]
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% set factor = {'speed': printer.gcode_move.speed_factor, 'extrude': printer.gcode_move.extrude_factor} %}
	{% if tl.takingframe %}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5
	{% else %}
	{tl.macro.resume} VELOCITY={tl.speed.travel}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False
	{% if not printer[printer.toolhead.extruder].can_extrude %}
	{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}
	{% else %}
	{% if tl.extruder.fw_retract %}
	G11
	{% else %}
	G0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}
	G0 F{tl.restore.speed}
	{% if tl.restore.absolute.extrude %}
	M82
	G92 E{tl.restore.e}
	{% endif %}
	{% endif %}
	{% endif %}
	{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}
	{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}
	{% if not tl.restore.absolute.coordinates %} G91 {% endif %}
	{% endif %}

[gcode_macro HYPERLAPSE]
description = Start/Stop a hyperlapse recording
variable_cycle = 0
variable_run = False
gcode = 
	{% set cycle = params.CYCLE|default(30)|int %}
	{% if params.ACTION and params.ACTION|lower == 'start' %}
	{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}
	TIMELAPSE_TAKE_FRAME HYPERLAPSE=True
	{% elif params.ACTION and params.ACTION|lower == 'stop' %}
	{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0
	{% else %}
	{action_raise_error("Hyperlapse: No valid input parameter
	Use:
	- HYPERLAPSE ACTION=START [CYCLE=time]
	- HYPERLAPSE ACTION=STOP")}
	{% endif %}

[delayed_gcode _HYPERLAPSE_LOOP]
gcode = 
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}
	TIMELAPSE_TAKE_FRAME HYPERLAPSE=True

[gcode_macro TIMELAPSE_RENDER]
description = Render Timelapse video and wait for the result
variable_render = False
variable_run_identifier = 0
gcode = 
	{action_respond_info("Timelapse: Rendering started")}
	{action_call_remote_method("timelapse_render", byrendermacro="True")}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True
	{printer.configfile.settings['gcode_macro pause'].rename_existing}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5

[delayed_gcode _WAIT_TIMELAPSE_RENDER]
gcode = 
	{% set ri = printer['gcode_macro TIMELAPSE_RENDER'].run_identifier % 4 %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}
	{% if printer['gcode_macro TIMELAPSE_RENDER'].render %}
	M117 Rendering {['-','\\','|','/'][ri]}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5
	{% else %}
	{action_respond_info("Timelapse: Rendering finished")}
	M117
	{printer.configfile.settings['gcode_macro resume'].rename_existing}
	{% endif %}

[gcode_macro TEST_STREAM_DELAY]
description = Helper macro to find stream and park delay
gcode = 
	{% set min = printer.toolhead.axis_minimum %}
	{% set max = printer.toolhead.axis_maximum %}
	{% set act = printer.toolhead.position %}
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% if act.z > 5.0 %}
	G0 X{min.x + 5.0} F{tl.speed.travel|int * 60}
	G0 X{(max.x-min.x)/2}
	G4 P{tl.park.time|float * 1000}
	_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE
	G0 X{max.x - 5.0}
	{% else %}
	{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}
	{% endif %}

[exclude_object]

[gcode_macro Backup_on_GitHub]
gcode = 
	{% set message = params.MESSAGE|default() %}
	{% if message %}
	RUN_SHELL_COMMAND CMD=update_git_script_message PARAMS="'{params.MESSAGE}'"
	{% else %}
	RUN_SHELL_COMMAND CMD=update_git_script
	{% endif %}

[gcode_shell_command update_git_script]
command = bash -c "bash $HOME/klipper-backup/script.sh"
timeout = 90.0
verbose = True

[gcode_shell_command update_git_script_message]
command = bash -c "bash $HOME/klipper-backup/script.sh -c \"$0\""
timeout = 90.0
verbose = True

[mcu]
serial = /dev/ttyS3
restart_method = command

[output_pin Power]
pin = PC12
value = 1
shutdown_value = 1

[temperature_sensor orange_pi]
sensor_type = temperature_host
min_temp = 0
max_temp = 100

[heater_generic chamber_heater]
heater_pin = !PA7
sensor_type = ATC Semitec 104GT-2
sensor_pin = PA5
control = watermark
max_power = 1
min_temp = 15
max_temp = 85

[verify_heater chamber_heater]
max_error = 9999
check_gain_time = 9999
hysteresis = 5
heating_gain = 2

[filament_motion_sensor motion_sensor]
detection_length = 50
extruder = extruder
switch_pin = !PC15
pause_on_runout = True
runout_gcode = 
	SONG_CRAB_RAVE

[bltouch]
sensor_pin = ^PC14
control_pin = PA1
x_offset = -40
y_offset = 0.000
z_offset = 1.70
pin_up_reports_not_triggered = False
probe_with_touch_mode = True

[heater_bed]
heater_pin = PC9
sensor_type = ATC Semitec 104GT-2
sensor_pin = PC3
control = pid
pid_kp = 72.553
pid_ki = 1.154
pid_kd = 1139.994
min_temp = 5
max_temp = 125

[heater_fan radiator]
pin = PC7
max_power = 1.0
kick_start_time = 0.600
heater = extruder
heater_temp = 50.0
shutdown_speed = 1

[fan]
pin = PC6

[input_shaper]
shaper_type_x = 2hump_ei
shaper_freq_x = 43.0
shaper_type_y = mzv
shaper_freq_y = 32.6

[printer]
kinematics = cartesian
max_velocity = 300
max_accel = 1900
max_z_velocity = 30
max_z_accel = 100
square_corner_velocity = 4

[bed_mesh]
speed = 150
horizontal_move_z = 9
mesh_min = 10, 20
mesh_max = 195, 210
probe_count = 5
mesh_pps = 2, 3
algorithm = bicubic
bicubic_tension = 0.2
move_check_distance = 9
split_delta_z = .025
fade_start = 1
fade_end = 10
fade_target = 0

[screws_tilt_adjust]
screw1 = 79, 27
screw1_name = Peredniy Leviy
screw2 = 235, 27
screw2_name = Peredniy Praviy
screw3 = 235,197
screw3_name = Zadniy Praviy
screw4 = 79,197
screw4_name = Zadniy Leviy
speed = 120
horizontal_move_z = 9

[safe_z_home]
home_xy_position = 157,115
speed = 50
z_hop = 9.0
z_hop_speed = 20.0

[stepper_x]
step_pin = PB13
dir_pin = !PB12
enable_pin = !PB14
microsteps = 16
rotation_distance = 40
endstop_pin = ^PC0
position_endstop = 0
position_max = 240
position_min = -2
homing_retract_dist = 5
homing_speed = 50
second_homing_speed = 10

[tmc2209 stepper_x]
uart_pin = PC11
tx_pin = PC10
uart_address = 0
run_current = 0.580
stealthchop_threshold = 999999

[stepper_y]
step_pin = PB10
dir_pin = !PB2
enable_pin = !PB11
microsteps = 16
rotation_distance = 40
endstop_pin = ^PC1
position_endstop = 0
homing_retract_dist = 5
homing_speed = 50
second_homing_speed = 10
position_max = 231
position_min = 0

[tmc2209 stepper_y]
uart_pin = PC11
tx_pin = PC10
uart_address = 2
run_current = 0.6
stealthchop_threshold = 999999

[stepper_z]
step_pin = PB0
dir_pin = PC5
enable_pin = !PB1
microsteps = 16
rotation_distance = 40
gear_ratio = 80:16
full_steps_per_rotation = 200
endstop_pin = probe:z_virtual_endstop
homing_retract_dist = 9
second_homing_speed = 10
position_min = -5
position_max = 245
homing_speed = 50

[tmc2209 stepper_z]
uart_pin = PC11
tx_pin = PC10
uart_address = 1
run_current = 0.580
stealthchop_threshold = 999999
interpolate = false

[extruder]
step_pin = PB3
dir_pin = PB4
enable_pin = !PD2
microsteps = 16
rotation_distance = 4.637
nozzle_diameter = 0.400
filament_diameter = 1.750
heater_pin = PC8
sensor_type = ATC Semitec 104GT-2
sensor_pin = PA0
min_temp = 5
max_temp = 270
max_extrude_only_velocity = 120
max_extrude_only_accel = 3000
pressure_advance = 0.031
full_steps_per_rotation = 200
control = pid
pid_kp = 29.662
pid_ki = 2.382
pid_kd = 92.322

[tmc2209 extruder]
uart_pin = PC11
tx_pin = PC10
uart_address = 3
run_current = 0.7
stealthchop_threshold = 999999

[static_digital_output usb_pullup_enable]
pins = !PA14

[board_pins]
aliases = 
	
	EXP1_1=PB5,  EXP1_3=PA9,   EXP1_5=PA10, EXP1_7=PB8,  EXP1_9=<GND>,
	EXP1_2=PA15, EXP1_4=<RST>, EXP1_6=PB9,  EXP1_8=PB15, EXP1_10=<5V>

[display]
lcd_type = st7920
cs_pin = EXP1_7
sclk_pin = EXP1_6
sid_pin = EXP1_8
encoder_pins = ^EXP1_5, ^EXP1_3
click_pin = ^!EXP1_2

[pwm_cycle_time beeper]
pin = EXP1_1
shutdown_value = 0
cycle_time = 0.001

[firmware_retraction]
retract_length = 1.0
retract_speed = 80
unretract_extra_length = 0
unretract_speed = 80

[pwm_tool Laser]
pin = PA6
cycle_time = 0.0001
shutdown_value = 0
maximum_mcu_duration = 5

[bed_mesh 70]
version = 1
points = 
	-0.045000, 0.027500, 0.015000
	-0.055000, -0.005000, -0.035000
	-0.007500, 0.040000, -0.002500
x_count = 3
y_count = 3
mesh_x_pps = 2
mesh_y_pps = 3
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 195.0
min_y = 20.0
max_y = 210.0

[bed_mesh default]
version = 1
points = 
	0.020000, 0.025000, 0.030000, -0.007500, -0.052500
	0.015000, 0.017500, 0.022500, -0.007500, -0.057500
	0.030000, 0.030000, 0.037500, 0.002500, -0.035000
	0.012500, 0.030000, 0.050000, 0.035000, -0.010000
	0.080000, 0.087500, 0.115000, 0.097500, 0.067500
x_count = 5
y_count = 5
mesh_x_pps = 2
mesh_y_pps = 3
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 195.0
min_y = 20.0
max_y = 210.0
=======================
Extruder max_extrude_ratio=0.266081
mcu 'mcu': Starting serial connect
webhooks client 281473323094208: New connection
webhooks client 281473323094208: Client info {'program': 'Moonraker', 'version': 'v0.9.3-4-ga4604e3'}
mcu 'mcu': got {'oid': 14, 'next_clock': 3270688768, 'value': 31179, '#name': 'analog_in_state', '#sent_time': 3790.3936483059997, '#receive_time': 3790.4049120150003}
mcu 'mcu': got {'oid': 18, 'next_clock': 3273568768, 'value': 31316, '#name': 'analog_in_state', '#sent_time': 3790.3936483059997, '#receive_time': 3790.444969015}
mcu 'mcu': got {'oid': 26, 'next_clock': 3279328768, 'value': 31259, '#name': 'analog_in_state', '#sent_time': 3790.497800348, '#receive_time': 3790.524914765}
mcu 'mcu': got {'oid': 14, 'next_clock': 3292288768, 'value': 31188, '#name': 'analog_in_state', '#sent_time': 3790.6553066809997, '#receive_time': 3790.7049559730003}
Loaded MCU 'mcu' 118 commands (v0.12.0-404-g80d185c94 / gcc: (15:12.2.rel1-1) 12.2.1 20221205 binutils: (2.40-2+18+b1) 2.40)
MCU 'mcu' config: ADC_MAX=4095 BUS_PINS_i2c1=PB6,PB7 BUS_PINS_i2c1a=PB8,PB9 BUS_PINS_i2c2=PB10,PB11 BUS_PINS_spi1=PA6,PA7,PA5 BUS_PINS_spi1a=PB4,PB5,PB3 BUS_PINS_spi2=PB14,PB15,PB13 BUS_PINS_spi3=PB4,PB5,PB3 CLOCK_FREQ=72000000 INITIAL_PINS=!PA14 MCU=stm32f103xe PWM_MAX=255 RECEIVE_WINDOW=192 RESERVE_PINS_serial=PA3,PA2 SERIAL_BAUD=250000 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
Configured MCU 'mcu' (1024 moves)
Starting heater checks for chamber_heater
Starting heater checks for heater_bed
bed_mesh: generated points
Index |  Tool Adjusted  |   Probe
  0   | (50.0, 20.0)    | (10.0, 20.0)
  1   | (96.2, 20.0)    | (56.2, 20.0)
  2   | (142.5, 20.0)   | (102.5, 20.0)
  3   | (188.8, 20.0)   | (148.8, 20.0)
  4   | (235.0, 20.0)   | (195.0, 20.0)
  5   | (235.0, 67.5)   | (195.0, 67.5)
  6   | (188.8, 67.5)   | (148.8, 67.5)
  7   | (142.5, 67.5)   | (102.5, 67.5)
  8   | (96.2, 67.5)    | (56.2, 67.5)
  9   | (50.0, 67.5)    | (10.0, 67.5)
  10  | (50.0, 115.0)   | (10.0, 115.0)
  11  | (96.2, 115.0)   | (56.2, 115.0)
  12  | (142.5, 115.0)  | (102.5, 115.0)
  13  | (188.8, 115.0)  | (148.8, 115.0)
  14  | (235.0, 115.0)  | (195.0, 115.0)
  15  | (235.0, 162.5)  | (195.0, 162.5)
  16  | (188.8, 162.5)  | (148.8, 162.5)
  17  | (142.5, 162.5)  | (102.5, 162.5)
  18  | (96.2, 162.5)   | (56.2, 162.5)
  19  | (50.0, 162.5)   | (10.0, 162.5)
  20  | (50.0, 210.0)   | (10.0, 210.0)
  21  | (96.2, 210.0)   | (56.2, 210.0)
  22  | (142.5, 210.0)  | (102.5, 210.0)
  23  | (188.8, 210.0)  | (148.8, 210.0)
  24  | (235.0, 210.0)  | (195.0, 210.0)
Starting heater checks for extruder
Stats 3791.2: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=3017 bytes_read=6233 bytes_retransmit=0 bytes_invalid=0 send_seq=216 receive_seq=213 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=1945 upcoming_bytes=236 freq=71998723  orange_pi: temp=49.1 chamber_heater: target=0 temp=0.0 pwm=0.000 heater_bed: target=0 temp=0.0 pwm=0.000 sysload=4.82 cputime=88.354 memavail=1676316 print_time=5534.179 buffer_time=0.242 print_stall=0 extruder: target=0 temp=0.0 pwm=0.000
webhooks: registering remote method 'shutdown_machine' for connection id: 281473323094208
webhooks: registering remote method 'reboot_machine' for connection id: 281473323094208
webhooks: registering remote method 'pause_job_queue' for connection id: 281473323094208
webhooks: registering remote method 'start_job_queue' for connection id: 281473323094208
Stats 3792.2: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=5460 bytes_read=6639 bytes_retransmit=0 bytes_invalid=0 send_seq=263 receive_seq=263 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998233  orange_pi: temp=48.8 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=4.82 cputime=88.407 memavail=1675496 print_time=5534.179 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3793.2: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=5480 bytes_read=6795 bytes_retransmit=0 bytes_invalid=0 send_seq=265 receive_seq=265 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998192  orange_pi: temp=48.4 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=4.76 cputime=88.447 memavail=1677452 print_time=5534.179 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3794.2: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=5486 bytes_read=6976 bytes_retransmit=0 bytes_invalid=0 send_seq=266 receive_seq=266 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998212  orange_pi: temp=48.8 chamber_heater: target=0 temp=26.7 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=4.76 cputime=88.472 memavail=1674276 print_time=5534.179 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3795.2: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000113 mcu_task_stddev=0.000263 bytes_write=5492 bytes_read=7159 bytes_retransmit=0 bytes_invalid=0 send_seq=267 receive_seq=267 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998238  orange_pi: temp=48.2 chamber_heater: target=0 temp=26.7 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=4.76 cputime=88.493 memavail=1677880 print_time=5534.179 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3796.2: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000113 mcu_task_stddev=0.000263 bytes_write=5498 bytes_read=7310 bytes_retransmit=0 bytes_invalid=0 send_seq=268 receive_seq=268 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998239  orange_pi: temp=48.2 chamber_heater: target=0 temp=26.8 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=4.76 cputime=88.517 memavail=1678828 print_time=5534.179 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.6 pwm=0.000
Stats 3797.2: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000113 mcu_task_stddev=0.000263 bytes_write=5504 bytes_read=7491 bytes_retransmit=0 bytes_invalid=0 send_seq=269 receive_seq=269 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998244  orange_pi: temp=49.3 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=4.76 cputime=88.543 memavail=1677928 print_time=5534.179 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3798.2: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000113 mcu_task_stddev=0.000263 bytes_write=5510 bytes_read=7657 bytes_retransmit=0 bytes_invalid=0 send_seq=270 receive_seq=270 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998247  orange_pi: temp=48.8 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=4.86 cputime=88.566 memavail=1679628 print_time=5534.179 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3799.2: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000113 mcu_task_stddev=0.000263 bytes_write=5516 bytes_read=7808 bytes_retransmit=0 bytes_invalid=0 send_seq=271 receive_seq=271 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998238  orange_pi: temp=47.8 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=4.86 cputime=88.587 memavail=1678948 print_time=5534.179 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3800.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5522 bytes_read=8003 bytes_retransmit=0 bytes_invalid=0 send_seq=272 receive_seq=272 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998218  orange_pi: temp=47.6 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=4.86 cputime=88.608 memavail=1678640 print_time=5534.179 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3801.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5547 bytes_read=8179 bytes_retransmit=0 bytes_invalid=0 send_seq=275 receive_seq=275 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998217  orange_pi: temp=47.8 chamber_heater: target=0 temp=26.7 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=4.86 cputime=88.629 memavail=1678136 print_time=5534.179 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3802.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5567 bytes_read=8335 bytes_retransmit=0 bytes_invalid=0 send_seq=277 receive_seq=277 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998231  orange_pi: temp=47.8 chamber_heater: target=0 temp=26.8 pwm=0.000 heater_bed: target=0 temp=24.7 pwm=0.000 sysload=4.86 cputime=88.650 memavail=1677380 print_time=5534.179 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3803.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5573 bytes_read=8516 bytes_retransmit=0 bytes_invalid=0 send_seq=278 receive_seq=278 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998229  orange_pi: temp=47.4 chamber_heater: target=0 temp=26.7 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=4.95 cputime=88.673 memavail=1679520 print_time=5534.179 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3804.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5579 bytes_read=8676 bytes_retransmit=0 bytes_invalid=0 send_seq=279 receive_seq=279 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998242  orange_pi: temp=48.9 chamber_heater: target=0 temp=26.7 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=4.95 cputime=88.697 memavail=1673988 print_time=5534.179 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 3805.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000017 bytes_write=5585 bytes_read=8830 bytes_retransmit=0 bytes_invalid=0 send_seq=280 receive_seq=280 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998257  orange_pi: temp=48.3 chamber_heater: target=0 temp=26.9 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=4.95 cputime=88.720 memavail=1671928 print_time=5534.179 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3806.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000017 bytes_write=5591 bytes_read=8999 bytes_retransmit=0 bytes_invalid=0 send_seq=281 receive_seq=281 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998266  orange_pi: temp=48.3 chamber_heater: target=0 temp=26.8 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=4.95 cputime=88.744 memavail=1671180 print_time=5534.179 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3807.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000017 bytes_write=5597 bytes_read=9154 bytes_retransmit=0 bytes_invalid=0 send_seq=282 receive_seq=282 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998272  orange_pi: temp=48.0 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=4.95 cputime=88.767 memavail=1675608 print_time=5534.179 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3808.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000017 bytes_write=5603 bytes_read=9301 bytes_retransmit=0 bytes_invalid=0 send_seq=283 receive_seq=283 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998281  orange_pi: temp=48.2 chamber_heater: target=0 temp=26.7 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=5.03 cputime=88.789 memavail=1674652 print_time=5534.179 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3809.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000017 bytes_write=5623 bytes_read=9487 bytes_retransmit=0 bytes_invalid=0 send_seq=285 receive_seq=285 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998276  orange_pi: temp=47.5 chamber_heater: target=0 temp=26.8 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=5.03 cputime=88.810 memavail=1673908 print_time=5534.179 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3810.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000016 bytes_write=5629 bytes_read=9667 bytes_retransmit=0 bytes_invalid=0 send_seq=286 receive_seq=286 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998272  orange_pi: temp=47.5 chamber_heater: target=0 temp=26.7 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=5.03 cputime=88.830 memavail=1672700 print_time=5534.179 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 3811.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000016 bytes_write=5649 bytes_read=9838 bytes_retransmit=0 bytes_invalid=0 send_seq=288 receive_seq=288 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998266  orange_pi: temp=47.3 chamber_heater: target=0 temp=26.8 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=5.03 cputime=88.852 memavail=1671944 print_time=5534.179 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3812.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000016 bytes_write=5655 bytes_read=10004 bytes_retransmit=0 bytes_invalid=0 send_seq=289 receive_seq=289 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998262  orange_pi: temp=47.4 chamber_heater: target=0 temp=26.9 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=5.03 cputime=88.872 memavail=1671192 print_time=5534.179 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3813.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000016 bytes_write=5661 bytes_read=10170 bytes_retransmit=0 bytes_invalid=0 send_seq=290 receive_seq=290 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998268  orange_pi: temp=47.6 chamber_heater: target=0 temp=26.8 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=5.11 cputime=88.893 memavail=1670628 print_time=5534.179 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3814.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000016 bytes_write=5667 bytes_read=10336 bytes_retransmit=0 bytes_invalid=0 send_seq=291 receive_seq=291 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998267  orange_pi: temp=47.0 chamber_heater: target=0 temp=26.8 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=5.11 cputime=88.913 memavail=1669872 print_time=5534.179 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3815.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000016 bytes_write=5673 bytes_read=10516 bytes_retransmit=0 bytes_invalid=0 send_seq=292 receive_seq=292 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998268  orange_pi: temp=47.2 chamber_heater: target=0 temp=26.7 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=5.11 cputime=88.933 memavail=1668868 print_time=5534.179 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3816.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000016 bytes_write=5679 bytes_read=10682 bytes_retransmit=0 bytes_invalid=0 send_seq=293 receive_seq=293 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998276  orange_pi: temp=49.7 chamber_heater: target=0 temp=26.9 pwm=0.000 heater_bed: target=0 temp=24.7 pwm=0.000 sysload=5.11 cputime=88.964 memavail=1676612 print_time=5534.179 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3817.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000016 bytes_write=5685 bytes_read=10848 bytes_retransmit=0 bytes_invalid=0 send_seq=294 receive_seq=294 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998287  orange_pi: temp=50.6 chamber_heater: target=0 temp=27.3 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=5.11 cputime=88.991 memavail=1672948 print_time=5534.179 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3818.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000016 bytes_write=5691 bytes_read=11014 bytes_retransmit=0 bytes_invalid=0 send_seq=295 receive_seq=295 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998290  orange_pi: temp=48.2 chamber_heater: target=0 temp=26.8 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=5.02 cputime=89.014 memavail=1673404 print_time=5534.179 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3819.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000016 bytes_write=5697 bytes_read=11180 bytes_retransmit=0 bytes_invalid=0 send_seq=296 receive_seq=296 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998295  orange_pi: temp=48.1 chamber_heater: target=0 temp=26.9 pwm=0.000 heater_bed: target=0 temp=24.8 pwm=0.000 sysload=5.02 cputime=89.038 memavail=1671400 print_time=5534.179 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3820.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5703 bytes_read=11360 bytes_retransmit=0 bytes_invalid=0 send_seq=297 receive_seq=297 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998297  orange_pi: temp=48.9 chamber_heater: target=0 temp=27.0 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=5.02 cputime=89.061 memavail=1670336 print_time=5534.179 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3821.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5709 bytes_read=11526 bytes_retransmit=0 bytes_invalid=0 send_seq=298 receive_seq=298 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998306  orange_pi: temp=47.6 chamber_heater: target=0 temp=27.0 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=5.02 cputime=89.085 memavail=1671844 print_time=5534.179 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3822.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5715 bytes_read=11692 bytes_retransmit=0 bytes_invalid=0 send_seq=299 receive_seq=299 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998304  orange_pi: temp=47.7 chamber_heater: target=0 temp=26.8 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=5.02 cputime=89.110 memavail=1674104 print_time=5534.179 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 3823.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5727 bytes_read=11874 bytes_retransmit=0 bytes_invalid=0 send_seq=301 receive_seq=301 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998307  orange_pi: temp=47.6 chamber_heater: target=0 temp=26.9 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=4.94 cputime=89.134 memavail=1670960 print_time=5534.179 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3824.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5733 bytes_read=12040 bytes_retransmit=0 bytes_invalid=0 send_seq=302 receive_seq=302 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998309  orange_pi: temp=48.6 chamber_heater: target=0 temp=26.9 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=4.94 cputime=89.157 memavail=1678600 print_time=5534.179 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3825.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5739 bytes_read=12220 bytes_retransmit=0 bytes_invalid=0 send_seq=303 receive_seq=303 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998311  orange_pi: temp=47.8 chamber_heater: target=0 temp=27.0 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=4.94 cputime=89.181 memavail=1677064 print_time=5534.179 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3826.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5745 bytes_read=12386 bytes_retransmit=0 bytes_invalid=0 send_seq=304 receive_seq=304 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998312  orange_pi: temp=47.4 chamber_heater: target=0 temp=26.8 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=4.94 cputime=89.205 memavail=1672216 print_time=5534.179 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3827.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5751 bytes_read=12552 bytes_retransmit=0 bytes_invalid=0 send_seq=305 receive_seq=305 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998313  orange_pi: temp=48.3 chamber_heater: target=0 temp=26.8 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=4.94 cputime=89.230 memavail=1672588 print_time=5534.179 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3828.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5757 bytes_read=12718 bytes_retransmit=0 bytes_invalid=0 send_seq=306 receive_seq=306 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998315  orange_pi: temp=47.8 chamber_heater: target=0 temp=26.9 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=4.86 cputime=89.255 memavail=1670592 print_time=5534.179 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3829.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5763 bytes_read=12884 bytes_retransmit=0 bytes_invalid=0 send_seq=307 receive_seq=307 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998314  orange_pi: temp=48.9 chamber_heater: target=0 temp=27.0 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=4.86 cputime=89.278 memavail=1669380 print_time=5534.179 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3830.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5769 bytes_read=13064 bytes_retransmit=0 bytes_invalid=0 send_seq=308 receive_seq=308 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998312  orange_pi: temp=48.2 chamber_heater: target=0 temp=26.9 pwm=0.000 heater_bed: target=0 temp=24.7 pwm=0.000 sysload=4.86 cputime=89.299 memavail=1669152 print_time=5534.179 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3831.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5775 bytes_read=13230 bytes_retransmit=0 bytes_invalid=0 send_seq=309 receive_seq=309 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998313  orange_pi: temp=47.5 chamber_heater: target=0 temp=27.0 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=4.86 cputime=89.320 memavail=1668396 print_time=5534.179 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3832.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5781 bytes_read=13396 bytes_retransmit=0 bytes_invalid=0 send_seq=310 receive_seq=310 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998312  orange_pi: temp=47.7 chamber_heater: target=0 temp=27.0 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=4.86 cputime=89.340 memavail=1668632 print_time=5534.179 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3833.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5801 bytes_read=13567 bytes_retransmit=0 bytes_invalid=0 send_seq=312 receive_seq=312 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998312  orange_pi: temp=48.2 chamber_heater: target=0 temp=27.2 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=5.03 cputime=89.361 memavail=1672448 print_time=5534.179 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3834.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5821 bytes_read=13738 bytes_retransmit=0 bytes_invalid=0 send_seq=314 receive_seq=314 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998312  orange_pi: temp=47.8 chamber_heater: target=0 temp=26.9 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=5.03 cputime=89.380 memavail=1672132 print_time=5534.179 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3835.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000020 bytes_write=5841 bytes_read=13924 bytes_retransmit=0 bytes_invalid=0 send_seq=316 receive_seq=316 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998311  orange_pi: temp=47.8 chamber_heater: target=0 temp=27.1 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=5.03 cputime=89.400 memavail=1672044 print_time=5534.179 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3836.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000020 bytes_write=5861 bytes_read=14095 bytes_retransmit=0 bytes_invalid=0 send_seq=318 receive_seq=318 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998311  orange_pi: temp=47.8 chamber_heater: target=0 temp=26.7 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=5.03 cputime=89.420 memavail=1672048 print_time=5534.179 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3837.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000020 bytes_write=5867 bytes_read=14261 bytes_retransmit=0 bytes_invalid=0 send_seq=319 receive_seq=319 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998311  orange_pi: temp=46.8 chamber_heater: target=0 temp=26.7 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=5.03 cputime=89.441 memavail=1671740 print_time=5534.179 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3838.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000020 bytes_write=5873 bytes_read=14427 bytes_retransmit=0 bytes_invalid=0 send_seq=320 receive_seq=320 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998309  orange_pi: temp=47.4 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=5.27 cputime=89.461 memavail=1671488 print_time=5534.179 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3839.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000020 bytes_write=5879 bytes_read=14593 bytes_retransmit=0 bytes_invalid=0 send_seq=321 receive_seq=321 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998308  orange_pi: temp=47.5 chamber_heater: target=0 temp=26.8 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=5.27 cputime=89.481 memavail=1670984 print_time=5534.179 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.6 pwm=0.000
Stats 3840.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000020 bytes_write=5885 bytes_read=14759 bytes_retransmit=0 bytes_invalid=0 send_seq=322 receive_seq=322 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998308  orange_pi: temp=47.7 chamber_heater: target=0 temp=26.8 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=5.27 cputime=89.501 memavail=1670732 print_time=5534.179 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 3841.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000016 bytes_write=5891 bytes_read=14939 bytes_retransmit=0 bytes_invalid=0 send_seq=323 receive_seq=323 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998307  orange_pi: temp=47.4 chamber_heater: target=0 temp=26.8 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=5.27 cputime=89.520 memavail=1669988 print_time=5534.179 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 3842.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000016 bytes_write=5897 bytes_read=15105 bytes_retransmit=0 bytes_invalid=0 send_seq=324 receive_seq=324 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998307  orange_pi: temp=50.6 chamber_heater: target=0 temp=26.8 pwm=0.000 heater_bed: target=0 temp=24.7 pwm=0.000 sysload=5.27 cputime=89.544 memavail=1671580 print_time=5534.179 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3843.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000016 bytes_write=5903 bytes_read=15271 bytes_retransmit=0 bytes_invalid=0 send_seq=325 receive_seq=325 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998308  orange_pi: temp=48.5 chamber_heater: target=0 temp=26.8 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=5.41 cputime=89.565 memavail=1672308 print_time=5534.179 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3844.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000016 bytes_write=5909 bytes_read=15437 bytes_retransmit=0 bytes_invalid=0 send_seq=326 receive_seq=326 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998310  orange_pi: temp=47.6 chamber_heater: target=0 temp=27.5 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=5.41 cputime=89.585 memavail=1671236 print_time=5534.179 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3845.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000016 bytes_write=5915 bytes_read=15618 bytes_retransmit=0 bytes_invalid=0 send_seq=327 receive_seq=327 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998309  orange_pi: temp=47.3 chamber_heater: target=0 temp=26.8 pwm=0.000 heater_bed: target=0 temp=24.7 pwm=0.000 sysload=5.41 cputime=89.606 memavail=1669736 print_time=5534.179 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3846.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5921 bytes_read=15783 bytes_retransmit=0 bytes_invalid=0 send_seq=328 receive_seq=328 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998309  orange_pi: temp=47.5 chamber_heater: target=0 temp=26.7 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=5.41 cputime=89.626 memavail=1668744 print_time=5534.179 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 3847.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5927 bytes_read=15949 bytes_retransmit=0 bytes_invalid=0 send_seq=329 receive_seq=329 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998312  orange_pi: temp=47.3 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=5.41 cputime=89.660 memavail=1668240 print_time=5534.179 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3848.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5933 bytes_read=16130 bytes_retransmit=0 bytes_invalid=0 send_seq=330 receive_seq=330 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998311  orange_pi: temp=47.4 chamber_heater: target=0 temp=26.8 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=5.54 cputime=89.681 memavail=1668256 print_time=5534.179 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3849.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5953 bytes_read=16286 bytes_retransmit=0 bytes_invalid=0 send_seq=332 receive_seq=332 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998308  orange_pi: temp=47.8 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=5.54 cputime=89.701 memavail=1668256 print_time=5534.179 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3850.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5973 bytes_read=16457 bytes_retransmit=0 bytes_invalid=0 send_seq=334 receive_seq=334 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998311  orange_pi: temp=50.9 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.7 pwm=0.000 sysload=5.54 cputime=89.733 memavail=1672032 print_time=5534.179 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 3851.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000018 bytes_write=5979 bytes_read=16653 bytes_retransmit=0 bytes_invalid=0 send_seq=335 receive_seq=335 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998312  orange_pi: temp=50.5 chamber_heater: target=0 temp=26.7 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=5.54 cputime=89.760 memavail=1668864 print_time=5534.179 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 4502.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000019 bytes_write=11558 bytes_read=126931 bytes_retransmit=0 bytes_invalid=0 send_seq=1123 receive_seq=1123 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998339  orange_pi: temp=47.4 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=4.76 cputime=104.335 memavail=1617396 print_time=6246.008 buffer_time=0.576 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Attempting MCU 'mcu' reset command
webhooks client 281473323094208: Disconnected
Restarting printer
Start printer at Wed Dec 25 21:32:01 2024 (1735151521.4 4504.4)
===== Config file =====
[virtual_sdcard]
path = /home/klipper/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[pause_resume]

[display_status]

[respond]

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = BASE_CANCEL_PRINT
gcode = 
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	TURN_OFF_HEATERS
	M107
	G91
	G1 E-{E} F1500
	G90
	CLEAR_PAUSE
	SDCARD_RESET_FILE
	BASE_CANCEL_PRINT
	PARK

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = BASE_PAUSE
gcode = 
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	SAVE_GCODE_STATE NAME=PAUSE_STATE
	BASE_PAUSE
	G91
	G1 E-{E} F1500
	G90
	PARK

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = BASE_RESUME
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	G91
	G1 E{E} F1500
	G90
	RESTORE_GCODE_STATE NAME=PAUSE_STATE MOVE=1
	BASE_RESUME

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[gcode_macro _CLIENT_LINEAR_MOVE]
description = Linear move with save and restore of the gcode state
gcode = 
	{% set x_move = "X" ~ params.X if params.X is defined else "" %}
	{% set y_move = "Y" ~ params.Y if params.Y is defined else "" %}
	{% set z_move = "Z" ~ params.Z if params.Z is defined else "" %}
	{% set e_move = "E" ~ params.E if params.E is defined else "" %}
	{% set rate = "F" ~ params.F if params.F is defined else "" %}
	{% set ABSOLUTE = params.ABSOLUTE | default(0) | int != 0 %}
	{% set ABSOLUTE_E = params.ABSOLUTE_E | default(0) | int != 0 %}
	SAVE_GCODE_STATE NAME=_client_movement
	{% if x_move or y_move or z_move %}
	G9{ 0 if ABSOLUTE else 1 }
	{% endif %}
	{% if e_move %}
	M8{ 2 if ABSOLUTE_E else 3 }
	{% endif %}
	G1 { x_move } { y_move } { z_move } { e_move } { rate }
	RESTORE_GCODE_STATE NAME=_client_movement

[gcode_macro Backup_on_GitHub]
gcode = 
	{% set message = params.MESSAGE|default() %}
	{% if message %}
	RUN_SHELL_COMMAND CMD=update_git_script_message PARAMS="'{params.MESSAGE}'"
	{% else %}
	RUN_SHELL_COMMAND CMD=update_git_script
	{% endif %}

[gcode_macro list_sensors]
gcode = 
	{ action_respond_info(printer.heaters.available_heaters | join(', ')) }
	{ action_respond_info(printer.heaters.available_sensors | join(', ')) }

[gcode_macro Power_OFF]
gcode = SET_PIN PIN=Power VALUE=0

[gcode_macro _POWER_OFF_PRINTER]
gcode = SET_PIN PIN=Power VALUE=0

[gcode_macro ACTIVATE_POWER_OFF]
gcode = 
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK_ACT DURATION=60

[gcode_macro DEACTIVATE_POWER_OFF]
gcode = 
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK_ACT DURATION=0

[delayed_gcode POWER_OFF_PRINTER_CHECK_ACT]
gcode = 
	{% if printer.idle_timeout.state == "Idle" or printer.idle_timeout.state == "Ready" %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=30
	{% else %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK_ACT DURATION=60
	{% endif %}

[delayed_gcode POWER_OFF_PRINTER_CHECK]
gcode = 
	{% if printer.idle_timeout.state == "Idle" or printer.idle_timeout.state == "Ready" %}
	{% if printer.extruder.temperature < 50.0 and printer.heater_bed.temperature < 50.0 %}
	{% if printer.extruder.target == 0.0 and printer.heater_bed.target == 0.0 %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=0
	_POWER_OFF_PRINTER
	{% else %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=2
	{% endif %}
	{% else %}
	{% if printer.idle_timeout.state == "Printing" %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=0
	{% else %}
	{% if printer.extruder.target == 0.0 and printer.heater_bed.target == 0.0 %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=2
	{% else %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=0
	{% endif %}
	{% endif %}
	{% endif %}
	{% endif %}

[gcode_macro M141]
gcode = SET_HEATER_TEMPERATURE HEATER=chamber_heater TARGET={params.S|default(0)}

[gcode_macro M80]
gcode = SET_PIN PIN=Power  VALUE=1

[gcode_macro M81]
gcode = 
	
	SET_PIN PIN=Power VALUE=0

[gcode_macro M486]
gcode = 
	
	
	
	
	
	
	
	
	
	
	
	{% if 'exclude_object' not in printer %}
	{action_raise_error("[exclude_object] is not enabled")}
	{% endif %}
	
	{% if 'T' in params %}
	EXCLUDE_OBJECT RESET=1
	
	{% for i in range(params.T | int) %}
	EXCLUDE_OBJECT_DEFINE NAME={i}
	{% endfor %}
	{% endif %}
	
	{% if 'C' in params %}
	EXCLUDE_OBJECT CURRENT=1
	{% endif %}
	
	{% if 'P' in params %}
	EXCLUDE_OBJECT NAME={params.P}
	{% endif %}
	
	{% if 'S' in params %}
	{% if params.S == '-1' %}
	{% if printer.exclude_object.current_object %}
	EXCLUDE_OBJECT_END NAME={printer.exclude_object.current_object}
	{% endif %}
	{% else %}
	EXCLUDE_OBJECT_START NAME={params.S}
	{% endif %}
	{% endif %}
	
	{% if 'U' in params %}
	EXCLUDE_OBJECT RESET=1 NAME={params.U}
	{% endif %}

[gcode_macro M190]
rename_existing = M190.1
gcode = 
	{% if printer["gcode_macro status_heating"] != null %}
	status_heating
	{% endif %}
	M190.1 { rawparams }
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro _CHOME]
gcode = 
	{% if printer["gcode_macro status_homing"] != null %}
	status_homing
	{% endif %}
	{% if printer.toolhead.homed_axes != "xyz" %}
	G28
	{% endif %}
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro M109]
rename_existing = M109.1
gcode = 
	{% if printer["gcode_macro status_heating"] != null %}
	status_heating
	{% endif %}
	M109.1 { rawparams }
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro _MOVE_AWAY]
gcode = 
	{% set th = printer.toolhead %}
	{% set x_safe = th.position.x + 20 * (1 if th.axis_maximum.x - th.position.x > 20 else -1) %}
	{% set y_safe = th.position.y + 20 * (1 if th.axis_maximum.y - th.position.y > 20 else -1) %}
	{% set z_safe = [th.position.z + 2, th.axis_maximum.z]|min %}
	
	G90
	G0 X{x_safe} Y{y_safe} Z{z_safe} F20000

[gcode_macro PARK_CENTER_REAR]
gcode = 
	{% if printer["gcode_macro status_busy"] != null %}
	status_busy
	{% endif %}
	{% set th = printer.toolhead %}
	{% set x_safe = th.position.x + 20 * (1 if th.axis_maximum.x - th.position.x > 20 else -1) %}
	{% set y_safe = th.position.y + 20 * (1 if th.axis_maximum.y - th.position.y > 20 else -1) %}
	
	G0 X{th.axis_maximum.x//2} Y{th.axis_maximum.y - 2} F3600
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro START_PRINT]
variable_retract = 15
gcode = 
	{% set chamber_temp = params.CHAMBER_TEMP|default(0)|float %}
	{% set extruder_temp = params.EXTRUDER_TEMP|default(210)|float %}
	{% set bed_temp = params.BED_TEMP|default(60)|float %}
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	CLEAR_PAUSE
	G28
	Smart_Park
	M220 S100
	M221 S100
	SET_HEATER_TEMPERATURE HEATER=chamber_heater TARGET={chamber_temp}
	SET_HEATER_TEMPERATURE HEATER=heater_bed TARGET={bed_temp}
	TEMPERATURE_WAIT SENSOR=heater_bed MINIMUM={bed_temp * 0.75}
	SET_HEATER_TEMPERATURE HEATER=extruder TARGET={extruder_temp}
	G90
	M82
	TEMPERATURE_WAIT SENSOR=heater_bed MINIMUM={bed_temp}
	TEMPERATURE_WAIT SENSOR=extruder MINIMUM={extruder_temp}
	
	G1 E-15 F3600
	
	G28
	BED_MESH_CALIBRATE
	PRIME_LINE

[gcode_macro pid_soplo]
gcode = 
	PID_CALIBRATE HEATER=extruder TARGET=250

[gcode_macro pid_bed]
gcode = 
	PID_CALIBRATE HEATER=heater_bed TARGET=105

[gcode_macro BED]
gcode = 
	PROBE_CALIBRATE

[gcode_macro END_PRINT]
gcode = 
	
	{% set max_x = printer.configfile.config["stepper_x"]["position_max"]|float %}
	{% set max_y = printer.configfile.config["stepper_y"]["position_max"]|float %}
	{% set max_z = printer.configfile.config["stepper_z"]["position_max"]|float %}
	
	
	{% if printer.toolhead.position.x < (max_x - 20) %}
	{% set x_safe = 20.0 %}
	{% else %}
	{% set x_safe = -20.0 %}
	{% endif %}
	
	{% if printer.toolhead.position.y < (max_y - 20) %}
	{% set y_safe = 20.0 %}
	{% else %}
	{% set y_safe = -20.0 %}
	{% endif %}
	
	{% if printer.toolhead.position.z < (max_z - 2) %}
	{% set z_safe = 2.0 %}
	{% else %}
	{% set z_safe = max_z - printer.toolhead.position.z %}
	{% endif %}
	
	
	M400
	G92 E0
	G1 E-15 F3600
	G91
	G0 Z{z_safe} F3600
	G0 X{x_safe} Y{y_safe} F20000
	
	
	M104 S0
	M104 S0
	M140 S0
	M106 S0
	G90
	G0 X{max_x / 2} Y{max_y} F3600
	
	SONG_CRAB_RAVE
	
	
	
	M117 Finished!
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=30

[gcode_macro M300]
gcode = 
	
	{% set S = params.S|default(1000)|int %}
	
	{% set P = params.P|default(100)|int %}
	
	
	{% set V = params.V|default(99)|int %}
	SET_PIN PIN=beeper VALUE={0.1 * (V / 100) if S > 0 else 1} CYCLE_TIME={ 1.0 / S if S > 0 else 1 }
	G4 P{P}
	SET_PIN PIN=beeper VALUE=0 CYCLE_TIME={ 0.001 }
description = 
	"Plays a beep sound.
	@param {int} [S=1000] - Frequency in Hz
	@param {int} [P=100] - Duration in ms
	@param {int} [V=99] - Volume in percent"

[gcode_macro PRIME_LINE]
gcode = 
	{% set feedrate = params.F|default(10)|float * 60 %}
	{% set length = 100.0 %}
	{% set width = printer.configfile.settings.extruder.nozzle_diameter|float %}
	{% set height = ( (width / 0.04)|int - (width / 0.04 / 4)|int )|float * 0.04 %}
	
	{% set extrude = length * width * height * 1.5 %}
	SAVE_GCODE_STATE NAME=PRIME_LINE_STATE
	SET_IDLE_TIMEOUT TIMEOUT=7200
	{% if 'Y' in params %}
	{% set x_start = 1.0 %}
	{% set y_start = (printer.toolhead.axis_maximum.y|float - 100) / 2 %}
	G0 X{x_start} Y{y_start} F5000
	G0 Z{height} F1500
	G91
	
	G1 E8 F300
	
	
	G1 Y100 E{extrude} F{feedrate}
	G0 X{width} F5000
	G1 Y-100 E{extrude} F{feedrate}
	{% else %}
	{% set x_start = (printer.toolhead.axis_maximum.x|float - 100) / 2 %}
	{% set y_start = 1.0 %}
	G0 X{x_start} Y{y_start} F5000
	G0 Z{height} F1500
	G91
	
	G1 E8 F300
	
	
	G1 X100 E{extrude} F{feedrate}
	G0 Y{width} F5000
	G1 X-100 E{extrude} F{feedrate}
	{% endif %}
	RESTORE_GCODE_STATE NAME=PRIME_LINE_STATE

[gcode_macro VINT]
gcode = 
	SCREWS_TILT_CALCULATE

[gcode_macro LOW_TEMP_CHECK]
gcode = 
	{% set extruder_temp = params.T|default(240)|float %}
	{% if printer.extruder.target > extruder_temp %}
	{% set extruder_temp = printer.extruder.target %}
	{% endif %}
	{% if printer.extruder.temperature < extruder_temp %}
	M118 Heating to {extruder_temp}
	SET_HEATER_TEMPERATURE HEATER=extruder TARGET={extruder_temp}
	TEMPERATURE_WAIT SENSOR=extruder MINIMUM={extruder_temp}
	{% endif %}

[gcode_macro M76]
gcode = 
	PAUSE

[gcode_macro M601]
gcode = 
	PAUSE

[gcode_macro G27]
gcode = 
	PARK

[gcode_macro M125]
gcode = 
	PARK

[gcode_macro M600]
gcode = 
	PAUSE

[gcode_macro M701]
gcode = 
	FILAMENT_LOAD

[gcode_macro M702]
gcode = 
	FILAMENT_UNLOAD

[gcode_macro M500]
gcode = 
	SAVE_CONFIG

[gcode_macro PARK]
gcode = 
	{% set x_park = params.X|default(0)|float %}
	{% set y_park = params.Y|default(0)|float %}
	{% set z_park = params.Z|default(10)|float + printer.toolhead.position.z|float %}
	{% set x_max = printer.toolhead.axis_maximum.x|float %}
	{% set y_max = printer.toolhead.axis_maximum.y|float %}
	{% set z_max = printer.toolhead.axis_maximum.z|float %}
	{% if x_park > x_max %}
	{% set x_park = x_max %}
	{% endif %}
	{% if y_park > y_max %}
	{% set y_park = y_max %}
	{% endif %}
	{% if z_park > z_max %}
	{% set z_park = z_max %}
	{% endif %}
	SAVE_GCODE_STATE NAME=PARK_STATE
	G90
	G1 Z{z_park} F1500
	G1 X{x_park} Y{y_park} F5000
	RESTORE_GCODE_STATE name=PARK_STATE

[gcode_macro START_DRYER]
description = Start the heated bed filament dryer.
gcode = 
	{% set ChamberTemperature = params.CHAMBER | default(65.0) | float %}
	{% set BedTemperature = params.TEMPERATURE | default(0.0) | float %}
	{% set DryTime = params.TIME | default(14400) | int %}
	M140 S{BedTemperature}
	M141 S{ChamberTemperature}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=time_remaining VALUE={DryTime}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=bed_temperature VALUE={BedTemperature}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=chamber_temperature VALUE={ChamberTemperature}
	UPDATE_DELAYED_GCODE ID=DRYER_TIMER DURATION=1

[gcode_macro STOP_DRYER]
gcode = 
	M140 S0
	M141 S0
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=time_remaining VALUE=0
	UPDATE_DELAYED_GCODE ID=DRYER_TIMER DURATION=0
	M117 Drying Stopped

[gcode_macro DRYER_STATUS]
variable_time_remaining = 0
variable_bed_temperature = 0
variable_chamber_temperature = 0
gcode = 
	{% if time_remaining > 0 %}
	M140 S{bed_temperature}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=time_remaining VALUE={time_remaining - 1}
	M117 Drying {time_remaining}
	{% else %}
	STOP_DRYER
	{% endif %}

[delayed_gcode DRYER_TIMER]
gcode = 
	UPDATE_DELAYED_GCODE ID=DRYER_TIMER DURATION=1
	DRYER_STATUS

[gcode_macro DRY_tpu]
gcode = 
	START_DRYER TEMPERATURE=0 CHAMBER=50 TIME=18000

[gcode_macro DRY_PETG]
gcode = 
	START_DRYER TEMPERATURE=0  CHAMBER=65 TIME=18000

[gcode_macro DRY_ABS]
gcode = 
	{% set S = params.S|default(0.0)|float %}
	SET_PIN PIN=Laser VALUE={S / 255.0}

[gcode_macro M4]
gcode = 
	{% set S = params.S|default(0.0)|float %}
	SET_PIN PIN=Laser VALUE={S / 255.0}

[gcode_macro M5]
gcode = 
	SET_PIN PIN=Laser VALUE=0

[menu __main __control __toolonoff]
type = input
enable = {'pwm_tool Laser' in printer}
name = Fan: {'ON ' if menu.input else 'OFF'}
input = {printer['pwm_tool Laser'].value}
input_min = 0
input_max = 1
input_step = 1
gcode = 
	M3 S{255 if menu.input else 0}

[menu __main __control __toolspeed]
type = input
enable = {'pwm_tool Laser' in printer}
name = Laser speed: {'%3d' % (menu.input*100)}%
input = {printer['pwm_tool Laser'].value}
input_min = 0
input_max = 1
input_step = 0.01
gcode = 
	M3 S{'%d' % (menu.input*255)}

[gcode_macro NOTE]
description = 
	"Plays a specified note for a specified duration
	@param {string} [N=C5] - Note to play
	@param {int} [D=500] - Duration of note. There are currently some Klipper limitations to how short a note can be.
	@param {int} [V=99] - Volume in percent
	@param {bool} [S=true] - Whether or not to stop the note after duration"
gcode = 
	{% set notes = {
	'C0': 16.35,   'CS0': 17.32,   'D0': 18.35,   'DS0': 19.45,   'E0': 20.60,   'F0': 21.83,   'FS0': 23.12,   'G0': 24.50,   'GS0': 25.96,   'A0': 27.50,   'AS0': 29.14,   'B0': 30.87,
	'C1': 32.70,   'CS1': 34.65,   'D1': 36.71,   'DS1': 38.89,   'E1': 41.20,   'F1': 43.65,   'FS1': 46.25,   'G1': 49.00,   'GS1': 51.91,   'A1': 55.00,   'AS1': 58.27,   'B1': 61.74,
	'C2': 65.41,   'CS2': 69.30,   'D2': 73.42,   'DS2': 77.78,   'E2': 82.41,   'F2': 87.31,   'FS2': 92.50,   'G2': 98.00,   'GS2': 103.83,  'A2': 110.00,  'AS2': 116.54,  'B2': 123.47,
	'C3': 130.81,  'CS3': 138.59,  'D3': 146.83,  'DS3': 155.56,  'E3': 164.81,  'F3': 174.61,  'FS3': 185.00,  'G3': 196.00,  'GS3': 207.65,  'A3': 220.00,  'AS3': 233.08,  'B3': 246.94,
	'C4': 261.63,  'CS4': 277.18,  'D4': 293.66,  'DS4': 311.13,  'E4': 329.63,  'F4': 349.23,  'FS4': 369.99,  'G4': 392.00,  'GS4': 415.30,  'A4': 440.00,  'AS4': 466.16,  'B4': 493.88,
	'C5': 523.25,  'CS5': 554.37,  'D5': 587.33,  'DS5': 622.25,  'E5': 659.26,  'F5': 698.46,  'FS5': 739.99,  'G5': 783.99,  'GS5': 830.61,  'A5': 880.00,  'AS5': 932.33,  'B5': 987.77,
	'C6': 1046.50, 'CS6': 1108.73, 'D6': 1174.66, 'DS6': 1244.51, 'E6': 1318.51, 'F6': 1396.91, 'FS6': 1479.98, 'G6': 1567.98, 'GS6': 1661.22, 'A6': 1760.00, 'AS6': 1864.66, 'B6': 1975.53,
	'C7': 2093.00, 'CS7': 2217.46, 'D7': 2349.32, 'DS7': 2489.02, 'E7': 2637.02, 'F7': 2793.83, 'FS7': 2959.96, 'G7': 3135.96, 'GS7': 3322.44, 'A7': 3520.00, 'AS7': 3729.31, 'B7': 3951.07,
	'C8': 4186.01, 'CS8': 4434.92, 'D8': 4698.64, 'DS8': 4978.03, 'E8': 5274.04, 'F8': 5587.65, 'FS8': 5919.91, 'G8': 6271.93, 'GS8': 6644.88, 'A8': 7040.00, 'AS8': 7458.62, 'B8': 7902.13,
	} %}
	
	{% set note = params.N|default('C5')|string %}
	
	{% set dur = params.D|default(500)|int %}
	
	
	{% set volume = params.V|default(99)|int %}
	
	{% set stop = params.S|default('true')|string %}
	
	{% set freq = notes[note] %}
	
	SET_PIN PIN=beeper VALUE={0.1 * (volume / 100) if volume > 0 else 1} CYCLE_TIME={ 1.0 / freq }
	G4 P{dur}
	{% if stop|lower == 'true' %}
	SET_PIN PIN=beeper VALUE=0 CYCLE_TIME={ 0.001 }
	{% endif %}

[gcode_macro TONE_GEN]
description = "Used for the tone generator menu"
variable_tone_freq = 0.001093
gcode = 
	M117 {printer["gcode_macro TONE_GEN"].tone_freq}nothz

[gcode_macro SONG_STAR_WARS_MAIN_THEME]
description = "Plays the Star Wars main theme"
gcode = 
	NOTE N=D4 D=133
	NOTE N=D4 D=133
	NOTE N=D4 D=133
	NOTE N=G4 D=1000
	NOTE N=D5 D=1000
	
	NOTE N=C5 D=133
	NOTE N=B4 D=133
	NOTE N=A4 D=133
	NOTE N=G5 D=1000
	NOTE N=D5 D=500
	
	NOTE N=C5 D=133
	NOTE N=B4 D=133
	NOTE N=A4 D=133
	NOTE N=G5 D=1000
	NOTE N=D5 D=500
	
	NOTE N=C5 D=133
	NOTE N=B4 D=133
	NOTE N=C5 D=133
	NOTE N=A4 D=1000

[gcode_macro SONG_CRAB_RAVE]
description = "Plays Crab Rave"
gcode = 
	NOTE N=D6 D=150 V=30 S=1
	NOTE N=AS6 D=150 V=30 S=1
	NOTE N=G6 D=150 V=30 S=1
	NOTE N=G6 D=150 V=30 S=0
	NOTE N=D6 D=150 V=30 S=1
	NOTE N=D6 D=150 V=30 S=0
	NOTE N=A6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=0
	NOTE N=D6 D=150 V=30 S=1
	NOTE N=D6 D=150 V=30 S=0
	NOTE N=A6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=0
	NOTE N=C6 D=150 V=30 S=1
	NOTE N=C6 D=150 V=30 S=1
	NOTE N=E6 D=150 V=30 S=1
	NOTE N=E6 D=150 V=30 S=0
	NOTE N=F6 D=150 V=30 S=1
	SET_PIN PIN=beeper VALUE=0

[gcode_macro one]
description = "one"
gcode = 
	NOTE N=C6 D=600 V=30 S=1
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=G5 D=400 V=30 S=1
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=E6 D=400 V=30 S=1
	G4 P150
	NOTE N=G6 D=180 V=30 S=0
	NOTE N=F6 D=180 V=30 S=0
	NOTE N=E6 D=180 V=30 S=0
	NOTE N=D6 D=180 V=30 S=1
	NOTE N=C6 D=600 V=30 S=1
	
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=G5 D=400 V=30 S=1
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=C6 D=600 V=30 S=1
	SET_PIN PIN=beeper VALUE=0

[gcode_macro SONG_BOOMER]
description = "BOOMER"
gcode = 
	M300 P207 S659
	M300 P207 S784
	M300 P207 S494
	M300 P207 S494
	M300 P207 S392
	M300 P207 S494
	M300 P207 S494
	M300 P207 S330
	M300 P207 S784
	M300 P207 S659
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S988
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S659
	M300 P207 S784
	M300 P207 S494
	M300 P207 S494
	M300 P207 S392
	M300 P207 S494
	M300 P207 S494
	M300 P207 S330
	M300 P207 S784
	M300 P207 S659
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S988
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S659
	M300 P207 S784
	M300 P207 S494
	M300 P207 S494
	M300 P207 S392
	M300 P207 S494
	M300 P207 S494
	M300 P207 S330
	M300 P207 S784
	M300 P207 S659
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S988
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330

[gcode_macro GET_TIMELAPSE_SETUP]
description = Print the Timelapse setup
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% set output_txt = ["Timelapse Setup:"] %}
	{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}
	{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}
	{% if tl.park.enable %}
	{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}
	{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}
	{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}
	{% endif %}
	{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}
	{% if not tl.extruder.fw_retract %}
	{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}
	{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}
	{% endif %}
	{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}
	{action_respond_info(output_txt|join("\n"))}

[gcode_macro _SET_TIMELAPSE_SETUP]
description = Set user parameters for timelapse
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	
	{% set min = printer.toolhead.axis_minimum %}
	{% set max = printer.toolhead.axis_maximum %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	{% set park = {'min'   : {'x': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),
	'y': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},
	'max'   : {'x': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),
	'y': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},
	'center': {'x': (max.x-(max.x-min.x)/2)|round(3),
	'y': (max.y-(max.y-min.y)/2)|round(3)}} %}
	
	{% if params.ENABLE %}
	{% if params.ENABLE|lower is in ['true', 'false'] %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == 'true' else False}
	{% else %}
	{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.VERBOSE %}
	{% if params.VERBOSE|lower is in ['true', 'false'] %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == 'true' else False}
	{% else %}
	{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_X %}
	{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}
	{% set _dummy = tl.park.custom.update({'x':params.CUSTOM_POS_X|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_Y %}
	{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}
	{% set _dummy = tl.park.custom.update({'y':params.CUSTOM_POS_Y|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_DZ %}
	{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}
	{% set _dummy = tl.park.custom.update({'dz':params.CUSTOM_POS_DZ|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}
	{% endif %}
	{% endif %}
	{% if params.PARK_ENABLE %}
	{% if params.PARK_ENABLE|lower is in ['true', 'false'] %}
	{% set _dummy = tl.park.update({'enable':True if params.PARK_ENABLE|lower == 'true' else False}) %}
	{% else %}
	{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.PARK_POS %}
	{% if params.PARK_POS|lower is in ['center','front_left','front_right','back_left','back_right','custom','x_only','y_only'] %}
	{% set dic = {'center'      : {'x': park.center.x   , 'y': park.center.y   , 'dz': 1                },
	'front_left'  : {'x': park.min.x      , 'y': park.min.y      , 'dz': 0                },
	'front_right' : {'x': park.max.x      , 'y': park.min.y      , 'dz': 0                },
	'back_left'   : {'x': park.min.x      , 'y': park.max.y      , 'dz': 0                },
	'back_right'  : {'x': park.max.x      , 'y': park.max.y      , 'dz': 0                },
	'custom'      : {'x': tl.park.custom.x, 'y': tl.park.custom.y, 'dz': tl.park.custom.dz},
	'x_only'      : {'x': tl.park.custom.x, 'y': 'none'          , 'dz': tl.park.custom.dz},
	'y_only'      : {'x': 'none'          , 'y': tl.park.custom.y, 'dz': tl.park.custom.dz}} %}
	{% set _dummy = tl.park.update({'pos':params.PARK_POS|lower}) %}
	{% set _dummy = tl.park.update({'coord':dic[tl.park.pos]}) %}
	{% else %}
	{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"
	% params.PARK_POS|upper)}
	{% endif %}
	{% endif %}
	{% if params.PARK_TIME %}
	{% if params.PARK_TIME|float >= 0.0 %}
	{% set _dummy = tl.park.update({'time':params.PARK_TIME|float|round(3)}) %}
	{% else %}
	{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"
	{% if params.TRAVEL_SPEED %}
	{% if params.TRAVEL_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'travel':params.TRAVEL_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}
	{% endif %}
	{% endif %}
	{% if params.RETRACT_SPEED %}
	{% if params.RETRACT_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'retract':params.RETRACT_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}
	{% endif %}
	{% endif %}
	{% if params.EXTRUDE_SPEED %}
	{% if params.EXTRUDE_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'extrude':params.EXTRUDE_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"
	{% if params.EXTRUDE_DISTANCE %}
	{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}
	{% set _dummy = tl.extruder.update({'extrude':params.EXTRUDE_DISTANCE|float|round(3)}) %}
	{% else %}
	{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}
	{% endif %}
	{% endif %}
	{% if params.RETRACT_DISTANCE %}
	{% if params.RETRACT_DISTANCE|float >= 0.0 %}
	{% set _dummy = tl.extruder.update({'retract':params.RETRACT_DISTANCE|float|round(3)}) %}
	{% else %}
	{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}
	{% endif %}
	{% endif %}
	{% if params.FW_RETRACT %}
	{% if params.FW_RETRACT|lower is in ['true', 'false'] %}
	{% if 'firmware_retraction' in printer.configfile.settings %}
	{% set _dummy = tl.extruder.update({'fw_retract': True if params.FW_RETRACT|lower == 'true' else False}) %}
	{% else %}
	{% set _dummy = tl.extruder.update({'fw_retract':False}) %}
	{% if params.FW_RETRACT|capitalize == 'True' %}
	{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}
	{% endif %}
	{% endif %}
	{% else %}
	{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"
	{% if printer.configfile.settings['gcode_macro pause'] is defined %}
	{% set _dummy = tl.macro.update({'pause': printer.configfile.settings['gcode_macro pause'].rename_existing}) %}
	{% endif %}
	{% if printer.configfile.settings['gcode_macro resume'] is defined %}
	{% set _dummy = tl.macro.update({'resume': printer.configfile.settings['gcode_macro resume'].rename_existing}) %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"

[gcode_macro TIMELAPSE_TAKE_FRAME]
description = Take Timelapse shoot
variable_enable = False
variable_takingframe = False
variable_park = {'enable': False,
	'pos'   : 'center',
	'time'  : 0.1,
	'custom': {'x': 0, 'y': 0, 'dz': 0},
	'coord' : {'x': 0, 'y': 0, 'dz': 0}}
variable_extruder = {'fw_retract': False,
	'retract': 1.0,
	'extrude': 1.0}
variable_speed = {'travel': 100,
	'retract': 15,
	'extrude': 15}
variable_verbose = True
variable_restore = {'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}
variable_macro = {'pause': 'PAUSE', 'resume': 'RESUME'}
variable_is_paused = False
gcode = 
	{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower =='true' else False %}
	{% if enable %}
	{% if (hyperlapse and printer['gcode_macro HYPERLAPSE'].run) or
	(not hyperlapse and not printer['gcode_macro HYPERLAPSE'].run) %}
	{% if park.enable %}
	{% set pos = {'x': 'X' + park.coord.x|string if park.pos != 'y_only' else '',
	'y': 'Y' + park.coord.y|string if park.pos != 'x_only' else '',
	'z': 'Z'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}
	{% set restore = {'absolute': {'coordinates': printer.gcode_move.absolute_coordinates,
	'extrude'    : printer.gcode_move.absolute_extrude},
	'speed'   : printer.gcode_move.speed,
	'e'       : printer.gcode_move.gcode_position.e,
	'factor'  : {'speed'  : printer.gcode_move.speed_factor,
	'extrude': printer.gcode_move.extrude_factor}} %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"
	{% if not printer[printer.toolhead.extruder].can_extrude %}
	{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}
	{% else %}
	{% if extruder.fw_retract %}
	G10
	{% else %}
	M83
	G0 E-{extruder.retract} F{speed.retract * 60}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True
	{macro.pause}
	SET_GCODE_OFFSET X=0 Y=0
	G90
	{% if "xyz" not in printer.toolhead.homed_axes %}
	{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}
	{% else %}
	G0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5
	M400
	{% endif %}
	_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}
	{% endif %}
	{% else %}
	{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}
	{% endif %}

[gcode_macro _TIMELAPSE_NEW_FRAME]
description = action call for timelapse shoot. must be a seperate macro
gcode = 
	{action_call_remote_method("timelapse_newframe",
	macropark=printer['gcode_macro TIMELAPSE_TAKE_FRAME'].park,
	hyperlapse=params.HYPERLAPSE)}

[delayed_gcode _WAIT_TIMELAPSE_TAKE_FRAME]
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% set factor = {'speed': printer.gcode_move.speed_factor, 'extrude': printer.gcode_move.extrude_factor} %}
	{% if tl.takingframe %}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5
	{% else %}
	{tl.macro.resume} VELOCITY={tl.speed.travel}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False
	{% if not printer[printer.toolhead.extruder].can_extrude %}
	{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}
	{% else %}
	{% if tl.extruder.fw_retract %}
	G11
	{% else %}
	G0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}
	G0 F{tl.restore.speed}
	{% if tl.restore.absolute.extrude %}
	M82
	G92 E{tl.restore.e}
	{% endif %}
	{% endif %}
	{% endif %}
	{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}
	{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}
	{% if not tl.restore.absolute.coordinates %} G91 {% endif %}
	{% endif %}

[gcode_macro HYPERLAPSE]
description = Start/Stop a hyperlapse recording
variable_cycle = 0
variable_run = False
gcode = 
	{% set cycle = params.CYCLE|default(30)|int %}
	{% if params.ACTION and params.ACTION|lower == 'start' %}
	{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}
	TIMELAPSE_TAKE_FRAME HYPERLAPSE=True
	{% elif params.ACTION and params.ACTION|lower == 'stop' %}
	{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0
	{% else %}
	{action_raise_error("Hyperlapse: No valid input parameter
	Use:
	- HYPERLAPSE ACTION=START [CYCLE=time]
	- HYPERLAPSE ACTION=STOP")}
	{% endif %}

[delayed_gcode _HYPERLAPSE_LOOP]
gcode = 
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}
	TIMELAPSE_TAKE_FRAME HYPERLAPSE=True

[gcode_macro TIMELAPSE_RENDER]
description = Render Timelapse video and wait for the result
variable_render = False
variable_run_identifier = 0
gcode = 
	{action_respond_info("Timelapse: Rendering started")}
	{action_call_remote_method("timelapse_render", byrendermacro="True")}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True
	{printer.configfile.settings['gcode_macro pause'].rename_existing}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5

[delayed_gcode _WAIT_TIMELAPSE_RENDER]
gcode = 
	{% set ri = printer['gcode_macro TIMELAPSE_RENDER'].run_identifier % 4 %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}
	{% if printer['gcode_macro TIMELAPSE_RENDER'].render %}
	M117 Rendering {['-','\\','|','/'][ri]}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5
	{% else %}
	{action_respond_info("Timelapse: Rendering finished")}
	M117
	{printer.configfile.settings['gcode_macro resume'].rename_existing}
	{% endif %}

[gcode_macro TEST_STREAM_DELAY]
description = Helper macro to find stream and park delay
gcode = 
	{% set min = printer.toolhead.axis_minimum %}
	{% set max = printer.toolhead.axis_maximum %}
	{% set act = printer.toolhead.position %}
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% if act.z > 5.0 %}
	G0 X{min.x + 5.0} F{tl.speed.travel|int * 60}
	G0 X{(max.x-min.x)/2}
	G4 P{tl.park.time|float * 1000}
	_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE
	G0 X{max.x - 5.0}
	{% else %}
	{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}
	{% endif %}

[exclude_object]

[gcode_shell_command update_git_script]
command = bash -c "bash $HOME/klipper-backup/script.sh"
timeout = 90.0
verbose = True

[gcode_shell_command update_git_script_message]
command = bash -c "bash $HOME/klipper-backup/script.sh -c \"$0\""
timeout = 90.0
verbose = True

[mcu]
serial = /dev/ttyS3
restart_method = command

[output_pin Power]
pin = PC12
value = 1
shutdown_value = 1

[temperature_sensor orange_pi]
sensor_type = temperature_host
min_temp = 0
max_temp = 100

[heater_generic chamber_heater]
heater_pin = !PA7
sensor_type = ATC Semitec 104GT-2
sensor_pin = PA5
control = watermark
max_power = 1
min_temp = 15
max_temp = 85

[verify_heater chamber_heater]
max_error = 9999
check_gain_time = 9999
hysteresis = 5
heating_gain = 2

[filament_motion_sensor motion_sensor]
detection_length = 50
extruder = extruder
switch_pin = !PC15
pause_on_runout = True
runout_gcode = 
	SONG_CRAB_RAVE

[bltouch]
sensor_pin = ^PC14
control_pin = PA1
x_offset = -40
y_offset = 0.000
z_offset = 1.70
pin_up_reports_not_triggered = False
probe_with_touch_mode = True

[heater_bed]
heater_pin = PC9
sensor_type = ATC Semitec 104GT-2
sensor_pin = PC3
control = pid
pid_kp = 72.553
pid_ki = 1.154
pid_kd = 1139.994
min_temp = 5
max_temp = 125

[heater_fan radiator]
pin = PC7
max_power = 1.0
kick_start_time = 0.600
heater = extruder
heater_temp = 50.0
shutdown_speed = 1

[fan]
pin = PC6

[input_shaper]
shaper_type_x = 2hump_ei
shaper_freq_x = 43.0
shaper_type_y = mzv
shaper_freq_y = 32.6

[printer]
kinematics = cartesian
max_velocity = 300
max_accel = 1900
max_z_velocity = 30
max_z_accel = 100
square_corner_velocity = 4

[bed_mesh]
speed = 150
horizontal_move_z = 9
mesh_min = 10, 20
mesh_max = 195, 210
probe_count = 5
mesh_pps = 2, 3
algorithm = bicubic
bicubic_tension = 0.2
move_check_distance = 9
split_delta_z = .025
fade_start = 1
fade_end = 10
fade_target = 0

[screws_tilt_adjust]
screw1 = 79, 27
screw1_name = Peredniy Leviy
screw2 = 235, 27
screw2_name = Peredniy Praviy
screw3 = 235,197
screw3_name = Zadniy Praviy
screw4 = 79,197
screw4_name = Zadniy Leviy
speed = 120
horizontal_move_z = 9

[safe_z_home]
home_xy_position = 157,115
speed = 50
z_hop = 9.0
z_hop_speed = 20.0

[stepper_x]
step_pin = PB13
dir_pin = !PB12
enable_pin = !PB14
microsteps = 16
rotation_distance = 40
endstop_pin = ^PC0
position_endstop = 0
position_max = 240
position_min = -2
homing_retract_dist = 5
homing_speed = 50
second_homing_speed = 10

[tmc2209 stepper_x]
uart_pin = PC11
tx_pin = PC10
uart_address = 0
run_current = 0.580
stealthchop_threshold = 999999

[stepper_y]
step_pin = PB10
dir_pin = !PB2
enable_pin = !PB11
microsteps = 16
rotation_distance = 40
endstop_pin = ^PC1
position_endstop = 0
homing_retract_dist = 5
homing_speed = 50
second_homing_speed = 10
position_max = 231
position_min = 0

[tmc2209 stepper_y]
uart_pin = PC11
tx_pin = PC10
uart_address = 2
run_current = 0.6
stealthchop_threshold = 999999

[stepper_z]
step_pin = PB0
dir_pin = PC5
enable_pin = !PB1
microsteps = 16
rotation_distance = 40
gear_ratio = 80:16
full_steps_per_rotation = 200
endstop_pin = probe:z_virtual_endstop
homing_retract_dist = 9
second_homing_speed = 10
position_min = -5
position_max = 245
homing_speed = 50

[tmc2209 stepper_z]
uart_pin = PC11
tx_pin = PC10
uart_address = 1
run_current = 0.580
stealthchop_threshold = 999999
interpolate = false

[extruder]
step_pin = PB3
dir_pin = PB4
enable_pin = !PD2
microsteps = 16
rotation_distance = 4.637
nozzle_diameter = 0.400
filament_diameter = 1.750
heater_pin = PC8
sensor_type = ATC Semitec 104GT-2
sensor_pin = PA0
min_temp = 5
max_temp = 270
max_extrude_only_velocity = 120
max_extrude_only_accel = 3000
pressure_advance = 0.031
full_steps_per_rotation = 200
control = pid
pid_kp = 29.662
pid_ki = 2.382
pid_kd = 92.322

[tmc2209 extruder]
uart_pin = PC11
tx_pin = PC10
uart_address = 3
run_current = 0.7
stealthchop_threshold = 999999

[static_digital_output usb_pullup_enable]
pins = !PA14

[board_pins]
aliases = 
	
	EXP1_1=PB5,  EXP1_3=PA9,   EXP1_5=PA10, EXP1_7=PB8,  EXP1_9=<GND>,
	EXP1_2=PA15, EXP1_4=<RST>, EXP1_6=PB9,  EXP1_8=PB15, EXP1_10=<5V>

[display]
lcd_type = st7920
cs_pin = EXP1_7
sclk_pin = EXP1_6
sid_pin = EXP1_8
encoder_pins = ^EXP1_5, ^EXP1_3
click_pin = ^!EXP1_2

[pwm_cycle_time beeper]
pin = EXP1_1
shutdown_value = 0
cycle_time = 0.001

[firmware_retraction]
retract_length = 1.0
retract_speed = 80
unretract_extra_length = 0
unretract_speed = 80

[pwm_tool Laser]
pin = PA6
cycle_time = 0.0001
shutdown_value = 0
maximum_mcu_duration = 5

[bed_mesh 70]
version = 1
points = 
	-0.045000, 0.027500, 0.015000
	-0.055000, -0.005000, -0.035000
	-0.007500, 0.040000, -0.002500
x_count = 3
y_count = 3
mesh_x_pps = 2
mesh_y_pps = 3
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 195.0
min_y = 20.0
max_y = 210.0

[bed_mesh default]
version = 1
points = 
	0.020000, 0.025000, 0.030000, -0.007500, -0.052500
	0.015000, 0.017500, 0.022500, -0.007500, -0.057500
	0.030000, 0.030000, 0.037500, 0.002500, -0.035000
	0.012500, 0.030000, 0.050000, 0.035000, -0.010000
	0.080000, 0.087500, 0.115000, 0.097500, 0.067500
x_count = 5
y_count = 5
mesh_x_pps = 2
mesh_y_pps = 3
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 195.0
min_y = 20.0
max_y = 210.0
=======================
Extruder max_extrude_ratio=0.266081
mcu 'mcu': Starting serial connect
webhooks client 281473325217296: New connection
webhooks client 281473325217296: Client info {'program': 'Moonraker', 'version': 'v0.9.3-4-ga4604e3'}
Loaded MCU 'mcu' 118 commands (v0.12.0-404-g80d185c94 / gcc: (15:12.2.rel1-1) 12.2.1 20221205 binutils: (2.40-2+18+b1) 2.40)
MCU 'mcu' config: ADC_MAX=4095 BUS_PINS_i2c1=PB6,PB7 BUS_PINS_i2c1a=PB8,PB9 BUS_PINS_i2c2=PB10,PB11 BUS_PINS_spi1=PA6,PA7,PA5 BUS_PINS_spi1a=PB4,PB5,PB3 BUS_PINS_spi2=PB14,PB15,PB13 BUS_PINS_spi3=PB4,PB5,PB3 CLOCK_FREQ=72000000 INITIAL_PINS=!PA14 MCU=stm32f103xe PWM_MAX=255 RECEIVE_WINDOW=192 RESERVE_PINS_serial=PA3,PA2 SERIAL_BAUD=250000 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
Sending MCU 'mcu' printer configuration...
Configured MCU 'mcu' (1024 moves)
Starting heater checks for chamber_heater
Starting heater checks for heater_bed
bed_mesh: generated points
Index |  Tool Adjusted  |   Probe
  0   | (50.0, 20.0)    | (10.0, 20.0)
  1   | (96.2, 20.0)    | (56.2, 20.0)
  2   | (142.5, 20.0)   | (102.5, 20.0)
  3   | (188.8, 20.0)   | (148.8, 20.0)
  4   | (235.0, 20.0)   | (195.0, 20.0)
  5   | (235.0, 67.5)   | (195.0, 67.5)
  6   | (188.8, 67.5)   | (148.8, 67.5)
  7   | (142.5, 67.5)   | (102.5, 67.5)
  8   | (96.2, 67.5)    | (56.2, 67.5)
  9   | (50.0, 67.5)    | (10.0, 67.5)
  10  | (50.0, 115.0)   | (10.0, 115.0)
  11  | (96.2, 115.0)   | (56.2, 115.0)
  12  | (142.5, 115.0)  | (102.5, 115.0)
  13  | (188.8, 115.0)  | (148.8, 115.0)
  14  | (235.0, 115.0)  | (195.0, 115.0)
  15  | (235.0, 162.5)  | (195.0, 162.5)
  16  | (188.8, 162.5)  | (148.8, 162.5)
  17  | (142.5, 162.5)  | (102.5, 162.5)
  18  | (96.2, 162.5)   | (56.2, 162.5)
  19  | (50.0, 162.5)   | (10.0, 162.5)
  20  | (50.0, 210.0)   | (10.0, 210.0)
  21  | (96.2, 210.0)   | (56.2, 210.0)
  22  | (142.5, 210.0)  | (102.5, 210.0)
  23  | (188.8, 210.0)  | (148.8, 210.0)
  24  | (235.0, 210.0)  | (195.0, 210.0)
Starting heater checks for extruder
Stats 4512.2: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=3171 bytes_read=6143 bytes_retransmit=0 bytes_invalid=0 send_seq=225 receive_seq=222 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=1857 upcoming_bytes=324 freq=71995748  orange_pi: temp=50.5 chamber_heater: target=0 temp=0.0 pwm=0.000 heater_bed: target=0 temp=0.0 pwm=0.000 sysload=5.02 cputime=107.143 memavail=1621352 print_time=9.085 buffer_time=0.242 print_stall=0 extruder: target=0 temp=0.0 pwm=0.000
webhooks: registering remote method 'shutdown_machine' for connection id: 281473325217296
webhooks: registering remote method 'reboot_machine' for connection id: 281473325217296
webhooks: registering remote method 'pause_job_queue' for connection id: 281473325217296
webhooks: registering remote method 'start_job_queue' for connection id: 281473325217296
Stats 4513.2: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=5619 bytes_read=6539 bytes_retransmit=0 bytes_invalid=0 send_seq=273 receive_seq=273 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71997495  orange_pi: temp=49.0 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=5.02 cputime=107.186 memavail=1620652 print_time=9.085 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 4514.2: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000121 mcu_task_stddev=0.000272 bytes_write=5644 bytes_read=6732 bytes_retransmit=0 bytes_invalid=0 send_seq=276 receive_seq=276 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998384  orange_pi: temp=48.2 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=5.18 cputime=107.238 memavail=1619128 print_time=9.085 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 4515.2: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000121 mcu_task_stddev=0.000272 bytes_write=5664 bytes_read=6888 bytes_retransmit=0 bytes_invalid=0 send_seq=278 receive_seq=278 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998255  orange_pi: temp=52.9 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=5.18 cputime=107.259 memavail=1618144 print_time=9.085 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 4516.2: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000121 mcu_task_stddev=0.000272 bytes_write=5670 bytes_read=7069 bytes_retransmit=0 bytes_invalid=0 send_seq=279 receive_seq=279 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998244  orange_pi: temp=48.3 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=5.18 cputime=107.280 memavail=1617900 print_time=9.085 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 4517.2: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000121 mcu_task_stddev=0.000272 bytes_write=5676 bytes_read=7235 bytes_retransmit=0 bytes_invalid=0 send_seq=280 receive_seq=280 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998301  orange_pi: temp=47.6 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=5.18 cputime=107.301 memavail=1616164 print_time=9.085 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 4518.2: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000121 mcu_task_stddev=0.000272 bytes_write=5682 bytes_read=7386 bytes_retransmit=0 bytes_invalid=0 send_seq=281 receive_seq=281 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998279  orange_pi: temp=47.8 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=5.18 cputime=107.324 memavail=1612192 print_time=9.085 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 4519.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000016 bytes_write=5688 bytes_read=7581 bytes_retransmit=0 bytes_invalid=0 send_seq=282 receive_seq=282 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998319  orange_pi: temp=50.7 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=5.09 cputime=107.349 memavail=1613852 print_time=9.085 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 4520.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000016 bytes_write=5694 bytes_read=7747 bytes_retransmit=0 bytes_invalid=0 send_seq=283 receive_seq=283 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998327  orange_pi: temp=48.6 chamber_heater: target=0 temp=27.0 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=5.09 cputime=107.373 memavail=1611700 print_time=9.085 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 4521.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000016 bytes_write=5700 bytes_read=7913 bytes_retransmit=0 bytes_invalid=0 send_seq=284 receive_seq=284 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998348  orange_pi: temp=46.9 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=5.09 cputime=107.396 memavail=1618436 print_time=9.085 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.2 pwm=0.000
Stats 4522.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000016 bytes_write=5706 bytes_read=8079 bytes_retransmit=0 bytes_invalid=0 send_seq=285 receive_seq=285 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998357  orange_pi: temp=47.8 chamber_heater: target=0 temp=26.3 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=5.09 cputime=107.419 memavail=1616176 print_time=9.085 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 4523.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000016 bytes_write=5712 bytes_read=8245 bytes_retransmit=0 bytes_invalid=0 send_seq=286 receive_seq=286 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998356  orange_pi: temp=47.6 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=5.09 cputime=107.443 memavail=1617064 print_time=9.085 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 4524.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5718 bytes_read=8425 bytes_retransmit=0 bytes_invalid=0 send_seq=287 receive_seq=287 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998358  orange_pi: temp=48.6 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=5.00 cputime=107.466 memavail=1614280 print_time=9.085 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 4525.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5724 bytes_read=8591 bytes_retransmit=0 bytes_invalid=0 send_seq=288 receive_seq=288 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998363  orange_pi: temp=48.4 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=5.00 cputime=107.489 memavail=1611172 print_time=9.085 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 4526.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5730 bytes_read=8757 bytes_retransmit=0 bytes_invalid=0 send_seq=289 receive_seq=289 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998366  orange_pi: temp=47.6 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=5.00 cputime=107.512 memavail=1608648 print_time=9.085 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 4527.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5736 bytes_read=8923 bytes_retransmit=0 bytes_invalid=0 send_seq=290 receive_seq=290 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998362  orange_pi: temp=48.1 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=5.00 cputime=107.536 memavail=1608052 print_time=9.085 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 4528.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5756 bytes_read=9094 bytes_retransmit=0 bytes_invalid=0 send_seq=292 receive_seq=292 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998363  orange_pi: temp=47.7 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.7 pwm=0.000 sysload=5.00 cputime=107.559 memavail=1607600 print_time=9.085 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 4529.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000018 bytes_write=5776 bytes_read=9280 bytes_retransmit=0 bytes_invalid=0 send_seq=294 receive_seq=294 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998385  orange_pi: temp=47.6 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=4.92 cputime=107.582 memavail=1606344 print_time=9.085 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 4530.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000018 bytes_write=5782 bytes_read=9446 bytes_retransmit=0 bytes_invalid=0 send_seq=295 receive_seq=295 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998369  orange_pi: temp=47.3 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=4.92 cputime=107.606 memavail=1605832 print_time=9.085 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 4531.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000018 bytes_write=5788 bytes_read=9612 bytes_retransmit=0 bytes_invalid=0 send_seq=296 receive_seq=296 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998368  orange_pi: temp=47.8 chamber_heater: target=0 temp=26.8 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=4.92 cputime=107.630 memavail=1614804 print_time=9.085 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 4532.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000018 bytes_write=5794 bytes_read=9778 bytes_retransmit=0 bytes_invalid=0 send_seq=297 receive_seq=297 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998369  orange_pi: temp=47.9 chamber_heater: target=0 temp=26.3 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=4.92 cputime=107.656 memavail=1615124 print_time=9.085 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 4533.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000018 bytes_write=5800 bytes_read=9944 bytes_retransmit=0 bytes_invalid=0 send_seq=298 receive_seq=298 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998364  orange_pi: temp=48.1 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=4.92 cputime=107.679 memavail=1612428 print_time=9.085 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 4534.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5806 bytes_read=10124 bytes_retransmit=0 bytes_invalid=0 send_seq=299 receive_seq=299 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998368  orange_pi: temp=48.0 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=4.85 cputime=107.703 memavail=1616504 print_time=9.085 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 4535.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5812 bytes_read=10290 bytes_retransmit=0 bytes_invalid=0 send_seq=300 receive_seq=300 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998365  orange_pi: temp=48.9 chamber_heater: target=0 temp=26.8 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=4.85 cputime=107.729 memavail=1615652 print_time=9.085 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 4536.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5818 bytes_read=10456 bytes_retransmit=0 bytes_invalid=0 send_seq=301 receive_seq=301 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998361  orange_pi: temp=50.3 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=4.85 cputime=107.756 memavail=1615888 print_time=9.085 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 4537.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5824 bytes_read=10622 bytes_retransmit=0 bytes_invalid=0 send_seq=302 receive_seq=302 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998363  orange_pi: temp=48.1 chamber_heater: target=0 temp=26.7 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=4.85 cputime=107.778 memavail=1613672 print_time=9.085 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 4538.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5830 bytes_read=10788 bytes_retransmit=0 bytes_invalid=0 send_seq=303 receive_seq=303 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998360  orange_pi: temp=47.7 chamber_heater: target=0 temp=26.7 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=4.85 cputime=107.799 memavail=1612944 print_time=9.085 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 4539.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000012 bytes_write=5836 bytes_read=10968 bytes_retransmit=0 bytes_invalid=0 send_seq=304 receive_seq=304 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998359  orange_pi: temp=47.6 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=4.94 cputime=107.820 memavail=1612440 print_time=9.085 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 4540.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000012 bytes_write=5870 bytes_read=11144 bytes_retransmit=0 bytes_invalid=0 send_seq=307 receive_seq=307 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998350  orange_pi: temp=47.5 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=4.94 cputime=107.841 memavail=1611688 print_time=9.085 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 4541.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000012 bytes_write=5876 bytes_read=11310 bytes_retransmit=0 bytes_invalid=0 send_seq=308 receive_seq=308 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998348  orange_pi: temp=49.3 chamber_heater: target=0 temp=26.9 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=4.94 cputime=107.862 memavail=1611184 print_time=9.085 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 4542.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000012 bytes_write=5882 bytes_read=11476 bytes_retransmit=0 bytes_invalid=0 send_seq=309 receive_seq=309 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998349  orange_pi: temp=47.6 chamber_heater: target=0 temp=26.7 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=4.94 cputime=107.886 memavail=1616320 print_time=9.085 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 4543.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000012 bytes_write=5894 bytes_read=11658 bytes_retransmit=0 bytes_invalid=0 send_seq=311 receive_seq=311 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998346  orange_pi: temp=51.1 chamber_heater: target=0 temp=26.7 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=4.94 cputime=107.908 memavail=1615196 print_time=9.085 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Running Command {update_git_script}...:
[1;93m●[0m Checking for installed dependencies /[K[1;92m●[0m Checking for installed dependencies [1;92mDone![0m


Stats 4544.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000018 bytes_write=5900 bytes_read=11839 bytes_retransmit=0 bytes_invalid=0 send_seq=312 receive_seq=312 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998345  orange_pi: temp=47.6 chamber_heater: target=0 temp=26.7 pwm=0.000 heater_bed: target=0 temp=24.7 pwm=0.000 sysload=5.18 cputime=107.937 memavail=1614708 print_time=9.085 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 4545.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000018 bytes_write=5906 bytes_read=12005 bytes_retransmit=0 bytes_invalid=0 send_seq=313 receive_seq=313 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998343  orange_pi: temp=48.0 chamber_heater: target=0 temp=26.8 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=5.18 cputime=107.962 memavail=1615336 print_time=9.085 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 4546.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000018 bytes_write=5912 bytes_read=12171 bytes_retransmit=0 bytes_invalid=0 send_seq=314 receive_seq=314 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998342  orange_pi: temp=47.8 chamber_heater: target=0 temp=26.8 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=5.18 cputime=107.988 memavail=1614296 print_time=9.085 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 4547.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000018 bytes_write=5918 bytes_read=12337 bytes_retransmit=0 bytes_invalid=0 send_seq=315 receive_seq=315 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998343  orange_pi: temp=49.9 chamber_heater: target=0 temp=26.9 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=5.18 cputime=108.020 memavail=1607424 print_time=9.085 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Klipper-Backup is up to date


Stats 4548.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000018 bytes_write=5924 bytes_read=12503 bytes_retransmit=0 bytes_invalid=0 send_seq=316 receive_seq=316 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998343  orange_pi: temp=48.4 chamber_heater: target=0 temp=26.8 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=5.18 cputime=108.049 memavail=1608796 print_time=9.085 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 4549.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000017 bytes_write=5963 bytes_read=12698 bytes_retransmit=0 bytes_invalid=0 send_seq=320 receive_seq=320 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998342  orange_pi: temp=48.3 chamber_heater: target=0 temp=26.8 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=5.17 cputime=108.077 memavail=1612896 print_time=9.085 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 4550.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000017 bytes_write=5969 bytes_read=12864 bytes_retransmit=0 bytes_invalid=0 send_seq=321 receive_seq=321 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998341  orange_pi: temp=48.6 chamber_heater: target=0 temp=26.9 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=5.17 cputime=108.106 memavail=1609564 print_time=9.085 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 4551.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000017 bytes_write=5975 bytes_read=13030 bytes_retransmit=0 bytes_invalid=0 send_seq=322 receive_seq=322 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998341  orange_pi: temp=48.4 chamber_heater: target=0 temp=26.8 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=5.17 cputime=108.135 memavail=1609948 print_time=9.085 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 4552.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000017 bytes_write=5995 bytes_read=13201 bytes_retransmit=0 bytes_invalid=0 send_seq=324 receive_seq=324 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998340  orange_pi: temp=49.4 chamber_heater: target=0 temp=26.8 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=5.17 cputime=108.163 memavail=1616140 print_time=9.085 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 4553.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000017 bytes_write=6015 bytes_read=13372 bytes_retransmit=0 bytes_invalid=0 send_seq=326 receive_seq=326 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998339  orange_pi: temp=48.1 chamber_heater: target=0 temp=26.7 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=5.17 cputime=108.192 memavail=1612732 print_time=9.085 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 4554.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000018 bytes_write=6021 bytes_read=13553 bytes_retransmit=0 bytes_invalid=0 send_seq=327 receive_seq=327 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998341  orange_pi: temp=48.2 chamber_heater: target=0 temp=26.8 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=5.40 cputime=108.222 memavail=1613148 print_time=9.085 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 4555.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000018 bytes_write=6055 bytes_read=13729 bytes_retransmit=0 bytes_invalid=0 send_seq=330 receive_seq=330 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998341  orange_pi: temp=48.8 chamber_heater: target=0 temp=26.7 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=5.40 cputime=108.255 memavail=1608324 print_time=9.085 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 4556.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000018 bytes_write=6061 bytes_read=13895 bytes_retransmit=0 bytes_invalid=0 send_seq=331 receive_seq=331 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998340  orange_pi: temp=48.9 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=5.40 cputime=108.284 memavail=1603888 print_time=9.085 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 4557.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000018 bytes_write=6067 bytes_read=14061 bytes_retransmit=0 bytes_invalid=0 send_seq=332 receive_seq=332 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998340  orange_pi: temp=48.5 chamber_heater: target=0 temp=26.7 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=5.40 cputime=108.313 memavail=1603472 print_time=9.085 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
From https://github.com/Ferz82/github-klipper-backup
 * branch            main       -> FETCH_HEAD

Already up to date.

Stats 4558.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000018 bytes_write=6073 bytes_read=14242 bytes_retransmit=0 bytes_invalid=0 send_seq=333 receive_seq=333 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998339  orange_pi: temp=48.6 chamber_heater: target=0 temp=26.7 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=5.40 cputime=108.346 memavail=1607380 print_time=9.085 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 4559.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000018 bytes_write=6079 bytes_read=14407 bytes_retransmit=0 bytes_invalid=0 send_seq=334 receive_seq=334 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998339  orange_pi: temp=49.3 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=5.36 cputime=108.376 memavail=1605948 print_time=9.085 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 4560.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000018 bytes_write=6085 bytes_read=14573 bytes_retransmit=0 bytes_invalid=0 send_seq=335 receive_seq=335 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998337  orange_pi: temp=49.3 chamber_heater: target=0 temp=26.8 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=5.36 cputime=108.405 memavail=1606872 print_time=9.085 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 4561.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000018 bytes_write=6091 bytes_read=14754 bytes_retransmit=0 bytes_invalid=0 send_seq=336 receive_seq=336 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998337  orange_pi: temp=48.5 chamber_heater: target=0 temp=26.7 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=5.36 cputime=108.436 memavail=1613768 print_time=9.085 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 4562.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000018 bytes_write=6097 bytes_read=14901 bytes_retransmit=0 bytes_invalid=0 send_seq=337 receive_seq=337 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998337  orange_pi: temp=48.0 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=5.36 cputime=108.464 memavail=1610056 print_time=9.085 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 4563.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000018 bytes_write=6103 bytes_read=15055 bytes_retransmit=0 bytes_invalid=0 send_seq=338 receive_seq=338 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998340  orange_pi: temp=47.6 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=5.36 cputime=108.491 memavail=1611948 print_time=9.085 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 4564.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000012 bytes_write=6109 bytes_read=15238 bytes_retransmit=0 bytes_invalid=0 send_seq=339 receive_seq=339 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998340  orange_pi: temp=47.0 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=5.33 cputime=108.519 memavail=1608804 print_time=9.085 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 4565.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000012 bytes_write=6115 bytes_read=15379 bytes_retransmit=0 bytes_invalid=0 send_seq=340 receive_seq=340 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998341  orange_pi: temp=47.7 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.7 pwm=0.000 sysload=5.33 cputime=108.547 memavail=1609908 print_time=9.085 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 4566.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000012 bytes_write=6121 bytes_read=15542 bytes_retransmit=0 bytes_invalid=0 send_seq=341 receive_seq=341 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998342  orange_pi: temp=48.0 chamber_heater: target=0 temp=26.8 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=5.33 cputime=108.575 memavail=1607268 print_time=9.085 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 4567.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000012 bytes_write=6127 bytes_read=15723 bytes_retransmit=0 bytes_invalid=0 send_seq=342 receive_seq=342 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998342  orange_pi: temp=47.6 chamber_heater: target=0 temp=27.0 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=5.33 cputime=108.603 memavail=1609292 print_time=9.085 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 4568.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000012 bytes_write=6161 bytes_read=15884 bytes_retransmit=0 bytes_invalid=0 send_seq=345 receive_seq=345 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998341  orange_pi: temp=47.6 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=5.33 cputime=108.630 memavail=1610588 print_time=9.085 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 4569.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000018 bytes_write=6167 bytes_read=16065 bytes_retransmit=0 bytes_invalid=0 send_seq=346 receive_seq=346 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998341  orange_pi: temp=47.9 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=5.31 cputime=108.658 memavail=1609384 print_time=9.085 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 4570.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000018 bytes_write=6173 bytes_read=16246 bytes_retransmit=0 bytes_invalid=0 send_seq=347 receive_seq=347 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998340  orange_pi: temp=47.8 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=5.31 cputime=108.686 memavail=1611932 print_time=9.085 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 4571.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000018 bytes_write=6179 bytes_read=16397 bytes_retransmit=0 bytes_invalid=0 send_seq=348 receive_seq=348 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998339  orange_pi: temp=48.4 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=5.31 cputime=108.714 memavail=1610984 print_time=9.085 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.2 pwm=0.000
Stats 4572.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000018 bytes_write=6185 bytes_read=16563 bytes_retransmit=0 bytes_invalid=0 send_seq=349 receive_seq=349 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998338  orange_pi: temp=47.6 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=5.31 cputime=108.738 memavail=1610764 print_time=9.085 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Skipping symbolic link: printer_data/config/mainsail.cfg

[main 29d9bde] New backup from 25.12.2024 - 21:34:03
 184 files changed, 10 insertions(+), 2095435 deletions(-)
 delete mode 100644 kiauh-backups/.printer.cfg
 delete mode 160000 kiauh-backups/klipper-backups/klipper-20241223-211847
 delete mode 100644 kiauh-backups/mainsail-backups/config-20241223-211928.json
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-20241223-211928
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/.version
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/Codemirror-3ff18dfe.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/Heightmap-5e77741c.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/Heightmap-acf3d6b7.css
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/Hlsstreamer-d8e75b7a.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/Hlsstreamer-f9f189cf.css
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/Ipstreamer-cec1dfe8.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/Ipstreamer-f951d43b.css
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/JMuxerStream-b447f15b.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/JMuxerStream-baf633f9.css
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/JanusStreamer-2bd416be.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/JanusStreamer-3206d816.css
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/Mjpegstreamer-890e2bca.css
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/Mjpegstreamer-9a3b3f6d.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/MjpegstreamerAdaptive-0a9d79dc.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/MjpegstreamerAdaptive-2dd43470.css
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/Uv4lMjpeg-9b0122c0.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/Uv4lMjpeg-d8f68fca.css
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/Viewer-0d86fca9.css
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/Viewer-9f77fc9e.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/WebcamNozzleCrosshair-01a27cd3.css
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/WebcamNozzleCrosshair-ba331bbe.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/WebrtcCameraStreamer-425d8403.css
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/WebrtcCameraStreamer-d91bbb09.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/WebrtcGo2rtc-4ca7d296.css
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/WebrtcGo2rtc-9376d15e.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/WebrtcMediaMTX-32bdfb67.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/WebrtcMediaMTX-6448093e.css
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/bakedVertexAnimation-319e8ed0.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/basisTextureLoader-f509ab94.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/bonesVertex-ca4b36d1.js

 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/clipPlaneFragment-6c6cbb04.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/clipPlaneVertex-26b88f21.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/codemirror-0a1db0c7.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/color.fragment-86e85901.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/color.fragment-c3519aab.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/color.vertex-3e3347ab.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/color.vertex-5577e1ef.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/cubemapToSphericalPolynomial-06a0076b.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/cz-285b76fb.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/da-74f65808.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/dds-2add08b3.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/ddsTextureLoader-6c340abf.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/de-e0cc3b3c.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/default.fragment-4295c639.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/default.fragment-fc7aa879.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/default.vertex-2e3bfeaa.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/default.vertex-77d001b3.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/echarts-ff51454d.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/envTextureLoader-7259d5d3.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/es-0b46eb75.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/exrTextureLoader-faeb4fb8.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/fogFragment-48f82f2b.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/fr-df0a45c6.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/fxaa.fragment-5062f41c.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/fxaa.fragment-58361326.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/fxaa.vertex-deb3408d.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/fxaa.vertex-e991cc08.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/glowBlurPostProcess.fragment-2c37c04e.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/glowBlurPostProcess.fragment-4edfadd1.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/glowMapGeneration.fragment-2fd61b7f.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/glowMapGeneration.fragment-dc85f5c8.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/glowMapGeneration.vertex-0de00f3b.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/glowMapGeneration.vertex-8e38e993.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/glowMapMerge.fragment-27bfeb2c.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/glowMapMerge.fragment-ec767adc.js

Write g-code response
Traceback (most recent call last):
  File "/home/klipper/klipper/klippy/gcode.py", line 459, in _respond_raw
    os.write(self.fd, (msg+"\n").encode())
BlockingIOError: [Errno 11] Resource temporarily unavailable
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/glowMapMerge.vertex-31196b97.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/glowMapMerge.vertex-466d7ab5.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/hdrTextureLoader-3d563ec7.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/helperFunctions-0c01c668.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/hu-2e525d4f.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/index-3ac51250.css
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/index-8adf53f4.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/it-765db142.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/ja-a20a0276.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/kernelBlur.fragment-0edbecf7.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/kernelBlur.fragment-559e17a8.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/kernelBlur.vertex-2da2eba8.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/kernelBlur.vertex-8cc25273.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/kernelBlurVaryingDeclaration-7746d8d1.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/kernelBlurVaryingDeclaration-b58416ea.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/ko-0b8d811b.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/ktxTextureLoader-084f28e3.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/line.fragment-559c8c74.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/line.fragment-b61b9bf3.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/line.vertex-6f42100b.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/line.vertex-de9a2b52.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/logDepthDeclaration-a183794d.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/logDepthFragment-33516c11.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/logDepthVertex-e59f6660.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/mainUVVaryingDeclaration-731dc07b.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/mainUVVaryingDeclaration-86525af5.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/meshUboDeclaration-b8c3885a.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/morphTargetsVertex-46073846.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/morphTargetsVertex-f419c096.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/nl-6cfe03e3.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/overlayscrollbars-44d87bcf.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/overlayscrollbars-a16bc3d3.css
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/pass.fragment-24bbcbff.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/pass.fragment-c7830433.js

 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/pl-9e04c340.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/postprocess.vertex-d767e897.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/pt-880f8881.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/rgbdDecode.fragment-3bfd4350.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/rgbdDecode.fragment-e3bdf280.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/ru-9204d925.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/se-e0d42c00.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/tgaTextureLoader-8ab0f139.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/tr-93c7599c.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/uk-217f44de.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/vertexColorMixing-14f576ae.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/vertexColorMixing-60da7c74.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/virtual_pwa-register-578de7d2.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/vuetify-950d1cb0.css
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/vuetify-f4a6879d.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/workbox-window.prod.es5-ed7f7eb3.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/zh-49ed4723.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/assets/zh_TW-b93d3b6b.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/config.json
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/css/themes/vzbot.css
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/fonts/roboto-black.woff2
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/fonts/roboto-bold.woff2
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/fonts/roboto-light.woff2
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/fonts/roboto-medium.woff2
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/fonts/roboto-regular.woff2
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/fonts/roboto-thin.woff2
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/fonts/robotoMono-regular.woff
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/img/icons/apple-touch-icon-180x180.png
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/img/icons/favicon-16x16.png
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/img/icons/favicon-32x32.png
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/img/icons/icon-192-maskable.png
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/img/icons/icon-512-maskable.png
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/img/icons/mstile-150x150.png
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/img/icons/safari-pinned-tab.svg
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/img/klipper.svg
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/img/logo.svg
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/img/sidebar-background-light.svg

 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/img/sidebar-background.svg
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/img/themes/sidebarBackground-vzbot.png
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/img/themes/sidebarLogo-btt.svg
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/img/themes/sidebarLogo-klipper.svg
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/img/themes/sidebarLogo-ldo.svg
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/img/themes/sidebarLogo-multec.svg
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/img/themes/sidebarLogo-prusa.svg
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/img/themes/sidebarLogo-voron.svg
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/img/themes/sidebarLogo-vzbot.svg
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/img/themes/sidebarLogo-yumi.svg
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/index.html
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/manifest.webmanifest
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/release_info.json
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/sw.js
 delete mode 100644 kiauh-backups/mainsail-backups/mainsail-v2.13.1-20241223-211928/workbox-78627b31.js
 delete mode 160000 kiauh-backups/mainsail-config-backups/mainsail-config-20241223-211935
 delete mode 160000 kiauh-backups/moonraker-backups/moonraker-20241223-211904
 delete mode 100644 kiauh-backups/moonraker-db-backups/database-printer_data-20241223-211922/moonraker-sql.db
 delete mode 100644 kiauh-backups/printer-data-backups/printer_data-20241223-211914/macros.cfg
 delete mode 100644 kiauh-backups/printer-data-backups/printer_data-20241223-211914/mainsail.cfg
 delete mode 100644 kiauh-backups/printer-data-backups/printer_data-20241223-211914/moonraker.conf
 delete mode 100644 kiauh-backups/printer-data-backups/printer_data-20241223-211914/printer.cfg
 delete mode 100644 kiauh-backups/printer-data-backups/printer_data-20241223-211914/shell_command.cfg
 delete mode 100644 kiauh-backups/printer-data-backups/printer_data-20241223-211914/timelapse.cfg
 delete mode 100644 printer_data/.moonraker.uuid
 delete mode 100644 printer_data/config/config-20241224-025036.zip
 delete mode 100644 printer_data/database/moonraker-sql.db
 delete mode 100644 "printer_data/gcodes/.thumbs/\320\232\321\203\320\261_0.2mm_PETG_Generic Klipper Printer_116d18h27m-32x32.png"
 delete mode 100644 "printer_data/gcodes/.thumbs/\320\232\321\203\320\261_0.2mm_PETG_Generic Klipper Printer_116d18h27m-48x48.png"
 delete mode 100644 "printer_data/gcodes/.thumbs/\320\232\321\203\320\261_0.2mm_PETG_Generic Klipper Printer_116d18h27m-900x600.png"
 delete mode 100644 "printer_data/gcodes/\320\232\321\203\320\261_0.2mm_PETG_Generic Klipper Printer_116d18h27m.gcode"
 delete mode 100644 printer_data/logs/klippy.log
 delete mode 100644 printer_data/logs/klippy.log.2024-12-23
 delete mode 100644 printer_data/logs/moonraker.log
 delete mode 100644 printer_data/logs/moonraker.log.2024-12-23
 delete mode 100644 printer_data/misc/usb.ids
 delete mode 100644 printer_data/moonraker.asvc
 delete mode 100644 printer_data/systemd/klipper.env
 delete mode 100644 printer_data/systemd/moonraker.env

From https://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@github.com/Ferz82/github-klipper-backup.git

To https://github.com/Ferz82/github-klipper-backup.git
   f355664..29d9bde  main -> main

Branch 'main' set up to track remote branch 'main' from 'origin'.

Command {update_git_script} finished

Running Command {update_git_script}...:
[1;93m●[0m Checking for installed dependencies /[K[1;92m●[0m Checking for installed dependencies [1;92mDone![0m


Klipper-Backup is up to date


From https://github.com/Ferz82/github-klipper-backup
 * branch            main       -> FETCH_HEAD

Already up to date.

Skipping symbolic link: printer_data/config/mainsail.cfg

Command {update_git_script} timed out
Stats 5789.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=16761 bytes_read=222718 bytes_retransmit=0 bytes_invalid=0 send_seq=1838 receive_seq=1837 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998333  orange_pi: temp=46.3 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=3.22 cputime=134.484 memavail=1697740 print_time=1286.645 buffer_time=0.905 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Attempting MCU 'mcu' reset command
webhooks client 281473325217296: Disconnected
Internal error on command:"FIRMWARE_RESTART"
Traceback (most recent call last):
  File "/home/klipper/klipper/klippy/gcode.py", line 212, in _process_commands
    handler(gcmd)
  File "/home/klipper/klipper/klippy/gcode.py", line 140, in <lambda>
    func = lambda params: origfunc(self._get_extended_params(params))
  File "/home/klipper/klipper/klippy/gcode.py", line 346, in cmd_FIRMWARE_RESTART
    self.request_restart('firmware_restart')
  File "/home/klipper/klipper/klippy/gcode.py", line 339, in request_restart
    toolhead.wait_moves()
  File "/home/klipper/klipper/klippy/toolhead.py", line 502, in wait_moves
    eventtime = self.reactor.pause(eventtime + 0.100)
  File "/home/klipper/klipper/klippy/reactor.py", line 214, in pause
    return self._g_dispatch.switch(waketime)
greenlet.GreenletExit
Transition to shutdown state: Internal error on command:"FIRMWARE_RESTART"
Dumping gcode input 0 blocks
Exception during shutdown handler
Traceback (most recent call last):
  File "/home/klipper/klipper/klippy/gcode.py", line 212, in _process_commands
    handler(gcmd)
  File "/home/klipper/klipper/klippy/gcode.py", line 140, in <lambda>
    func = lambda params: origfunc(self._get_extended_params(params))
  File "/home/klipper/klipper/klippy/gcode.py", line 346, in cmd_FIRMWARE_RESTART
    self.request_restart('firmware_restart')
  File "/home/klipper/klipper/klippy/gcode.py", line 339, in request_restart
    toolhead.wait_moves()
  File "/home/klipper/klipper/klippy/toolhead.py", line 502, in wait_moves
    eventtime = self.reactor.pause(eventtime + 0.100)
  File "/home/klipper/klipper/klippy/reactor.py", line 214, in pause
    return self._g_dispatch.switch(waketime)
greenlet.GreenletExit

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/klipper/klipper/klippy/klippy.py", line 211, in invoke_shutdown
    cb()
  File "/home/klipper/klipper/klippy/mcu.py", line 912, in _shutdown
    self._emergency_stop_cmd.send()
  File "/home/klipper/klipper/klippy/mcu.py", line 93, in send
    self._serial.raw_send(cmd, minclock, reqclock, self._cmd_queue)
  File "/home/klipper/klipper/klippy/serialhdl.py", line 243, in raw_send
    self.ffi_lib.serialqueue_send(self.serialqueue, cmd_queue,
TypeError: initializer for ctype 'struct serialqueue *' must be a cdata pointer, not NoneType
gcode state: absolute_coord=True absolute_extrude=True base_position=[0.0, 0.0, 0.0, 0.0] last_position=[0.0, 0.0, 0.0, 0.0] homing_position=[0.0, 0.0, 0.0, 0.0] speed_factor=0.016666666666666666 extrude_factor=1.0 speed=25.0
Reactor garbage collection: (5735.751939317, 0.0, 0.0)
Internal error on command:"FIRMWARE_RESTART"
Once the underlying issue is corrected, use the
"FIRMWARE_RESTART" command to reset the firmware, reload the
config, and restart the host software.
Printer is shutdown

Internal error on command:"FIRMWARE_RESTART"
Restarting printer
Start printer at Wed Dec 25 21:53:28 2024 (1735152808.2 5791.2)
===== Config file =====
[virtual_sdcard]
path = /home/klipper/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[pause_resume]

[display_status]

[respond]

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = BASE_CANCEL_PRINT
gcode = 
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	TURN_OFF_HEATERS
	M107
	G91
	G1 E-{E} F1500
	G90
	CLEAR_PAUSE
	SDCARD_RESET_FILE
	BASE_CANCEL_PRINT
	PARK

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = BASE_PAUSE
gcode = 
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	SAVE_GCODE_STATE NAME=PAUSE_STATE
	BASE_PAUSE
	G91
	G1 E-{E} F1500
	G90
	PARK

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = BASE_RESUME
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	G91
	G1 E{E} F1500
	G90
	RESTORE_GCODE_STATE NAME=PAUSE_STATE MOVE=1
	BASE_RESUME

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[gcode_macro _CLIENT_LINEAR_MOVE]
description = Linear move with save and restore of the gcode state
gcode = 
	{% set x_move = "X" ~ params.X if params.X is defined else "" %}
	{% set y_move = "Y" ~ params.Y if params.Y is defined else "" %}
	{% set z_move = "Z" ~ params.Z if params.Z is defined else "" %}
	{% set e_move = "E" ~ params.E if params.E is defined else "" %}
	{% set rate = "F" ~ params.F if params.F is defined else "" %}
	{% set ABSOLUTE = params.ABSOLUTE | default(0) | int != 0 %}
	{% set ABSOLUTE_E = params.ABSOLUTE_E | default(0) | int != 0 %}
	SAVE_GCODE_STATE NAME=_client_movement
	{% if x_move or y_move or z_move %}
	G9{ 0 if ABSOLUTE else 1 }
	{% endif %}
	{% if e_move %}
	M8{ 2 if ABSOLUTE_E else 3 }
	{% endif %}
	G1 { x_move } { y_move } { z_move } { e_move } { rate }
	RESTORE_GCODE_STATE NAME=_client_movement

[gcode_macro Backup_on_GitHub]
gcode = 
	{% set message = params.MESSAGE|default() %}
	{% if message %}
	RUN_SHELL_COMMAND CMD=update_git_script_message PARAMS="'{params.MESSAGE}'"
	{% else %}
	RUN_SHELL_COMMAND CMD=update_git_script
	{% endif %}

[gcode_macro list_sensors]
gcode = 
	{ action_respond_info(printer.heaters.available_heaters | join(', ')) }
	{ action_respond_info(printer.heaters.available_sensors | join(', ')) }

[gcode_macro Power_OFF]
gcode = SET_PIN PIN=Power VALUE=0

[gcode_macro _POWER_OFF_PRINTER]
gcode = SET_PIN PIN=Power VALUE=0

[gcode_macro ACTIVATE_POWER_OFF]
gcode = 
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK_ACT DURATION=60

[gcode_macro DEACTIVATE_POWER_OFF]
gcode = 
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK_ACT DURATION=0

[delayed_gcode POWER_OFF_PRINTER_CHECK_ACT]
gcode = 
	{% if printer.idle_timeout.state == "Idle" or printer.idle_timeout.state == "Ready" %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=30
	{% else %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK_ACT DURATION=60
	{% endif %}

[delayed_gcode POWER_OFF_PRINTER_CHECK]
gcode = 
	{% if printer.idle_timeout.state == "Idle" or printer.idle_timeout.state == "Ready" %}
	{% if printer.extruder.temperature < 50.0 and printer.heater_bed.temperature < 50.0 %}
	{% if printer.extruder.target == 0.0 and printer.heater_bed.target == 0.0 %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=0
	_POWER_OFF_PRINTER
	{% else %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=2
	{% endif %}
	{% else %}
	{% if printer.idle_timeout.state == "Printing" %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=0
	{% else %}
	{% if printer.extruder.target == 0.0 and printer.heater_bed.target == 0.0 %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=2
	{% else %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=0
	{% endif %}
	{% endif %}
	{% endif %}
	{% endif %}

[gcode_macro M141]
gcode = SET_HEATER_TEMPERATURE HEATER=chamber_heater TARGET={params.S|default(0)}

[gcode_macro M80]
gcode = SET_PIN PIN=Power  VALUE=1

[gcode_macro M81]
gcode = 
	
	SET_PIN PIN=Power VALUE=0

[gcode_macro M486]
gcode = 
	
	
	
	
	
	
	
	
	
	
	
	{% if 'exclude_object' not in printer %}
	{action_raise_error("[exclude_object] is not enabled")}
	{% endif %}
	
	{% if 'T' in params %}
	EXCLUDE_OBJECT RESET=1
	
	{% for i in range(params.T | int) %}
	EXCLUDE_OBJECT_DEFINE NAME={i}
	{% endfor %}
	{% endif %}
	
	{% if 'C' in params %}
	EXCLUDE_OBJECT CURRENT=1
	{% endif %}
	
	{% if 'P' in params %}
	EXCLUDE_OBJECT NAME={params.P}
	{% endif %}
	
	{% if 'S' in params %}
	{% if params.S == '-1' %}
	{% if printer.exclude_object.current_object %}
	EXCLUDE_OBJECT_END NAME={printer.exclude_object.current_object}
	{% endif %}
	{% else %}
	EXCLUDE_OBJECT_START NAME={params.S}
	{% endif %}
	{% endif %}
	
	{% if 'U' in params %}
	EXCLUDE_OBJECT RESET=1 NAME={params.U}
	{% endif %}

[gcode_macro M190]
rename_existing = M190.1
gcode = 
	{% if printer["gcode_macro status_heating"] != null %}
	status_heating
	{% endif %}
	M190.1 { rawparams }
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro _CHOME]
gcode = 
	{% if printer["gcode_macro status_homing"] != null %}
	status_homing
	{% endif %}
	{% if printer.toolhead.homed_axes != "xyz" %}
	G28
	{% endif %}
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro M109]
rename_existing = M109.1
gcode = 
	{% if printer["gcode_macro status_heating"] != null %}
	status_heating
	{% endif %}
	M109.1 { rawparams }
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro _MOVE_AWAY]
gcode = 
	{% set th = printer.toolhead %}
	{% set x_safe = th.position.x + 20 * (1 if th.axis_maximum.x - th.position.x > 20 else -1) %}
	{% set y_safe = th.position.y + 20 * (1 if th.axis_maximum.y - th.position.y > 20 else -1) %}
	{% set z_safe = [th.position.z + 2, th.axis_maximum.z]|min %}
	
	G90
	G0 X{x_safe} Y{y_safe} Z{z_safe} F20000

[gcode_macro PARK_CENTER_REAR]
gcode = 
	{% if printer["gcode_macro status_busy"] != null %}
	status_busy
	{% endif %}
	{% set th = printer.toolhead %}
	{% set x_safe = th.position.x + 20 * (1 if th.axis_maximum.x - th.position.x > 20 else -1) %}
	{% set y_safe = th.position.y + 20 * (1 if th.axis_maximum.y - th.position.y > 20 else -1) %}
	
	G0 X{th.axis_maximum.x//2} Y{th.axis_maximum.y - 2} F3600
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro START_PRINT]
variable_retract = 15
gcode = 
	{% set chamber_temp = params.CHAMBER_TEMP|default(0)|float %}
	{% set extruder_temp = params.EXTRUDER_TEMP|default(210)|float %}
	{% set bed_temp = params.BED_TEMP|default(60)|float %}
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	CLEAR_PAUSE
	G28
	Smart_Park
	M220 S100
	M221 S100
	SET_HEATER_TEMPERATURE HEATER=chamber_heater TARGET={chamber_temp}
	SET_HEATER_TEMPERATURE HEATER=heater_bed TARGET={bed_temp}
	TEMPERATURE_WAIT SENSOR=heater_bed MINIMUM={bed_temp * 0.75}
	SET_HEATER_TEMPERATURE HEATER=extruder TARGET={extruder_temp}
	G90
	M82
	TEMPERATURE_WAIT SENSOR=heater_bed MINIMUM={bed_temp}
	TEMPERATURE_WAIT SENSOR=extruder MINIMUM={extruder_temp}
	
	G1 E-15 F3600
	
	G28
	BED_MESH_CALIBRATE
	PRIME_LINE

[gcode_macro pid_soplo]
gcode = 
	PID_CALIBRATE HEATER=extruder TARGET=250

[gcode_macro pid_bed]
gcode = 
	PID_CALIBRATE HEATER=heater_bed TARGET=105

[gcode_macro BED]
gcode = 
	PROBE_CALIBRATE

[gcode_macro END_PRINT]
gcode = 
	
	{% set max_x = printer.configfile.config["stepper_x"]["position_max"]|float %}
	{% set max_y = printer.configfile.config["stepper_y"]["position_max"]|float %}
	{% set max_z = printer.configfile.config["stepper_z"]["position_max"]|float %}
	
	
	{% if printer.toolhead.position.x < (max_x - 20) %}
	{% set x_safe = 20.0 %}
	{% else %}
	{% set x_safe = -20.0 %}
	{% endif %}
	
	{% if printer.toolhead.position.y < (max_y - 20) %}
	{% set y_safe = 20.0 %}
	{% else %}
	{% set y_safe = -20.0 %}
	{% endif %}
	
	{% if printer.toolhead.position.z < (max_z - 2) %}
	{% set z_safe = 2.0 %}
	{% else %}
	{% set z_safe = max_z - printer.toolhead.position.z %}
	{% endif %}
	
	
	M400
	G92 E0
	G1 E-15 F3600
	G91
	G0 Z{z_safe} F3600
	G0 X{x_safe} Y{y_safe} F20000
	
	
	M104 S0
	M104 S0
	M140 S0
	M106 S0
	G90
	G0 X{max_x / 2} Y{max_y} F3600
	
	SONG_CRAB_RAVE
	
	
	
	M117 Finished!
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=30

[gcode_macro M300]
gcode = 
	
	{% set S = params.S|default(1000)|int %}
	
	{% set P = params.P|default(100)|int %}
	
	
	{% set V = params.V|default(99)|int %}
	SET_PIN PIN=beeper VALUE={0.1 * (V / 100) if S > 0 else 1} CYCLE_TIME={ 1.0 / S if S > 0 else 1 }
	G4 P{P}
	SET_PIN PIN=beeper VALUE=0 CYCLE_TIME={ 0.001 }
description = 
	"Plays a beep sound.
	@param {int} [S=1000] - Frequency in Hz
	@param {int} [P=100] - Duration in ms
	@param {int} [V=99] - Volume in percent"

[gcode_macro PRIME_LINE]
gcode = 
	{% set feedrate = params.F|default(10)|float * 60 %}
	{% set length = 100.0 %}
	{% set width = printer.configfile.settings.extruder.nozzle_diameter|float %}
	{% set height = ( (width / 0.04)|int - (width / 0.04 / 4)|int )|float * 0.04 %}
	
	{% set extrude = length * width * height * 1.5 %}
	SAVE_GCODE_STATE NAME=PRIME_LINE_STATE
	SET_IDLE_TIMEOUT TIMEOUT=7200
	{% if 'Y' in params %}
	{% set x_start = 1.0 %}
	{% set y_start = (printer.toolhead.axis_maximum.y|float - 100) / 2 %}
	G0 X{x_start} Y{y_start} F5000
	G0 Z{height} F1500
	G91
	
	G1 E8 F300
	
	
	G1 Y100 E{extrude} F{feedrate}
	G0 X{width} F5000
	G1 Y-100 E{extrude} F{feedrate}
	{% else %}
	{% set x_start = (printer.toolhead.axis_maximum.x|float - 100) / 2 %}
	{% set y_start = 1.0 %}
	G0 X{x_start} Y{y_start} F5000
	G0 Z{height} F1500
	G91
	
	G1 E8 F300
	
	
	G1 X100 E{extrude} F{feedrate}
	G0 Y{width} F5000
	G1 X-100 E{extrude} F{feedrate}
	{% endif %}
	RESTORE_GCODE_STATE NAME=PRIME_LINE_STATE

[gcode_macro VINT]
gcode = 
	SCREWS_TILT_CALCULATE

[gcode_macro LOW_TEMP_CHECK]
gcode = 
	{% set extruder_temp = params.T|default(240)|float %}
	{% if printer.extruder.target > extruder_temp %}
	{% set extruder_temp = printer.extruder.target %}
	{% endif %}
	{% if printer.extruder.temperature < extruder_temp %}
	M118 Heating to {extruder_temp}
	SET_HEATER_TEMPERATURE HEATER=extruder TARGET={extruder_temp}
	TEMPERATURE_WAIT SENSOR=extruder MINIMUM={extruder_temp}
	{% endif %}

[gcode_macro M76]
gcode = 
	PAUSE

[gcode_macro M601]
gcode = 
	PAUSE

[gcode_macro G27]
gcode = 
	PARK

[gcode_macro M125]
gcode = 
	PARK

[gcode_macro M600]
gcode = 
	PAUSE

[gcode_macro M701]
gcode = 
	FILAMENT_LOAD

[gcode_macro M702]
gcode = 
	FILAMENT_UNLOAD

[gcode_macro M500]
gcode = 
	SAVE_CONFIG

[gcode_macro PARK]
gcode = 
	{% set x_park = params.X|default(0)|float %}
	{% set y_park = params.Y|default(0)|float %}
	{% set z_park = params.Z|default(10)|float + printer.toolhead.position.z|float %}
	{% set x_max = printer.toolhead.axis_maximum.x|float %}
	{% set y_max = printer.toolhead.axis_maximum.y|float %}
	{% set z_max = printer.toolhead.axis_maximum.z|float %}
	{% if x_park > x_max %}
	{% set x_park = x_max %}
	{% endif %}
	{% if y_park > y_max %}
	{% set y_park = y_max %}
	{% endif %}
	{% if z_park > z_max %}
	{% set z_park = z_max %}
	{% endif %}
	SAVE_GCODE_STATE NAME=PARK_STATE
	G90
	G1 Z{z_park} F1500
	G1 X{x_park} Y{y_park} F5000
	RESTORE_GCODE_STATE name=PARK_STATE

[gcode_macro START_DRYER]
description = Start the heated bed filament dryer.
gcode = 
	{% set ChamberTemperature = params.CHAMBER | default(65.0) | float %}
	{% set BedTemperature = params.TEMPERATURE | default(0.0) | float %}
	{% set DryTime = params.TIME | default(14400) | int %}
	M140 S{BedTemperature}
	M141 S{ChamberTemperature}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=time_remaining VALUE={DryTime}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=bed_temperature VALUE={BedTemperature}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=chamber_temperature VALUE={ChamberTemperature}
	UPDATE_DELAYED_GCODE ID=DRYER_TIMER DURATION=1

[gcode_macro STOP_DRYER]
gcode = 
	M140 S0
	M141 S0
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=time_remaining VALUE=0
	UPDATE_DELAYED_GCODE ID=DRYER_TIMER DURATION=0
	M117 Drying Stopped

[gcode_macro DRYER_STATUS]
variable_time_remaining = 0
variable_bed_temperature = 0
variable_chamber_temperature = 0
gcode = 
	{% if time_remaining > 0 %}
	M140 S{bed_temperature}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=time_remaining VALUE={time_remaining - 1}
	M117 Drying {time_remaining}
	{% else %}
	STOP_DRYER
	{% endif %}

[delayed_gcode DRYER_TIMER]
gcode = 
	UPDATE_DELAYED_GCODE ID=DRYER_TIMER DURATION=1
	DRYER_STATUS

[gcode_macro DRY_tpu]
gcode = 
	START_DRYER TEMPERATURE=0 CHAMBER=50 TIME=18000

[gcode_macro DRY_PETG]
gcode = 
	START_DRYER TEMPERATURE=0  CHAMBER=65 TIME=18000

[gcode_macro DRY_ABS]
gcode = 
	{% set S = params.S|default(0.0)|float %}
	SET_PIN PIN=Laser VALUE={S / 255.0}

[gcode_macro M4]
gcode = 
	{% set S = params.S|default(0.0)|float %}
	SET_PIN PIN=Laser VALUE={S / 255.0}

[gcode_macro M5]
gcode = 
	SET_PIN PIN=Laser VALUE=0

[menu __main __control __toolonoff]
type = input
enable = {'pwm_tool Laser' in printer}
name = Fan: {'ON ' if menu.input else 'OFF'}
input = {printer['pwm_tool Laser'].value}
input_min = 0
input_max = 1
input_step = 1
gcode = 
	M3 S{255 if menu.input else 0}

[menu __main __control __toolspeed]
type = input
enable = {'pwm_tool Laser' in printer}
name = Laser speed: {'%3d' % (menu.input*100)}%
input = {printer['pwm_tool Laser'].value}
input_min = 0
input_max = 1
input_step = 0.01
gcode = 
	M3 S{'%d' % (menu.input*255)}

[gcode_macro NOTE]
description = 
	"Plays a specified note for a specified duration
	@param {string} [N=C5] - Note to play
	@param {int} [D=500] - Duration of note. There are currently some Klipper limitations to how short a note can be.
	@param {int} [V=99] - Volume in percent
	@param {bool} [S=true] - Whether or not to stop the note after duration"
gcode = 
	{% set notes = {
	'C0': 16.35,   'CS0': 17.32,   'D0': 18.35,   'DS0': 19.45,   'E0': 20.60,   'F0': 21.83,   'FS0': 23.12,   'G0': 24.50,   'GS0': 25.96,   'A0': 27.50,   'AS0': 29.14,   'B0': 30.87,
	'C1': 32.70,   'CS1': 34.65,   'D1': 36.71,   'DS1': 38.89,   'E1': 41.20,   'F1': 43.65,   'FS1': 46.25,   'G1': 49.00,   'GS1': 51.91,   'A1': 55.00,   'AS1': 58.27,   'B1': 61.74,
	'C2': 65.41,   'CS2': 69.30,   'D2': 73.42,   'DS2': 77.78,   'E2': 82.41,   'F2': 87.31,   'FS2': 92.50,   'G2': 98.00,   'GS2': 103.83,  'A2': 110.00,  'AS2': 116.54,  'B2': 123.47,
	'C3': 130.81,  'CS3': 138.59,  'D3': 146.83,  'DS3': 155.56,  'E3': 164.81,  'F3': 174.61,  'FS3': 185.00,  'G3': 196.00,  'GS3': 207.65,  'A3': 220.00,  'AS3': 233.08,  'B3': 246.94,
	'C4': 261.63,  'CS4': 277.18,  'D4': 293.66,  'DS4': 311.13,  'E4': 329.63,  'F4': 349.23,  'FS4': 369.99,  'G4': 392.00,  'GS4': 415.30,  'A4': 440.00,  'AS4': 466.16,  'B4': 493.88,
	'C5': 523.25,  'CS5': 554.37,  'D5': 587.33,  'DS5': 622.25,  'E5': 659.26,  'F5': 698.46,  'FS5': 739.99,  'G5': 783.99,  'GS5': 830.61,  'A5': 880.00,  'AS5': 932.33,  'B5': 987.77,
	'C6': 1046.50, 'CS6': 1108.73, 'D6': 1174.66, 'DS6': 1244.51, 'E6': 1318.51, 'F6': 1396.91, 'FS6': 1479.98, 'G6': 1567.98, 'GS6': 1661.22, 'A6': 1760.00, 'AS6': 1864.66, 'B6': 1975.53,
	'C7': 2093.00, 'CS7': 2217.46, 'D7': 2349.32, 'DS7': 2489.02, 'E7': 2637.02, 'F7': 2793.83, 'FS7': 2959.96, 'G7': 3135.96, 'GS7': 3322.44, 'A7': 3520.00, 'AS7': 3729.31, 'B7': 3951.07,
	'C8': 4186.01, 'CS8': 4434.92, 'D8': 4698.64, 'DS8': 4978.03, 'E8': 5274.04, 'F8': 5587.65, 'FS8': 5919.91, 'G8': 6271.93, 'GS8': 6644.88, 'A8': 7040.00, 'AS8': 7458.62, 'B8': 7902.13,
	} %}
	
	{% set note = params.N|default('C5')|string %}
	
	{% set dur = params.D|default(500)|int %}
	
	
	{% set volume = params.V|default(99)|int %}
	
	{% set stop = params.S|default('true')|string %}
	
	{% set freq = notes[note] %}
	
	SET_PIN PIN=beeper VALUE={0.1 * (volume / 100) if volume > 0 else 1} CYCLE_TIME={ 1.0 / freq }
	G4 P{dur}
	{% if stop|lower == 'true' %}
	SET_PIN PIN=beeper VALUE=0 CYCLE_TIME={ 0.001 }
	{% endif %}

[gcode_macro TONE_GEN]
description = "Used for the tone generator menu"
variable_tone_freq = 0.001093
gcode = 
	M117 {printer["gcode_macro TONE_GEN"].tone_freq}nothz

[gcode_macro SONG_STAR_WARS_MAIN_THEME]
description = "Plays the Star Wars main theme"
gcode = 
	NOTE N=D4 D=133
	NOTE N=D4 D=133
	NOTE N=D4 D=133
	NOTE N=G4 D=1000
	NOTE N=D5 D=1000
	
	NOTE N=C5 D=133
	NOTE N=B4 D=133
	NOTE N=A4 D=133
	NOTE N=G5 D=1000
	NOTE N=D5 D=500
	
	NOTE N=C5 D=133
	NOTE N=B4 D=133
	NOTE N=A4 D=133
	NOTE N=G5 D=1000
	NOTE N=D5 D=500
	
	NOTE N=C5 D=133
	NOTE N=B4 D=133
	NOTE N=C5 D=133
	NOTE N=A4 D=1000

[gcode_macro SONG_CRAB_RAVE]
description = "Plays Crab Rave"
gcode = 
	NOTE N=D6 D=150 V=30 S=1
	NOTE N=AS6 D=150 V=30 S=1
	NOTE N=G6 D=150 V=30 S=1
	NOTE N=G6 D=150 V=30 S=0
	NOTE N=D6 D=150 V=30 S=1
	NOTE N=D6 D=150 V=30 S=0
	NOTE N=A6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=0
	NOTE N=D6 D=150 V=30 S=1
	NOTE N=D6 D=150 V=30 S=0
	NOTE N=A6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=0
	NOTE N=C6 D=150 V=30 S=1
	NOTE N=C6 D=150 V=30 S=1
	NOTE N=E6 D=150 V=30 S=1
	NOTE N=E6 D=150 V=30 S=0
	NOTE N=F6 D=150 V=30 S=1
	SET_PIN PIN=beeper VALUE=0

[gcode_macro one]
description = "one"
gcode = 
	NOTE N=C6 D=600 V=30 S=1
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=G5 D=400 V=30 S=1
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=E6 D=400 V=30 S=1
	G4 P150
	NOTE N=G6 D=180 V=30 S=0
	NOTE N=F6 D=180 V=30 S=0
	NOTE N=E6 D=180 V=30 S=0
	NOTE N=D6 D=180 V=30 S=1
	NOTE N=C6 D=600 V=30 S=1
	
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=G5 D=400 V=30 S=1
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=C6 D=600 V=30 S=1
	SET_PIN PIN=beeper VALUE=0

[gcode_macro SONG_BOOMER]
description = "BOOMER"
gcode = 
	M300 P207 S659
	M300 P207 S784
	M300 P207 S494
	M300 P207 S494
	M300 P207 S392
	M300 P207 S494
	M300 P207 S494
	M300 P207 S330
	M300 P207 S784
	M300 P207 S659
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S988
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S659
	M300 P207 S784
	M300 P207 S494
	M300 P207 S494
	M300 P207 S392
	M300 P207 S494
	M300 P207 S494
	M300 P207 S330
	M300 P207 S784
	M300 P207 S659
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S988
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S659
	M300 P207 S784
	M300 P207 S494
	M300 P207 S494
	M300 P207 S392
	M300 P207 S494
	M300 P207 S494
	M300 P207 S330
	M300 P207 S784
	M300 P207 S659
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S988
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330

[gcode_macro GET_TIMELAPSE_SETUP]
description = Print the Timelapse setup
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% set output_txt = ["Timelapse Setup:"] %}
	{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}
	{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}
	{% if tl.park.enable %}
	{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}
	{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}
	{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}
	{% endif %}
	{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}
	{% if not tl.extruder.fw_retract %}
	{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}
	{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}
	{% endif %}
	{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}
	{action_respond_info(output_txt|join("\n"))}

[gcode_macro _SET_TIMELAPSE_SETUP]
description = Set user parameters for timelapse
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	
	{% set min = printer.toolhead.axis_minimum %}
	{% set max = printer.toolhead.axis_maximum %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	{% set park = {'min'   : {'x': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),
	'y': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},
	'max'   : {'x': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),
	'y': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},
	'center': {'x': (max.x-(max.x-min.x)/2)|round(3),
	'y': (max.y-(max.y-min.y)/2)|round(3)}} %}
	
	{% if params.ENABLE %}
	{% if params.ENABLE|lower is in ['true', 'false'] %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == 'true' else False}
	{% else %}
	{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.VERBOSE %}
	{% if params.VERBOSE|lower is in ['true', 'false'] %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == 'true' else False}
	{% else %}
	{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_X %}
	{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}
	{% set _dummy = tl.park.custom.update({'x':params.CUSTOM_POS_X|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_Y %}
	{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}
	{% set _dummy = tl.park.custom.update({'y':params.CUSTOM_POS_Y|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_DZ %}
	{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}
	{% set _dummy = tl.park.custom.update({'dz':params.CUSTOM_POS_DZ|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}
	{% endif %}
	{% endif %}
	{% if params.PARK_ENABLE %}
	{% if params.PARK_ENABLE|lower is in ['true', 'false'] %}
	{% set _dummy = tl.park.update({'enable':True if params.PARK_ENABLE|lower == 'true' else False}) %}
	{% else %}
	{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.PARK_POS %}
	{% if params.PARK_POS|lower is in ['center','front_left','front_right','back_left','back_right','custom','x_only','y_only'] %}
	{% set dic = {'center'      : {'x': park.center.x   , 'y': park.center.y   , 'dz': 1                },
	'front_left'  : {'x': park.min.x      , 'y': park.min.y      , 'dz': 0                },
	'front_right' : {'x': park.max.x      , 'y': park.min.y      , 'dz': 0                },
	'back_left'   : {'x': park.min.x      , 'y': park.max.y      , 'dz': 0                },
	'back_right'  : {'x': park.max.x      , 'y': park.max.y      , 'dz': 0                },
	'custom'      : {'x': tl.park.custom.x, 'y': tl.park.custom.y, 'dz': tl.park.custom.dz},
	'x_only'      : {'x': tl.park.custom.x, 'y': 'none'          , 'dz': tl.park.custom.dz},
	'y_only'      : {'x': 'none'          , 'y': tl.park.custom.y, 'dz': tl.park.custom.dz}} %}
	{% set _dummy = tl.park.update({'pos':params.PARK_POS|lower}) %}
	{% set _dummy = tl.park.update({'coord':dic[tl.park.pos]}) %}
	{% else %}
	{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"
	% params.PARK_POS|upper)}
	{% endif %}
	{% endif %}
	{% if params.PARK_TIME %}
	{% if params.PARK_TIME|float >= 0.0 %}
	{% set _dummy = tl.park.update({'time':params.PARK_TIME|float|round(3)}) %}
	{% else %}
	{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"
	{% if params.TRAVEL_SPEED %}
	{% if params.TRAVEL_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'travel':params.TRAVEL_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}
	{% endif %}
	{% endif %}
	{% if params.RETRACT_SPEED %}
	{% if params.RETRACT_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'retract':params.RETRACT_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}
	{% endif %}
	{% endif %}
	{% if params.EXTRUDE_SPEED %}
	{% if params.EXTRUDE_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'extrude':params.EXTRUDE_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"
	{% if params.EXTRUDE_DISTANCE %}
	{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}
	{% set _dummy = tl.extruder.update({'extrude':params.EXTRUDE_DISTANCE|float|round(3)}) %}
	{% else %}
	{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}
	{% endif %}
	{% endif %}
	{% if params.RETRACT_DISTANCE %}
	{% if params.RETRACT_DISTANCE|float >= 0.0 %}
	{% set _dummy = tl.extruder.update({'retract':params.RETRACT_DISTANCE|float|round(3)}) %}
	{% else %}
	{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}
	{% endif %}
	{% endif %}
	{% if params.FW_RETRACT %}
	{% if params.FW_RETRACT|lower is in ['true', 'false'] %}
	{% if 'firmware_retraction' in printer.configfile.settings %}
	{% set _dummy = tl.extruder.update({'fw_retract': True if params.FW_RETRACT|lower == 'true' else False}) %}
	{% else %}
	{% set _dummy = tl.extruder.update({'fw_retract':False}) %}
	{% if params.FW_RETRACT|capitalize == 'True' %}
	{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}
	{% endif %}
	{% endif %}
	{% else %}
	{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"
	{% if printer.configfile.settings['gcode_macro pause'] is defined %}
	{% set _dummy = tl.macro.update({'pause': printer.configfile.settings['gcode_macro pause'].rename_existing}) %}
	{% endif %}
	{% if printer.configfile.settings['gcode_macro resume'] is defined %}
	{% set _dummy = tl.macro.update({'resume': printer.configfile.settings['gcode_macro resume'].rename_existing}) %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"

[gcode_macro TIMELAPSE_TAKE_FRAME]
description = Take Timelapse shoot
variable_enable = False
variable_takingframe = False
variable_park = {'enable': False,
	'pos'   : 'center',
	'time'  : 0.1,
	'custom': {'x': 0, 'y': 0, 'dz': 0},
	'coord' : {'x': 0, 'y': 0, 'dz': 0}}
variable_extruder = {'fw_retract': False,
	'retract': 1.0,
	'extrude': 1.0}
variable_speed = {'travel': 100,
	'retract': 15,
	'extrude': 15}
variable_verbose = True
variable_restore = {'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}
variable_macro = {'pause': 'PAUSE', 'resume': 'RESUME'}
variable_is_paused = False
gcode = 
	{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower =='true' else False %}
	{% if enable %}
	{% if (hyperlapse and printer['gcode_macro HYPERLAPSE'].run) or
	(not hyperlapse and not printer['gcode_macro HYPERLAPSE'].run) %}
	{% if park.enable %}
	{% set pos = {'x': 'X' + park.coord.x|string if park.pos != 'y_only' else '',
	'y': 'Y' + park.coord.y|string if park.pos != 'x_only' else '',
	'z': 'Z'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}
	{% set restore = {'absolute': {'coordinates': printer.gcode_move.absolute_coordinates,
	'extrude'    : printer.gcode_move.absolute_extrude},
	'speed'   : printer.gcode_move.speed,
	'e'       : printer.gcode_move.gcode_position.e,
	'factor'  : {'speed'  : printer.gcode_move.speed_factor,
	'extrude': printer.gcode_move.extrude_factor}} %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"
	{% if not printer[printer.toolhead.extruder].can_extrude %}
	{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}
	{% else %}
	{% if extruder.fw_retract %}
	G10
	{% else %}
	M83
	G0 E-{extruder.retract} F{speed.retract * 60}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True
	{macro.pause}
	SET_GCODE_OFFSET X=0 Y=0
	G90
	{% if "xyz" not in printer.toolhead.homed_axes %}
	{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}
	{% else %}
	G0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5
	M400
	{% endif %}
	_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}
	{% endif %}
	{% else %}
	{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}
	{% endif %}

[gcode_macro _TIMELAPSE_NEW_FRAME]
description = action call for timelapse shoot. must be a seperate macro
gcode = 
	{action_call_remote_method("timelapse_newframe",
	macropark=printer['gcode_macro TIMELAPSE_TAKE_FRAME'].park,
	hyperlapse=params.HYPERLAPSE)}

[delayed_gcode _WAIT_TIMELAPSE_TAKE_FRAME]
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% set factor = {'speed': printer.gcode_move.speed_factor, 'extrude': printer.gcode_move.extrude_factor} %}
	{% if tl.takingframe %}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5
	{% else %}
	{tl.macro.resume} VELOCITY={tl.speed.travel}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False
	{% if not printer[printer.toolhead.extruder].can_extrude %}
	{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}
	{% else %}
	{% if tl.extruder.fw_retract %}
	G11
	{% else %}
	G0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}
	G0 F{tl.restore.speed}
	{% if tl.restore.absolute.extrude %}
	M82
	G92 E{tl.restore.e}
	{% endif %}
	{% endif %}
	{% endif %}
	{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}
	{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}
	{% if not tl.restore.absolute.coordinates %} G91 {% endif %}
	{% endif %}

[gcode_macro HYPERLAPSE]
description = Start/Stop a hyperlapse recording
variable_cycle = 0
variable_run = False
gcode = 
	{% set cycle = params.CYCLE|default(30)|int %}
	{% if params.ACTION and params.ACTION|lower == 'start' %}
	{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}
	TIMELAPSE_TAKE_FRAME HYPERLAPSE=True
	{% elif params.ACTION and params.ACTION|lower == 'stop' %}
	{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0
	{% else %}
	{action_raise_error("Hyperlapse: No valid input parameter
	Use:
	- HYPERLAPSE ACTION=START [CYCLE=time]
	- HYPERLAPSE ACTION=STOP")}
	{% endif %}

[delayed_gcode _HYPERLAPSE_LOOP]
gcode = 
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}
	TIMELAPSE_TAKE_FRAME HYPERLAPSE=True

[gcode_macro TIMELAPSE_RENDER]
description = Render Timelapse video and wait for the result
variable_render = False
variable_run_identifier = 0
gcode = 
	{action_respond_info("Timelapse: Rendering started")}
	{action_call_remote_method("timelapse_render", byrendermacro="True")}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True
	{printer.configfile.settings['gcode_macro pause'].rename_existing}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5

[delayed_gcode _WAIT_TIMELAPSE_RENDER]
gcode = 
	{% set ri = printer['gcode_macro TIMELAPSE_RENDER'].run_identifier % 4 %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}
	{% if printer['gcode_macro TIMELAPSE_RENDER'].render %}
	M117 Rendering {['-','\\','|','/'][ri]}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5
	{% else %}
	{action_respond_info("Timelapse: Rendering finished")}
	M117
	{printer.configfile.settings['gcode_macro resume'].rename_existing}
	{% endif %}

[gcode_macro TEST_STREAM_DELAY]
description = Helper macro to find stream and park delay
gcode = 
	{% set min = printer.toolhead.axis_minimum %}
	{% set max = printer.toolhead.axis_maximum %}
	{% set act = printer.toolhead.position %}
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% if act.z > 5.0 %}
	G0 X{min.x + 5.0} F{tl.speed.travel|int * 60}
	G0 X{(max.x-min.x)/2}
	G4 P{tl.park.time|float * 1000}
	_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE
	G0 X{max.x - 5.0}
	{% else %}
	{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}
	{% endif %}

[exclude_object]

[gcode_shell_command update_git_script]
command = bash -c "bash $HOME/klipper-backup/script.sh"
timeout = 90.0
verbose = True

[gcode_shell_command update_git_script_message]
command = bash -c "bash $HOME/klipper-backup/script.sh -c \"$0\""
timeout = 90.0
verbose = True

[mcu]
serial = /dev/ttyS3
restart_method = command

[output_pin Power]
pin = PC12
value = 1
shutdown_value = 1

[temperature_sensor orange_pi]
sensor_type = temperature_host
min_temp = 0
max_temp = 100

[heater_generic chamber_heater]
heater_pin = !PA7
sensor_type = ATC Semitec 104GT-2
sensor_pin = PA5
control = watermark
max_power = 1
min_temp = 15
max_temp = 85

[verify_heater chamber_heater]
max_error = 9999
check_gain_time = 9999
hysteresis = 5
heating_gain = 2

[filament_motion_sensor motion_sensor]
detection_length = 50
extruder = extruder
switch_pin = !PC15
pause_on_runout = True
runout_gcode = 
	SONG_CRAB_RAVE

[bltouch]
sensor_pin = ^PC14
control_pin = PA1
x_offset = -40
y_offset = 0.000
z_offset = 1.70
pin_up_reports_not_triggered = False
probe_with_touch_mode = True

[heater_bed]
heater_pin = PC9
sensor_type = ATC Semitec 104GT-2
sensor_pin = PC3
control = pid
pid_kp = 72.553
pid_ki = 1.154
pid_kd = 1139.994
min_temp = 5
max_temp = 125

[heater_fan radiator]
pin = PC7
max_power = 1.0
kick_start_time = 0.600
heater = extruder
heater_temp = 50.0
shutdown_speed = 1

[fan]
pin = PC6

[input_shaper]
shaper_type_x = 2hump_ei
shaper_freq_x = 43.0
shaper_type_y = mzv
shaper_freq_y = 32.6

[printer]
kinematics = cartesian
max_velocity = 300
max_accel = 1900
max_z_velocity = 30
max_z_accel = 100
square_corner_velocity = 4

[bed_mesh]
speed = 150
horizontal_move_z = 9
mesh_min = 10, 20
mesh_max = 195, 210
probe_count = 5
mesh_pps = 2, 3
algorithm = bicubic
bicubic_tension = 0.2
move_check_distance = 9
split_delta_z = .025
fade_start = 1
fade_end = 10
fade_target = 0

[screws_tilt_adjust]
screw1 = 79, 27
screw1_name = Peredniy Leviy
screw2 = 235, 27
screw2_name = Peredniy Praviy
screw3 = 235,197
screw3_name = Zadniy Praviy
screw4 = 79,197
screw4_name = Zadniy Leviy
speed = 120
horizontal_move_z = 9

[safe_z_home]
home_xy_position = 157,115
speed = 50
z_hop = 9.0
z_hop_speed = 20.0

[stepper_x]
step_pin = PB13
dir_pin = !PB12
enable_pin = !PB14
microsteps = 16
rotation_distance = 40
endstop_pin = ^PC0
position_endstop = 0
position_max = 240
position_min = -2
homing_retract_dist = 5
homing_speed = 50
second_homing_speed = 10

[tmc2209 stepper_x]
uart_pin = PC11
tx_pin = PC10
uart_address = 0
run_current = 0.580
stealthchop_threshold = 999999

[stepper_y]
step_pin = PB10
dir_pin = !PB2
enable_pin = !PB11
microsteps = 16
rotation_distance = 40
endstop_pin = ^PC1
position_endstop = 0
homing_retract_dist = 5
homing_speed = 50
second_homing_speed = 10
position_max = 231
position_min = 0

[tmc2209 stepper_y]
uart_pin = PC11
tx_pin = PC10
uart_address = 2
run_current = 0.6
stealthchop_threshold = 999999

[stepper_z]
step_pin = PB0
dir_pin = PC5
enable_pin = !PB1
microsteps = 16
rotation_distance = 40
gear_ratio = 80:16
full_steps_per_rotation = 200
endstop_pin = probe:z_virtual_endstop
homing_retract_dist = 9
second_homing_speed = 10
position_min = -5
position_max = 245
homing_speed = 50

[tmc2209 stepper_z]
uart_pin = PC11
tx_pin = PC10
uart_address = 1
run_current = 0.580
stealthchop_threshold = 999999
interpolate = false

[extruder]
step_pin = PB3
dir_pin = PB4
enable_pin = !PD2
microsteps = 16
rotation_distance = 4.637
nozzle_diameter = 0.400
filament_diameter = 1.750
heater_pin = PC8
sensor_type = ATC Semitec 104GT-2
sensor_pin = PA0
min_temp = 5
max_temp = 270
max_extrude_only_velocity = 120
max_extrude_only_accel = 3000
pressure_advance = 0.031
full_steps_per_rotation = 200
control = pid
pid_kp = 29.662
pid_ki = 2.382
pid_kd = 92.322

[tmc2209 extruder]
uart_pin = PC11
tx_pin = PC10
uart_address = 3
run_current = 0.7
stealthchop_threshold = 999999

[static_digital_output usb_pullup_enable]
pins = !PA14

[board_pins]
aliases = 
	
	EXP1_1=PB5,  EXP1_3=PA9,   EXP1_5=PA10, EXP1_7=PB8,  EXP1_9=<GND>,
	EXP1_2=PA15, EXP1_4=<RST>, EXP1_6=PB9,  EXP1_8=PB15, EXP1_10=<5V>

[display]
lcd_type = st7920
cs_pin = EXP1_7
sclk_pin = EXP1_6
sid_pin = EXP1_8
encoder_pins = ^EXP1_5, ^EXP1_3
click_pin = ^!EXP1_2

[pwm_cycle_time beeper]
pin = EXP1_1
shutdown_value = 0
cycle_time = 0.001

[firmware_retraction]
retract_length = 1.0
retract_speed = 80
unretract_extra_length = 0
unretract_speed = 80

[pwm_tool Laser]
pin = PA6
cycle_time = 0.0001
shutdown_value = 0
maximum_mcu_duration = 5

[bed_mesh 70]
version = 1
points = 
	-0.045000, 0.027500, 0.015000
	-0.055000, -0.005000, -0.035000
	-0.007500, 0.040000, -0.002500
x_count = 3
y_count = 3
mesh_x_pps = 2
mesh_y_pps = 3
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 195.0
min_y = 20.0
max_y = 210.0

[bed_mesh default]
version = 1
points = 
	0.020000, 0.025000, 0.030000, -0.007500, -0.052500
	0.015000, 0.017500, 0.022500, -0.007500, -0.057500
	0.030000, 0.030000, 0.037500, 0.002500, -0.035000
	0.012500, 0.030000, 0.050000, 0.035000, -0.010000
	0.080000, 0.087500, 0.115000, 0.097500, 0.067500
x_count = 5
y_count = 5
mesh_x_pps = 2
mesh_y_pps = 3
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 195.0
min_y = 20.0
max_y = 210.0
=======================
Extruder max_extrude_ratio=0.266081
mcu 'mcu': Starting serial connect
webhooks client 281473326631616: New connection
webhooks client 281473326631616: Client info {'program': 'Moonraker', 'version': 'v0.9.3-4-ga4604e3'}
Loaded MCU 'mcu' 118 commands (v0.12.0-404-g80d185c94 / gcc: (15:12.2.rel1-1) 12.2.1 20221205 binutils: (2.40-2+18+b1) 2.40)
MCU 'mcu' config: ADC_MAX=4095 BUS_PINS_i2c1=PB6,PB7 BUS_PINS_i2c1a=PB8,PB9 BUS_PINS_i2c2=PB10,PB11 BUS_PINS_spi1=PA6,PA7,PA5 BUS_PINS_spi1a=PB4,PB5,PB3 BUS_PINS_spi2=PB14,PB15,PB13 BUS_PINS_spi3=PB4,PB5,PB3 CLOCK_FREQ=72000000 INITIAL_PINS=!PA14 MCU=stm32f103xe PWM_MAX=255 RECEIVE_WINDOW=192 RESERVE_PINS_serial=PA3,PA2 SERIAL_BAUD=250000 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
Sending MCU 'mcu' printer configuration...
Configured MCU 'mcu' (1024 moves)
Starting heater checks for chamber_heater
Starting heater checks for heater_bed
bed_mesh: generated points
Index |  Tool Adjusted  |   Probe
  0   | (50.0, 20.0)    | (10.0, 20.0)
  1   | (96.2, 20.0)    | (56.2, 20.0)
  2   | (142.5, 20.0)   | (102.5, 20.0)
  3   | (188.8, 20.0)   | (148.8, 20.0)
  4   | (235.0, 20.0)   | (195.0, 20.0)
  5   | (235.0, 67.5)   | (195.0, 67.5)
  6   | (188.8, 67.5)   | (148.8, 67.5)
  7   | (142.5, 67.5)   | (102.5, 67.5)
  8   | (96.2, 67.5)    | (56.2, 67.5)
  9   | (50.0, 67.5)    | (10.0, 67.5)
  10  | (50.0, 115.0)   | (10.0, 115.0)
  11  | (96.2, 115.0)   | (56.2, 115.0)
  12  | (142.5, 115.0)  | (102.5, 115.0)
  13  | (188.8, 115.0)  | (148.8, 115.0)
  14  | (235.0, 115.0)  | (195.0, 115.0)
  15  | (235.0, 162.5)  | (195.0, 162.5)
  16  | (188.8, 162.5)  | (148.8, 162.5)
  17  | (142.5, 162.5)  | (102.5, 162.5)
  18  | (96.2, 162.5)   | (56.2, 162.5)
  19  | (50.0, 162.5)   | (10.0, 162.5)
  20  | (50.0, 210.0)   | (10.0, 210.0)
  21  | (96.2, 210.0)   | (56.2, 210.0)
  22  | (142.5, 210.0)  | (102.5, 210.0)
  23  | (188.8, 210.0)  | (148.8, 210.0)
  24  | (235.0, 210.0)  | (195.0, 210.0)
Starting heater checks for extruder
Write g-code response
Traceback (most recent call last):
  File "/home/klipper/klipper/klippy/gcode.py", line 459, in _respond_raw
    os.write(self.fd, (msg+"\n").encode())
BlockingIOError: [Errno 11] Resource temporarily unavailable
Stats 5795.3: gcodein=0  mcu: mcu_awake=0.008 mcu_task_avg=0.000028 mcu_task_stddev=0.000040 bytes_write=3191 bytes_read=6178 bytes_retransmit=0 bytes_invalid=0 send_seq=229 receive_seq=226 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=1878 upcoming_bytes=303 freq=71997820  orange_pi: temp=49.3 chamber_heater: target=0 temp=0.0 pwm=0.000 heater_bed: target=0 temp=0.0 pwm=0.000 sysload=3.03 cputime=137.583 memavail=1697728 print_time=5.417 buffer_time=0.241 print_stall=0 extruder: target=0 temp=0.0 pwm=0.000
webhooks: registering remote method 'shutdown_machine' for connection id: 281473326631616
webhooks: registering remote method 'reboot_machine' for connection id: 281473326631616
webhooks: registering remote method 'pause_job_queue' for connection id: 281473326631616
webhooks: registering remote method 'start_job_queue' for connection id: 281473326631616
Stats 5796.3: gcodein=0  mcu: mcu_awake=0.008 mcu_task_avg=0.000028 mcu_task_stddev=0.000040 bytes_write=5606 bytes_read=6459 bytes_retransmit=0 bytes_invalid=0 send_seq=275 receive_seq=275 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998319  orange_pi: temp=47.8 chamber_heater: target=0 temp=26.2 pwm=0.000 heater_bed: target=0 temp=0.0 pwm=0.000 sysload=3.03 cputime=137.629 memavail=1697504 print_time=5.417 buffer_time=0.000 print_stall=0 extruder: target=0 temp=0.0 pwm=0.000
Stats 5797.3: gcodein=0  mcu: mcu_awake=0.008 mcu_task_avg=0.000028 mcu_task_stddev=0.000040 bytes_write=5645 bytes_read=6650 bytes_retransmit=0 bytes_invalid=0 send_seq=278 receive_seq=278 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998391  orange_pi: temp=47.2 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=3.03 cputime=137.663 memavail=1697504 print_time=5.417 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 5798.3: gcodein=0  mcu: mcu_awake=0.008 mcu_task_avg=0.000028 mcu_task_stddev=0.000040 bytes_write=5651 bytes_read=6801 bytes_retransmit=0 bytes_invalid=0 send_seq=279 receive_seq=279 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998370  orange_pi: temp=46.6 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=3.03 cputime=137.684 memavail=1697944 print_time=5.417 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 5799.3: gcodein=0  mcu: mcu_awake=0.008 mcu_task_avg=0.000028 mcu_task_stddev=0.000040 bytes_write=5657 bytes_read=6967 bytes_retransmit=0 bytes_invalid=0 send_seq=280 receive_seq=280 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998266  orange_pi: temp=46.6 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=3.03 cputime=137.705 memavail=1697796 print_time=5.417 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 5800.3: gcodein=0  mcu: mcu_awake=0.050 mcu_task_avg=0.000183 mcu_task_stddev=0.000341 bytes_write=5663 bytes_read=7165 bytes_retransmit=0 bytes_invalid=0 send_seq=281 receive_seq=281 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998220  orange_pi: temp=46.6 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=2.87 cputime=137.725 memavail=1697796 print_time=5.417 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 5801.3: gcodein=0  mcu: mcu_awake=0.050 mcu_task_avg=0.000183 mcu_task_stddev=0.000341 bytes_write=5669 bytes_read=7316 bytes_retransmit=0 bytes_invalid=0 send_seq=282 receive_seq=282 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998278  orange_pi: temp=46.9 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=2.87 cputime=137.746 memavail=1698076 print_time=5.417 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 5802.3: gcodein=0  mcu: mcu_awake=0.050 mcu_task_avg=0.000183 mcu_task_stddev=0.000341 bytes_write=5675 bytes_read=7482 bytes_retransmit=0 bytes_invalid=0 send_seq=283 receive_seq=283 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998269  orange_pi: temp=46.8 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=2.87 cputime=137.766 memavail=1697824 print_time=5.417 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 5803.3: gcodein=0  mcu: mcu_awake=0.050 mcu_task_avg=0.000183 mcu_task_stddev=0.000341 bytes_write=5681 bytes_read=7663 bytes_retransmit=0 bytes_invalid=0 send_seq=284 receive_seq=284 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998256  orange_pi: temp=46.3 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=2.87 cputime=137.786 memavail=1698420 print_time=5.417 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 5804.3: gcodein=0  mcu: mcu_awake=0.050 mcu_task_avg=0.000183 mcu_task_stddev=0.000341 bytes_write=5687 bytes_read=7814 bytes_retransmit=0 bytes_invalid=0 send_seq=285 receive_seq=285 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998257  orange_pi: temp=46.5 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.7 pwm=0.000 sysload=2.87 cputime=137.808 memavail=1698168 print_time=5.417 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 5805.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5693 bytes_read=7994 bytes_retransmit=0 bytes_invalid=0 send_seq=286 receive_seq=286 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998282  orange_pi: temp=46.7 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.7 pwm=0.000 sysload=2.72 cputime=137.829 memavail=1698460 print_time=5.417 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 5806.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5699 bytes_read=8175 bytes_retransmit=0 bytes_invalid=0 send_seq=287 receive_seq=287 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998276  orange_pi: temp=46.6 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=2.72 cputime=137.849 memavail=1698492 print_time=5.417 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 5807.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5705 bytes_read=8326 bytes_retransmit=0 bytes_invalid=0 send_seq=288 receive_seq=288 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998278  orange_pi: temp=46.4 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=2.72 cputime=137.870 memavail=1699312 print_time=5.417 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 5808.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5749 bytes_read=8512 bytes_retransmit=0 bytes_invalid=0 send_seq=293 receive_seq=293 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998291  orange_pi: temp=46.9 chamber_heater: target=0 temp=26.2 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=2.72 cputime=137.892 memavail=1699984 print_time=5.417 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 5809.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5769 bytes_read=8698 bytes_retransmit=0 bytes_invalid=0 send_seq=295 receive_seq=295 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998291  orange_pi: temp=46.9 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=2.72 cputime=137.913 memavail=1699868 print_time=5.417 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 5810.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5789 bytes_read=8854 bytes_retransmit=0 bytes_invalid=0 send_seq=297 receive_seq=297 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998295  orange_pi: temp=46.8 chamber_heater: target=0 temp=26.3 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=2.58 cputime=137.934 memavail=1700276 print_time=5.417 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 5811.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000020 bytes_write=5795 bytes_read=9035 bytes_retransmit=0 bytes_invalid=0 send_seq=298 receive_seq=298 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998300  orange_pi: temp=46.8 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=2.58 cputime=137.954 memavail=1700904 print_time=5.417 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 5812.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000020 bytes_write=5801 bytes_read=9216 bytes_retransmit=0 bytes_invalid=0 send_seq=299 receive_seq=299 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998306  orange_pi: temp=47.1 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=2.58 cputime=137.975 memavail=1701324 print_time=5.417 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 5813.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000020 bytes_write=5826 bytes_read=9377 bytes_retransmit=0 bytes_invalid=0 send_seq=302 receive_seq=302 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998298  orange_pi: temp=46.4 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=2.58 cputime=137.995 memavail=1701460 print_time=5.417 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Running Command {update_git_script}...:
[1;93m●[0m Checking for installed dependencies /[K[1;92m●[0m Checking for installed dependencies [1;92mDone![0m


Stats 5814.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000020 bytes_write=5832 bytes_read=9543 bytes_retransmit=0 bytes_invalid=0 send_seq=303 receive_seq=303 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998297  orange_pi: temp=46.7 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.7 pwm=0.000 sysload=2.58 cputime=138.025 memavail=1697724 print_time=5.417 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Klipper-Backup is up to date


Stats 5815.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000020 bytes_write=5857 bytes_read=9734 bytes_retransmit=0 bytes_invalid=0 send_seq=306 receive_seq=306 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998303  orange_pi: temp=48.2 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=2.45 cputime=138.056 memavail=1693968 print_time=5.417 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.6 pwm=0.000
From https://github.com/Ferz82/github-klipper-backup
 * branch            main       -> FETCH_HEAD

Already up to date.

Stats 5816.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000018 bytes_write=5877 bytes_read=9905 bytes_retransmit=0 bytes_invalid=0 send_seq=308 receive_seq=308 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998303  orange_pi: temp=49.9 chamber_heater: target=0 temp=26.2 pwm=0.000 heater_bed: target=0 temp=24.7 pwm=0.000 sysload=2.45 cputime=138.089 memavail=1703672 print_time=5.417 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Skipping symbolic link: printer_data/config/mainsail.cfg

Stats 5817.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000018 bytes_write=5883 bytes_read=10071 bytes_retransmit=0 bytes_invalid=0 send_seq=309 receive_seq=309 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998312  orange_pi: temp=51.0 chamber_heater: target=0 temp=26.2 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=2.45 cputime=138.129 memavail=1697508 print_time=5.417 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 5818.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000018 bytes_write=5889 bytes_read=10252 bytes_retransmit=0 bytes_invalid=0 send_seq=310 receive_seq=310 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998333  orange_pi: temp=55.4 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=2.45 cputime=138.182 memavail=1690876 print_time=5.417 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 5819.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000018 bytes_write=5928 bytes_read=10418 bytes_retransmit=0 bytes_invalid=0 send_seq=314 receive_seq=314 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998343  orange_pi: temp=54.0 chamber_heater: target=0 temp=26.3 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=2.45 cputime=138.228 memavail=1698100 print_time=5.417 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 5820.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000018 bytes_write=5953 bytes_read=10594 bytes_retransmit=0 bytes_invalid=0 send_seq=317 receive_seq=317 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998337  orange_pi: temp=52.8 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=2.58 cputime=138.262 memavail=1697908 print_time=5.417 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 5821.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000018 bytes_write=5959 bytes_read=10790 bytes_retransmit=0 bytes_invalid=0 send_seq=318 receive_seq=318 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998334  orange_pi: temp=48.2 chamber_heater: target=0 temp=26.3 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=2.58 cputime=138.292 memavail=1696776 print_time=5.417 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 5822.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000018 bytes_write=5965 bytes_read=10941 bytes_retransmit=0 bytes_invalid=0 send_seq=319 receive_seq=319 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998336  orange_pi: temp=48.0 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.7 pwm=0.000 sysload=2.58 cputime=138.321 memavail=1698376 print_time=5.417 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 5823.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000018 bytes_write=5971 bytes_read=11122 bytes_retransmit=0 bytes_invalid=0 send_seq=320 receive_seq=320 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998339  orange_pi: temp=47.7 chamber_heater: target=0 temp=26.2 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=2.58 cputime=138.351 memavail=1696704 print_time=5.417 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.6 pwm=0.000
Stats 5824.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000018 bytes_write=5991 bytes_read=11293 bytes_retransmit=0 bytes_invalid=0 send_seq=322 receive_seq=322 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998332  orange_pi: temp=47.8 chamber_heater: target=0 temp=26.3 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=2.58 cputime=138.383 memavail=1697008 print_time=5.417 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 5825.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000018 bytes_write=6025 bytes_read=11454 bytes_retransmit=0 bytes_invalid=0 send_seq=325 receive_seq=325 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998335  orange_pi: temp=47.9 chamber_heater: target=0 temp=26.2 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=2.69 cputime=138.413 memavail=1697600 print_time=5.417 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 5826.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000021 bytes_write=6051 bytes_read=11671 bytes_retransmit=0 bytes_invalid=0 send_seq=328 receive_seq=328 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998343  orange_pi: temp=47.8 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.7 pwm=0.000 sysload=2.69 cputime=138.444 memavail=1697560 print_time=5.417 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.6 pwm=0.000
Stats 5827.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000021 bytes_write=6085 bytes_read=11847 bytes_retransmit=0 bytes_invalid=0 send_seq=331 receive_seq=331 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998344  orange_pi: temp=47.4 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=2.69 cputime=138.472 memavail=1693084 print_time=5.417 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 5828.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000021 bytes_write=6105 bytes_read=12003 bytes_retransmit=0 bytes_invalid=0 send_seq=333 receive_seq=333 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998344  orange_pi: temp=47.7 chamber_heater: target=0 temp=26.2 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=2.69 cputime=138.501 memavail=1694296 print_time=5.417 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 5829.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000021 bytes_write=6125 bytes_read=12189 bytes_retransmit=0 bytes_invalid=0 send_seq=335 receive_seq=335 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998344  orange_pi: temp=47.2 chamber_heater: target=0 temp=26.3 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=2.69 cputime=138.533 memavail=1696668 print_time=5.417 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 5830.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000021 bytes_write=6145 bytes_read=12360 bytes_retransmit=0 bytes_invalid=0 send_seq=337 receive_seq=337 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998344  orange_pi: temp=47.2 chamber_heater: target=0 temp=26.3 pwm=0.000 heater_bed: target=0 temp=24.7 pwm=0.000 sysload=2.80 cputime=138.563 memavail=1696144 print_time=5.417 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 5831.3: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000024 mcu_task_stddev=0.000027 bytes_write=6165 bytes_read=12531 bytes_retransmit=0 bytes_invalid=0 send_seq=339 receive_seq=339 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998344  orange_pi: temp=47.2 chamber_heater: target=0 temp=26.1 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=2.80 cputime=138.593 memavail=1696892 print_time=5.417 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 5832.3: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000024 mcu_task_stddev=0.000027 bytes_write=6185 bytes_read=12717 bytes_retransmit=0 bytes_invalid=0 send_seq=341 receive_seq=341 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998345  orange_pi: temp=47.3 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=2.80 cputime=138.624 memavail=1698792 print_time=5.417 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 5833.3: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000024 mcu_task_stddev=0.000027 bytes_write=6191 bytes_read=12883 bytes_retransmit=0 bytes_invalid=0 send_seq=342 receive_seq=342 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998346  orange_pi: temp=47.3 chamber_heater: target=0 temp=26.2 pwm=0.000 heater_bed: target=0 temp=24.7 pwm=0.000 sysload=2.80 cputime=138.651 memavail=1700064 print_time=5.417 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 5834.3: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000024 mcu_task_stddev=0.000027 bytes_write=6211 bytes_read=13039 bytes_retransmit=0 bytes_invalid=0 send_seq=344 receive_seq=344 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998345  orange_pi: temp=47.3 chamber_heater: target=0 temp=26.1 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=2.80 cputime=138.680 memavail=1699000 print_time=5.417 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.6 pwm=0.000
Stats 5835.3: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000024 mcu_task_stddev=0.000027 bytes_write=6245 bytes_read=13230 bytes_retransmit=0 bytes_invalid=0 send_seq=347 receive_seq=347 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998344  orange_pi: temp=47.5 chamber_heater: target=0 temp=25.7 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=2.97 cputime=138.710 memavail=1700008 print_time=5.417 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 5836.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000023 bytes_write=6251 bytes_read=13411 bytes_retransmit=0 bytes_invalid=0 send_seq=348 receive_seq=348 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998343  orange_pi: temp=47.4 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.7 pwm=0.000 sysload=2.97 cputime=138.739 memavail=1698336 print_time=5.417 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 5837.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000023 bytes_write=6257 bytes_read=13562 bytes_retransmit=0 bytes_invalid=0 send_seq=349 receive_seq=349 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998342  orange_pi: temp=47.2 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.7 pwm=0.000 sysload=2.97 cputime=138.768 memavail=1697848 print_time=5.417 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 5838.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000023 bytes_write=6291 bytes_read=13753 bytes_retransmit=0 bytes_invalid=0 send_seq=352 receive_seq=352 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998340  orange_pi: temp=47.6 chamber_heater: target=0 temp=26.2 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=2.97 cputime=138.798 memavail=1693916 print_time=5.417 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 5839.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000023 bytes_write=6311 bytes_read=13924 bytes_retransmit=0 bytes_invalid=0 send_seq=354 receive_seq=354 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998339  orange_pi: temp=47.3 chamber_heater: target=0 temp=26.2 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=2.97 cputime=138.828 memavail=1691940 print_time=5.417 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 5840.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000023 bytes_write=6331 bytes_read=14080 bytes_retransmit=0 bytes_invalid=0 send_seq=356 receive_seq=356 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998338  orange_pi: temp=47.5 chamber_heater: target=0 temp=26.3 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=3.06 cputime=138.856 memavail=1691412 print_time=5.417 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 5841.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000023 bytes_write=6337 bytes_read=14276 bytes_retransmit=0 bytes_invalid=0 send_seq=357 receive_seq=357 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998337  orange_pi: temp=47.4 chamber_heater: target=0 temp=26.3 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=3.06 cputime=138.881 memavail=1691180 print_time=5.417 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 5842.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000023 bytes_write=6343 bytes_read=14442 bytes_retransmit=0 bytes_invalid=0 send_seq=358 receive_seq=358 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998336  orange_pi: temp=46.7 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=3.06 cputime=138.906 memavail=1691236 print_time=5.417 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 5843.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000023 bytes_write=6349 bytes_read=14593 bytes_retransmit=0 bytes_invalid=0 send_seq=359 receive_seq=359 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998335  orange_pi: temp=46.7 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=3.06 cputime=138.930 memavail=1691240 print_time=5.417 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 5844.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000023 bytes_write=6355 bytes_read=14774 bytes_retransmit=0 bytes_invalid=0 send_seq=360 receive_seq=360 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998334  orange_pi: temp=47.0 chamber_heater: target=0 temp=26.1 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=3.06 cputime=138.955 memavail=1691544 print_time=5.417 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 5845.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000023 bytes_write=6389 bytes_read=14950 bytes_retransmit=0 bytes_invalid=0 send_seq=363 receive_seq=363 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998331  orange_pi: temp=48.9 chamber_heater: target=0 temp=26.1 pwm=0.000 heater_bed: target=0 temp=24.3 pwm=0.000 sysload=3.29 cputime=138.984 memavail=1691620 print_time=5.417 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 5846.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000018 bytes_write=6395 bytes_read=15116 bytes_retransmit=0 bytes_invalid=0 send_seq=364 receive_seq=364 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998330  orange_pi: temp=46.6 chamber_heater: target=0 temp=26.0 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=3.29 cputime=139.009 memavail=1691032 print_time=5.417 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 5847.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000018 bytes_write=6401 bytes_read=15297 bytes_retransmit=0 bytes_invalid=0 send_seq=365 receive_seq=365 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998329  orange_pi: temp=47.3 chamber_heater: target=0 temp=26.0 pwm=0.000 heater_bed: target=0 temp=24.7 pwm=0.000 sysload=3.29 cputime=139.036 memavail=1691704 print_time=5.417 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 5848.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000018 bytes_write=6407 bytes_read=15463 bytes_retransmit=0 bytes_invalid=0 send_seq=366 receive_seq=366 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998329  orange_pi: temp=47.2 chamber_heater: target=0 temp=26.3 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=3.29 cputime=139.060 memavail=1692096 print_time=5.417 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 5849.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000018 bytes_write=6413 bytes_read=15606 bytes_retransmit=0 bytes_invalid=0 send_seq=367 receive_seq=367 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998330  orange_pi: temp=46.7 chamber_heater: target=0 temp=26.0 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=3.29 cputime=139.084 memavail=1692124 print_time=5.417 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 5850.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000020 mcu_task_stddev=0.000018 bytes_write=6433 bytes_read=15779 bytes_retransmit=0 bytes_invalid=0 send_seq=369 receive_seq=369 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998327  orange_pi: temp=47.5 chamber_heater: target=0 temp=26.3 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=3.43 cputime=139.109 memavail=1692292 print_time=5.417 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 5851.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000016 bytes_write=6439 bytes_read=15948 bytes_retransmit=0 bytes_invalid=0 send_seq=370 receive_seq=370 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998326  orange_pi: temp=47.1 chamber_heater: target=0 temp=26.2 pwm=0.000 heater_bed: target=0 temp=24.8 pwm=0.000 sysload=3.43 cputime=139.134 memavail=1692460 print_time=5.417 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 5852.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000016 bytes_write=6459 bytes_read=16094 bytes_retransmit=0 bytes_invalid=0 send_seq=372 receive_seq=372 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998324  orange_pi: temp=46.8 chamber_heater: target=0 temp=26.3 pwm=0.000 heater_bed: target=0 temp=24.7 pwm=0.000 sysload=3.43 cputime=139.159 memavail=1692168 print_time=5.417 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 5853.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000016 bytes_write=6465 bytes_read=16275 bytes_retransmit=0 bytes_invalid=0 send_seq=373 receive_seq=373 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998325  orange_pi: temp=47.2 chamber_heater: target=0 temp=26.1 pwm=0.000 heater_bed: target=0 temp=24.7 pwm=0.000 sysload=3.43 cputime=139.183 memavail=1692628 print_time=5.417 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.6 pwm=0.000
Stats 5854.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000016 bytes_write=6471 bytes_read=16441 bytes_retransmit=0 bytes_invalid=0 send_seq=374 receive_seq=374 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998325  orange_pi: temp=46.9 chamber_heater: target=0 temp=26.0 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=3.43 cputime=139.208 memavail=1692580 print_time=5.417 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 5855.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000016 bytes_write=6477 bytes_read=16592 bytes_retransmit=0 bytes_invalid=0 send_seq=375 receive_seq=375 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998324  orange_pi: temp=46.8 chamber_heater: target=0 temp=26.2 pwm=0.000 heater_bed: target=0 temp=24.7 pwm=0.000 sysload=3.47 cputime=139.231 memavail=1692692 print_time=5.417 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
warning: adding embedded git repository: klipper-backup
hint: You've added another git repository inside your current repository.
hint: Clones of the outer repository will not contain the contents of
hint: the embedded repository and will not know how to obtain it.
hint: If you meant to add a submodule, use:
hint: 
hint: 	git submodule add <url> klipper-backup
hint: 
hint: If you added this path by mistake, you can remove it from the
hint: index with:
hint: 
hint: 	git rm --cached klipper-backup
hint: 
hint: See "git help submodule" for more information.

warning: adding embedded git repository: klipper

[main 76f059b] New backup from 25.12.2024 - 21:54:34
 2 files changed, 2 insertions(+)
 create mode 160000 klipper
 create mode 160000 klipper-backup

To https://github.com/Ferz82/github-klipper-backup.git
   29d9bde..76f059b  main -> main

Branch 'main' set up to track remote branch 'main' from 'origin'.

Command {update_git_script} finished

Running Command {update_git_script}...:
[1;93m●[0m Checking for installed dependencies /[K[1;92m●[0m Checking for installed dependencies [1;92mDone![0m


Klipper-Backup is up to date


From https://github.com/Ferz82/github-klipper-backup
 * branch            main       -> FETCH_HEAD

Already up to date.

Skipping symbolic link: printer_data/config/mainsail.cfg

[main ae8c6c6] New backup from 25.12.2024 - 21:55:58
 2 files changed, 2 deletions(-)
 delete mode 160000 klipper
 delete mode 160000 klipper-backup

To https://github.com/Ferz82/github-klipper-backup.git
   76f059b..ae8c6c6  main -> main

Branch 'main' set up to track remote branch 'main' from 'origin'.

Command {update_git_script} finished

Starting Klippy...
Args: ['/home/klipper/klipper/klippy/klippy.py', '/home/klipper/printer_data/config/printer.cfg', '-I', '/home/klipper/printer_data/comms/klippy.serial', '-l', '/home/klipper/printer_data/logs/klippy.log', '-a', '/home/klipper/printer_data/comms/klippy.sock']
Git version: 'v0.12.0-404-g80d185c94-dirty'
Untracked files: klippy/extras/gcode_shell_command.py
Branch: master
Remote: origin
Tracked URL: https://github.com/Klipper3d/klipper
CPU: 4 core ?
Python: '3.10.12 (main, Nov  6 2024, 20:22:13) [GCC 11.4.0]'
Start printer at Wed Dec 25 21:57:37 2024 (1735153057.5 21.4)
===== Config file =====
[virtual_sdcard]
path = /home/klipper/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[pause_resume]

[display_status]

[respond]

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = BASE_CANCEL_PRINT
gcode = 
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	TURN_OFF_HEATERS
	M107
	G91
	G1 E-{E} F1500
	G90
	CLEAR_PAUSE
	SDCARD_RESET_FILE
	BASE_CANCEL_PRINT
	PARK

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = BASE_PAUSE
gcode = 
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	SAVE_GCODE_STATE NAME=PAUSE_STATE
	BASE_PAUSE
	G91
	G1 E-{E} F1500
	G90
	PARK

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = BASE_RESUME
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	G91
	G1 E{E} F1500
	G90
	RESTORE_GCODE_STATE NAME=PAUSE_STATE MOVE=1
	BASE_RESUME

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[gcode_macro _CLIENT_LINEAR_MOVE]
description = Linear move with save and restore of the gcode state
gcode = 
	{% set x_move = "X" ~ params.X if params.X is defined else "" %}
	{% set y_move = "Y" ~ params.Y if params.Y is defined else "" %}
	{% set z_move = "Z" ~ params.Z if params.Z is defined else "" %}
	{% set e_move = "E" ~ params.E if params.E is defined else "" %}
	{% set rate = "F" ~ params.F if params.F is defined else "" %}
	{% set ABSOLUTE = params.ABSOLUTE | default(0) | int != 0 %}
	{% set ABSOLUTE_E = params.ABSOLUTE_E | default(0) | int != 0 %}
	SAVE_GCODE_STATE NAME=_client_movement
	{% if x_move or y_move or z_move %}
	G9{ 0 if ABSOLUTE else 1 }
	{% endif %}
	{% if e_move %}
	M8{ 2 if ABSOLUTE_E else 3 }
	{% endif %}
	G1 { x_move } { y_move } { z_move } { e_move } { rate }
	RESTORE_GCODE_STATE NAME=_client_movement

[gcode_macro Backup_on_GitHub]
gcode = 
	{% set message = params.MESSAGE|default() %}
	{% if message %}
	RUN_SHELL_COMMAND CMD=update_git_script_message PARAMS="'{params.MESSAGE}'"
	{% else %}
	RUN_SHELL_COMMAND CMD=update_git_script
	{% endif %}

[gcode_macro list_sensors]
gcode = 
	{ action_respond_info(printer.heaters.available_heaters | join(', ')) }
	{ action_respond_info(printer.heaters.available_sensors | join(', ')) }

[gcode_macro Power_OFF]
gcode = SET_PIN PIN=Power VALUE=0

[gcode_macro _POWER_OFF_PRINTER]
gcode = SET_PIN PIN=Power VALUE=0

[gcode_macro ACTIVATE_POWER_OFF]
gcode = 
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK_ACT DURATION=60

[gcode_macro DEACTIVATE_POWER_OFF]
gcode = 
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK_ACT DURATION=0

[delayed_gcode POWER_OFF_PRINTER_CHECK_ACT]
gcode = 
	{% if printer.idle_timeout.state == "Idle" or printer.idle_timeout.state == "Ready" %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=30
	{% else %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK_ACT DURATION=60
	{% endif %}

[delayed_gcode POWER_OFF_PRINTER_CHECK]
gcode = 
	{% if printer.idle_timeout.state == "Idle" or printer.idle_timeout.state == "Ready" %}
	{% if printer.extruder.temperature < 50.0 and printer.heater_bed.temperature < 50.0 %}
	{% if printer.extruder.target == 0.0 and printer.heater_bed.target == 0.0 %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=0
	_POWER_OFF_PRINTER
	{% else %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=2
	{% endif %}
	{% else %}
	{% if printer.idle_timeout.state == "Printing" %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=0
	{% else %}
	{% if printer.extruder.target == 0.0 and printer.heater_bed.target == 0.0 %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=2
	{% else %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=0
	{% endif %}
	{% endif %}
	{% endif %}
	{% endif %}

[gcode_macro M141]
gcode = SET_HEATER_TEMPERATURE HEATER=chamber_heater TARGET={params.S|default(0)}

[gcode_macro M80]
gcode = SET_PIN PIN=Power  VALUE=1

[gcode_macro M81]
gcode = 
	
	SET_PIN PIN=Power VALUE=0

[gcode_macro M486]
gcode = 
	
	
	
	
	
	
	
	
	
	
	
	{% if 'exclude_object' not in printer %}
	{action_raise_error("[exclude_object] is not enabled")}
	{% endif %}
	
	{% if 'T' in params %}
	EXCLUDE_OBJECT RESET=1
	
	{% for i in range(params.T | int) %}
	EXCLUDE_OBJECT_DEFINE NAME={i}
	{% endfor %}
	{% endif %}
	
	{% if 'C' in params %}
	EXCLUDE_OBJECT CURRENT=1
	{% endif %}
	
	{% if 'P' in params %}
	EXCLUDE_OBJECT NAME={params.P}
	{% endif %}
	
	{% if 'S' in params %}
	{% if params.S == '-1' %}
	{% if printer.exclude_object.current_object %}
	EXCLUDE_OBJECT_END NAME={printer.exclude_object.current_object}
	{% endif %}
	{% else %}
	EXCLUDE_OBJECT_START NAME={params.S}
	{% endif %}
	{% endif %}
	
	{% if 'U' in params %}
	EXCLUDE_OBJECT RESET=1 NAME={params.U}
	{% endif %}

[gcode_macro M190]
rename_existing = M190.1
gcode = 
	{% if printer["gcode_macro status_heating"] != null %}
	status_heating
	{% endif %}
	M190.1 { rawparams }
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro _CHOME]
gcode = 
	{% if printer["gcode_macro status_homing"] != null %}
	status_homing
	{% endif %}
	{% if printer.toolhead.homed_axes != "xyz" %}
	G28
	{% endif %}
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro M109]
rename_existing = M109.1
gcode = 
	{% if printer["gcode_macro status_heating"] != null %}
	status_heating
	{% endif %}
	M109.1 { rawparams }
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro _MOVE_AWAY]
gcode = 
	{% set th = printer.toolhead %}
	{% set x_safe = th.position.x + 20 * (1 if th.axis_maximum.x - th.position.x > 20 else -1) %}
	{% set y_safe = th.position.y + 20 * (1 if th.axis_maximum.y - th.position.y > 20 else -1) %}
	{% set z_safe = [th.position.z + 2, th.axis_maximum.z]|min %}
	
	G90
	G0 X{x_safe} Y{y_safe} Z{z_safe} F20000

[gcode_macro PARK_CENTER_REAR]
gcode = 
	{% if printer["gcode_macro status_busy"] != null %}
	status_busy
	{% endif %}
	{% set th = printer.toolhead %}
	{% set x_safe = th.position.x + 20 * (1 if th.axis_maximum.x - th.position.x > 20 else -1) %}
	{% set y_safe = th.position.y + 20 * (1 if th.axis_maximum.y - th.position.y > 20 else -1) %}
	
	G0 X{th.axis_maximum.x//2} Y{th.axis_maximum.y - 2} F3600
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro START_PRINT]
variable_retract = 15
gcode = 
	{% set chamber_temp = params.CHAMBER_TEMP|default(0)|float %}
	{% set extruder_temp = params.EXTRUDER_TEMP|default(210)|float %}
	{% set bed_temp = params.BED_TEMP|default(60)|float %}
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	CLEAR_PAUSE
	G28
	Smart_Park
	M220 S100
	M221 S100
	SET_HEATER_TEMPERATURE HEATER=chamber_heater TARGET={chamber_temp}
	SET_HEATER_TEMPERATURE HEATER=heater_bed TARGET={bed_temp}
	TEMPERATURE_WAIT SENSOR=heater_bed MINIMUM={bed_temp * 0.75}
	SET_HEATER_TEMPERATURE HEATER=extruder TARGET={extruder_temp}
	G90
	M82
	TEMPERATURE_WAIT SENSOR=heater_bed MINIMUM={bed_temp}
	TEMPERATURE_WAIT SENSOR=extruder MINIMUM={extruder_temp}
	
	G1 E-15 F3600
	
	G28
	BED_MESH_CALIBRATE
	PRIME_LINE

[gcode_macro pid_soplo]
gcode = 
	PID_CALIBRATE HEATER=extruder TARGET=250

[gcode_macro pid_bed]
gcode = 
	PID_CALIBRATE HEATER=heater_bed TARGET=105

[gcode_macro BED]
gcode = 
	PROBE_CALIBRATE

[gcode_macro END_PRINT]
gcode = 
	
	{% set max_x = printer.configfile.config["stepper_x"]["position_max"]|float %}
	{% set max_y = printer.configfile.config["stepper_y"]["position_max"]|float %}
	{% set max_z = printer.configfile.config["stepper_z"]["position_max"]|float %}
	
	
	{% if printer.toolhead.position.x < (max_x - 20) %}
	{% set x_safe = 20.0 %}
	{% else %}
	{% set x_safe = -20.0 %}
	{% endif %}
	
	{% if printer.toolhead.position.y < (max_y - 20) %}
	{% set y_safe = 20.0 %}
	{% else %}
	{% set y_safe = -20.0 %}
	{% endif %}
	
	{% if printer.toolhead.position.z < (max_z - 2) %}
	{% set z_safe = 2.0 %}
	{% else %}
	{% set z_safe = max_z - printer.toolhead.position.z %}
	{% endif %}
	
	
	M400
	G92 E0
	G1 E-15 F3600
	G91
	G0 Z{z_safe} F3600
	G0 X{x_safe} Y{y_safe} F20000
	
	
	M104 S0
	M104 S0
	M140 S0
	M106 S0
	G90
	G0 X{max_x / 2} Y{max_y} F3600
	
	SONG_CRAB_RAVE
	
	
	
	M117 Finished!
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=30

[gcode_macro M300]
gcode = 
	
	{% set S = params.S|default(1000)|int %}
	
	{% set P = params.P|default(100)|int %}
	
	
	{% set V = params.V|default(99)|int %}
	SET_PIN PIN=beeper VALUE={0.1 * (V / 100) if S > 0 else 1} CYCLE_TIME={ 1.0 / S if S > 0 else 1 }
	G4 P{P}
	SET_PIN PIN=beeper VALUE=0 CYCLE_TIME={ 0.001 }
description = 
	"Plays a beep sound.
	@param {int} [S=1000] - Frequency in Hz
	@param {int} [P=100] - Duration in ms
	@param {int} [V=99] - Volume in percent"

[gcode_macro PRIME_LINE]
gcode = 
	{% set feedrate = params.F|default(10)|float * 60 %}
	{% set length = 100.0 %}
	{% set width = printer.configfile.settings.extruder.nozzle_diameter|float %}
	{% set height = ( (width / 0.04)|int - (width / 0.04 / 4)|int )|float * 0.04 %}
	
	{% set extrude = length * width * height * 1.5 %}
	SAVE_GCODE_STATE NAME=PRIME_LINE_STATE
	SET_IDLE_TIMEOUT TIMEOUT=7200
	{% if 'Y' in params %}
	{% set x_start = 1.0 %}
	{% set y_start = (printer.toolhead.axis_maximum.y|float - 100) / 2 %}
	G0 X{x_start} Y{y_start} F5000
	G0 Z{height} F1500
	G91
	
	G1 E8 F300
	
	
	G1 Y100 E{extrude} F{feedrate}
	G0 X{width} F5000
	G1 Y-100 E{extrude} F{feedrate}
	{% else %}
	{% set x_start = (printer.toolhead.axis_maximum.x|float - 100) / 2 %}
	{% set y_start = 1.0 %}
	G0 X{x_start} Y{y_start} F5000
	G0 Z{height} F1500
	G91
	
	G1 E8 F300
	
	
	G1 X100 E{extrude} F{feedrate}
	G0 Y{width} F5000
	G1 X-100 E{extrude} F{feedrate}
	{% endif %}
	RESTORE_GCODE_STATE NAME=PRIME_LINE_STATE

[gcode_macro VINT]
gcode = 
	SCREWS_TILT_CALCULATE

[gcode_macro LOW_TEMP_CHECK]
gcode = 
	{% set extruder_temp = params.T|default(240)|float %}
	{% if printer.extruder.target > extruder_temp %}
	{% set extruder_temp = printer.extruder.target %}
	{% endif %}
	{% if printer.extruder.temperature < extruder_temp %}
	M118 Heating to {extruder_temp}
	SET_HEATER_TEMPERATURE HEATER=extruder TARGET={extruder_temp}
	TEMPERATURE_WAIT SENSOR=extruder MINIMUM={extruder_temp}
	{% endif %}

[gcode_macro M76]
gcode = 
	PAUSE

[gcode_macro M601]
gcode = 
	PAUSE

[gcode_macro G27]
gcode = 
	PARK

[gcode_macro M125]
gcode = 
	PARK

[gcode_macro M600]
gcode = 
	PAUSE

[gcode_macro M701]
gcode = 
	FILAMENT_LOAD

[gcode_macro M702]
gcode = 
	FILAMENT_UNLOAD

[gcode_macro M500]
gcode = 
	SAVE_CONFIG

[gcode_macro PARK]
gcode = 
	{% set x_park = params.X|default(0)|float %}
	{% set y_park = params.Y|default(0)|float %}
	{% set z_park = params.Z|default(10)|float + printer.toolhead.position.z|float %}
	{% set x_max = printer.toolhead.axis_maximum.x|float %}
	{% set y_max = printer.toolhead.axis_maximum.y|float %}
	{% set z_max = printer.toolhead.axis_maximum.z|float %}
	{% if x_park > x_max %}
	{% set x_park = x_max %}
	{% endif %}
	{% if y_park > y_max %}
	{% set y_park = y_max %}
	{% endif %}
	{% if z_park > z_max %}
	{% set z_park = z_max %}
	{% endif %}
	SAVE_GCODE_STATE NAME=PARK_STATE
	G90
	G1 Z{z_park} F1500
	G1 X{x_park} Y{y_park} F5000
	RESTORE_GCODE_STATE name=PARK_STATE

[gcode_macro START_DRYER]
description = Start the heated bed filament dryer.
gcode = 
	{% set ChamberTemperature = params.CHAMBER | default(65.0) | float %}
	{% set BedTemperature = params.TEMPERATURE | default(0.0) | float %}
	{% set DryTime = params.TIME | default(14400) | int %}
	M140 S{BedTemperature}
	M141 S{ChamberTemperature}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=time_remaining VALUE={DryTime}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=bed_temperature VALUE={BedTemperature}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=chamber_temperature VALUE={ChamberTemperature}
	UPDATE_DELAYED_GCODE ID=DRYER_TIMER DURATION=1

[gcode_macro STOP_DRYER]
gcode = 
	M140 S0
	M141 S0
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=time_remaining VALUE=0
	UPDATE_DELAYED_GCODE ID=DRYER_TIMER DURATION=0
	M117 Drying Stopped

[gcode_macro DRYER_STATUS]
variable_time_remaining = 0
variable_bed_temperature = 0
variable_chamber_temperature = 0
gcode = 
	{% if time_remaining > 0 %}
	M140 S{bed_temperature}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=time_remaining VALUE={time_remaining - 1}
	M117 Drying {time_remaining}
	{% else %}
	STOP_DRYER
	{% endif %}

[delayed_gcode DRYER_TIMER]
gcode = 
	UPDATE_DELAYED_GCODE ID=DRYER_TIMER DURATION=1
	DRYER_STATUS

[gcode_macro DRY_tpu]
gcode = 
	START_DRYER TEMPERATURE=0 CHAMBER=50 TIME=18000

[gcode_macro DRY_PETG]
gcode = 
	START_DRYER TEMPERATURE=0  CHAMBER=65 TIME=18000

[gcode_macro DRY_ABS]
gcode = 
	{% set S = params.S|default(0.0)|float %}
	SET_PIN PIN=Laser VALUE={S / 255.0}

[gcode_macro M4]
gcode = 
	{% set S = params.S|default(0.0)|float %}
	SET_PIN PIN=Laser VALUE={S / 255.0}

[gcode_macro M5]
gcode = 
	SET_PIN PIN=Laser VALUE=0

[menu __main __control __toolonoff]
type = input
enable = {'pwm_tool Laser' in printer}
name = Fan: {'ON ' if menu.input else 'OFF'}
input = {printer['pwm_tool Laser'].value}
input_min = 0
input_max = 1
input_step = 1
gcode = 
	M3 S{255 if menu.input else 0}

[menu __main __control __toolspeed]
type = input
enable = {'pwm_tool Laser' in printer}
name = Laser speed: {'%3d' % (menu.input*100)}%
input = {printer['pwm_tool Laser'].value}
input_min = 0
input_max = 1
input_step = 0.01
gcode = 
	M3 S{'%d' % (menu.input*255)}

[gcode_macro NOTE]
description = 
	"Plays a specified note for a specified duration
	@param {string} [N=C5] - Note to play
	@param {int} [D=500] - Duration of note. There are currently some Klipper limitations to how short a note can be.
	@param {int} [V=99] - Volume in percent
	@param {bool} [S=true] - Whether or not to stop the note after duration"
gcode = 
	{% set notes = {
	'C0': 16.35,   'CS0': 17.32,   'D0': 18.35,   'DS0': 19.45,   'E0': 20.60,   'F0': 21.83,   'FS0': 23.12,   'G0': 24.50,   'GS0': 25.96,   'A0': 27.50,   'AS0': 29.14,   'B0': 30.87,
	'C1': 32.70,   'CS1': 34.65,   'D1': 36.71,   'DS1': 38.89,   'E1': 41.20,   'F1': 43.65,   'FS1': 46.25,   'G1': 49.00,   'GS1': 51.91,   'A1': 55.00,   'AS1': 58.27,   'B1': 61.74,
	'C2': 65.41,   'CS2': 69.30,   'D2': 73.42,   'DS2': 77.78,   'E2': 82.41,   'F2': 87.31,   'FS2': 92.50,   'G2': 98.00,   'GS2': 103.83,  'A2': 110.00,  'AS2': 116.54,  'B2': 123.47,
	'C3': 130.81,  'CS3': 138.59,  'D3': 146.83,  'DS3': 155.56,  'E3': 164.81,  'F3': 174.61,  'FS3': 185.00,  'G3': 196.00,  'GS3': 207.65,  'A3': 220.00,  'AS3': 233.08,  'B3': 246.94,
	'C4': 261.63,  'CS4': 277.18,  'D4': 293.66,  'DS4': 311.13,  'E4': 329.63,  'F4': 349.23,  'FS4': 369.99,  'G4': 392.00,  'GS4': 415.30,  'A4': 440.00,  'AS4': 466.16,  'B4': 493.88,
	'C5': 523.25,  'CS5': 554.37,  'D5': 587.33,  'DS5': 622.25,  'E5': 659.26,  'F5': 698.46,  'FS5': 739.99,  'G5': 783.99,  'GS5': 830.61,  'A5': 880.00,  'AS5': 932.33,  'B5': 987.77,
	'C6': 1046.50, 'CS6': 1108.73, 'D6': 1174.66, 'DS6': 1244.51, 'E6': 1318.51, 'F6': 1396.91, 'FS6': 1479.98, 'G6': 1567.98, 'GS6': 1661.22, 'A6': 1760.00, 'AS6': 1864.66, 'B6': 1975.53,
	'C7': 2093.00, 'CS7': 2217.46, 'D7': 2349.32, 'DS7': 2489.02, 'E7': 2637.02, 'F7': 2793.83, 'FS7': 2959.96, 'G7': 3135.96, 'GS7': 3322.44, 'A7': 3520.00, 'AS7': 3729.31, 'B7': 3951.07,
	'C8': 4186.01, 'CS8': 4434.92, 'D8': 4698.64, 'DS8': 4978.03, 'E8': 5274.04, 'F8': 5587.65, 'FS8': 5919.91, 'G8': 6271.93, 'GS8': 6644.88, 'A8': 7040.00, 'AS8': 7458.62, 'B8': 7902.13,
	} %}
	
	{% set note = params.N|default('C5')|string %}
	
	{% set dur = params.D|default(500)|int %}
	
	
	{% set volume = params.V|default(99)|int %}
	
	{% set stop = params.S|default('true')|string %}
	
	{% set freq = notes[note] %}
	
	SET_PIN PIN=beeper VALUE={0.1 * (volume / 100) if volume > 0 else 1} CYCLE_TIME={ 1.0 / freq }
	G4 P{dur}
	{% if stop|lower == 'true' %}
	SET_PIN PIN=beeper VALUE=0 CYCLE_TIME={ 0.001 }
	{% endif %}

[gcode_macro TONE_GEN]
description = "Used for the tone generator menu"
variable_tone_freq = 0.001093
gcode = 
	M117 {printer["gcode_macro TONE_GEN"].tone_freq}nothz

[gcode_macro SONG_STAR_WARS_MAIN_THEME]
description = "Plays the Star Wars main theme"
gcode = 
	NOTE N=D4 D=133
	NOTE N=D4 D=133
	NOTE N=D4 D=133
	NOTE N=G4 D=1000
	NOTE N=D5 D=1000
	
	NOTE N=C5 D=133
	NOTE N=B4 D=133
	NOTE N=A4 D=133
	NOTE N=G5 D=1000
	NOTE N=D5 D=500
	
	NOTE N=C5 D=133
	NOTE N=B4 D=133
	NOTE N=A4 D=133
	NOTE N=G5 D=1000
	NOTE N=D5 D=500
	
	NOTE N=C5 D=133
	NOTE N=B4 D=133
	NOTE N=C5 D=133
	NOTE N=A4 D=1000

[gcode_macro SONG_CRAB_RAVE]
description = "Plays Crab Rave"
gcode = 
	NOTE N=D6 D=150 V=30 S=1
	NOTE N=AS6 D=150 V=30 S=1
	NOTE N=G6 D=150 V=30 S=1
	NOTE N=G6 D=150 V=30 S=0
	NOTE N=D6 D=150 V=30 S=1
	NOTE N=D6 D=150 V=30 S=0
	NOTE N=A6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=0
	NOTE N=D6 D=150 V=30 S=1
	NOTE N=D6 D=150 V=30 S=0
	NOTE N=A6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=0
	NOTE N=C6 D=150 V=30 S=1
	NOTE N=C6 D=150 V=30 S=1
	NOTE N=E6 D=150 V=30 S=1
	NOTE N=E6 D=150 V=30 S=0
	NOTE N=F6 D=150 V=30 S=1
	SET_PIN PIN=beeper VALUE=0

[gcode_macro one]
description = "one"
gcode = 
	NOTE N=C6 D=600 V=30 S=1
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=G5 D=400 V=30 S=1
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=E6 D=400 V=30 S=1
	G4 P150
	NOTE N=G6 D=180 V=30 S=0
	NOTE N=F6 D=180 V=30 S=0
	NOTE N=E6 D=180 V=30 S=0
	NOTE N=D6 D=180 V=30 S=1
	NOTE N=C6 D=600 V=30 S=1
	
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=G5 D=400 V=30 S=1
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=C6 D=600 V=30 S=1
	SET_PIN PIN=beeper VALUE=0

[gcode_macro SONG_BOOMER]
description = "BOOMER"
gcode = 
	M300 P207 S659
	M300 P207 S784
	M300 P207 S494
	M300 P207 S494
	M300 P207 S392
	M300 P207 S494
	M300 P207 S494
	M300 P207 S330
	M300 P207 S784
	M300 P207 S659
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S988
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S659
	M300 P207 S784
	M300 P207 S494
	M300 P207 S494
	M300 P207 S392
	M300 P207 S494
	M300 P207 S494
	M300 P207 S330
	M300 P207 S784
	M300 P207 S659
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S988
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S659
	M300 P207 S784
	M300 P207 S494
	M300 P207 S494
	M300 P207 S392
	M300 P207 S494
	M300 P207 S494
	M300 P207 S330
	M300 P207 S784
	M300 P207 S659
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S988
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330

[gcode_macro GET_TIMELAPSE_SETUP]
description = Print the Timelapse setup
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% set output_txt = ["Timelapse Setup:"] %}
	{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}
	{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}
	{% if tl.park.enable %}
	{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}
	{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}
	{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}
	{% endif %}
	{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}
	{% if not tl.extruder.fw_retract %}
	{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}
	{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}
	{% endif %}
	{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}
	{action_respond_info(output_txt|join("\n"))}

[gcode_macro _SET_TIMELAPSE_SETUP]
description = Set user parameters for timelapse
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	
	{% set min = printer.toolhead.axis_minimum %}
	{% set max = printer.toolhead.axis_maximum %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	{% set park = {'min'   : {'x': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),
	'y': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},
	'max'   : {'x': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),
	'y': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},
	'center': {'x': (max.x-(max.x-min.x)/2)|round(3),
	'y': (max.y-(max.y-min.y)/2)|round(3)}} %}
	
	{% if params.ENABLE %}
	{% if params.ENABLE|lower is in ['true', 'false'] %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == 'true' else False}
	{% else %}
	{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.VERBOSE %}
	{% if params.VERBOSE|lower is in ['true', 'false'] %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == 'true' else False}
	{% else %}
	{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_X %}
	{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}
	{% set _dummy = tl.park.custom.update({'x':params.CUSTOM_POS_X|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_Y %}
	{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}
	{% set _dummy = tl.park.custom.update({'y':params.CUSTOM_POS_Y|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_DZ %}
	{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}
	{% set _dummy = tl.park.custom.update({'dz':params.CUSTOM_POS_DZ|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}
	{% endif %}
	{% endif %}
	{% if params.PARK_ENABLE %}
	{% if params.PARK_ENABLE|lower is in ['true', 'false'] %}
	{% set _dummy = tl.park.update({'enable':True if params.PARK_ENABLE|lower == 'true' else False}) %}
	{% else %}
	{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.PARK_POS %}
	{% if params.PARK_POS|lower is in ['center','front_left','front_right','back_left','back_right','custom','x_only','y_only'] %}
	{% set dic = {'center'      : {'x': park.center.x   , 'y': park.center.y   , 'dz': 1                },
	'front_left'  : {'x': park.min.x      , 'y': park.min.y      , 'dz': 0                },
	'front_right' : {'x': park.max.x      , 'y': park.min.y      , 'dz': 0                },
	'back_left'   : {'x': park.min.x      , 'y': park.max.y      , 'dz': 0                },
	'back_right'  : {'x': park.max.x      , 'y': park.max.y      , 'dz': 0                },
	'custom'      : {'x': tl.park.custom.x, 'y': tl.park.custom.y, 'dz': tl.park.custom.dz},
	'x_only'      : {'x': tl.park.custom.x, 'y': 'none'          , 'dz': tl.park.custom.dz},
	'y_only'      : {'x': 'none'          , 'y': tl.park.custom.y, 'dz': tl.park.custom.dz}} %}
	{% set _dummy = tl.park.update({'pos':params.PARK_POS|lower}) %}
	{% set _dummy = tl.park.update({'coord':dic[tl.park.pos]}) %}
	{% else %}
	{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"
	% params.PARK_POS|upper)}
	{% endif %}
	{% endif %}
	{% if params.PARK_TIME %}
	{% if params.PARK_TIME|float >= 0.0 %}
	{% set _dummy = tl.park.update({'time':params.PARK_TIME|float|round(3)}) %}
	{% else %}
	{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"
	{% if params.TRAVEL_SPEED %}
	{% if params.TRAVEL_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'travel':params.TRAVEL_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}
	{% endif %}
	{% endif %}
	{% if params.RETRACT_SPEED %}
	{% if params.RETRACT_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'retract':params.RETRACT_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}
	{% endif %}
	{% endif %}
	{% if params.EXTRUDE_SPEED %}
	{% if params.EXTRUDE_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'extrude':params.EXTRUDE_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"
	{% if params.EXTRUDE_DISTANCE %}
	{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}
	{% set _dummy = tl.extruder.update({'extrude':params.EXTRUDE_DISTANCE|float|round(3)}) %}
	{% else %}
	{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}
	{% endif %}
	{% endif %}
	{% if params.RETRACT_DISTANCE %}
	{% if params.RETRACT_DISTANCE|float >= 0.0 %}
	{% set _dummy = tl.extruder.update({'retract':params.RETRACT_DISTANCE|float|round(3)}) %}
	{% else %}
	{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}
	{% endif %}
	{% endif %}
	{% if params.FW_RETRACT %}
	{% if params.FW_RETRACT|lower is in ['true', 'false'] %}
	{% if 'firmware_retraction' in printer.configfile.settings %}
	{% set _dummy = tl.extruder.update({'fw_retract': True if params.FW_RETRACT|lower == 'true' else False}) %}
	{% else %}
	{% set _dummy = tl.extruder.update({'fw_retract':False}) %}
	{% if params.FW_RETRACT|capitalize == 'True' %}
	{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}
	{% endif %}
	{% endif %}
	{% else %}
	{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"
	{% if printer.configfile.settings['gcode_macro pause'] is defined %}
	{% set _dummy = tl.macro.update({'pause': printer.configfile.settings['gcode_macro pause'].rename_existing}) %}
	{% endif %}
	{% if printer.configfile.settings['gcode_macro resume'] is defined %}
	{% set _dummy = tl.macro.update({'resume': printer.configfile.settings['gcode_macro resume'].rename_existing}) %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"

[gcode_macro TIMELAPSE_TAKE_FRAME]
description = Take Timelapse shoot
variable_enable = False
variable_takingframe = False
variable_park = {'enable': False,
	'pos'   : 'center',
	'time'  : 0.1,
	'custom': {'x': 0, 'y': 0, 'dz': 0},
	'coord' : {'x': 0, 'y': 0, 'dz': 0}}
variable_extruder = {'fw_retract': False,
	'retract': 1.0,
	'extrude': 1.0}
variable_speed = {'travel': 100,
	'retract': 15,
	'extrude': 15}
variable_verbose = True
variable_restore = {'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}
variable_macro = {'pause': 'PAUSE', 'resume': 'RESUME'}
variable_is_paused = False
gcode = 
	{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower =='true' else False %}
	{% if enable %}
	{% if (hyperlapse and printer['gcode_macro HYPERLAPSE'].run) or
	(not hyperlapse and not printer['gcode_macro HYPERLAPSE'].run) %}
	{% if park.enable %}
	{% set pos = {'x': 'X' + park.coord.x|string if park.pos != 'y_only' else '',
	'y': 'Y' + park.coord.y|string if park.pos != 'x_only' else '',
	'z': 'Z'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}
	{% set restore = {'absolute': {'coordinates': printer.gcode_move.absolute_coordinates,
	'extrude'    : printer.gcode_move.absolute_extrude},
	'speed'   : printer.gcode_move.speed,
	'e'       : printer.gcode_move.gcode_position.e,
	'factor'  : {'speed'  : printer.gcode_move.speed_factor,
	'extrude': printer.gcode_move.extrude_factor}} %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"
	{% if not printer[printer.toolhead.extruder].can_extrude %}
	{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}
	{% else %}
	{% if extruder.fw_retract %}
	G10
	{% else %}
	M83
	G0 E-{extruder.retract} F{speed.retract * 60}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True
	{macro.pause}
	SET_GCODE_OFFSET X=0 Y=0
	G90
	{% if "xyz" not in printer.toolhead.homed_axes %}
	{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}
	{% else %}
	G0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5
	M400
	{% endif %}
	_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}
	{% endif %}
	{% else %}
	{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}
	{% endif %}

[gcode_macro _TIMELAPSE_NEW_FRAME]
description = action call for timelapse shoot. must be a seperate macro
gcode = 
	{action_call_remote_method("timelapse_newframe",
	macropark=printer['gcode_macro TIMELAPSE_TAKE_FRAME'].park,
	hyperlapse=params.HYPERLAPSE)}

[delayed_gcode _WAIT_TIMELAPSE_TAKE_FRAME]
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% set factor = {'speed': printer.gcode_move.speed_factor, 'extrude': printer.gcode_move.extrude_factor} %}
	{% if tl.takingframe %}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5
	{% else %}
	{tl.macro.resume} VELOCITY={tl.speed.travel}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False
	{% if not printer[printer.toolhead.extruder].can_extrude %}
	{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}
	{% else %}
	{% if tl.extruder.fw_retract %}
	G11
	{% else %}
	G0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}
	G0 F{tl.restore.speed}
	{% if tl.restore.absolute.extrude %}
	M82
	G92 E{tl.restore.e}
	{% endif %}
	{% endif %}
	{% endif %}
	{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}
	{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}
	{% if not tl.restore.absolute.coordinates %} G91 {% endif %}
	{% endif %}

[gcode_macro HYPERLAPSE]
description = Start/Stop a hyperlapse recording
variable_cycle = 0
variable_run = False
gcode = 
	{% set cycle = params.CYCLE|default(30)|int %}
	{% if params.ACTION and params.ACTION|lower == 'start' %}
	{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}
	TIMELAPSE_TAKE_FRAME HYPERLAPSE=True
	{% elif params.ACTION and params.ACTION|lower == 'stop' %}
	{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0
	{% else %}
	{action_raise_error("Hyperlapse: No valid input parameter
	Use:
	- HYPERLAPSE ACTION=START [CYCLE=time]
	- HYPERLAPSE ACTION=STOP")}
	{% endif %}

[delayed_gcode _HYPERLAPSE_LOOP]
gcode = 
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}
	TIMELAPSE_TAKE_FRAME HYPERLAPSE=True

[gcode_macro TIMELAPSE_RENDER]
description = Render Timelapse video and wait for the result
variable_render = False
variable_run_identifier = 0
gcode = 
	{action_respond_info("Timelapse: Rendering started")}
	{action_call_remote_method("timelapse_render", byrendermacro="True")}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True
	{printer.configfile.settings['gcode_macro pause'].rename_existing}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5

[delayed_gcode _WAIT_TIMELAPSE_RENDER]
gcode = 
	{% set ri = printer['gcode_macro TIMELAPSE_RENDER'].run_identifier % 4 %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}
	{% if printer['gcode_macro TIMELAPSE_RENDER'].render %}
	M117 Rendering {['-','\\','|','/'][ri]}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5
	{% else %}
	{action_respond_info("Timelapse: Rendering finished")}
	M117
	{printer.configfile.settings['gcode_macro resume'].rename_existing}
	{% endif %}

[gcode_macro TEST_STREAM_DELAY]
description = Helper macro to find stream and park delay
gcode = 
	{% set min = printer.toolhead.axis_minimum %}
	{% set max = printer.toolhead.axis_maximum %}
	{% set act = printer.toolhead.position %}
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% if act.z > 5.0 %}
	G0 X{min.x + 5.0} F{tl.speed.travel|int * 60}
	G0 X{(max.x-min.x)/2}
	G4 P{tl.park.time|float * 1000}
	_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE
	G0 X{max.x - 5.0}
	{% else %}
	{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}
	{% endif %}

[exclude_object]

[gcode_shell_command update_git_script]
command = bash -c "bash $HOME/klipper-backup/script.sh"
timeout = 90.0
verbose = True

[gcode_shell_command update_git_script_message]
command = bash -c "bash $HOME/klipper-backup/script.sh -c \"$0\""
timeout = 90.0
verbose = True

[mcu]
serial = /dev/ttyS3
restart_method = command

[output_pin Power]
pin = PC12
value = 1
shutdown_value = 1

[temperature_sensor orange_pi]
sensor_type = temperature_host
min_temp = 0
max_temp = 100

[heater_generic chamber_heater]
heater_pin = !PA7
sensor_type = ATC Semitec 104GT-2
sensor_pin = PA5
control = watermark
max_power = 1
min_temp = 15
max_temp = 85

[verify_heater chamber_heater]
max_error = 9999
check_gain_time = 9999
hysteresis = 5
heating_gain = 2

[filament_motion_sensor motion_sensor]
detection_length = 50
extruder = extruder
switch_pin = !PC15
pause_on_runout = True
runout_gcode = 
	SONG_CRAB_RAVE

[bltouch]
sensor_pin = ^PC14
control_pin = PA1
x_offset = -40
y_offset = 0.000
z_offset = 1.70
pin_up_reports_not_triggered = False
probe_with_touch_mode = True

[heater_bed]
heater_pin = PC9
sensor_type = ATC Semitec 104GT-2
sensor_pin = PC3
control = pid
pid_kp = 72.553
pid_ki = 1.154
pid_kd = 1139.994
min_temp = 5
max_temp = 125

[heater_fan radiator]
pin = PC7
max_power = 1.0
kick_start_time = 0.600
heater = extruder
heater_temp = 50.0
shutdown_speed = 1

[fan]
pin = PC6

[input_shaper]
shaper_type_x = 2hump_ei
shaper_freq_x = 43.0
shaper_type_y = mzv
shaper_freq_y = 32.6

[printer]
kinematics = cartesian
max_velocity = 300
max_accel = 1900
max_z_velocity = 30
max_z_accel = 100
square_corner_velocity = 4

[bed_mesh]
speed = 150
horizontal_move_z = 9
mesh_min = 10, 20
mesh_max = 195, 210
probe_count = 5
mesh_pps = 2, 3
algorithm = bicubic
bicubic_tension = 0.2
move_check_distance = 9
split_delta_z = .025
fade_start = 1
fade_end = 10
fade_target = 0

[screws_tilt_adjust]
screw1 = 79, 27
screw1_name = Peredniy Leviy
screw2 = 235, 27
screw2_name = Peredniy Praviy
screw3 = 235,197
screw3_name = Zadniy Praviy
screw4 = 79,197
screw4_name = Zadniy Leviy
speed = 120
horizontal_move_z = 9

[safe_z_home]
home_xy_position = 157,115
speed = 50
z_hop = 9.0
z_hop_speed = 20.0

[stepper_x]
step_pin = PB13
dir_pin = !PB12
enable_pin = !PB14
microsteps = 16
rotation_distance = 40
endstop_pin = ^PC0
position_endstop = 0
position_max = 240
position_min = -2
homing_retract_dist = 5
homing_speed = 50
second_homing_speed = 10

[tmc2209 stepper_x]
uart_pin = PC11
tx_pin = PC10
uart_address = 0
run_current = 0.580
stealthchop_threshold = 999999

[stepper_y]
step_pin = PB10
dir_pin = !PB2
enable_pin = !PB11
microsteps = 16
rotation_distance = 40
endstop_pin = ^PC1
position_endstop = 0
homing_retract_dist = 5
homing_speed = 50
second_homing_speed = 10
position_max = 231
position_min = 0

[tmc2209 stepper_y]
uart_pin = PC11
tx_pin = PC10
uart_address = 2
run_current = 0.6
stealthchop_threshold = 999999

[stepper_z]
step_pin = PB0
dir_pin = PC5
enable_pin = !PB1
microsteps = 16
rotation_distance = 40
gear_ratio = 80:16
full_steps_per_rotation = 200
endstop_pin = probe:z_virtual_endstop
homing_retract_dist = 9
second_homing_speed = 10
position_min = -5
position_max = 245
homing_speed = 50

[tmc2209 stepper_z]
uart_pin = PC11
tx_pin = PC10
uart_address = 1
run_current = 0.580
stealthchop_threshold = 999999
interpolate = false

[extruder]
step_pin = PB3
dir_pin = PB4
enable_pin = !PD2
microsteps = 16
rotation_distance = 4.637
nozzle_diameter = 0.400
filament_diameter = 1.750
heater_pin = PC8
sensor_type = ATC Semitec 104GT-2
sensor_pin = PA0
min_temp = 5
max_temp = 270
max_extrude_only_velocity = 120
max_extrude_only_accel = 3000
pressure_advance = 0.031
full_steps_per_rotation = 200
control = pid
pid_kp = 29.662
pid_ki = 2.382
pid_kd = 92.322

[tmc2209 extruder]
uart_pin = PC11
tx_pin = PC10
uart_address = 3
run_current = 0.7
stealthchop_threshold = 999999

[static_digital_output usb_pullup_enable]
pins = !PA14

[board_pins]
aliases = 
	
	EXP1_1=PB5,  EXP1_3=PA9,   EXP1_5=PA10, EXP1_7=PB8,  EXP1_9=<GND>,
	EXP1_2=PA15, EXP1_4=<RST>, EXP1_6=PB9,  EXP1_8=PB15, EXP1_10=<5V>

[display]
lcd_type = st7920
cs_pin = EXP1_7
sclk_pin = EXP1_6
sid_pin = EXP1_8
encoder_pins = ^EXP1_5, ^EXP1_3
click_pin = ^!EXP1_2

[pwm_cycle_time beeper]
pin = EXP1_1
shutdown_value = 0
cycle_time = 0.001

[firmware_retraction]
retract_length = 1.0
retract_speed = 80
unretract_extra_length = 0
unretract_speed = 80

[pwm_tool Laser]
pin = PA6
cycle_time = 0.0001
shutdown_value = 0
maximum_mcu_duration = 5

[bed_mesh 70]
version = 1
points = 
	-0.045000, 0.027500, 0.015000
	-0.055000, -0.005000, -0.035000
	-0.007500, 0.040000, -0.002500
x_count = 3
y_count = 3
mesh_x_pps = 2
mesh_y_pps = 3
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 195.0
min_y = 20.0
max_y = 210.0

[bed_mesh default]
version = 1
points = 
	0.020000, 0.025000, 0.030000, -0.007500, -0.052500
	0.015000, 0.017500, 0.022500, -0.007500, -0.057500
	0.030000, 0.030000, 0.037500, 0.002500, -0.035000
	0.012500, 0.030000, 0.050000, 0.035000, -0.010000
	0.080000, 0.087500, 0.115000, 0.097500, 0.067500
x_count = 5
y_count = 5
mesh_x_pps = 2
mesh_y_pps = 3
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 195.0
min_y = 20.0
max_y = 210.0
=======================
Extruder max_extrude_ratio=0.266081
mcu 'mcu': Starting serial connect
mcu 'mcu': got {'oid': 14, 'next_clock': 2183810816, 'value': 31193, '#name': 'analog_in_state', '#sent_time': 25.707427678000002, '#receive_time': 25.709482511}
mcu 'mcu': got {'oid': 18, 'next_clock': 2186690816, 'value': 31308, '#name': 'analog_in_state', '#sent_time': 25.707427678000002, '#receive_time': 25.749525011000003}
webhooks client 281473445355936: New connection
mcu 'mcu': got {'oid': 26, 'next_clock': 2192450816, 'value': 31253, '#name': 'analog_in_state', '#sent_time': 25.813145136000003, '#receive_time': 25.829576511000003}
mcu 'mcu': got {'count': 188, 'sum': 348725, 'sumsq': 3223214, '#name': 'stats', '#sent_time': 25.865730720000002, '#receive_time': 25.866811470000002}
mcu 'mcu': got {'oid': 14, 'next_clock': 2205410816, 'value': 31208, '#name': 'analog_in_state', '#sent_time': 25.97274222, '#receive_time': 26.009519511}
mcu 'mcu': got {'oid': 18, 'next_clock': 2208290816, 'value': 31314, '#name': 'analog_in_state', '#sent_time': 26.025098011, '#receive_time': 26.049532928}
Loaded MCU 'mcu' 118 commands (v0.12.0-404-g80d185c94 / gcc: (15:12.2.rel1-1) 12.2.1 20221205 binutils: (2.40-2+18+b1) 2.40)
MCU 'mcu' config: ADC_MAX=4095 BUS_PINS_i2c1=PB6,PB7 BUS_PINS_i2c1a=PB8,PB9 BUS_PINS_i2c2=PB10,PB11 BUS_PINS_spi1=PA6,PA7,PA5 BUS_PINS_spi1a=PB4,PB5,PB3 BUS_PINS_spi2=PB14,PB15,PB13 BUS_PINS_spi3=PB4,PB5,PB3 CLOCK_FREQ=72000000 INITIAL_PINS=!PA14 MCU=stm32f103xe PWM_MAX=255 RECEIVE_WINDOW=192 RESERVE_PINS_serial=PA3,PA2 SERIAL_BAUD=250000 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
Configured MCU 'mcu' (1024 moves)
Starting heater checks for chamber_heater
Starting heater checks for heater_bed
bed_mesh: generated points
Index |  Tool Adjusted  |   Probe
  0   | (50.0, 20.0)    | (10.0, 20.0)
  1   | (96.2, 20.0)    | (56.2, 20.0)
  2   | (142.5, 20.0)   | (102.5, 20.0)
  3   | (188.8, 20.0)   | (148.8, 20.0)
  4   | (235.0, 20.0)   | (195.0, 20.0)
  5   | (235.0, 67.5)   | (195.0, 67.5)
  6   | (188.8, 67.5)   | (148.8, 67.5)
  7   | (142.5, 67.5)   | (102.5, 67.5)
  8   | (96.2, 67.5)    | (56.2, 67.5)
  9   | (50.0, 67.5)    | (10.0, 67.5)
  10  | (50.0, 115.0)   | (10.0, 115.0)
  11  | (96.2, 115.0)   | (56.2, 115.0)
  12  | (142.5, 115.0)  | (102.5, 115.0)
  13  | (188.8, 115.0)  | (148.8, 115.0)
  14  | (235.0, 115.0)  | (195.0, 115.0)
  15  | (235.0, 162.5)  | (195.0, 162.5)
  16  | (188.8, 162.5)  | (148.8, 162.5)
  17  | (142.5, 162.5)  | (102.5, 162.5)
  18  | (96.2, 162.5)   | (56.2, 162.5)
  19  | (50.0, 162.5)   | (10.0, 162.5)
  20  | (50.0, 210.0)   | (10.0, 210.0)
  21  | (96.2, 210.0)   | (56.2, 210.0)
  22  | (142.5, 210.0)  | (102.5, 210.0)
  23  | (188.8, 210.0)  | (148.8, 210.0)
  24  | (235.0, 210.0)  | (195.0, 210.0)
webhooks client 281473445355936: Client info {'program': 'Moonraker', 'version': 'v0.9.3-4-ga4604e3'}
Starting heater checks for extruder
Stats 26.6: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=3083 bytes_read=6273 bytes_retransmit=9 bytes_invalid=0 send_seq=214 receive_seq=211 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=2075 upcoming_bytes=50 freq=71999571  orange_pi: temp=53.4 chamber_heater: target=0 temp=0.0 pwm=0.000 heater_bed: target=0 temp=0.0 pwm=0.000 sysload=2.06 cputime=4.576 memavail=1728256 print_time=269.796 buffer_time=0.241 print_stall=0 extruder: target=0 temp=0.0 pwm=0.000
webhooks: registering remote method 'shutdown_machine' for connection id: 281473445355936
webhooks: registering remote method 'reboot_machine' for connection id: 281473445355936
webhooks: registering remote method 'pause_job_queue' for connection id: 281473445355936
webhooks: registering remote method 'start_job_queue' for connection id: 281473445355936
Stats 27.6: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=5437 bytes_read=6609 bytes_retransmit=9 bytes_invalid=0 send_seq=259 receive_seq=259 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998713  orange_pi: temp=53.6 chamber_heater: target=0 temp=26.2 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=2.06 cputime=4.614 memavail=1728256 print_time=269.796 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 28.6: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=5495 bytes_read=6795 bytes_retransmit=9 bytes_invalid=0 send_seq=264 receive_seq=264 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998469  orange_pi: temp=54.4 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=2.06 cputime=4.657 memavail=1726748 print_time=269.796 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 29.6: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=5501 bytes_read=6961 bytes_retransmit=9 bytes_invalid=0 send_seq=265 receive_seq=265 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998422  orange_pi: temp=51.4 chamber_heater: target=0 temp=26.2 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=2.06 cputime=4.684 memavail=1726904 print_time=269.796 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 30.6: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=5521 bytes_read=7132 bytes_retransmit=9 bytes_invalid=0 send_seq=267 receive_seq=267 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998368  orange_pi: temp=49.9 chamber_heater: target=0 temp=26.8 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=2.06 cputime=4.711 memavail=1743636 print_time=269.796 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 31.6: gcodein=0  mcu: mcu_awake=0.054 mcu_task_avg=0.000128 mcu_task_stddev=0.000285 bytes_write=5541 bytes_read=7320 bytes_retransmit=9 bytes_invalid=0 send_seq=269 receive_seq=269 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998328  orange_pi: temp=49.9 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.8 pwm=0.000 sysload=2.06 cputime=4.733 memavail=1744280 print_time=269.796 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 32.6: gcodein=0  mcu: mcu_awake=0.054 mcu_task_avg=0.000128 mcu_task_stddev=0.000285 bytes_write=5547 bytes_read=7486 bytes_retransmit=9 bytes_invalid=0 send_seq=270 receive_seq=270 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998305  orange_pi: temp=47.6 chamber_heater: target=0 temp=26.9 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=2.06 cputime=4.755 memavail=1744304 print_time=269.796 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 33.6: gcodein=0  mcu: mcu_awake=0.054 mcu_task_avg=0.000128 mcu_task_stddev=0.000285 bytes_write=5553 bytes_read=7652 bytes_retransmit=9 bytes_invalid=0 send_seq=271 receive_seq=271 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998259  orange_pi: temp=47.1 chamber_heater: target=0 temp=26.2 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=2.06 cputime=4.777 memavail=1744304 print_time=269.796 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 34.6: gcodein=0  mcu: mcu_awake=0.054 mcu_task_avg=0.000128 mcu_task_stddev=0.000285 bytes_write=5559 bytes_read=7818 bytes_retransmit=9 bytes_invalid=0 send_seq=272 receive_seq=272 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998235  orange_pi: temp=47.3 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=2.06 cputime=4.798 memavail=1744052 print_time=269.796 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Running Command {update_git_script}...:
[1;93m●[0m Checking for installed dependencies /[K[1;92m●[0m Checking for installed dependencies [1;92mDone![0m


Stats 35.6: gcodein=0  mcu: mcu_awake=0.054 mcu_task_avg=0.000128 mcu_task_stddev=0.000285 bytes_write=5565 bytes_read=7984 bytes_retransmit=9 bytes_invalid=0 send_seq=273 receive_seq=273 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998250  orange_pi: temp=47.8 chamber_heater: target=0 temp=26.3 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=2.05 cputime=4.835 memavail=1738600 print_time=269.796 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Klipper-Backup is up to date


Stats 36.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5571 bytes_read=8164 bytes_retransmit=9 bytes_invalid=0 send_seq=274 receive_seq=274 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998245  orange_pi: temp=48.9 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.8 pwm=0.000 sysload=2.05 cputime=4.866 memavail=1737572 print_time=269.796 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
From https://github.com/Ferz82/github-klipper-backup
 * branch            main       -> FETCH_HEAD

Already up to date.

Stats 37.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5577 bytes_read=8330 bytes_retransmit=9 bytes_invalid=0 send_seq=275 receive_seq=275 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998259  orange_pi: temp=48.2 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.7 pwm=0.000 sysload=2.05 cputime=4.897 memavail=1740452 print_time=269.796 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Skipping symbolic link: printer_data/config/mainsail.cfg

On branch main
Your branch is up to date with 'origin/main'.

nothing to commit, working tree clean

Stats 38.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5583 bytes_read=8496 bytes_retransmit=9 bytes_invalid=0 send_seq=276 receive_seq=276 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998277  orange_pi: temp=47.8 chamber_heater: target=0 temp=27.3 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=2.05 cputime=4.931 memavail=1739004 print_time=269.796 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
[main 7685dde] New backup from 25.12.2024 - 21:58:08 - No new changes pushed

Stats 39.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5589 bytes_read=8662 bytes_retransmit=9 bytes_invalid=0 send_seq=277 receive_seq=277 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998297  orange_pi: temp=49.3 chamber_heater: target=0 temp=26.3 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=2.05 cputime=4.961 memavail=1738976 print_time=269.796 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
To https://github.com/Ferz82/github-klipper-backup.git
   ae8c6c6..7685dde  main -> main

Branch 'main' set up to track remote branch 'main' from 'origin'.

Command {update_git_script} finished

Stats 40.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5595 bytes_read=8828 bytes_retransmit=9 bytes_invalid=0 send_seq=278 receive_seq=278 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998288  orange_pi: temp=48.0 chamber_heater: target=0 temp=26.2 pwm=0.000 heater_bed: target=0 temp=24.7 pwm=0.000 sysload=2.05 cputime=5.019 memavail=1742280 print_time=269.796 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 41.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000012 bytes_write=5601 bytes_read=9008 bytes_retransmit=9 bytes_invalid=0 send_seq=279 receive_seq=279 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998287  orange_pi: temp=46.8 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=2.05 cputime=5.040 memavail=1742056 print_time=269.796 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 42.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000012 bytes_write=5607 bytes_read=9174 bytes_retransmit=9 bytes_invalid=0 send_seq=280 receive_seq=280 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998294  orange_pi: temp=47.2 chamber_heater: target=0 temp=26.2 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=2.05 cputime=5.061 memavail=1742056 print_time=269.796 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 43.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000012 bytes_write=5613 bytes_read=9340 bytes_retransmit=9 bytes_invalid=0 send_seq=281 receive_seq=281 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998291  orange_pi: temp=46.5 chamber_heater: target=0 temp=26.2 pwm=0.000 heater_bed: target=0 temp=24.7 pwm=0.000 sysload=2.05 cputime=5.082 memavail=1742056 print_time=269.796 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 44.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000012 bytes_write=5652 bytes_read=9521 bytes_retransmit=9 bytes_invalid=0 send_seq=285 receive_seq=285 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998297  orange_pi: temp=46.8 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.7 pwm=0.000 sysload=2.05 cputime=5.104 memavail=1741816 print_time=269.796 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 45.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000012 bytes_write=5658 bytes_read=9687 bytes_retransmit=9 bytes_invalid=0 send_seq=286 receive_seq=286 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998302  orange_pi: temp=46.2 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.96 cputime=5.126 memavail=1741364 print_time=269.796 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 46.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000017 bytes_write=5664 bytes_read=9867 bytes_retransmit=9 bytes_invalid=0 send_seq=287 receive_seq=287 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998306  orange_pi: temp=46.8 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.96 cputime=5.147 memavail=1741364 print_time=269.796 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 47.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000017 bytes_write=5670 bytes_read=10033 bytes_retransmit=9 bytes_invalid=0 send_seq=288 receive_seq=288 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998303  orange_pi: temp=46.6 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.7 pwm=0.000 sysload=1.96 cputime=5.169 memavail=1741364 print_time=269.796 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 48.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000017 bytes_write=5690 bytes_read=10204 bytes_retransmit=9 bytes_invalid=0 send_seq=290 receive_seq=290 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998300  orange_pi: temp=46.8 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.96 cputime=5.191 memavail=1741364 print_time=269.796 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 49.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000017 bytes_write=5734 bytes_read=10390 bytes_retransmit=9 bytes_invalid=0 send_seq=295 receive_seq=295 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998293  orange_pi: temp=46.8 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.8 pwm=0.000 sysload=1.96 cputime=5.212 memavail=1741364 print_time=269.796 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 50.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000017 bytes_write=5759 bytes_read=10566 bytes_retransmit=9 bytes_invalid=0 send_seq=298 receive_seq=298 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998293  orange_pi: temp=46.5 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.8 pwm=0.000 sysload=1.89 cputime=5.234 memavail=1741364 print_time=269.796 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 51.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000018 bytes_write=5765 bytes_read=10747 bytes_retransmit=9 bytes_invalid=0 send_seq=299 receive_seq=299 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998294  orange_pi: temp=46.4 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.89 cputime=5.255 memavail=1741364 print_time=269.796 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 52.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000018 bytes_write=5771 bytes_read=10913 bytes_retransmit=9 bytes_invalid=0 send_seq=300 receive_seq=300 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998299  orange_pi: temp=46.4 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.89 cputime=5.276 memavail=1741364 print_time=269.796 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 53.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000018 bytes_write=5796 bytes_read=11089 bytes_retransmit=9 bytes_invalid=0 send_seq=303 receive_seq=303 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998304  orange_pi: temp=46.6 chamber_heater: target=0 temp=26.7 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.89 cputime=5.298 memavail=1741364 print_time=269.796 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 54.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000018 bytes_write=5802 bytes_read=11264 bytes_retransmit=9 bytes_invalid=0 send_seq=304 receive_seq=304 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998317  orange_pi: temp=46.2 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.89 cputime=5.319 memavail=1741364 print_time=269.796 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 55.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000018 bytes_write=5833 bytes_read=11430 bytes_retransmit=9 bytes_invalid=0 send_seq=308 receive_seq=308 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998318  orange_pi: temp=46.4 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.81 cputime=5.341 memavail=1741124 print_time=269.796 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 56.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000015 bytes_write=5839 bytes_read=11599 bytes_retransmit=9 bytes_invalid=0 send_seq=309 receive_seq=309 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998319  orange_pi: temp=46.8 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.81 cputime=5.362 memavail=1741124 print_time=269.796 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.6 pwm=0.000
Stats 57.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000015 bytes_write=5883 bytes_read=11788 bytes_retransmit=9 bytes_invalid=0 send_seq=314 receive_seq=314 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998318  orange_pi: temp=46.4 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.81 cputime=5.384 memavail=1741124 print_time=269.796 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 58.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000015 bytes_write=5889 bytes_read=11938 bytes_retransmit=9 bytes_invalid=0 send_seq=315 receive_seq=315 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998319  orange_pi: temp=46.4 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.81 cputime=5.405 memavail=1741124 print_time=269.796 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 59.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000015 bytes_write=5895 bytes_read=12104 bytes_retransmit=9 bytes_invalid=0 send_seq=316 receive_seq=316 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998321  orange_pi: temp=46.6 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.81 cputime=5.426 memavail=1741124 print_time=269.796 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 60.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000015 bytes_write=5901 bytes_read=12285 bytes_retransmit=9 bytes_invalid=0 send_seq=317 receive_seq=317 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998319  orange_pi: temp=46.8 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.75 cputime=5.447 memavail=1741132 print_time=269.796 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 61.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000015 bytes_write=5907 bytes_read=12450 bytes_retransmit=9 bytes_invalid=0 send_seq=318 receive_seq=318 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998318  orange_pi: temp=46.0 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.75 cputime=5.467 memavail=1741132 print_time=269.796 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 62.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000015 bytes_write=5932 bytes_read=12626 bytes_retransmit=9 bytes_invalid=0 send_seq=321 receive_seq=321 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998317  orange_pi: temp=46.6 chamber_heater: target=0 temp=26.7 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.75 cputime=5.489 memavail=1741132 print_time=269.796 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 63.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000015 bytes_write=5971 bytes_read=12822 bytes_retransmit=9 bytes_invalid=0 send_seq=325 receive_seq=325 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998318  orange_pi: temp=46.4 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.75 cputime=5.510 memavail=1741132 print_time=269.796 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 64.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000015 bytes_write=5996 bytes_read=12983 bytes_retransmit=9 bytes_invalid=0 send_seq=328 receive_seq=328 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998316  orange_pi: temp=46.4 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.75 cputime=5.531 memavail=1741132 print_time=269.796 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 65.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000015 bytes_write=6002 bytes_read=13149 bytes_retransmit=9 bytes_invalid=0 send_seq=329 receive_seq=329 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998315  orange_pi: temp=46.6 chamber_heater: target=0 temp=26.7 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.69 cputime=5.552 memavail=1740916 print_time=269.796 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 66.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000018 bytes_write=6008 bytes_read=13345 bytes_retransmit=9 bytes_invalid=0 send_seq=330 receive_seq=330 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998316  orange_pi: temp=46.6 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.69 cputime=5.574 memavail=1740916 print_time=269.796 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 67.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000018 bytes_write=6014 bytes_read=13496 bytes_retransmit=9 bytes_invalid=0 send_seq=331 receive_seq=331 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998316  orange_pi: temp=46.5 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.69 cputime=5.594 memavail=1740916 print_time=269.796 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 68.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000018 bytes_write=6020 bytes_read=13662 bytes_retransmit=9 bytes_invalid=0 send_seq=332 receive_seq=332 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998316  orange_pi: temp=46.8 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.69 cputime=5.615 memavail=1740916 print_time=269.796 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 69.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000018 bytes_write=6026 bytes_read=13843 bytes_retransmit=9 bytes_invalid=0 send_seq=333 receive_seq=333 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998317  orange_pi: temp=46.6 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.69 cputime=5.636 memavail=1740916 print_time=269.796 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 70.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000018 bytes_write=6032 bytes_read=13994 bytes_retransmit=9 bytes_invalid=0 send_seq=334 receive_seq=334 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998317  orange_pi: temp=46.4 chamber_heater: target=0 temp=26.6 pwm=0.000 heater_bed: target=0 temp=24.7 pwm=0.000 sysload=1.63 cputime=5.657 memavail=1740916 print_time=269.796 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 71.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000017 bytes_write=6071 bytes_read=14189 bytes_retransmit=9 bytes_invalid=0 send_seq=338 receive_seq=338 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998316  orange_pi: temp=46.2 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.7 pwm=0.000 sysload=1.63 cputime=5.679 memavail=1740916 print_time=269.796 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 72.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000017 bytes_write=6077 bytes_read=14370 bytes_retransmit=9 bytes_invalid=0 send_seq=339 receive_seq=339 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998318  orange_pi: temp=46.2 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.63 cputime=5.700 memavail=1740916 print_time=269.796 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 73.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000017 bytes_write=6116 bytes_read=14536 bytes_retransmit=9 bytes_invalid=0 send_seq=343 receive_seq=343 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998319  orange_pi: temp=46.6 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.63 cputime=5.721 memavail=1740916 print_time=269.796 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 74.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000017 bytes_write=6136 bytes_read=14707 bytes_retransmit=9 bytes_invalid=0 send_seq=345 receive_seq=345 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998318  orange_pi: temp=47.0 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.63 cputime=5.742 memavail=1740916 print_time=269.796 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 75.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000017 bytes_write=6161 bytes_read=14898 bytes_retransmit=9 bytes_invalid=0 send_seq=348 receive_seq=348 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998317  orange_pi: temp=46.4 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.58 cputime=5.764 memavail=1740940 print_time=269.796 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 76.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000020 bytes_write=6167 bytes_read=15064 bytes_retransmit=9 bytes_invalid=0 send_seq=349 receive_seq=349 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998318  orange_pi: temp=45.8 chamber_heater: target=0 temp=26.8 pwm=0.000 heater_bed: target=0 temp=24.7 pwm=0.000 sysload=1.58 cputime=5.784 memavail=1740940 print_time=269.796 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 77.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000020 bytes_write=6173 bytes_read=15230 bytes_retransmit=9 bytes_invalid=0 send_seq=350 receive_seq=350 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998319  orange_pi: temp=46.5 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.58 cputime=5.806 memavail=1740940 print_time=269.796 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 78.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000020 bytes_write=6193 bytes_read=15416 bytes_retransmit=9 bytes_invalid=0 send_seq=352 receive_seq=352 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998317  orange_pi: temp=46.4 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.58 cputime=5.827 memavail=1740940 print_time=269.796 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 79.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000020 bytes_write=6218 bytes_read=15577 bytes_retransmit=9 bytes_invalid=0 send_seq=355 receive_seq=355 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998314  orange_pi: temp=46.4 chamber_heater: target=0 temp=26.3 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.58 cputime=5.848 memavail=1740940 print_time=269.796 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.6 pwm=0.000
Stats 80.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000020 bytes_write=6257 bytes_read=15758 bytes_retransmit=9 bytes_invalid=0 send_seq=359 receive_seq=359 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998311  orange_pi: temp=46.0 chamber_heater: target=0 temp=26.3 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.54 cputime=5.869 memavail=1740940 print_time=269.796 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 81.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000020 bytes_write=6263 bytes_read=15954 bytes_retransmit=9 bytes_invalid=0 send_seq=360 receive_seq=360 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998311  orange_pi: temp=46.8 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.54 cputime=5.890 memavail=1740940 print_time=269.796 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 82.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000020 bytes_write=6269 bytes_read=16105 bytes_retransmit=9 bytes_invalid=0 send_seq=361 receive_seq=361 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998314  orange_pi: temp=46.7 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.54 cputime=5.911 memavail=1740940 print_time=269.796 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 83.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000020 bytes_write=6275 bytes_read=16271 bytes_retransmit=9 bytes_invalid=0 send_seq=362 receive_seq=362 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998314  orange_pi: temp=46.5 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.54 cputime=5.932 memavail=1740940 print_time=269.796 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 84.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000020 bytes_write=6281 bytes_read=16452 bytes_retransmit=9 bytes_invalid=0 send_seq=363 receive_seq=363 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998315  orange_pi: temp=46.3 chamber_heater: target=0 temp=26.3 pwm=0.000 heater_bed: target=0 temp=24.7 pwm=0.000 sysload=1.54 cputime=5.953 memavail=1740940 print_time=269.796 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 85.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000021 mcu_task_stddev=0.000020 bytes_write=6287 bytes_read=16603 bytes_retransmit=9 bytes_invalid=0 send_seq=364 receive_seq=364 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998316  orange_pi: temp=46.4 chamber_heater: target=0 temp=26.3 pwm=0.000 heater_bed: target=0 temp=24.7 pwm=0.000 sysload=1.49 cputime=5.974 memavail=1740952 print_time=269.796 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 86.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=6293 bytes_read=16798 bytes_retransmit=9 bytes_invalid=0 send_seq=365 receive_seq=365 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998316  orange_pi: temp=46.7 chamber_heater: target=0 temp=26.5 pwm=0.000 heater_bed: target=0 temp=24.7 pwm=0.000 sysload=1.49 cputime=5.995 memavail=1740952 print_time=269.796 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Running Command {update_git_script}...:
[1;93m●[0m Checking for installed dependencies /[K[1;92m●[0m Checking for installed dependencies [1;92mDone![0m


Klipper-Backup is up to date


From https://github.com/Ferz82/github-klipper-backup
 * branch            main       -> FETCH_HEAD

   7685dde..0d2c5c1  main       -> origin/main

Updating 7685dde..0d2c5c1
Fast-forward

 printer_data/config/macros.cfg        | 858 ----------------------------------
 printer_data/config/moonraker.conf    |  49 --
 printer_data/config/printer.cfg       | 382 ---------------
 printer_data/config/shell_command.cfg |  10 -
 printer_data/config/timelapse.cfg     | 424 -----------------
 5 files changed, 1723 deletions(-)
 delete mode 100644 printer_data/config/macros.cfg
 delete mode 100644 printer_data/config/moonraker.conf
 delete mode 100644 printer_data/config/printer.cfg
 delete mode 100644 printer_data/config/shell_command.cfg
 delete mode 100644 printer_data/config/timelapse.cfg

Skipping symbolic link: printer_data/config/mainsail.cfg

[main 9c13906] New backup from 25.12.2024 - 21:59:48
 5 files changed, 1723 insertions(+)
 create mode 100644 printer_data/config/macros.cfg
 create mode 100644 printer_data/config/moonraker.conf
 create mode 100644 printer_data/config/printer.cfg
 create mode 100644 printer_data/config/shell_command.cfg
 create mode 100644 printer_data/config/timelapse.cfg

To https://github.com/Ferz82/github-klipper-backup.git
   0d2c5c1..9c13906  main -> main

Branch 'main' set up to track remote branch 'main' from 'origin'.

Command {update_git_script} finished

Running Command {update_git_script}...:
[1;93m●[0m Checking for installed dependencies /[K[1;92m●[0m Checking for installed dependencies [1;92mDone![0m


Klipper-Backup is up to date


From https://github.com/Ferz82/github-klipper-backup
 * branch            main       -> FETCH_HEAD

Already up to date.

Skipping symbolic link: printer_data/config/mainsail.cfg

warning: adding embedded git repository: klipper
hint: You've added another git repository inside your current repository.
hint: Clones of the outer repository will not contain the contents of
hint: the embedded repository and will not know how to obtain it.
hint: If you meant to add a submodule, use:
hint: 
hint: 	git submodule add <url> klipper
hint: 
hint: If you added this path by mistake, you can remove it from the
hint: index with:
hint: 
hint: 	git rm --cached klipper
hint: 
hint: See "git help submodule" for more information.

[main 96f8178] New backup from 25.12.2024 - 22:05:47
 1 file changed, 1 insertion(+)
 create mode 160000 klipper

To https://github.com/Ferz82/github-klipper-backup.git
 ! [rejected]        main -> main (fetch first)

error: failed to push some refs to 'https://github.com/Ferz82/github-klipper-backup.git'

hint: Updates were rejected because the remote contains work that you do
hint: not have locally. This is usually caused by another repository pushing
hint: to the same ref. You may want to first integrate the remote changes
hint: (e.g., 'git pull ...') before pushing again.
hint: See the 'Note about fast-forwards' in 'git push --help' for details.

Command {update_git_script} finished

Running Command {update_git_script}...:
[1;93m●[0m Checking for installed dependencies /[K[1;92m●[0m Checking for installed dependencies [1;92mDone![0m


Klipper-Backup is up to date


From https://github.com/Ferz82/github-klipper-backup
 * branch            main       -> FETCH_HEAD

   9c13906..dce97cc  main       -> origin/main

hint: You have divergent branches and need to specify how to reconcile them.
hint: You can do so by running one of the following commands sometime before
hint: your next pull:
hint: 
hint:   git config pull.rebase false  # merge (the default strategy)
hint:   git config pull.rebase true   # rebase
hint:   git config pull.ff only       # fast-forward only
hint: 
hint: You can replace "git config" with "git config --global" to set a default
hint: preference for all repositories. You can also pass --rebase, --no-rebase,
hint: or --ff-only on the command line to override the configured default per
hint: invocation.
fatal: Need to specify how to reconcile divergent branches.

skipping non-regular file "printer_data/comms/klippy.serial"
skipping non-regular file "printer_data/comms/klippy.sock"
skipping non-regular file "printer_data/comms/moonraker.sock"

skipping non-regular file "printer_data/config/mainsail.cfg"

skipping non-regular file "printer_data/logs/mainsail-access.log"
skipping non-regular file "printer_data/logs/mainsail-error.log"

[main 4cc61d6] New backup from 25.12.2024 - 22:09:36
 13 files changed, 1943783 insertions(+), 1 deletion(-)
 delete mode 160000 klipper
 create mode 100644 printer_data/.moonraker.uuid
 create mode 100644 printer_data/database/moonraker-sql.db
 create mode 100644 "printer_data/gcodes/.thumbs/\320\232\321\203\320\261_0.2mm_PETG_Generic Klipper Printer_116d18h27m-32x32.png"
 create mode 100644 "printer_data/gcodes/.thumbs/\320\232\321\203\320\261_0.2mm_PETG_Generic Klipper Printer_116d18h27m-48x48.png"
 create mode 100644 "printer_data/gcodes/.thumbs/\320\232\321\203\320\261_0.2mm_PETG_Generic Klipper Printer_116d18h27m-900x600.png"
 create mode 100644 "printer_data/gcodes/\320\232\321\203\320\261_0.2mm_PETG_Generic Klipper Printer_116d18h27m.gcode"
 create mode 100644 printer_data/logs/klippy.log
 create mode 100644 printer_data/logs/moonraker.log
 create mode 100644 printer_data/misc/usb.ids
 create mode 100644 printer_data/moonraker.asvc
 create mode 100644 printer_data/systemd/klipper.env
 create mode 100644 printer_data/systemd/moonraker.env

To https://github.com/Ferz82/github-klipper-backup.git
 ! [rejected]        main -> main (non-fast-forward)

error: failed to push some refs to 'https://github.com/Ferz82/github-klipper-backup.git'

hint: Updates were rejected because the tip of your current branch is behind
hint: its remote counterpart. Integrate the remote changes (e.g.
hint: 'git pull ...') before pushing again.
hint: See the 'Note about fast-forwards' in 'git push --help' for details.

Command {update_git_script} finished

Running Command {update_git_script}...:
[1;93m●[0m Checking for installed dependencies /[K[1;92m●[0m Checking for installed dependencies [1;92mDone![0m


Klipper-Backup is up to date


From https://github.com/Ferz82/github-klipper-backup
 * branch            main       -> FETCH_HEAD

hint: You have divergent branches and need to specify how to reconcile them.
hint: You can do so by running one of the following commands sometime before
hint: your next pull:
hint: 
hint:   git config pull.rebase false  # merge (the default strategy)
hint:   git config pull.rebase true   # rebase
hint:   git config pull.ff only       # fast-forward only
hint: 
hint: You can replace "git config" with "git config --global" to set a default
hint: preference for all repositories. You can also pass --rebase, --no-rebase,
hint: or --ff-only on the command line to override the configured default per
hint: invocation.
fatal: Need to specify how to reconcile divergent branches.

skipping non-regular file "printer_data/comms/klippy.serial"
skipping non-regular file "printer_data/comms/klippy.sock"
skipping non-regular file "printer_data/comms/moonraker.sock"

skipping non-regular file "printer_data/config/mainsail.cfg"

skipping non-regular file "printer_data/logs/mainsail-access.log"
skipping non-regular file "printer_data/logs/mainsail-error.log"

[main eaadcf5] New backup from 25.12.2024 - 22:13:36
 1 file changed, 61 insertions(+)

To https://github.com/Ferz82/github-klipper-backup.git
 ! [rejected]        main -> main (non-fast-forward)

error: failed to push some refs to 'https://github.com/Ferz82/github-klipper-backup.git'

hint: Updates were rejected because the tip of your current branch is behind
hint: its remote counterpart. Integrate the remote changes (e.g.
hint: 'git pull ...') before pushing again.
hint: See the 'Note about fast-forwards' in 'git push --help' for details.

Command {update_git_script} finished

Running Command {update_git_script}...:
[1;93m●[0m Checking for installed dependencies /[K[1;92m●[0m Checking for installed dependencies [1;92mDone![0m


Klipper-Backup is up to date


From https://github.com/Ferz82/github-klipper-backup
 * branch            main       -> FETCH_HEAD

   dce97cc..1f25dfe  main       -> origin/main

hint: You have divergent branches and need to specify how to reconcile them.
hint: You can do so by running one of the following commands sometime before
hint: your next pull:
hint: 
hint:   git config pull.rebase false  # merge (the default strategy)
hint:   git config pull.rebase true   # rebase
hint:   git config pull.ff only       # fast-forward only
hint: 
hint: You can replace "git config" with "git config --global" to set a default
hint: preference for all repositories. You can also pass --rebase, --no-rebase,
hint: or --ff-only on the command line to override the configured default per
hint: invocation.
fatal: Need to specify how to reconcile divergent branches.

skipping non-regular file "printer_data/comms/klippy.serial"
skipping non-regular file "printer_data/comms/klippy.sock"
skipping non-regular file "printer_data/comms/moonraker.sock"
skipping non-regular file "printer_data/config/mainsail.cfg"
skipping non-regular file "printer_data/logs/mainsail-access.log"
skipping non-regular file "printer_data/logs/mainsail-error.log"

[main e72f255] New backup from 25.12.2024 - 22:43:26
 2 files changed, 52 insertions(+), 2 deletions(-)

To https://github.com/Ferz82/github-klipper-backup.git
 ! [rejected]        main -> main (non-fast-forward)

error: failed to push some refs to 'https://github.com/Ferz82/github-klipper-backup.git'

hint: Updates were rejected because the tip of your current branch is behind
hint: its remote counterpart. Integrate the remote changes (e.g.
hint: 'git pull ...') before pushing again.
hint: See the 'Note about fast-forwards' in 'git push --help' for details.

Command {update_git_script} finished

Running Command {update_git_script}...:
[1;93m●[0m Checking for installed dependencies /[K[1;92m●[0m Checking for installed dependencies [1;92mDone![0m


Klipper-Backup is up to date


From https://github.com/Ferz82/github-klipper-backup
 * branch            main       -> FETCH_HEAD

hint: You have divergent branches and need to specify how to reconcile them.
hint: You can do so by running one of the following commands sometime before
hint: your next pull:
hint: 
hint:   git config pull.rebase false  # merge (the default strategy)
hint:   git config pull.rebase true   # rebase
hint:   git config pull.ff only       # fast-forward only
hint: 
hint: You can replace "git config" with "git config --global" to set a default
hint: preference for all repositories. You can also pass --rebase, --no-rebase,
hint: or --ff-only on the command line to override the configured default per
hint: invocation.
fatal: Need to specify how to reconcile divergent branches.

Empty source arg specified.
rsync error: syntax or usage error (code 1) at main.c(1508) [sender=3.2.7]

[main 868e2a5] New backup from 25.12.2024 - 22:49:37
 17 files changed, 1945618 deletions(-)
 delete mode 100644 printer_data/.moonraker.uuid
 delete mode 100644 printer_data/config/macros.cfg
 delete mode 100644 printer_data/config/moonraker.conf
 delete mode 100644 printer_data/config/printer.cfg
 delete mode 100644 printer_data/config/shell_command.cfg
 delete mode 100644 printer_data/config/timelapse.cfg
 delete mode 100644 printer_data/database/moonraker-sql.db
 delete mode 100644 "printer_data/gcodes/.thumbs/\320\232\321\203\320\261_0.2mm_PETG_Generic Klipper Printer_116d18h27m-32x32.png"
 delete mode 100644 "printer_data/gcodes/.thumbs/\320\232\321\203\320\261_0.2mm_PETG_Generic Klipper Printer_116d18h27m-48x48.png"
 delete mode 100644 "printer_data/gcodes/.thumbs/\320\232\321\203\320\261_0.2mm_PETG_Generic Klipper Printer_116d18h27m-900x600.png"
 delete mode 100644 "printer_data/gcodes/\320\232\321\203\320\261_0.2mm_PETG_Generic Klipper Printer_116d18h27m.gcode"
 delete mode 100644 printer_data/logs/klippy.log
 delete mode 100644 printer_data/logs/moonraker.log
 delete mode 100644 printer_data/misc/usb.ids
 delete mode 100644 printer_data/moonraker.asvc
 delete mode 100644 printer_data/systemd/klipper.env
 delete mode 100644 printer_data/systemd/moonraker.env

To https://github.com/Ferz82/github-klipper-backup.git
 ! [rejected]        main -> main (non-fast-forward)

error: failed to push some refs to 'https://github.com/Ferz82/github-klipper-backup.git'

hint: Updates were rejected because the tip of your current branch is behind
hint: its remote counterpart. Integrate the remote changes (e.g.
hint: 'git pull ...') before pushing again.
hint: See the 'Note about fast-forwards' in 'git push --help' for details.

Command {update_git_script} finished

Running Command {update_git_script}...:
[1;93m●[0m Checking for installed dependencies /[K[1;92m●[0m Checking for installed dependencies [1;92mDone![0m


Klipper-Backup is up to date


From https://github.com/Ferz82/github-klipper-backup
 * branch            main       -> FETCH_HEAD

hint: You have divergent branches and need to specify how to reconcile them.
hint: You can do so by running one of the following commands sometime before
hint: your next pull:
hint: 
hint:   git config pull.rebase false  # merge (the default strategy)
hint:   git config pull.rebase true   # rebase
hint:   git config pull.ff only       # fast-forward only
hint: 
hint: You can replace "git config" with "git config --global" to set a default
hint: preference for all repositories. You can also pass --rebase, --no-rebase,
hint: or --ff-only on the command line to override the configured default per
hint: invocation.
fatal: Need to specify how to reconcile divergent branches.

Skipping symbolic link: printer_data/config/mainsail.cfg

[main f7874b7] New backup from 25.12.2024 - 22:57:35
 5 files changed, 1723 insertions(+)
 create mode 100644 printer_data/config/macros.cfg
 create mode 100644 printer_data/config/moonraker.conf
 create mode 100644 printer_data/config/printer.cfg
 create mode 100644 printer_data/config/shell_command.cfg
 create mode 100644 printer_data/config/timelapse.cfg

To https://github.com/Ferz82/github-klipper-backup.git
 ! [rejected]        main -> main (non-fast-forward)

error: failed to push some refs to 'https://github.com/Ferz82/github-klipper-backup.git'

hint: Updates were rejected because the tip of your current branch is behind
hint: its remote counterpart. Integrate the remote changes (e.g.
hint: 'git pull ...') before pushing again.
hint: See the 'Note about fast-forwards' in 'git push --help' for details.

Command {update_git_script} finished

Starting Klippy...
Args: ['/home/klipper/klipper/klippy/klippy.py', '/home/klipper/printer_data/config/printer.cfg', '-I', '/home/klipper/printer_data/comms/klippy.serial', '-l', '/home/klipper/printer_data/logs/klippy.log', '-a', '/home/klipper/printer_data/comms/klippy.sock']
Git version: 'v0.12.0-404-g80d185c94-dirty'
Untracked files: klippy/extras/gcode_shell_command.py
Branch: master
Remote: origin
Tracked URL: https://github.com/Klipper3d/klipper
CPU: 4 core ?
Python: '3.10.12 (main, Nov  6 2024, 20:22:13) [GCC 11.4.0]'
Start printer at Wed Dec 25 22:58:37 2024 (1735156717.4 21.1)
===== Config file =====
[virtual_sdcard]
path = /home/klipper/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[pause_resume]

[display_status]

[respond]

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = BASE_CANCEL_PRINT
gcode = 
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	TURN_OFF_HEATERS
	M107
	G91
	G1 E-{E} F1500
	G90
	CLEAR_PAUSE
	SDCARD_RESET_FILE
	BASE_CANCEL_PRINT
	PARK

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = BASE_PAUSE
gcode = 
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	SAVE_GCODE_STATE NAME=PAUSE_STATE
	BASE_PAUSE
	G91
	G1 E-{E} F1500
	G90
	PARK

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = BASE_RESUME
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	G91
	G1 E{E} F1500
	G90
	RESTORE_GCODE_STATE NAME=PAUSE_STATE MOVE=1
	BASE_RESUME

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[gcode_macro _CLIENT_LINEAR_MOVE]
description = Linear move with save and restore of the gcode state
gcode = 
	{% set x_move = "X" ~ params.X if params.X is defined else "" %}
	{% set y_move = "Y" ~ params.Y if params.Y is defined else "" %}
	{% set z_move = "Z" ~ params.Z if params.Z is defined else "" %}
	{% set e_move = "E" ~ params.E if params.E is defined else "" %}
	{% set rate = "F" ~ params.F if params.F is defined else "" %}
	{% set ABSOLUTE = params.ABSOLUTE | default(0) | int != 0 %}
	{% set ABSOLUTE_E = params.ABSOLUTE_E | default(0) | int != 0 %}
	SAVE_GCODE_STATE NAME=_client_movement
	{% if x_move or y_move or z_move %}
	G9{ 0 if ABSOLUTE else 1 }
	{% endif %}
	{% if e_move %}
	M8{ 2 if ABSOLUTE_E else 3 }
	{% endif %}
	G1 { x_move } { y_move } { z_move } { e_move } { rate }
	RESTORE_GCODE_STATE NAME=_client_movement

[gcode_macro Backup_on_GitHub]
gcode = 
	{% set message = params.MESSAGE|default() %}
	{% if message %}
	RUN_SHELL_COMMAND CMD=update_git_script_message PARAMS="'{params.MESSAGE}'"
	{% else %}
	RUN_SHELL_COMMAND CMD=update_git_script
	{% endif %}

[gcode_macro list_sensors]
gcode = 
	{ action_respond_info(printer.heaters.available_heaters | join(', ')) }
	{ action_respond_info(printer.heaters.available_sensors | join(', ')) }

[gcode_macro Power_OFF]
gcode = SET_PIN PIN=Power VALUE=0

[gcode_macro _POWER_OFF_PRINTER]
gcode = SET_PIN PIN=Power VALUE=0

[gcode_macro ACTIVATE_POWER_OFF]
gcode = 
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK_ACT DURATION=60

[gcode_macro DEACTIVATE_POWER_OFF]
gcode = 
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK_ACT DURATION=0

[delayed_gcode POWER_OFF_PRINTER_CHECK_ACT]
gcode = 
	{% if printer.idle_timeout.state == "Idle" or printer.idle_timeout.state == "Ready" %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=30
	{% else %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK_ACT DURATION=60
	{% endif %}

[delayed_gcode POWER_OFF_PRINTER_CHECK]
gcode = 
	{% if printer.idle_timeout.state == "Idle" or printer.idle_timeout.state == "Ready" %}
	{% if printer.extruder.temperature < 50.0 and printer.heater_bed.temperature < 50.0 %}
	{% if printer.extruder.target == 0.0 and printer.heater_bed.target == 0.0 %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=0
	_POWER_OFF_PRINTER
	{% else %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=2
	{% endif %}
	{% else %}
	{% if printer.idle_timeout.state == "Printing" %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=0
	{% else %}
	{% if printer.extruder.target == 0.0 and printer.heater_bed.target == 0.0 %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=2
	{% else %}
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=0
	{% endif %}
	{% endif %}
	{% endif %}
	{% endif %}

[gcode_macro M141]
gcode = SET_HEATER_TEMPERATURE HEATER=chamber_heater TARGET={params.S|default(0)}

[gcode_macro M80]
gcode = SET_PIN PIN=Power  VALUE=1

[gcode_macro M81]
gcode = 
	
	SET_PIN PIN=Power VALUE=0

[gcode_macro M486]
gcode = 
	
	
	
	
	
	
	
	
	
	
	
	{% if 'exclude_object' not in printer %}
	{action_raise_error("[exclude_object] is not enabled")}
	{% endif %}
	
	{% if 'T' in params %}
	EXCLUDE_OBJECT RESET=1
	
	{% for i in range(params.T | int) %}
	EXCLUDE_OBJECT_DEFINE NAME={i}
	{% endfor %}
	{% endif %}
	
	{% if 'C' in params %}
	EXCLUDE_OBJECT CURRENT=1
	{% endif %}
	
	{% if 'P' in params %}
	EXCLUDE_OBJECT NAME={params.P}
	{% endif %}
	
	{% if 'S' in params %}
	{% if params.S == '-1' %}
	{% if printer.exclude_object.current_object %}
	EXCLUDE_OBJECT_END NAME={printer.exclude_object.current_object}
	{% endif %}
	{% else %}
	EXCLUDE_OBJECT_START NAME={params.S}
	{% endif %}
	{% endif %}
	
	{% if 'U' in params %}
	EXCLUDE_OBJECT RESET=1 NAME={params.U}
	{% endif %}

[gcode_macro M190]
rename_existing = M190.1
gcode = 
	{% if printer["gcode_macro status_heating"] != null %}
	status_heating
	{% endif %}
	M190.1 { rawparams }
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro _CHOME]
gcode = 
	{% if printer["gcode_macro status_homing"] != null %}
	status_homing
	{% endif %}
	{% if printer.toolhead.homed_axes != "xyz" %}
	G28
	{% endif %}
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro M109]
rename_existing = M109.1
gcode = 
	{% if printer["gcode_macro status_heating"] != null %}
	status_heating
	{% endif %}
	M109.1 { rawparams }
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro _MOVE_AWAY]
gcode = 
	{% set th = printer.toolhead %}
	{% set x_safe = th.position.x + 20 * (1 if th.axis_maximum.x - th.position.x > 20 else -1) %}
	{% set y_safe = th.position.y + 20 * (1 if th.axis_maximum.y - th.position.y > 20 else -1) %}
	{% set z_safe = [th.position.z + 2, th.axis_maximum.z]|min %}
	
	G90
	G0 X{x_safe} Y{y_safe} Z{z_safe} F20000

[gcode_macro PARK_CENTER_REAR]
gcode = 
	{% if printer["gcode_macro status_busy"] != null %}
	status_busy
	{% endif %}
	{% set th = printer.toolhead %}
	{% set x_safe = th.position.x + 20 * (1 if th.axis_maximum.x - th.position.x > 20 else -1) %}
	{% set y_safe = th.position.y + 20 * (1 if th.axis_maximum.y - th.position.y > 20 else -1) %}
	
	G0 X{th.axis_maximum.x//2} Y{th.axis_maximum.y - 2} F3600
	{% if printer["gcode_macro status_ready"] != null %}
	status_ready
	{% endif %}

[gcode_macro START_PRINT]
variable_retract = 15
gcode = 
	{% set chamber_temp = params.CHAMBER_TEMP|default(0)|float %}
	{% set extruder_temp = params.EXTRUDER_TEMP|default(210)|float %}
	{% set bed_temp = params.BED_TEMP|default(60)|float %}
	{% set E = printer["gcode_macro START_PRINT"].retract|float %}
	CLEAR_PAUSE
	G28
	Smart_Park
	M220 S100
	M221 S100
	SET_HEATER_TEMPERATURE HEATER=chamber_heater TARGET={chamber_temp}
	SET_HEATER_TEMPERATURE HEATER=heater_bed TARGET={bed_temp}
	TEMPERATURE_WAIT SENSOR=heater_bed MINIMUM={bed_temp * 0.75}
	SET_HEATER_TEMPERATURE HEATER=extruder TARGET={extruder_temp}
	G90
	M82
	TEMPERATURE_WAIT SENSOR=heater_bed MINIMUM={bed_temp}
	TEMPERATURE_WAIT SENSOR=extruder MINIMUM={extruder_temp}
	
	G1 E-15 F3600
	
	G28
	BED_MESH_CALIBRATE
	PRIME_LINE

[gcode_macro pid_soplo]
gcode = 
	PID_CALIBRATE HEATER=extruder TARGET=250

[gcode_macro pid_bed]
gcode = 
	PID_CALIBRATE HEATER=heater_bed TARGET=105

[gcode_macro BED]
gcode = 
	PROBE_CALIBRATE

[gcode_macro END_PRINT]
gcode = 
	
	{% set max_x = printer.configfile.config["stepper_x"]["position_max"]|float %}
	{% set max_y = printer.configfile.config["stepper_y"]["position_max"]|float %}
	{% set max_z = printer.configfile.config["stepper_z"]["position_max"]|float %}
	
	
	{% if printer.toolhead.position.x < (max_x - 20) %}
	{% set x_safe = 20.0 %}
	{% else %}
	{% set x_safe = -20.0 %}
	{% endif %}
	
	{% if printer.toolhead.position.y < (max_y - 20) %}
	{% set y_safe = 20.0 %}
	{% else %}
	{% set y_safe = -20.0 %}
	{% endif %}
	
	{% if printer.toolhead.position.z < (max_z - 2) %}
	{% set z_safe = 2.0 %}
	{% else %}
	{% set z_safe = max_z - printer.toolhead.position.z %}
	{% endif %}
	
	
	M400
	G92 E0
	G1 E-15 F3600
	G91
	G0 Z{z_safe} F3600
	G0 X{x_safe} Y{y_safe} F20000
	
	
	M104 S0
	M104 S0
	M140 S0
	M106 S0
	G90
	G0 X{max_x / 2} Y{max_y} F3600
	
	SONG_CRAB_RAVE
	
	
	
	M117 Finished!
	UPDATE_DELAYED_GCODE ID=POWER_OFF_PRINTER_CHECK DURATION=30

[gcode_macro M300]
gcode = 
	
	{% set S = params.S|default(1000)|int %}
	
	{% set P = params.P|default(100)|int %}
	
	
	{% set V = params.V|default(99)|int %}
	SET_PIN PIN=beeper VALUE={0.1 * (V / 100) if S > 0 else 1} CYCLE_TIME={ 1.0 / S if S > 0 else 1 }
	G4 P{P}
	SET_PIN PIN=beeper VALUE=0 CYCLE_TIME={ 0.001 }
description = 
	"Plays a beep sound.
	@param {int} [S=1000] - Frequency in Hz
	@param {int} [P=100] - Duration in ms
	@param {int} [V=99] - Volume in percent"

[gcode_macro PRIME_LINE]
gcode = 
	{% set feedrate = params.F|default(10)|float * 60 %}
	{% set length = 100.0 %}
	{% set width = printer.configfile.settings.extruder.nozzle_diameter|float %}
	{% set height = ( (width / 0.04)|int - (width / 0.04 / 4)|int )|float * 0.04 %}
	
	{% set extrude = length * width * height * 1.5 %}
	SAVE_GCODE_STATE NAME=PRIME_LINE_STATE
	SET_IDLE_TIMEOUT TIMEOUT=7200
	{% if 'Y' in params %}
	{% set x_start = 1.0 %}
	{% set y_start = (printer.toolhead.axis_maximum.y|float - 100) / 2 %}
	G0 X{x_start} Y{y_start} F5000
	G0 Z{height} F1500
	G91
	
	G1 E8 F300
	
	
	G1 Y100 E{extrude} F{feedrate}
	G0 X{width} F5000
	G1 Y-100 E{extrude} F{feedrate}
	{% else %}
	{% set x_start = (printer.toolhead.axis_maximum.x|float - 100) / 2 %}
	{% set y_start = 1.0 %}
	G0 X{x_start} Y{y_start} F5000
	G0 Z{height} F1500
	G91
	
	G1 E8 F300
	
	
	G1 X100 E{extrude} F{feedrate}
	G0 Y{width} F5000
	G1 X-100 E{extrude} F{feedrate}
	{% endif %}
	RESTORE_GCODE_STATE NAME=PRIME_LINE_STATE

[gcode_macro VINT]
gcode = 
	SCREWS_TILT_CALCULATE

[gcode_macro LOW_TEMP_CHECK]
gcode = 
	{% set extruder_temp = params.T|default(240)|float %}
	{% if printer.extruder.target > extruder_temp %}
	{% set extruder_temp = printer.extruder.target %}
	{% endif %}
	{% if printer.extruder.temperature < extruder_temp %}
	M118 Heating to {extruder_temp}
	SET_HEATER_TEMPERATURE HEATER=extruder TARGET={extruder_temp}
	TEMPERATURE_WAIT SENSOR=extruder MINIMUM={extruder_temp}
	{% endif %}

[gcode_macro M76]
gcode = 
	PAUSE

[gcode_macro M601]
gcode = 
	PAUSE

[gcode_macro G27]
gcode = 
	PARK

[gcode_macro M125]
gcode = 
	PARK

[gcode_macro M600]
gcode = 
	PAUSE

[gcode_macro M701]
gcode = 
	FILAMENT_LOAD

[gcode_macro M702]
gcode = 
	FILAMENT_UNLOAD

[gcode_macro M500]
gcode = 
	SAVE_CONFIG

[gcode_macro PARK]
gcode = 
	{% set x_park = params.X|default(0)|float %}
	{% set y_park = params.Y|default(0)|float %}
	{% set z_park = params.Z|default(10)|float + printer.toolhead.position.z|float %}
	{% set x_max = printer.toolhead.axis_maximum.x|float %}
	{% set y_max = printer.toolhead.axis_maximum.y|float %}
	{% set z_max = printer.toolhead.axis_maximum.z|float %}
	{% if x_park > x_max %}
	{% set x_park = x_max %}
	{% endif %}
	{% if y_park > y_max %}
	{% set y_park = y_max %}
	{% endif %}
	{% if z_park > z_max %}
	{% set z_park = z_max %}
	{% endif %}
	SAVE_GCODE_STATE NAME=PARK_STATE
	G90
	G1 Z{z_park} F1500
	G1 X{x_park} Y{y_park} F5000
	RESTORE_GCODE_STATE name=PARK_STATE

[gcode_macro START_DRYER]
description = Start the heated bed filament dryer.
gcode = 
	{% set ChamberTemperature = params.CHAMBER | default(65.0) | float %}
	{% set BedTemperature = params.TEMPERATURE | default(0.0) | float %}
	{% set DryTime = params.TIME | default(14400) | int %}
	M140 S{BedTemperature}
	M141 S{ChamberTemperature}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=time_remaining VALUE={DryTime}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=bed_temperature VALUE={BedTemperature}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=chamber_temperature VALUE={ChamberTemperature}
	UPDATE_DELAYED_GCODE ID=DRYER_TIMER DURATION=1

[gcode_macro STOP_DRYER]
gcode = 
	M140 S0
	M141 S0
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=time_remaining VALUE=0
	UPDATE_DELAYED_GCODE ID=DRYER_TIMER DURATION=0
	M117 Drying Stopped

[gcode_macro DRYER_STATUS]
variable_time_remaining = 0
variable_bed_temperature = 0
variable_chamber_temperature = 0
gcode = 
	{% if time_remaining > 0 %}
	M140 S{bed_temperature}
	SET_GCODE_VARIABLE MACRO=DRYER_STATUS VARIABLE=time_remaining VALUE={time_remaining - 1}
	M117 Drying {time_remaining}
	{% else %}
	STOP_DRYER
	{% endif %}

[delayed_gcode DRYER_TIMER]
gcode = 
	UPDATE_DELAYED_GCODE ID=DRYER_TIMER DURATION=1
	DRYER_STATUS

[gcode_macro DRY_tpu]
gcode = 
	START_DRYER TEMPERATURE=0 CHAMBER=50 TIME=18000

[gcode_macro DRY_PETG]
gcode = 
	START_DRYER TEMPERATURE=0  CHAMBER=65 TIME=18000

[gcode_macro DRY_ABS]
gcode = 
	{% set S = params.S|default(0.0)|float %}
	SET_PIN PIN=Laser VALUE={S / 255.0}

[gcode_macro M4]
gcode = 
	{% set S = params.S|default(0.0)|float %}
	SET_PIN PIN=Laser VALUE={S / 255.0}

[gcode_macro M5]
gcode = 
	SET_PIN PIN=Laser VALUE=0

[menu __main __control __toolonoff]
type = input
enable = {'pwm_tool Laser' in printer}
name = Fan: {'ON ' if menu.input else 'OFF'}
input = {printer['pwm_tool Laser'].value}
input_min = 0
input_max = 1
input_step = 1
gcode = 
	M3 S{255 if menu.input else 0}

[menu __main __control __toolspeed]
type = input
enable = {'pwm_tool Laser' in printer}
name = Laser speed: {'%3d' % (menu.input*100)}%
input = {printer['pwm_tool Laser'].value}
input_min = 0
input_max = 1
input_step = 0.01
gcode = 
	M3 S{'%d' % (menu.input*255)}

[gcode_macro NOTE]
description = 
	"Plays a specified note for a specified duration
	@param {string} [N=C5] - Note to play
	@param {int} [D=500] - Duration of note. There are currently some Klipper limitations to how short a note can be.
	@param {int} [V=99] - Volume in percent
	@param {bool} [S=true] - Whether or not to stop the note after duration"
gcode = 
	{% set notes = {
	'C0': 16.35,   'CS0': 17.32,   'D0': 18.35,   'DS0': 19.45,   'E0': 20.60,   'F0': 21.83,   'FS0': 23.12,   'G0': 24.50,   'GS0': 25.96,   'A0': 27.50,   'AS0': 29.14,   'B0': 30.87,
	'C1': 32.70,   'CS1': 34.65,   'D1': 36.71,   'DS1': 38.89,   'E1': 41.20,   'F1': 43.65,   'FS1': 46.25,   'G1': 49.00,   'GS1': 51.91,   'A1': 55.00,   'AS1': 58.27,   'B1': 61.74,
	'C2': 65.41,   'CS2': 69.30,   'D2': 73.42,   'DS2': 77.78,   'E2': 82.41,   'F2': 87.31,   'FS2': 92.50,   'G2': 98.00,   'GS2': 103.83,  'A2': 110.00,  'AS2': 116.54,  'B2': 123.47,
	'C3': 130.81,  'CS3': 138.59,  'D3': 146.83,  'DS3': 155.56,  'E3': 164.81,  'F3': 174.61,  'FS3': 185.00,  'G3': 196.00,  'GS3': 207.65,  'A3': 220.00,  'AS3': 233.08,  'B3': 246.94,
	'C4': 261.63,  'CS4': 277.18,  'D4': 293.66,  'DS4': 311.13,  'E4': 329.63,  'F4': 349.23,  'FS4': 369.99,  'G4': 392.00,  'GS4': 415.30,  'A4': 440.00,  'AS4': 466.16,  'B4': 493.88,
	'C5': 523.25,  'CS5': 554.37,  'D5': 587.33,  'DS5': 622.25,  'E5': 659.26,  'F5': 698.46,  'FS5': 739.99,  'G5': 783.99,  'GS5': 830.61,  'A5': 880.00,  'AS5': 932.33,  'B5': 987.77,
	'C6': 1046.50, 'CS6': 1108.73, 'D6': 1174.66, 'DS6': 1244.51, 'E6': 1318.51, 'F6': 1396.91, 'FS6': 1479.98, 'G6': 1567.98, 'GS6': 1661.22, 'A6': 1760.00, 'AS6': 1864.66, 'B6': 1975.53,
	'C7': 2093.00, 'CS7': 2217.46, 'D7': 2349.32, 'DS7': 2489.02, 'E7': 2637.02, 'F7': 2793.83, 'FS7': 2959.96, 'G7': 3135.96, 'GS7': 3322.44, 'A7': 3520.00, 'AS7': 3729.31, 'B7': 3951.07,
	'C8': 4186.01, 'CS8': 4434.92, 'D8': 4698.64, 'DS8': 4978.03, 'E8': 5274.04, 'F8': 5587.65, 'FS8': 5919.91, 'G8': 6271.93, 'GS8': 6644.88, 'A8': 7040.00, 'AS8': 7458.62, 'B8': 7902.13,
	} %}
	
	{% set note = params.N|default('C5')|string %}
	
	{% set dur = params.D|default(500)|int %}
	
	
	{% set volume = params.V|default(99)|int %}
	
	{% set stop = params.S|default('true')|string %}
	
	{% set freq = notes[note] %}
	
	SET_PIN PIN=beeper VALUE={0.1 * (volume / 100) if volume > 0 else 1} CYCLE_TIME={ 1.0 / freq }
	G4 P{dur}
	{% if stop|lower == 'true' %}
	SET_PIN PIN=beeper VALUE=0 CYCLE_TIME={ 0.001 }
	{% endif %}

[gcode_macro TONE_GEN]
description = "Used for the tone generator menu"
variable_tone_freq = 0.001093
gcode = 
	M117 {printer["gcode_macro TONE_GEN"].tone_freq}nothz

[gcode_macro SONG_STAR_WARS_MAIN_THEME]
description = "Plays the Star Wars main theme"
gcode = 
	NOTE N=D4 D=133
	NOTE N=D4 D=133
	NOTE N=D4 D=133
	NOTE N=G4 D=1000
	NOTE N=D5 D=1000
	
	NOTE N=C5 D=133
	NOTE N=B4 D=133
	NOTE N=A4 D=133
	NOTE N=G5 D=1000
	NOTE N=D5 D=500
	
	NOTE N=C5 D=133
	NOTE N=B4 D=133
	NOTE N=A4 D=133
	NOTE N=G5 D=1000
	NOTE N=D5 D=500
	
	NOTE N=C5 D=133
	NOTE N=B4 D=133
	NOTE N=C5 D=133
	NOTE N=A4 D=1000

[gcode_macro SONG_CRAB_RAVE]
description = "Plays Crab Rave"
gcode = 
	NOTE N=D6 D=150 V=30 S=1
	NOTE N=AS6 D=150 V=30 S=1
	NOTE N=G6 D=150 V=30 S=1
	NOTE N=G6 D=150 V=30 S=0
	NOTE N=D6 D=150 V=30 S=1
	NOTE N=D6 D=150 V=30 S=0
	NOTE N=A6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=0
	NOTE N=D6 D=150 V=30 S=1
	NOTE N=D6 D=150 V=30 S=0
	NOTE N=A6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=1
	NOTE N=F6 D=150 V=30 S=0
	NOTE N=C6 D=150 V=30 S=1
	NOTE N=C6 D=150 V=30 S=1
	NOTE N=E6 D=150 V=30 S=1
	NOTE N=E6 D=150 V=30 S=0
	NOTE N=F6 D=150 V=30 S=1
	SET_PIN PIN=beeper VALUE=0

[gcode_macro one]
description = "one"
gcode = 
	NOTE N=C6 D=600 V=30 S=1
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=G5 D=400 V=30 S=1
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=E6 D=400 V=30 S=1
	G4 P150
	NOTE N=G6 D=180 V=30 S=0
	NOTE N=F6 D=180 V=30 S=0
	NOTE N=E6 D=180 V=30 S=0
	NOTE N=D6 D=180 V=30 S=1
	NOTE N=C6 D=600 V=30 S=1
	
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=G5 D=400 V=30 S=1
	NOTE N=D6 D=600 V=30 S=1
	NOTE N=C6 D=600 V=30 S=1
	SET_PIN PIN=beeper VALUE=0

[gcode_macro SONG_BOOMER]
description = "BOOMER"
gcode = 
	M300 P207 S659
	M300 P207 S784
	M300 P207 S494
	M300 P207 S494
	M300 P207 S392
	M300 P207 S494
	M300 P207 S494
	M300 P207 S330
	M300 P207 S784
	M300 P207 S659
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S988
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S659
	M300 P207 S784
	M300 P207 S494
	M300 P207 S494
	M300 P207 S392
	M300 P207 S494
	M300 P207 S494
	M300 P207 S330
	M300 P207 S784
	M300 P207 S659
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S988
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S659
	M300 P207 S784
	M300 P207 S494
	M300 P207 S494
	M300 P207 S392
	M300 P207 S494
	M300 P207 S494
	M300 P207 S330
	M300 P207 S784
	M300 P207 S659
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S784
	M300 P207 S880
	M300 P207 S988
	M300 P207 S523
	M300 P207 S523
	M300 P207 S392
	M300 P207 S523
	M300 P207 S523
	M300 P207 S330

[gcode_macro GET_TIMELAPSE_SETUP]
description = Print the Timelapse setup
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% set output_txt = ["Timelapse Setup:"] %}
	{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}
	{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}
	{% if tl.park.enable %}
	{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}
	{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}
	{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}
	{% endif %}
	{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}
	{% if not tl.extruder.fw_retract %}
	{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}
	{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}
	{% endif %}
	{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}
	{action_respond_info(output_txt|join("\n"))}

[gcode_macro _SET_TIMELAPSE_SETUP]
description = Set user parameters for timelapse
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	
	{% set min = printer.toolhead.axis_minimum %}
	{% set max = printer.toolhead.axis_maximum %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	{% set park = {'min'   : {'x': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),
	'y': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},
	'max'   : {'x': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),
	'y': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},
	'center': {'x': (max.x-(max.x-min.x)/2)|round(3),
	'y': (max.y-(max.y-min.y)/2)|round(3)}} %}
	
	{% if params.ENABLE %}
	{% if params.ENABLE|lower is in ['true', 'false'] %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == 'true' else False}
	{% else %}
	{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.VERBOSE %}
	{% if params.VERBOSE|lower is in ['true', 'false'] %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == 'true' else False}
	{% else %}
	{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_X %}
	{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}
	{% set _dummy = tl.park.custom.update({'x':params.CUSTOM_POS_X|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_Y %}
	{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}
	{% set _dummy = tl.park.custom.update({'y':params.CUSTOM_POS_Y|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_DZ %}
	{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}
	{% set _dummy = tl.park.custom.update({'dz':params.CUSTOM_POS_DZ|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}
	{% endif %}
	{% endif %}
	{% if params.PARK_ENABLE %}
	{% if params.PARK_ENABLE|lower is in ['true', 'false'] %}
	{% set _dummy = tl.park.update({'enable':True if params.PARK_ENABLE|lower == 'true' else False}) %}
	{% else %}
	{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.PARK_POS %}
	{% if params.PARK_POS|lower is in ['center','front_left','front_right','back_left','back_right','custom','x_only','y_only'] %}
	{% set dic = {'center'      : {'x': park.center.x   , 'y': park.center.y   , 'dz': 1                },
	'front_left'  : {'x': park.min.x      , 'y': park.min.y      , 'dz': 0                },
	'front_right' : {'x': park.max.x      , 'y': park.min.y      , 'dz': 0                },
	'back_left'   : {'x': park.min.x      , 'y': park.max.y      , 'dz': 0                },
	'back_right'  : {'x': park.max.x      , 'y': park.max.y      , 'dz': 0                },
	'custom'      : {'x': tl.park.custom.x, 'y': tl.park.custom.y, 'dz': tl.park.custom.dz},
	'x_only'      : {'x': tl.park.custom.x, 'y': 'none'          , 'dz': tl.park.custom.dz},
	'y_only'      : {'x': 'none'          , 'y': tl.park.custom.y, 'dz': tl.park.custom.dz}} %}
	{% set _dummy = tl.park.update({'pos':params.PARK_POS|lower}) %}
	{% set _dummy = tl.park.update({'coord':dic[tl.park.pos]}) %}
	{% else %}
	{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"
	% params.PARK_POS|upper)}
	{% endif %}
	{% endif %}
	{% if params.PARK_TIME %}
	{% if params.PARK_TIME|float >= 0.0 %}
	{% set _dummy = tl.park.update({'time':params.PARK_TIME|float|round(3)}) %}
	{% else %}
	{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"
	{% if params.TRAVEL_SPEED %}
	{% if params.TRAVEL_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'travel':params.TRAVEL_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}
	{% endif %}
	{% endif %}
	{% if params.RETRACT_SPEED %}
	{% if params.RETRACT_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'retract':params.RETRACT_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}
	{% endif %}
	{% endif %}
	{% if params.EXTRUDE_SPEED %}
	{% if params.EXTRUDE_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'extrude':params.EXTRUDE_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"
	{% if params.EXTRUDE_DISTANCE %}
	{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}
	{% set _dummy = tl.extruder.update({'extrude':params.EXTRUDE_DISTANCE|float|round(3)}) %}
	{% else %}
	{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}
	{% endif %}
	{% endif %}
	{% if params.RETRACT_DISTANCE %}
	{% if params.RETRACT_DISTANCE|float >= 0.0 %}
	{% set _dummy = tl.extruder.update({'retract':params.RETRACT_DISTANCE|float|round(3)}) %}
	{% else %}
	{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}
	{% endif %}
	{% endif %}
	{% if params.FW_RETRACT %}
	{% if params.FW_RETRACT|lower is in ['true', 'false'] %}
	{% if 'firmware_retraction' in printer.configfile.settings %}
	{% set _dummy = tl.extruder.update({'fw_retract': True if params.FW_RETRACT|lower == 'true' else False}) %}
	{% else %}
	{% set _dummy = tl.extruder.update({'fw_retract':False}) %}
	{% if params.FW_RETRACT|capitalize == 'True' %}
	{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}
	{% endif %}
	{% endif %}
	{% else %}
	{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"
	{% if printer.configfile.settings['gcode_macro pause'] is defined %}
	{% set _dummy = tl.macro.update({'pause': printer.configfile.settings['gcode_macro pause'].rename_existing}) %}
	{% endif %}
	{% if printer.configfile.settings['gcode_macro resume'] is defined %}
	{% set _dummy = tl.macro.update({'resume': printer.configfile.settings['gcode_macro resume'].rename_existing}) %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"

[gcode_macro TIMELAPSE_TAKE_FRAME]
description = Take Timelapse shoot
variable_enable = False
variable_takingframe = False
variable_park = {'enable': False,
	'pos'   : 'center',
	'time'  : 0.1,
	'custom': {'x': 0, 'y': 0, 'dz': 0},
	'coord' : {'x': 0, 'y': 0, 'dz': 0}}
variable_extruder = {'fw_retract': False,
	'retract': 1.0,
	'extrude': 1.0}
variable_speed = {'travel': 100,
	'retract': 15,
	'extrude': 15}
variable_verbose = True
variable_restore = {'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}
variable_macro = {'pause': 'PAUSE', 'resume': 'RESUME'}
variable_is_paused = False
gcode = 
	{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower =='true' else False %}
	{% if enable %}
	{% if (hyperlapse and printer['gcode_macro HYPERLAPSE'].run) or
	(not hyperlapse and not printer['gcode_macro HYPERLAPSE'].run) %}
	{% if park.enable %}
	{% set pos = {'x': 'X' + park.coord.x|string if park.pos != 'y_only' else '',
	'y': 'Y' + park.coord.y|string if park.pos != 'x_only' else '',
	'z': 'Z'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}
	{% set restore = {'absolute': {'coordinates': printer.gcode_move.absolute_coordinates,
	'extrude'    : printer.gcode_move.absolute_extrude},
	'speed'   : printer.gcode_move.speed,
	'e'       : printer.gcode_move.gcode_position.e,
	'factor'  : {'speed'  : printer.gcode_move.speed_factor,
	'extrude': printer.gcode_move.extrude_factor}} %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"
	{% if not printer[printer.toolhead.extruder].can_extrude %}
	{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}
	{% else %}
	{% if extruder.fw_retract %}
	G10
	{% else %}
	M83
	G0 E-{extruder.retract} F{speed.retract * 60}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True
	{macro.pause}
	SET_GCODE_OFFSET X=0 Y=0
	G90
	{% if "xyz" not in printer.toolhead.homed_axes %}
	{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}
	{% else %}
	G0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5
	M400
	{% endif %}
	_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}
	{% endif %}
	{% else %}
	{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}
	{% endif %}

[gcode_macro _TIMELAPSE_NEW_FRAME]
description = action call for timelapse shoot. must be a seperate macro
gcode = 
	{action_call_remote_method("timelapse_newframe",
	macropark=printer['gcode_macro TIMELAPSE_TAKE_FRAME'].park,
	hyperlapse=params.HYPERLAPSE)}

[delayed_gcode _WAIT_TIMELAPSE_TAKE_FRAME]
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% set factor = {'speed': printer.gcode_move.speed_factor, 'extrude': printer.gcode_move.extrude_factor} %}
	{% if tl.takingframe %}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5
	{% else %}
	{tl.macro.resume} VELOCITY={tl.speed.travel}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False
	{% if not printer[printer.toolhead.extruder].can_extrude %}
	{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}
	{% else %}
	{% if tl.extruder.fw_retract %}
	G11
	{% else %}
	G0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}
	G0 F{tl.restore.speed}
	{% if tl.restore.absolute.extrude %}
	M82
	G92 E{tl.restore.e}
	{% endif %}
	{% endif %}
	{% endif %}
	{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}
	{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}
	{% if not tl.restore.absolute.coordinates %} G91 {% endif %}
	{% endif %}

[gcode_macro HYPERLAPSE]
description = Start/Stop a hyperlapse recording
variable_cycle = 0
variable_run = False
gcode = 
	{% set cycle = params.CYCLE|default(30)|int %}
	{% if params.ACTION and params.ACTION|lower == 'start' %}
	{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}
	TIMELAPSE_TAKE_FRAME HYPERLAPSE=True
	{% elif params.ACTION and params.ACTION|lower == 'stop' %}
	{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0
	{% else %}
	{action_raise_error("Hyperlapse: No valid input parameter
	Use:
	- HYPERLAPSE ACTION=START [CYCLE=time]
	- HYPERLAPSE ACTION=STOP")}
	{% endif %}

[delayed_gcode _HYPERLAPSE_LOOP]
gcode = 
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}
	TIMELAPSE_TAKE_FRAME HYPERLAPSE=True

[gcode_macro TIMELAPSE_RENDER]
description = Render Timelapse video and wait for the result
variable_render = False
variable_run_identifier = 0
gcode = 
	{action_respond_info("Timelapse: Rendering started")}
	{action_call_remote_method("timelapse_render", byrendermacro="True")}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True
	{printer.configfile.settings['gcode_macro pause'].rename_existing}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5

[delayed_gcode _WAIT_TIMELAPSE_RENDER]
gcode = 
	{% set ri = printer['gcode_macro TIMELAPSE_RENDER'].run_identifier % 4 %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}
	{% if printer['gcode_macro TIMELAPSE_RENDER'].render %}
	M117 Rendering {['-','\\','|','/'][ri]}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5
	{% else %}
	{action_respond_info("Timelapse: Rendering finished")}
	M117
	{printer.configfile.settings['gcode_macro resume'].rename_existing}
	{% endif %}

[gcode_macro TEST_STREAM_DELAY]
description = Helper macro to find stream and park delay
gcode = 
	{% set min = printer.toolhead.axis_minimum %}
	{% set max = printer.toolhead.axis_maximum %}
	{% set act = printer.toolhead.position %}
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% if act.z > 5.0 %}
	G0 X{min.x + 5.0} F{tl.speed.travel|int * 60}
	G0 X{(max.x-min.x)/2}
	G4 P{tl.park.time|float * 1000}
	_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE
	G0 X{max.x - 5.0}
	{% else %}
	{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}
	{% endif %}

[exclude_object]

[gcode_shell_command update_git_script]
command = bash -c "bash $HOME/klipper-backup/script.sh"
timeout = 90.0
verbose = True

[gcode_shell_command update_git_script_message]
command = bash -c "bash $HOME/klipper-backup/script.sh -c \"$0\""
timeout = 90.0
verbose = True

[mcu]
serial = /dev/ttyS3
restart_method = command

[output_pin Power]
pin = PC12
value = 1
shutdown_value = 1

[temperature_sensor orange_pi]
sensor_type = temperature_host
min_temp = 0
max_temp = 100

[heater_generic chamber_heater]
heater_pin = !PA7
sensor_type = ATC Semitec 104GT-2
sensor_pin = PA5
control = watermark
max_power = 1
min_temp = 15
max_temp = 85

[verify_heater chamber_heater]
max_error = 9999
check_gain_time = 9999
hysteresis = 5
heating_gain = 2

[filament_motion_sensor motion_sensor]
detection_length = 50
extruder = extruder
switch_pin = !PC15
pause_on_runout = True
runout_gcode = 
	SONG_CRAB_RAVE

[bltouch]
sensor_pin = ^PC14
control_pin = PA1
x_offset = -40
y_offset = 0.000
z_offset = 1.70
pin_up_reports_not_triggered = False
probe_with_touch_mode = True

[heater_bed]
heater_pin = PC9
sensor_type = ATC Semitec 104GT-2
sensor_pin = PC3
control = pid
pid_kp = 72.553
pid_ki = 1.154
pid_kd = 1139.994
min_temp = 5
max_temp = 125

[heater_fan radiator]
pin = PC7
max_power = 1.0
kick_start_time = 0.600
heater = extruder
heater_temp = 50.0
shutdown_speed = 1

[fan]
pin = PC6

[input_shaper]
shaper_type_x = 2hump_ei
shaper_freq_x = 43.0
shaper_type_y = mzv
shaper_freq_y = 32.6

[printer]
kinematics = cartesian
max_velocity = 300
max_accel = 1900
max_z_velocity = 30
max_z_accel = 100
square_corner_velocity = 4

[bed_mesh]
speed = 150
horizontal_move_z = 9
mesh_min = 10, 20
mesh_max = 195, 210
probe_count = 5
mesh_pps = 2, 3
algorithm = bicubic
bicubic_tension = 0.2
move_check_distance = 9
split_delta_z = .025
fade_start = 1
fade_end = 10
fade_target = 0

[screws_tilt_adjust]
screw1 = 79, 27
screw1_name = Peredniy Leviy
screw2 = 235, 27
screw2_name = Peredniy Praviy
screw3 = 235,197
screw3_name = Zadniy Praviy
screw4 = 79,197
screw4_name = Zadniy Leviy
speed = 120
horizontal_move_z = 9

[safe_z_home]
home_xy_position = 157,115
speed = 50
z_hop = 9.0
z_hop_speed = 20.0

[stepper_x]
step_pin = PB13
dir_pin = !PB12
enable_pin = !PB14
microsteps = 16
rotation_distance = 40
endstop_pin = ^PC0
position_endstop = 0
position_max = 240
position_min = -2
homing_retract_dist = 5
homing_speed = 50
second_homing_speed = 10

[tmc2209 stepper_x]
uart_pin = PC11
tx_pin = PC10
uart_address = 0
run_current = 0.580
stealthchop_threshold = 999999

[stepper_y]
step_pin = PB10
dir_pin = !PB2
enable_pin = !PB11
microsteps = 16
rotation_distance = 40
endstop_pin = ^PC1
position_endstop = 0
homing_retract_dist = 5
homing_speed = 50
second_homing_speed = 10
position_max = 231
position_min = 0

[tmc2209 stepper_y]
uart_pin = PC11
tx_pin = PC10
uart_address = 2
run_current = 0.6
stealthchop_threshold = 999999

[stepper_z]
step_pin = PB0
dir_pin = PC5
enable_pin = !PB1
microsteps = 16
rotation_distance = 40
gear_ratio = 80:16
full_steps_per_rotation = 200
endstop_pin = probe:z_virtual_endstop
homing_retract_dist = 9
second_homing_speed = 10
position_min = -5
position_max = 245
homing_speed = 50

[tmc2209 stepper_z]
uart_pin = PC11
tx_pin = PC10
uart_address = 1
run_current = 0.580
stealthchop_threshold = 999999
interpolate = false

[extruder]
step_pin = PB3
dir_pin = PB4
enable_pin = !PD2
microsteps = 16
rotation_distance = 4.637
nozzle_diameter = 0.400
filament_diameter = 1.750
heater_pin = PC8
sensor_type = ATC Semitec 104GT-2
sensor_pin = PA0
min_temp = 5
max_temp = 270
max_extrude_only_velocity = 120
max_extrude_only_accel = 3000
pressure_advance = 0.031
full_steps_per_rotation = 200
control = pid
pid_kp = 29.662
pid_ki = 2.382
pid_kd = 92.322

[tmc2209 extruder]
uart_pin = PC11
tx_pin = PC10
uart_address = 3
run_current = 0.7
stealthchop_threshold = 999999

[static_digital_output usb_pullup_enable]
pins = !PA14

[board_pins]
aliases = 
	
	EXP1_1=PB5,  EXP1_3=PA9,   EXP1_5=PA10, EXP1_7=PB8,  EXP1_9=<GND>,
	EXP1_2=PA15, EXP1_4=<RST>, EXP1_6=PB9,  EXP1_8=PB15, EXP1_10=<5V>

[display]
lcd_type = st7920
cs_pin = EXP1_7
sclk_pin = EXP1_6
sid_pin = EXP1_8
encoder_pins = ^EXP1_5, ^EXP1_3
click_pin = ^!EXP1_2

[pwm_cycle_time beeper]
pin = EXP1_1
shutdown_value = 0
cycle_time = 0.001

[firmware_retraction]
retract_length = 1.0
retract_speed = 80
unretract_extra_length = 0
unretract_speed = 80

[pwm_tool Laser]
pin = PA6
cycle_time = 0.0001
shutdown_value = 0
maximum_mcu_duration = 5

[bed_mesh 70]
version = 1
points = 
	-0.045000, 0.027500, 0.015000
	-0.055000, -0.005000, -0.035000
	-0.007500, 0.040000, -0.002500
x_count = 3
y_count = 3
mesh_x_pps = 2
mesh_y_pps = 3
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 195.0
min_y = 20.0
max_y = 210.0

[bed_mesh default]
version = 1
points = 
	0.020000, 0.025000, 0.030000, -0.007500, -0.052500
	0.015000, 0.017500, 0.022500, -0.007500, -0.057500
	0.030000, 0.030000, 0.037500, 0.002500, -0.035000
	0.012500, 0.030000, 0.050000, 0.035000, -0.010000
	0.080000, 0.087500, 0.115000, 0.097500, 0.067500
x_count = 5
y_count = 5
mesh_x_pps = 2
mesh_y_pps = 3
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 195.0
min_y = 20.0
max_y = 210.0
=======================
Extruder max_extrude_ratio=0.266081
mcu 'mcu': Starting serial connect
mcu 'mcu': got {'oid': 18, 'next_clock': 3627285760, 'value': 31329, '#name': 'analog_in_state', '#sent_time': 25.194678761, '#receive_time': 25.206435678}
mcu 'mcu': got {'oid': 26, 'next_clock': 3633045760, 'value': 31264, '#name': 'analog_in_state', '#sent_time': 25.262248803000002, '#receive_time': 25.285821386000002}
mcu 'mcu': got {'oid': 14, 'next_clock': 3646005760, 'value': 31231, '#name': 'analog_in_state', '#sent_time': 25.421469761, '#receive_time': 25.465824136000002}
mcu 'mcu': got {'oid': 18, 'next_clock': 3648885760, 'value': 31327, '#name': 'analog_in_state', '#sent_time': 25.475343261000003, '#receive_time': 25.505853761}
mcu 'mcu': got {'oid': 26, 'next_clock': 3654645760, 'value': 31267, '#name': 'analog_in_state', '#sent_time': 25.580647511000002, '#receive_time': 25.585812761}
Loaded MCU 'mcu' 118 commands (v0.12.0-404-g80d185c94 / gcc: (15:12.2.rel1-1) 12.2.1 20221205 binutils: (2.40-2+18+b1) 2.40)
MCU 'mcu' config: ADC_MAX=4095 BUS_PINS_i2c1=PB6,PB7 BUS_PINS_i2c1a=PB8,PB9 BUS_PINS_i2c2=PB10,PB11 BUS_PINS_spi1=PA6,PA7,PA5 BUS_PINS_spi1a=PB4,PB5,PB3 BUS_PINS_spi2=PB14,PB15,PB13 BUS_PINS_spi3=PB4,PB5,PB3 CLOCK_FREQ=72000000 INITIAL_PINS=!PA14 MCU=stm32f103xe PWM_MAX=255 RECEIVE_WINDOW=192 RESERVE_PINS_serial=PA3,PA2 SERIAL_BAUD=250000 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
Configured MCU 'mcu' (1024 moves)
Starting heater checks for chamber_heater
Starting heater checks for heater_bed
bed_mesh: generated points
Index |  Tool Adjusted  |   Probe
  0   | (50.0, 20.0)    | (10.0, 20.0)
  1   | (96.2, 20.0)    | (56.2, 20.0)
  2   | (142.5, 20.0)   | (102.5, 20.0)
  3   | (188.8, 20.0)   | (148.8, 20.0)
  4   | (235.0, 20.0)   | (195.0, 20.0)
  5   | (235.0, 67.5)   | (195.0, 67.5)
  6   | (188.8, 67.5)   | (148.8, 67.5)
  7   | (142.5, 67.5)   | (102.5, 67.5)
  8   | (96.2, 67.5)    | (56.2, 67.5)
  9   | (50.0, 67.5)    | (10.0, 67.5)
  10  | (50.0, 115.0)   | (10.0, 115.0)
  11  | (96.2, 115.0)   | (56.2, 115.0)
  12  | (142.5, 115.0)  | (102.5, 115.0)
  13  | (188.8, 115.0)  | (148.8, 115.0)
  14  | (235.0, 115.0)  | (195.0, 115.0)
  15  | (235.0, 162.5)  | (195.0, 162.5)
  16  | (188.8, 162.5)  | (148.8, 162.5)
  17  | (142.5, 162.5)  | (102.5, 162.5)
  18  | (96.2, 162.5)   | (56.2, 162.5)
  19  | (50.0, 162.5)   | (10.0, 162.5)
  20  | (50.0, 210.0)   | (10.0, 210.0)
  21  | (96.2, 210.0)   | (56.2, 210.0)
  22  | (142.5, 210.0)  | (102.5, 210.0)
  23  | (188.8, 210.0)  | (148.8, 210.0)
  24  | (235.0, 210.0)  | (195.0, 210.0)
webhooks client 281473002207312: New connection
webhooks client 281473002207312: Client info {'program': 'Moonraker', 'version': 'v0.9.3-4-ga4604e3'}
Starting heater checks for extruder
Stats 26.2: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=3083 bytes_read=6278 bytes_retransmit=17 bytes_invalid=0 send_seq=212 receive_seq=209 retransmit_seq=3 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=1907 upcoming_bytes=218 freq=71998694  orange_pi: temp=55.6 chamber_heater: target=0 temp=0.0 pwm=0.000 heater_bed: target=0 temp=0.0 pwm=0.000 sysload=1.89 cputime=4.599 memavail=1735060 print_time=3928.697 buffer_time=0.240 print_stall=0 extruder: target=0 temp=0.0 pwm=0.000
webhooks: registering remote method 'shutdown_machine' for connection id: 281473002207312
webhooks: registering remote method 'reboot_machine' for connection id: 281473002207312
webhooks: registering remote method 'pause_job_queue' for connection id: 281473002207312
webhooks: registering remote method 'start_job_queue' for connection id: 281473002207312
Stats 27.2: gcodein=0  mcu: mcu_awake=0.032 mcu_task_avg=0.000072 mcu_task_stddev=0.000196 bytes_write=5454 bytes_read=6616 bytes_retransmit=17 bytes_invalid=0 send_seq=258 receive_seq=257 retransmit_seq=3 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=11 upcoming_bytes=0 freq=71998245  orange_pi: temp=52.3 chamber_heater: target=0 temp=25.9 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.89 cputime=4.643 memavail=1735060 print_time=3928.697 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 28.2: gcodein=0  mcu: mcu_awake=0.032 mcu_task_avg=0.000072 mcu_task_stddev=0.000196 bytes_write=5476 bytes_read=6792 bytes_retransmit=17 bytes_invalid=0 send_seq=260 receive_seq=260 retransmit_seq=3 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998097  orange_pi: temp=51.5 chamber_heater: target=0 temp=25.7 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.89 cputime=4.702 memavail=1732568 print_time=3928.697 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 29.2: gcodein=0  mcu: mcu_awake=0.032 mcu_task_avg=0.000072 mcu_task_stddev=0.000196 bytes_write=5482 bytes_read=6958 bytes_retransmit=17 bytes_invalid=0 send_seq=261 receive_seq=261 retransmit_seq=3 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998159  orange_pi: temp=51.0 chamber_heater: target=0 temp=25.7 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.89 cputime=4.728 memavail=1732568 print_time=3928.697 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 30.2: gcodein=0  mcu: mcu_awake=0.032 mcu_task_avg=0.000072 mcu_task_stddev=0.000196 bytes_write=5488 bytes_read=7124 bytes_retransmit=17 bytes_invalid=0 send_seq=262 receive_seq=262 retransmit_seq=3 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998163  orange_pi: temp=50.6 chamber_heater: target=0 temp=26.0 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.82 cputime=4.753 memavail=1746232 print_time=3928.697 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.1 pwm=0.000
Stats 31.2: gcodein=0  mcu: mcu_awake=0.032 mcu_task_avg=0.000072 mcu_task_stddev=0.000196 bytes_write=5494 bytes_read=7290 bytes_retransmit=17 bytes_invalid=0 send_seq=263 receive_seq=263 retransmit_seq=3 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998114  orange_pi: temp=48.3 chamber_heater: target=0 temp=25.8 pwm=0.000 heater_bed: target=0 temp=24.3 pwm=0.000 sysload=1.82 cputime=4.775 memavail=1748136 print_time=3928.697 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 32.2: gcodein=0  mcu: mcu_awake=0.027 mcu_task_avg=0.000166 mcu_task_stddev=0.000331 bytes_write=5500 bytes_read=7473 bytes_retransmit=17 bytes_invalid=0 send_seq=264 receive_seq=264 retransmit_seq=3 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998111  orange_pi: temp=46.9 chamber_heater: target=0 temp=25.8 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.82 cputime=4.796 memavail=1748136 print_time=3928.697 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 33.2: gcodein=0  mcu: mcu_awake=0.027 mcu_task_avg=0.000166 mcu_task_stddev=0.000331 bytes_write=5506 bytes_read=7639 bytes_retransmit=17 bytes_invalid=0 send_seq=265 receive_seq=265 retransmit_seq=3 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998141  orange_pi: temp=46.8 chamber_heater: target=0 temp=25.9 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.82 cputime=4.817 memavail=1748140 print_time=3928.697 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Running Command {update_git_script}...:
[1;93m●[0m Checking for installed dependencies /[K[1;92m●[0m Checking for installed dependencies [1;92mDone![0m


Stats 34.2: gcodein=0  mcu: mcu_awake=0.027 mcu_task_avg=0.000166 mcu_task_stddev=0.000331 bytes_write=5512 bytes_read=7799 bytes_retransmit=17 bytes_invalid=0 send_seq=266 receive_seq=266 retransmit_seq=3 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998132  orange_pi: temp=46.6 chamber_heater: target=0 temp=25.0 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.82 cputime=4.845 memavail=1747636 print_time=3928.697 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 35.2: gcodein=0  mcu: mcu_awake=0.027 mcu_task_avg=0.000166 mcu_task_stddev=0.000331 bytes_write=5518 bytes_read=7953 bytes_retransmit=17 bytes_invalid=0 send_seq=267 receive_seq=267 retransmit_seq=3 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998153  orange_pi: temp=46.6 chamber_heater: target=0 temp=25.6 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.84 cputime=4.876 memavail=1743084 print_time=3928.697 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Klipper-Backup is up to date


Stats 36.2: gcodein=0  mcu: mcu_awake=0.027 mcu_task_avg=0.000166 mcu_task_stddev=0.000331 bytes_write=5524 bytes_read=8108 bytes_retransmit=17 bytes_invalid=0 send_seq=268 receive_seq=268 retransmit_seq=3 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998173  orange_pi: temp=48.2 chamber_heater: target=0 temp=25.8 pwm=0.000 heater_bed: target=0 temp=24.6 pwm=0.000 sysload=1.84 cputime=4.908 memavail=1742392 print_time=3928.697 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
From https://github.com/Ferz82/github-klipper-backup
 * branch            main       -> FETCH_HEAD

hint: You have divergent branches and need to specify how to reconcile them.
hint: You can do so by running one of the following commands sometime before
hint: your next pull:
hint: 
hint:   git config pull.rebase false  # merge (the default strategy)
hint:   git config pull.rebase true   # rebase
hint:   git config pull.ff only       # fast-forward only
hint: 
hint: You can replace "git config" with "git config --global" to set a default
hint: preference for all repositories. You can also pass --rebase, --no-rebase,
hint: or --ff-only on the command line to override the configured default per
hint: invocation.
fatal: Need to specify how to reconcile divergent branches.

Skipping symbolic link: printer_data/config/mainsail.cfg

Stats 37.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000012 bytes_write=5530 bytes_read=8291 bytes_retransmit=17 bytes_invalid=0 send_seq=269 receive_seq=269 retransmit_seq=3 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998196  orange_pi: temp=48.4 chamber_heater: target=0 temp=25.8 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.84 cputime=4.944 memavail=1741888 print_time=3928.697 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.1 pwm=0.000
On branch main
Your branch and 'origin/main' have diverged,
and have 6 and 2 different commits each, respectively.
  (use "git pull" to merge the remote branch into yours)

nothing to commit, working tree clean

Stats 38.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000012 bytes_write=5536 bytes_read=8441 bytes_retransmit=17 bytes_invalid=0 send_seq=270 receive_seq=270 retransmit_seq=3 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998207  orange_pi: temp=49.0 chamber_heater: target=0 temp=25.9 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.84 cputime=4.974 memavail=1736960 print_time=3928.697 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.1 pwm=0.000
To https://github.com/Ferz82/github-klipper-backup.git
 ! [rejected]        main -> main (non-fast-forward)

error: failed to push some refs to 'https://github.com/Ferz82/github-klipper-backup.git'

hint: Updates were rejected because the tip of your current branch is behind
hint: its remote counterpart. Integrate the remote changes (e.g.
hint: 'git pull ...') before pushing again.
hint: See the 'Note about fast-forwards' in 'git push --help' for details.

Command {update_git_script} finished

Stats 39.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000012 bytes_write=5542 bytes_read=8607 bytes_retransmit=17 bytes_invalid=0 send_seq=271 receive_seq=271 retransmit_seq=3 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998211  orange_pi: temp=47.5 chamber_heater: target=0 temp=26.0 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.84 cputime=5.011 memavail=1735016 print_time=3928.697 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.1 pwm=0.000
Stats 40.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000012 bytes_write=5548 bytes_read=8773 bytes_retransmit=17 bytes_invalid=0 send_seq=272 receive_seq=272 retransmit_seq=3 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998218  orange_pi: temp=47.1 chamber_heater: target=0 temp=25.9 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.77 cputime=5.032 memavail=1735016 print_time=3928.697 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 41.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000012 bytes_write=5554 bytes_read=8939 bytes_retransmit=17 bytes_invalid=0 send_seq=273 receive_seq=273 retransmit_seq=3 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998236  orange_pi: temp=46.6 chamber_heater: target=0 temp=25.9 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.77 cputime=5.053 memavail=1735016 print_time=3928.697 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 42.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5560 bytes_read=9119 bytes_retransmit=17 bytes_invalid=0 send_seq=274 receive_seq=274 retransmit_seq=3 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998232  orange_pi: temp=46.3 chamber_heater: target=0 temp=25.9 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.77 cputime=5.074 memavail=1735016 print_time=3928.697 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 43.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5566 bytes_read=9300 bytes_retransmit=17 bytes_invalid=0 send_seq=275 receive_seq=275 retransmit_seq=3 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998231  orange_pi: temp=46.4 chamber_heater: target=0 temp=25.9 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.77 cputime=5.095 memavail=1735016 print_time=3928.697 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 44.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5572 bytes_read=9451 bytes_retransmit=17 bytes_invalid=0 send_seq=276 receive_seq=276 retransmit_seq=3 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998240  orange_pi: temp=46.5 chamber_heater: target=0 temp=26.1 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.77 cputime=5.116 memavail=1735540 print_time=3928.697 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 45.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5578 bytes_read=9617 bytes_retransmit=17 bytes_invalid=0 send_seq=277 receive_seq=277 retransmit_seq=3 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998239  orange_pi: temp=46.2 chamber_heater: target=0 temp=26.0 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.71 cputime=5.136 memavail=1736356 print_time=3928.697 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 46.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5584 bytes_read=9798 bytes_retransmit=17 bytes_invalid=0 send_seq=278 receive_seq=278 retransmit_seq=3 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998242  orange_pi: temp=46.8 chamber_heater: target=0 temp=25.9 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.71 cputime=5.157 memavail=1736356 print_time=3928.697 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 47.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5590 bytes_read=9963 bytes_retransmit=17 bytes_invalid=0 send_seq=279 receive_seq=279 retransmit_seq=3 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998250  orange_pi: temp=46.5 chamber_heater: target=0 temp=26.0 pwm=0.000 heater_bed: target=0 temp=24.7 pwm=0.000 sysload=1.71 cputime=5.179 memavail=1736360 print_time=3928.697 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 48.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5634 bytes_read=10149 bytes_retransmit=17 bytes_invalid=0 send_seq=284 receive_seq=284 retransmit_seq=3 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998252  orange_pi: temp=46.5 chamber_heater: target=0 temp=26.0 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.71 cputime=5.200 memavail=1736360 print_time=3928.697 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 49.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5640 bytes_read=10330 bytes_retransmit=17 bytes_invalid=0 send_seq=285 receive_seq=285 retransmit_seq=3 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998257  orange_pi: temp=46.2 chamber_heater: target=0 temp=26.3 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.71 cputime=5.221 memavail=1736360 print_time=3928.697 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 50.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5646 bytes_read=10481 bytes_retransmit=17 bytes_invalid=0 send_seq=286 receive_seq=286 retransmit_seq=3 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998261  orange_pi: temp=46.2 chamber_heater: target=0 temp=25.8 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.65 cputime=5.242 memavail=1736272 print_time=3928.697 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 51.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5652 bytes_read=10647 bytes_retransmit=17 bytes_invalid=0 send_seq=287 receive_seq=287 retransmit_seq=3 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998266  orange_pi: temp=45.7 chamber_heater: target=0 temp=26.0 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.65 cputime=5.262 memavail=1736388 print_time=3928.697 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 52.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000015 bytes_write=5658 bytes_read=10842 bytes_retransmit=17 bytes_invalid=0 send_seq=288 receive_seq=288 retransmit_seq=3 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998267  orange_pi: temp=45.6 chamber_heater: target=0 temp=26.0 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.65 cputime=5.284 memavail=1736388 print_time=3928.697 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 53.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000015 bytes_write=5664 bytes_read=10993 bytes_retransmit=17 bytes_invalid=0 send_seq=289 receive_seq=289 retransmit_seq=3 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998271  orange_pi: temp=46.0 chamber_heater: target=0 temp=26.1 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.65 cputime=5.305 memavail=1736388 print_time=3928.697 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 54.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000015 bytes_write=5676 bytes_read=11175 bytes_retransmit=17 bytes_invalid=0 send_seq=291 receive_seq=291 retransmit_seq=3 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998274  orange_pi: temp=46.1 chamber_heater: target=0 temp=26.0 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.65 cputime=5.326 memavail=1736388 print_time=3928.697 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.2 pwm=0.000
Stats 55.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000015 bytes_write=5682 bytes_read=11356 bytes_retransmit=17 bytes_invalid=0 send_seq=292 receive_seq=292 retransmit_seq=3 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998273  orange_pi: temp=45.8 chamber_heater: target=0 temp=25.8 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.60 cputime=5.347 memavail=1735896 print_time=3928.697 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 56.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000015 bytes_write=5688 bytes_read=11507 bytes_retransmit=17 bytes_invalid=0 send_seq=293 receive_seq=293 retransmit_seq=3 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998274  orange_pi: temp=46.4 chamber_heater: target=0 temp=26.0 pwm=0.000 heater_bed: target=0 temp=24.3 pwm=0.000 sysload=1.60 cputime=5.368 memavail=1735672 print_time=3928.697 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 57.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5694 bytes_read=11687 bytes_retransmit=17 bytes_invalid=0 send_seq=294 receive_seq=294 retransmit_seq=3 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998278  orange_pi: temp=46.1 chamber_heater: target=0 temp=25.9 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.60 cputime=5.389 memavail=1735672 print_time=3928.697 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.2 pwm=0.000
Stats 58.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5700 bytes_read=11868 bytes_retransmit=17 bytes_invalid=0 send_seq=295 receive_seq=295 retransmit_seq=3 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998278  orange_pi: temp=45.8 chamber_heater: target=0 temp=26.1 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.60 cputime=5.410 memavail=1735672 print_time=3928.697 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 59.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5706 bytes_read=12019 bytes_retransmit=17 bytes_invalid=0 send_seq=296 receive_seq=296 retransmit_seq=3 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998279  orange_pi: temp=46.0 chamber_heater: target=0 temp=25.9 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.60 cputime=5.430 memavail=1735672 print_time=3928.697 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 60.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5712 bytes_read=12185 bytes_retransmit=17 bytes_invalid=0 send_seq=297 receive_seq=297 retransmit_seq=3 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998282  orange_pi: temp=46.6 chamber_heater: target=0 temp=25.9 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.55 cputime=5.451 memavail=1735672 print_time=3928.697 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 61.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5718 bytes_read=12366 bytes_retransmit=17 bytes_invalid=0 send_seq=298 receive_seq=298 retransmit_seq=3 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998283  orange_pi: temp=46.2 chamber_heater: target=0 temp=26.0 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.55 cputime=5.472 memavail=1735672 print_time=3928.697 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 62.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5724 bytes_read=12531 bytes_retransmit=17 bytes_invalid=0 send_seq=299 receive_seq=299 retransmit_seq=3 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998285  orange_pi: temp=46.2 chamber_heater: target=0 temp=26.1 pwm=0.000 heater_bed: target=0 temp=24.3 pwm=0.000 sysload=1.55 cputime=5.493 memavail=1735672 print_time=3928.697 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.2 pwm=0.000
Stats 63.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5730 bytes_read=12697 bytes_retransmit=17 bytes_invalid=0 send_seq=300 receive_seq=300 retransmit_seq=3 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998288  orange_pi: temp=46.3 chamber_heater: target=0 temp=26.2 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.55 cputime=5.514 memavail=1735672 print_time=3928.697 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 64.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5736 bytes_read=12878 bytes_retransmit=17 bytes_invalid=0 send_seq=301 receive_seq=301 retransmit_seq=3 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998292  orange_pi: temp=45.9 chamber_heater: target=0 temp=26.0 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.55 cputime=5.535 memavail=1735672 print_time=3928.697 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.5 pwm=0.000
Stats 65.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5742 bytes_read=13029 bytes_retransmit=17 bytes_invalid=0 send_seq=302 receive_seq=302 retransmit_seq=3 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998293  orange_pi: temp=46.0 chamber_heater: target=0 temp=26.1 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.50 cputime=5.556 memavail=1735356 print_time=3928.697 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 66.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5748 bytes_read=13195 bytes_retransmit=17 bytes_invalid=0 send_seq=303 receive_seq=303 retransmit_seq=3 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998294  orange_pi: temp=46.3 chamber_heater: target=0 temp=26.2 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.50 cputime=5.577 memavail=1735476 print_time=3928.697 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 67.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5754 bytes_read=13390 bytes_retransmit=17 bytes_invalid=0 send_seq=304 receive_seq=304 retransmit_seq=3 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998296  orange_pi: temp=46.2 chamber_heater: target=0 temp=26.1 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.50 cputime=5.600 memavail=1731700 print_time=3928.697 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 68.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5760 bytes_read=13541 bytes_retransmit=17 bytes_invalid=0 send_seq=305 receive_seq=305 retransmit_seq=3 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998300  orange_pi: temp=48.9 chamber_heater: target=0 temp=26.1 pwm=0.000 heater_bed: target=0 temp=24.3 pwm=0.000 sysload=1.50 cputime=5.633 memavail=1735020 print_time=3928.697 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 69.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5766 bytes_read=13707 bytes_retransmit=17 bytes_invalid=0 send_seq=306 receive_seq=306 retransmit_seq=3 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998302  orange_pi: temp=53.0 chamber_heater: target=0 temp=26.0 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.50 cputime=5.655 memavail=1735464 print_time=3928.697 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 70.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5772 bytes_read=13888 bytes_retransmit=17 bytes_invalid=0 send_seq=307 receive_seq=307 retransmit_seq=3 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998301  orange_pi: temp=47.2 chamber_heater: target=0 temp=26.2 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.46 cputime=5.677 memavail=1735520 print_time=3928.697 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 71.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5778 bytes_read=14039 bytes_retransmit=17 bytes_invalid=0 send_seq=308 receive_seq=308 retransmit_seq=3 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998303  orange_pi: temp=46.7 chamber_heater: target=0 temp=26.0 pwm=0.000 heater_bed: target=0 temp=24.3 pwm=0.000 sysload=1.46 cputime=5.698 memavail=1735520 print_time=3928.697 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 72.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5784 bytes_read=14219 bytes_retransmit=17 bytes_invalid=0 send_seq=309 receive_seq=309 retransmit_seq=3 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998302  orange_pi: temp=46.7 chamber_heater: target=0 temp=26.0 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.46 cputime=5.720 memavail=1735520 print_time=3928.697 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 73.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5790 bytes_read=14400 bytes_retransmit=17 bytes_invalid=0 send_seq=310 receive_seq=310 retransmit_seq=3 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998302  orange_pi: temp=46.7 chamber_heater: target=0 temp=26.1 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.46 cputime=5.742 memavail=1735028 print_time=3928.697 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 74.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5796 bytes_read=14551 bytes_retransmit=17 bytes_invalid=0 send_seq=311 receive_seq=311 retransmit_seq=3 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998305  orange_pi: temp=46.6 chamber_heater: target=0 temp=26.0 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.46 cputime=5.763 memavail=1734788 print_time=3928.697 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 75.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5802 bytes_read=14717 bytes_retransmit=17 bytes_invalid=0 send_seq=312 receive_seq=312 retransmit_seq=3 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998305  orange_pi: temp=46.6 chamber_heater: target=0 temp=25.9 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.43 cputime=5.784 memavail=1734560 print_time=3928.697 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 76.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000018 mcu_task_stddev=0.000012 bytes_write=5808 bytes_read=14898 bytes_retransmit=17 bytes_invalid=0 send_seq=313 receive_seq=313 retransmit_seq=3 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998306  orange_pi: temp=46.4 chamber_heater: target=0 temp=26.1 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.43 cputime=5.806 memavail=1734560 print_time=3928.697 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 77.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000016 bytes_write=5828 bytes_read=15068 bytes_retransmit=17 bytes_invalid=0 send_seq=315 receive_seq=315 retransmit_seq=3 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998307  orange_pi: temp=46.2 chamber_heater: target=0 temp=26.1 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.43 cputime=5.827 memavail=1734056 print_time=3928.697 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 78.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000016 bytes_write=5848 bytes_read=15254 bytes_retransmit=17 bytes_invalid=0 send_seq=317 receive_seq=317 retransmit_seq=3 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998308  orange_pi: temp=46.6 chamber_heater: target=0 temp=26.3 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.43 cputime=5.849 memavail=1733048 print_time=3928.697 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 79.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000016 bytes_write=5854 bytes_read=15420 bytes_retransmit=17 bytes_invalid=0 send_seq=318 receive_seq=318 retransmit_seq=3 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998307  orange_pi: temp=46.0 chamber_heater: target=0 temp=25.9 pwm=0.000 heater_bed: target=0 temp=24.3 pwm=0.000 sysload=1.43 cputime=5.869 memavail=1732544 print_time=3928.697 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 80.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000016 bytes_write=5860 bytes_read=15571 bytes_retransmit=17 bytes_invalid=0 send_seq=319 receive_seq=319 retransmit_seq=3 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998307  orange_pi: temp=46.2 chamber_heater: target=0 temp=26.2 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.39 cputime=5.890 memavail=1732320 print_time=3928.697 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 81.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000016 bytes_write=5866 bytes_read=15752 bytes_retransmit=17 bytes_invalid=0 send_seq=320 receive_seq=320 retransmit_seq=3 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998308  orange_pi: temp=46.3 chamber_heater: target=0 temp=26.7 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.39 cputime=5.912 memavail=1732584 print_time=3928.697 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 82.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000016 bytes_write=5872 bytes_read=15932 bytes_retransmit=17 bytes_invalid=0 send_seq=321 receive_seq=321 retransmit_seq=3 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998309  orange_pi: temp=46.5 chamber_heater: target=0 temp=26.2 pwm=0.000 heater_bed: target=0 temp=24.5 pwm=0.000 sysload=1.39 cputime=5.933 memavail=1732848 print_time=3928.697 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 83.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000016 bytes_write=5878 bytes_read=16083 bytes_retransmit=17 bytes_invalid=0 send_seq=322 receive_seq=322 retransmit_seq=3 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998308  orange_pi: temp=47.2 chamber_heater: target=0 temp=26.1 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.39 cputime=5.953 memavail=1732852 print_time=3928.697 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 84.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000016 bytes_write=5884 bytes_read=16264 bytes_retransmit=17 bytes_invalid=0 send_seq=323 receive_seq=323 retransmit_seq=3 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998307  orange_pi: temp=46.0 chamber_heater: target=0 temp=26.4 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.39 cputime=5.975 memavail=1732348 print_time=3928.697 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.4 pwm=0.000
Stats 85.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000016 bytes_write=5890 bytes_read=16430 bytes_retransmit=17 bytes_invalid=0 send_seq=324 receive_seq=324 retransmit_seq=3 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998308  orange_pi: temp=46.2 chamber_heater: target=0 temp=26.3 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.36 cputime=5.996 memavail=1731888 print_time=3928.697 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Stats 86.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000019 mcu_task_stddev=0.000016 bytes_write=5896 bytes_read=16581 bytes_retransmit=17 bytes_invalid=0 send_seq=325 receive_seq=325 retransmit_seq=3 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=71998308  orange_pi: temp=46.4 chamber_heater: target=0 temp=26.3 pwm=0.000 heater_bed: target=0 temp=24.4 pwm=0.000 sysload=1.36 cputime=6.017 memavail=1731888 print_time=3928.697 buffer_time=0.000 print_stall=0 extruder: target=0 temp=25.3 pwm=0.000
Running Command {update_git_script}...:
[1;93m●[0m Checking for installed dependencies /[K[1;92m●[0m Checking for installed dependencies [1;92mDone![0m


Klipper-Backup is up to date


From https://github.com/Ferz82/github-klipper-backup
 * branch            main       -> FETCH_HEAD

hint: You have divergent branches and need to specify how to reconcile them.
hint: You can do so by running one of the following commands sometime before
hint: your next pull:
hint: 
hint:   git config pull.rebase false  # merge (the default strategy)
hint:   git config pull.rebase true   # rebase
hint:   git config pull.ff only       # fast-forward only
hint: 
hint: You can replace "git config" with "git config --global" to set a default
hint: preference for all repositories. You can also pass --rebase, --no-rebase,
hint: or --ff-only on the command line to override the configured default per
hint: invocation.
fatal: Need to specify how to reconcile divergent branches.

Skipping symbolic link: printer_data/config/mainsail.cfg

On branch main
Your branch and 'origin/main' have diverged,
and have 6 and 2 different commits each, respectively.
  (use "git pull" to merge the remote branch into yours)

nothing to commit, working tree clean

To https://github.com/Ferz82/github-klipper-backup.git
 ! [rejected]        main -> main (non-fast-forward)

error: failed to push some refs to 'https://github.com/Ferz82/github-klipper-backup.git'

hint: Updates were rejected because the tip of your current branch is behind
hint: its remote counterpart. Integrate the remote changes (e.g.
hint: 'git pull ...') before pushing again.
hint: See the 'Note about fast-forwards' in 'git push --help' for details.

Command {update_git_script} finished

Running Command {update_git_script_message}...:
[1;93m●[0m Checking for installed dependencies /[K[1;92m●[0m Checking for installed dependencies [1;92mDone![0m


Klipper-Backup is up to date


From https://github.com/Ferz82/github-klipper-backup
 * branch            main       -> FETCH_HEAD

hint: You have divergent branches and need to specify how to reconcile them.
hint: You can do so by running one of the following commands sometime before
hint: your next pull:
hint: 
hint:   git config pull.rebase false  # merge (the default strategy)
hint:   git config pull.rebase true   # rebase
hint:   git config pull.ff only       # fast-forward only
hint: 
hint: You can replace "git config" with "git config --global" to set a default
hint: preference for all repositories. You can also pass --rebase, --no-rebase,
hint: or --ff-only on the command line to override the configured default per
hint: invocation.
fatal: Need to specify how to reconcile divergent branches.

Skipping symbolic link: printer_data/config/mainsail.cfg

On branch main
Your branch and 'origin/main' have diverged,
and have 6 and 2 different commits each, respectively.
  (use "git pull" to merge the remote branch into yours)

nothing to commit, working tree clean

To https://github.com/Ferz82/github-klipper-backup.git
 ! [rejected]        main -> main (non-fast-forward)

error: failed to push some refs to 'https://github.com/Ferz82/github-klipper-backup.git'

hint: Updates were rejected because the tip of your current branch is behind
hint: its remote counterpart. Integrate the remote changes (e.g.
hint: 'git pull ...') before pushing again.
hint: See the 'Note about fast-forwards' in 'git push --help' for details.

Command {update_git_script_message} finished

Unknown command:"BASH -"
Unknown command:"BASH $"
Unknown command:"./HOME/"
Running Command {update_git_script}...:
[1;93m●[0m Checking for installed dependencies /[K[1;92m●[0m Checking for installed dependencies [1;92mDone![0m


Klipper-Backup is up to date


From https://github.com/Ferz82/github-klipper-backup
 * branch            main       -> FETCH_HEAD

Already up to date.

skipping non-regular file "printer_data/comms/klippy.serial"
skipping non-regular file "printer_data/comms/klippy.sock"
skipping non-regular file "printer_data/comms/moonraker.sock"

skipping non-regular file "printer_data/config/mainsail.cfg"

skipping non-regular file "printer_data/logs/mainsail-access.log"
skipping non-regular file "printer_data/logs/mainsail-error.log"

[main bdfbceb] New backup from 25.12.2024 - 23:16:54
 12 files changed, 1946162 insertions(+)
 create mode 100644 printer_data/.moonraker.uuid
 create mode 100644 printer_data/database/moonraker-sql.db
 create mode 100644 "printer_data/gcodes/.thumbs/\320\232\321\203\320\261_0.2mm_PETG_Generic Klipper Printer_116d18h27m-32x32.png"
 create mode 100644 "printer_data/gcodes/.thumbs/\320\232\321\203\320\261_0.2mm_PETG_Generic Klipper Printer_116d18h27m-48x48.png"
 create mode 100644 "printer_data/gcodes/.thumbs/\320\232\321\203\320\261_0.2mm_PETG_Generic Klipper Printer_116d18h27m-900x600.png"
 create mode 100644 "printer_data/gcodes/\320\232\321\203\320\261_0.2mm_PETG_Generic Klipper Printer_116d18h27m.gcode"
 create mode 100644 printer_data/logs/klippy.log
 create mode 100644 printer_data/logs/moonraker.log
 create mode 100644 printer_data/misc/usb.ids
 create mode 100644 printer_data/moonraker.asvc
 create mode 100644 printer_data/systemd/klipper.env
 create mode 100644 printer_data/systemd/moonraker.env

remote: warning: See https://gh.io/lfs for more information.        
remote: warning: File printer_data/gcodes/Куб_0.2mm_PETG_Generic Klipper Printer_116d18h27m.gcode is 50.23 MB; this is larger than GitHub's recommended maximum file size of 50.00 MB        
remote: warning: GH001: Large files detected. You may want to try Git Large File Storage - https://git-lfs.github.com.        

remote: error: GH013: Repository rule violations found for refs/heads/main.        
remote: 
remote: - GITHUB PUSH PROTECTION        
remote:   —————————————————————————————————————————        
remote:     Resolve the following violations before pushing again        
remote: 
remote:     - Push cannot contain secrets        
remote: 
remote:             
remote:      (?) Learn how to resolve a blocked push        
remote:      https://docs.github.com/code-security/secret-scanning/working-with-secret-scanning-and-push-protection/working-with-push-protection-from-the-command-line#resolving-a-blocked-push        
remote:             
remote:      (?) This repository does not have Secret Scanning enabled, but is eligible. Enable Secret Scanning to view and manage detected secrets.        
remote:      Visit the repository settings page, https://github.com/Ferz82/github-klipper-backup/settings/security_analysis        
remote:             
remote:             
remote:       —— GitHub Personal Access Token ——————————————————————        
remote:        locations:        
remote:          - commit: bdfbceb184d762843c2dba72d162a6f93cfb2800        
remote:            path: printer_data/logs/klippy.log:24134        
remote:             
remote:        (?) To push, remove secret from commit(s) or follow this URL to allow the secret.        
remote:        https://github.com/Ferz82/github-klipper-backup/security/secret-scanning/unblock-secret/2qiugHefVopTvqZl9aHe8ohwyta        
remote:             
remote: 
remote: 

To https://github.com/Ferz82/github-klipper-backup.git
 ! [remote rejected] main -> main (push declined due to repository rule violations)

error: failed to push some refs to 'https://github.com/Ferz82/github-klipper-backup.git'

Command {update_git_script} finished

Running Command {update_git_script}...:
[1;93m●[0m Checking for installed dependencies /[K[1;92m●[0m Checking for installed dependencies [1;92mDone![0m


Klipper-Backup is up to date


From https://github.com/Ferz82/github-klipper-backup
 * branch            main       -> FETCH_HEAD

Already up to date.

Skipping symbolic link: printer_data/comms/klippy.serial

skipping non-regular file "printer_data/comms/klippy.sock"

skipping non-regular file "printer_data/comms/moonraker.sock"

Skipping symbolic link: printer_data/config/mainsail.cfg

